
\newcommand{\devicewidth}{1.5in}
\newcommand{\boxwidth}{3.0in}
\newcommand{\incgraphics}[1]{
\parbox[c]{\devicewidth}{
\vspace{0.01in}
\includegraphics[width=\devicewidth]{#1}
\vspace{0.01in}
}
}

\section{Visualizing FDS Devices Using Smokeview Objects}

Smokeview generates visual representations of FDS devices using instructions found in a data file named {\ct objects.svo}.  This file is located in the Smokeview installation directory.  The instructions in this file correspond to OpenGL library calls, the same type of calls Smokeview uses to visualize FDS cases.  This section gives an overview of Smokeview objects detailing what objects are available and how to customize their appearance. Further technical details may be found in the Smokeview User's Guide~\cite{Smokeview_Users_Guide}.

Smokeview objects may be static or dynamic.  A static object is defined entirely in terms of data and instructions found in the {\ct objects.svo}\ file.  Its appearance remains the same regardless of how an FDS input file is set up.  A dynamic object is also defined using instructions found in {\ct objects.svo}, but in addition uses data specified on the {\ct PROP}  line in the FDS input file and/or data contained in a particle file.  As a result, the appearance of dynamic objects depends on the particular FDS case that is run.


\subsection{Static Smokeview Objects}
\label{info:SMOKEVIEW_ID}

Smokeview objects consist of one or more frames or views.  Smokeview then displays FDS devices in a normal/inactive
state or in an active state.  A sprinkler, for example, is drawn differently depending on whether it has activated
or not.  When FDS determines that a device has activated it places a message in the {\ct .smv} file indicating the
object number, the activation time and the state (0 for inactive or 1 for active).  Smokeview then draws the corresponding
frame.  Tables~\ref{tab:devices_static} and \ref{tab:devices_mstatic} give a list of various static objects.  Each entry shows
an image of the object in its normal or inactive state and in its active state if it has one.

The {\ct SMOKEVIEW\_ID} keyword found on the {\ct PROP} line is used to associate an FDS device with a Smokeview object.
The following FDS input file lines were used to display the Smokeview object named {\tt target}\

\begin{lstlisting}
&PROP ID='target' SMOKEVIEW_ID='target' /
&DEVC XYZ=0.5,0.8,0.6, QUANTITY='TEMPERATURE' PROP_ID='target' /
\end{lstlisting}

To display a different object, substitute a {\tt SMOKEVIEW\_ID}\ entry found in Table~\ref{tab:devices_static} for {\tt target}.

\newpage

\begin{longtable}[t!]{|l|c|}
\caption{Single frame static objects}
\label{tab:devices_static}
\\ \hline
{\ct SMOKEVIEW\_ID} & Image  \\ \hline \hline
\endfirsthead
\caption{Single frame static objects (continued)} \\ \hline
{\ct SMOKEVIEW\_ID} & Image  \\ \hline \hline
\endhead

{\ct sensor} & \incgraphics{SCRIPT_FIGURES/sensor} \\ \hline
{\ct target} & \incgraphics{SCRIPT_FIGURES/target} \\ \hline

\end{longtable}

\begin{longtable}[ht]{|l|c|c|}
\caption{Dual frame static objects}
\label{tab:devices_mstatic}
\\ \hline
\multirow{2}{*}{{\ct SMOKEVIEW\_ID}} &\multicolumn{2}{|c|}{Image}\\ \cline{2-3}
& inactive & active  \\ \hline \hline
\endfirsthead
\caption{Dual frame static objects (continued)}
\\ \hline
\multirow{2}{*}{{\ct SMOKEVIEW\_ID}} &\multicolumn{2}{|c|}{Image}\\ \cline{2-3}
& inactive & active  \\ \hline \hline
\endhead

{\ct heat\_detector}      & \incgraphics{SCRIPT_FIGURES/heat_detector_0}     & \incgraphics{SCRIPT_FIGURES/heat_detector_1} \\ \hline
{\ct nozzle}              & \incgraphics{SCRIPT_FIGURES/nozzle_0}            & \incgraphics{SCRIPT_FIGURES/nozzle_1} \\ \hline
{\ct smoke\_detector}     & \incgraphics{SCRIPT_FIGURES/smoke_detector_0}    & \incgraphics{SCRIPT_FIGURES/smoke_detector_1} \\ \hline
{\ct sprinkler\_upright}  & \incgraphics{SCRIPT_FIGURES/sprinkler_upright_0} & \incgraphics{SCRIPT_FIGURES/sprinkler_upright_1} \\ \hline
{\ct sprinkler\_pendent}  & \incgraphics{SCRIPT_FIGURES/sprinkler_pendent_0} & \incgraphics{SCRIPT_FIGURES/sprinkler_pendent_1} \\ \hline

\end{longtable}


\subsection{Dynamic Smokeview Objects}
\label{info:SMOKEVIEW_PARAMETERS}

The appearance of Smokeview objects may be modified using data specified with the {\ct SMOKEVIEW\_PARAMETERS} keyword on the {\ct \&PROP} namelist statement. For example, the input lines
\begin{lstlisting}
&PROP ID='ballprops' SMOKEVIEW_PARAMETERS(1:6)='R=255','G=0','B=0','DX=0.5','DY=.25','DZ=.1', SMOKEVIEW_ID='ball' /
&DEVC XYZ=0.5,0.8,1.5, QUANTITY='TEMPERATURE', PROP_ID='ballprops' /
\end{lstlisting}
create an FDS device drawn as an elongated ball (ellipsoid) colored red with dimensions $0.5\times 0.25\times 0.1$. Parameters specified with {\ct SMOKEVIEW\_PARAMETERS} are enclosed within single quotes.  These parameters are of the form {\ct 'keyword=value'} where possible keywords are found in the {\ct objects.svo} file.

The {\ct tsphere} object uses a texture map or image to alter its appearance. The texture map is specified using {\ct SMOKEVIEW\_PARAMETERS} keyword by placing the characters {\ct t\%} before the texture file name ({\em e.g.}\ {\ct t\%texturefile.jpg}). Table~\ref{tab:devices_dynamic} gives a list of dynamic objects and the keyword/parameter pairs used to specify them. Each entry shows an image of the object and the parameters used to customize their appearance.

\begin{longtable}[ht]{|l|l|c|}
\caption{Dynamic Smokeview objects}
\label{tab:devices_dynamic}
\\ \hline
{\ct SMOKEVIEW\_ID}  & {\ct SMOKEVIEW\_PARAMETERS} & Image  \\ \hline \hline
\endfirsthead
\caption{Dynamic Smokeview objects (continued)}
\\ \hline
{\ct SMOKEVIEW\_ID}  & {\ct SMOKEVIEW\_PARAMETERS} & Image  \\ \hline \hline
\endhead

{\ct ball} &
\parbox[c]{\boxwidth}{
\hspace{1in} \\
{\ct SMOKEVIEW\_PARAMETERS(1:6)=}\\
{\ct 'R=128','G=192','B=255',}\\
{\ct 'DX=0.5','DY=.75','DZ=1.0'}\\  \\
{\ct R, G, B} - color components (0 to 255) \\
{\ct DX, DY, DZ} - amount ball is stretched along x, y, z axis (m) \\
\hspace{1in} } &
\incgraphics{SCRIPT_FIGURES/ball} \\ \hline

{\ct cone} &
\parbox[c]{\boxwidth}{
\hspace{1in} \\
{\ct SMOKEVIEW\_PARAMETERS(1:5)=}\\
{\ct 'R=128','G=255','B=192',}\\
{\ct 'D=0.4','H=0.6'}\\ \\
{\ct R, G, B} - color components (0 to 255) \\
{\ct D, H} - diameter and height (m) \\
\hspace{1in}
} &
\incgraphics{SCRIPT_FIGURES/cone} \\ \hline

{\ct fan} &
\parbox[c]{\boxwidth}{
\hspace{1in} \\
{\ct SMOKEVIEW\_PARAMETERS(1:11)=}\\
{\ct 'HUB\_R=0','HUB\_G=0','HUB\_B=0',}\\
{\ct 'HUB\_D=0.1','HUB\_L=0.12',}\\
{\ct 'BLADE\_R=128','BLADE\_G=64',}\\
{\ct 'BLADE\_B=32','BLADE\_ANGLE=60.0',}\\
{\ct 'BLADE\_D=0.5','BLADE\_H=0.09'}\\  \\
{\ct HUB\_R, HUB\_G, HUB\_B} - color components of fan hub (0 to 255) \\
{\ct HUB\_D, HUB\_L} - diameter and length of fan hub (m) \\
{\ct BLADE\_R, BLADE\_G, BLADE\_B} - color components of fan blades (0 to 255) \\
{\ct BLADE\_ANGLE, BLADE\_D, BLADE\_H} - angle, diameter and height of a fan blade \\
\hspace{1in}
} &
\incgraphics{SCRIPT_FIGURES/fan} \\ \hline

{\ct tsphere} &
\parbox[c]{\boxwidth}{
\hspace{1in} \\
    {\ct SMOKEVIEW\_PARAMETERS(1:9)=}\\
    {\ct 'R=255','G=255','B=255',}\\
    {\ct 'AX0=0.0','ELEV0=90.0',}\\
    {\ct 'ROT0=0.0','ROTATION\_RATE=10.0',}\\
    {\ct 'D=1.0',}\\
    {\ct 'tfile="t\%sphere\_cover\_04.png"'}\\ \\
{\ct R, G, B} - color components (0 to 255) \\
{\ct AX0, ELEV0, ROT0} - initial azimuth, elevation and rotation angle (deg) \\
{\ct ROTATION\_RATE} - rotation rate about z axis (deg/s) \\
{\ct D} - diameter (m) \\
{\ct tfile} - name of texture map file \\
\hspace{1in}
} &
\incgraphics{SCRIPT_FIGURES/tsphere} \\ \hline

{\ct vent} &
\parbox[c]{\boxwidth}{
\hspace{1in} \\
{\ct SMOKEVIEW\_PARAMETERS(1:6)=}\\
{\ct 'R=192','G=192','B=128',}\\
{\ct 'W=0.5','H=1.0', 'ROT=90.0'}\\ \\
{\ct R, G, B} - color components (0 to 255) \\
{\ct W, H} - width and height (m) \\
{\ct ROT} - rotation angle (deg) \\
\hspace{1in}
} &
\parbox[c]{\devicewidth}{
\vspace{0.01in}
\includegraphics[width=\devicewidth]{SCRIPT_FIGURES/vent1}
inactive vent\\
\vspace{0.01in}
\includegraphics[width=\devicewidth]{SCRIPT_FIGURES/vent2}
active vent\\
\vspace{0.01in}
}
\\ \hline
\end{longtable}


\subsection{Objects that Represent Lagrangian Particles}
\label{info:SMOKEVIEW_PART}

Particle file data may also be used to alter the color and/or shape of Smokeview objects. Object color may be altered by selecting entries appearing in Smokeview's {\tt Show/Hide>particles/Color With}\ menu. ( if {\ct R}, {\ct G}, {\ct B} parameters appear in the definition of the object being drawn such as those listed in Tables~\ref{tab:devices_dynamic} and \ref{tab:devices_dynamic2}  ).  Object shape may also be altered if shortened forms of particle quantity names such as {\ct U-VEL}, {\ct V-VEL}, and {\ct W-VEL} appear in the object definition. Examples of such objects are listed in Table \ref{tab:devices_dynamic2}.  In particular, {\ct velegg}\ object is altered by stretching it according to the U, V and W velocity components found in the particle file.  The following {\tt \&PROP and \&PART} lines give an example of how particle file data may be drawn using objects

\begin{lstlisting}
&PROP ID='lava_props'   SMOKEVIEW_PARAMETERS(1:5)='D=0.2','L=0.3','VELMAX=4.5','W=.1','H=.1' SMOKEVIEW_ID(1:4)='sphere','veltube','velegg','face_eye' /
&PART ID='lava',MASSLESS=.TRUE.,
   QUANTITIES(1:4)='U-VELOCITY','V-VELOCITY','W-VELOCITY','PARTICLE TEMPERATURE'
   SAMPLING_FACTOR=10 PROP_ID='lava_props' /
\end{lstlisting}

The particle file may be drawn using the sphere, veltube, velegg or face\_eye Smokeview objects.  These objects may be stretched using {\tt U-VELOCITY}, {\ct V-VELOCITY}\ and {\tt W-VELOCITY}\ data.

\begin{longtable}[ht]{|l|l|c|}
\caption{Dynamic Smokeview objects for Lagrangian particles}
\label{tab:devices_dynamic2}
\\ \hline
{\ct SMOKEVIEW\_ID}  & {\ct SMOKEVIEW\_PARAMETERS} & Image  \\ \hline \hline
\endfirsthead
\caption{Dynamic Smokeview objects for Lagrangian particles (continued)}
\\ \hline
{\ct SMOKEVIEW\_ID}  & {\ct SMOKEVIEW\_PARAMETERS} & Image  \\ \hline \hline
\endhead

{\ct box} &
\parbox[c]{\boxwidth}{
\hspace{1in} \\
{\ct SMOKEVIEW\_PARAMETERS(1:6)=}\\
{\ct 'R=192','G=255','B=128',}\\
{\ct 'DX=0.25','DY=.5','DZ=0.125'}\\  \\
{\ct R, G, B} - color components (0 to 255) \\
{\ct DX, DY, DZ} - amount box is stretched along axes \\
\hspace{1in}
} &
\incgraphics{SCRIPT_FIGURES/box} \\ \hline

{\ct tube} &
\parbox[c]{\boxwidth}{
\hspace{1in} \\
{\ct SMOKEVIEW\_PARAMETERS(1:6)=}\\
{\ct 'R=255','G=0','B=0',}\\
{\ct 'D=0.2','L=0.6','RANDXY=1'}\\ \\
{\ct R, G, B} - color components (0 to 255) \\
{\ct D, L} - diameter and length (m) \\
{\ct RANDXY} - randomly orient in x-y plane \\
{\ct RANDXZ} - randomly orient in x-z plane \\
{\ct RANDYZ} - randomly orient in y-z plane \\
{\ct RANDXYZ} - random orientation \\
{\ct DIRX, DIRY, DIRZ} - orient along axis \\
\hspace{1in}
} &
\incgraphics{SCRIPT_FIGURES/tube} \\ \hline

{\ct velegg} &
\parbox[c]{\boxwidth}{
\hspace{1in} \\
{\ct SMOKEVIEW\_PARAMETERS(1:9)=} \\
{\ct 'R=192', 'G=64', 'B=32'} \\
{\ct 'U-VEL=1.', 'V-VEL=1.', 'W-VEL=1.'}  \\
{\ct 'VELMIN=0.01', 'VELMAX=0.2', 'D=1.0'} \\  \\
{\ct R, G, B} - color components (0 to 255) \\
{\ct U-VEL, V-VEL, W-VEL} - velocity components (m/s) \\
{\ct VELMIN, VELMAX} - minimum and maximum velocity\\
{\ct D} - diameter of egg at maximum velocity (m) \\
\hspace{1in}
} &
\incgraphics{SCRIPT_FIGURES/velegg} \\ \hline

{\ct veltube} &
\parbox[c]{\boxwidth}{
\hspace{1in} \\
{\ct SMOKEVIEW\_PARAMETERS(1:9)=}\\
{\ct 'R=0', 'G=0',  'B=0'} \\
{\ct 'U-VEL=1.', 'V-VEL=1.', 'W-VEL=1.' }  \\
{\ct 'VELMIN=0.01', 'VELMAX=0.2', 'D=0.1'} \\  \\
{\ct R, G, B} - color components (0 to 255) \\
{\ct U-VEL, V-VEL, W-VEL} - velocity components (m/s) \\
{\ct VELMIN, VELMAX} - minimum and maximum velocity \\
{\ct D} - diameter of tube at {\ct VELMAX} (m) \\
\hspace{1in}
} &
\incgraphics{SCRIPT_FIGURES/veltube} \\ \hline
\end{longtable}
