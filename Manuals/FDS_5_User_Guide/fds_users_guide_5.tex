\documentclass[11pt]{book}
\usepackage{times,mathptmx}
\usepackage[pdftex]{graphicx}
\usepackage[pdftex,
        colorlinks=true,
        urlcolor=linkblue,     % \href{...}{...} external (URL)
        citecolor=linkred,     % citation number colors
        linkcolor=linknavy,    % \ref{...} and \pageref{...}
        pdftitle={Fire Dynamics Simulator (Version 5) User's Guide},
        pdfauthor={Kevin McGrattan, Bryan Klein, Simo Hostikka, Jason Floyd},
        pdfsubject={User Guide},
        pdfkeywords={FDS, Fire Model, NIST, BFRL},
        pdfproducer={pdflatex},
        pagebackref,
        pdfpagemode=UseNone,
        bookmarksopen=true,
        plainpages=false]{hyperref}
\usepackage{color}
\definecolor{linknavy}{rgb}{0,0,0.50196}
\definecolor{linkred}{rgb}{1,0,0}
\definecolor{linkblue}{rgb}{0,0,1}
\usepackage{caption}
\usepackage{rotating}
\usepackage{epsfig,psfrag}
%\usepackage{wrapfig}
%\usepackage{picins}
\usepackage{geometry}
\usepackage{tabularx}
\usepackage{longtable}
\usepackage{lscape}
\usepackage{amssymb}
\usepackage{makeidx} % Create index at end of document
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography and index in the ToC
\usepackage{float}
\usepackage{lastpage} % Automatic last page number reference.
\usepackage[T1]{fontenc}
\usepackage{upquote}

\newcommand{\ct}{\tt\small}
%\newfont{\ct}{cmtt10 at 9pt}


% The Following commented code makes the ``Draft'' watermark on each page.
%\usepackage{eso-pic}
%\usepackage{type1cm}
%\makeatletter
%   \AddToShipoutPicture{
%     \setlength{\@tempdimb}{.5\paperwidth}
%     \setlength{\@tempdimc}{.5\paperheight}
%     \setlength{\unitlength}{1pt}
%     \put(\strip@pt\@tempdimb,\strip@pt\@tempdimc){
%     \makebox(0,0){\rotatebox{45}{\textcolor[gray]{0.75}{\fontsize{8cm}\selectfont{RC6}}}}}
% }
%\makeatother

\setlength{\textwidth}{6.5in}
\setlength{\textheight}{9.0in}
\setlength{\topmargin}{0.in}
\setlength{\headheight}{0.in}
\setlength{\headsep}{0.in}
\setlength{\parindent}{0.25in}
\setlength{\oddsidemargin}{0.0in}
\setlength{\evensidemargin}{0.0in}



\newcommand{\dod}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\DoD}[2]{\frac{D #1}{D #2}}
\newcommand{\dsods}[2]{\frac{\partial^2 #1}{\partial #2^2}}
\newcommand{\dx}{\delta x}
\newcommand{\dy}{\delta y}
\newcommand{\dz}{\delta z}
\newcommand{\x}{x}
\newcommand{\y}{y}
\newcommand{\z}{z}
\newcommand{\dt}{\delta t}
\newcommand{\dn}{\delta n}
\newcommand{\hu}{u}
\newcommand{\hv}{v}
\newcommand{\hw}{w}
\newcommand{\bo}{{\bf \omega}}
\newcommand{\bsig}{\mbox{\boldmath $\sigma$}}
\newcommand{\btau}{{\bf \tau}}
\newcommand{\sumym}{\sum (Y_i/M_i)}
\newcommand{\oW}{\overline{W}}
\newcommand{\om}{\omega}
\newcommand{\omx}{\omega_x}
\newcommand{\omy}{\omega_y}
\newcommand{\omz}{\omega_z}
\newcommand{\bF}{{\bf F}}
\newcommand{\bof}{{\bf f}}
\newcommand{\dS}{{d\bf S}}
\newcommand{\dA}{{dA}}
\newcommand{\bq}{{\bf q}}
\newcommand{\br}{{\bf r}}
\newcommand{\bu}{{\bf u}}
\newcommand{\bx}{{\bf x}}
\newcommand{\bk}{{\bf k}}
\newcommand{\bv}{{\bf v}}
\newcommand{\bg}{{\bf g}}
\newcommand{\bn}{{\bf n}}
\newcommand{\bS}{{\bf S}}
\newcommand{\bs}{{\bf s}}
\newcommand{\bI}{{\bf I}}
\newcommand{\hp}{{\cal H}}
\newcommand{\trho}{\tilde{\rho}}
\newcommand{\tp}{\tilde{p}}
\newcommand{\bp}{\overline{p}}
\newcommand{\dQ}{\dot{Q}}
\newcommand{\dq}{\dot{q}}
\newcommand{\dm}{\dot{m}}
\newcommand{\dW}{\dot{W}}
\newcommand{\ha}{\frac{1}{2}}
\newcommand{\ft}{\frac{4}{3}}
\newcommand{\ot}{\frac{1}{3}}
\newcommand{\of}{\frac{1}{4}}
\newcommand{\twth}{\frac{2}{3}}
\newcommand{\R}{{\cal R}}
\newcommand{\be}{\begin{equation}}
\newcommand{\ee}{\end{equation}}
\newcommand{\RE}{\hbox{Re}}
\newcommand{\LE}{\hbox{Le}}
\newcommand{\PR}{\hbox{Pr}}
\newcommand{\PE}{\hbox{Pe}}
\newcommand{\NU}{\hbox{Nu}}
\newcommand{\SC}{\hbox{Sc}}
\newcommand{\WE}{\hbox{We}}

\newcommand{\figheight}{1.5in}
\newcommand{\figwidth}{3.333333in}
\newcommand{\figwidthb}{2.0in}
\newcommand{\Ra}{$\Rightarrow$}
\newcommand{\parma}{.75}
\newcommand{\parmb}{.5}
\newcommand{\parmc}{0.25}
%\newcommand{\bold}[1]{{\bf #1}}
\newcommand{\etc}{{\em etc}}
\newcommand{\ie}{{\em i.e.}}
\newcommand{\eg}{{\em e.g.}}
\newcommand{\via}{{\em via\ }}
\newcommand{\loadmenu}{\fbox{\ct Load/Unload}}
\newcommand{\blist}{
\begin{list}
{}{
\setlength{\leftmargin}{\parma in}
\setlength{\labelwidth}{\parmb in}
\setlength{\labelsep}{\parmc in}
\setlength{\listparindent}{0.3in}
\setlength{\topsep}{.3in}
\setlength{\parsep}{.0in}
}}
\newcommand{\elist}{\end{list}}
\newcommand{\hitem}[1]{\item[{\bf #1} \hfill]}

\definecolor{AQUAMARINE}{rgb}{0.49804,1.00000,0.83137}
\definecolor{ANTIQUE WHITE}{rgb}{0.98039,0.92157,0.84314}
\definecolor{BEIGE}{rgb}{0.96078,0.96078,0.86275}
\definecolor{BLACK}{rgb}{0.00000,0.00000,0.00000}
\definecolor{BLUE}{rgb}{0.00000,0.00000,1.00000}
\definecolor{BLUE VIOLET}{rgb}{0.54118,0.16863,0.88627}
\definecolor{BRICK}{rgb}{0.61176,0.40000,0.12157}
\definecolor{BROWN}{rgb}{0.64706,0.16471,0.16471}
\definecolor{BURNT SIENNA}{rgb}{0.54118,0.21176,0.05882}
\definecolor{BURNT UMBER}{rgb}{0.54118,0.20000,0.14118}
\definecolor{CADET BLUE}{rgb}{0.37255,0.61961,0.62745}
\definecolor{CHOCOLATE}{rgb}{0.82353,0.41176,0.11765}
\definecolor{COBALT}{rgb}{0.23922,0.34902,0.67059}
\definecolor{CORAL}{rgb}{1.00000,0.49804,0.31373}
\definecolor{CYAN}{rgb}{0.00000,1.00000,1.00000}
\definecolor{DIMGRAY }{rgb}{0.41176,0.41176,0.41176}
\definecolor{EMERALD GREEN}{rgb}{0.00000,0.78824,0.34118}
\definecolor{FIREBRICK}{rgb}{0.69804,0.13333,0.13333}
\definecolor{FLESH}{rgb}{1.00000,0.49020,0.25098}
\definecolor{FOREST GREEN}{rgb}{0.13333,0.54510,0.13333}
\definecolor{GOLD }{rgb}{1.00000,0.84314,0.00000}
\definecolor{GOLDENROD}{rgb}{0.85490,0.64706,0.12549}
\definecolor{GRAY}{rgb}{0.50196,0.50196,0.50196}
\definecolor{GREEN}{rgb}{0.00000,1.00000,0.00000}
\definecolor{GREEN YELLOW}{rgb}{0.67843,1.00000,0.18431}
\definecolor{HONEYDEW}{rgb}{0.94118,1.00000,0.94118}
\definecolor{HOT PINK}{rgb}{1.00000,0.41176,0.70588}
\definecolor{INDIAN RED}{rgb}{0.80392,0.36078,0.36078}
\definecolor{INDIGO}{rgb}{0.29412,0.00000,0.50980}
\definecolor{IVORY}{rgb}{1.00000,1.00000,0.94118}
\definecolor{IVORY BLACK}{rgb}{0.16078,0.14118,0.12941}
\definecolor{KELLY GREEN}{rgb}{0.00000,0.50196,0.00000}
\definecolor{KHAKI}{rgb}{0.94118,0.90196,0.54902}
\definecolor{LAVENDER}{rgb}{0.90196,0.90196,0.98039}
\definecolor{LIME GREEN}{rgb}{0.19608,0.80392,0.19608}
\definecolor{MAGENTA}{rgb}{1.00000,0.00000,1.00000}
\definecolor{MAROON}{rgb}{0.50196,0.00000,0.00000}
\definecolor{MELON}{rgb}{0.89020,0.65882,0.41176}
\definecolor{MIDNIGHT BLUE}{rgb}{0.09804,0.09804,0.43922}
\definecolor{MINT}{rgb}{0.74118,0.98824,0.78824}
\definecolor{NAVY}{rgb}{0.00000,0.00000,0.50196}
\definecolor{OLIVE}{rgb}{0.50196,0.50196,0.00000}
\definecolor{OLIVE DRAB}{rgb}{0.41961,0.55686,0.13725}
\definecolor{ORANGE}{rgb}{1.00000,0.50196,0.00000}
\definecolor{ORANGE RED}{rgb}{1.00000,0.27059,0.00000}
\definecolor{ORCHID}{rgb}{0.85490,0.43922,0.83922}
\definecolor{PINK}{rgb}{1.00000,0.75294,0.79608}
\definecolor{POWDER BLUE}{rgb}{0.69020,0.87843,0.90196}
\definecolor{PURPLE}{rgb}{0.50196,0.00000,0.50196}
\definecolor{RASPBERRY}{rgb}{0.52941,0.14902,0.34118}
\definecolor{RED}{rgb}{1.00000,0.00000,0.00000}
\definecolor{ROYAL BLUE}{rgb}{0.25490,0.41176,0.88235}
\definecolor{SALMON}{rgb}{0.98039,0.50196,0.44706}
\definecolor{SANDY BROWN}{rgb}{0.95686,0.64314,0.37647}
\definecolor{SEA GREEN}{rgb}{0.32941,1.00000,0.62353}
\definecolor{SEPIA}{rgb}{0.36863,0.14902,0.07059}
\definecolor{SIENNA}{rgb}{0.62745,0.32157,0.17647}
\definecolor{SILVER}{rgb}{0.75294,0.75294,0.75294}
\definecolor{SKY BLUE}{rgb}{0.52941,0.80784,0.92157}
\definecolor{SLATEBLUE}{rgb}{0.41569,0.35294,0.80392}
\definecolor{SLATE GRAY}{rgb}{0.43922,0.50196,0.56471}
\definecolor{SPRING GREEN}{rgb}{0.00000,1.00000,0.49804}
\definecolor{STEEL BLUE}{rgb}{0.27451,0.50980,0.70588}
\definecolor{TAN}{rgb}{0.82353,0.70588,0.54902}
\definecolor{TEAL}{rgb}{0.00000,0.50196,0.50196}
\definecolor{THISTLE}{rgb}{0.84706,0.74902,0.84706}
\definecolor{TOMATO }{rgb}{1.00000,0.38824,0.27843}
\definecolor{TURQUOISE}{rgb}{0.25098,0.87843,0.81569}
\definecolor{VIOLET}{rgb}{0.93333,0.50980,0.93333}
\definecolor{VIOLET RED}{rgb}{0.81569,0.12549,0.56471}
\definecolor{WHITE}{rgb}{1.00000,1.00000,1.00000}
\definecolor{YELLOW}{rgb}{1.00000,1.00000,0.00000}

\floatstyle{boxed}
\newfloat{notebox}{H}{lon}
\newfloat{warning}{H}{low}

\makeindex

\begin{document}
\bibliographystyle{unsrt}

\setlength{\leftmargini}{\parindent} % Controls the indenting of the "bullets" in a list

\pagestyle{empty}
\pagenumbering{alph}

\begin{minipage}[t][9in][s]{6.25in}

\huge
\flushright{NIST Special Publication 1019-5}

\vspace{1in}

\Huge \flushright{Fire Dynamics Simulator (Version 5) \\ User's Guide }

\vspace{.5in}

\normalsize

\large
\flushright{
Kevin McGrattan \\
Bryan Klein \\
Simo Hostikka \\
Jason Floyd \\
 }

 \vspace{0.5in}

\flushright{In cooperation with: \\
VTT Technical Research Centre of Finland  }

\vfill

\flushright{\includegraphics[width=2.5in]{figures/nistident_flright_300ppi}}


\end{minipage}

\newpage
\hspace{5in}
\newpage

\begin{minipage}[t][9in][s]{6.25in}

\huge
\flushright{NIST Special Publication 1019-5}

\vspace{.75in}

\Huge
\flushright{Fire Dynamics Simulator (Version 5) \\ User's Guide}

\vspace{.25in}

\normalsize
\flushright{
Kevin McGrattan \\
Bryan Klein \\
{\em NIST Building and Fire Research Laboratory} \\
{\em Gaithersburg, Maryland, USA}  \\
\hspace{1in} \\
Simo Hostikka \\
{\em VTT Technical Research Centre of Finland} \\
{\em Espoo, Finland} \\
\hspace{1in} \\
Jason Floyd \\
{\em Hughes Associates, Inc.} \\
{\em Baltimore, Maryland, USA}}

\vspace{.25in}

\flushright{\today \\
$SVN Repository$~$Revision$}

\vfill

\flushright{\includegraphics[width=1in]{FIGURES/doc} }

\small
\flushright{U.S. Department of Commerce \\
{\em Carlos M. Gutierrez, Secretary} \\
\hspace{1in} \\
National Institute of Standards and Technology \\
{\em William A. Jeffrey, Director} }


\end{minipage}

\newpage

\begin{minipage}[t][9in][s]{6.25in}

\flushright{Certain commercial entities, equipment, or materials may be identified in this \\
document in order to describe an experimental procedure or concept adequately. Such \\
identification is not intended to imply recommendation or endorsement by the \\
National Institute of Standards and Technology, nor is it intended to imply that the \\
entities, materials, or equipment are necessarily the best available for the purpose.
}

\vspace{3in}

\large
\flushright{\bf National Institute of Standards and Technology Special Publication 1019-5 \\
Natl.~Inst.~Stand.~Technol.~Spec.~Publ.~1019-5, \pageref{LastPage} pages (September 2007) \\
CODEN: NSPUE2 }

\vfill

\flushright{U.S. GOVERNMENT PRINTING OFFICE \\
WASHINGTON: 2004 \\
\rule{3.5in}{0.01in} \\
For sale by the Superintendent of Documents, U.S. Government Printing Office \\
Internet: bookstore.gpo.gov -- Phone: (202) 512-1800 -- Fax: (202) 512-2250 \\
Mail: Stop SSOP, Washington, DC 20402-0001 }
\end{minipage}

\clearpage

\frontmatter

\pagestyle{plain}
\pagenumbering{roman}


\chapter{Preface}

This guide describes how to use the Fire Dynamics Simulator (FDS), Version 5.
It does not provide the background theory. A companion document, called the FDS
Technical Reference Guide~\cite{FDS_Tech_Guide_5}, contains details about the governing
equations and numerical methods.
The FDS User's Guide contains limited information on how to operate Smokeview, the companion
visualization program for FDS. Its full capability is described in the ``User's Guide for
Smokeview Version~5''~\cite{Smokeview_Users_Guide_5}.


\chapter{Disclaimer}

The US Department of Commerce makes no warranty, expressed or implied, to
users of the Fire Dynamics Simulator (FDS), and accepts no responsibility for its
use. Users of FDS assume sole responsibility under Federal law for
determining the appropriateness of its use in any particular application;
for any conclusions drawn from the results of its use; and for any actions
taken or not taken as a result of analyses performed using these tools.

Users are warned that FDS is intended for use only by those competent in
the fields of fluid dynamics, thermodynamics, combustion, and heat transfer,
and is intended only to supplement the
informed judgment of the qualified user. The software package is a
computer model that may or may not have predictive capability when applied
to a specific set of factual circumstances. Lack of accurate predictions by
the model could lead to erroneous conclusions with regard to fire safety.
All results should be evaluated by an informed user.

Throughout this document, the mention of computer hardware or
commercial software does not constitute endorsement by NIST, nor does
it indicate that the products are necessarily those best suited for the
intended purpose.


\chapter{About the Authors}

\begin{description}
\item[Kevin McGrattan] is a mathematician in the Building and Fire
Research Laboratory of NIST. He received a bachelors of science degree
from the School of Engineering and Applied Science of Columbia
University in 1987 and a doctorate at the Courant Institute of New
York University in 1991. He joined the NIST staff in 1992 and has
since worked on the development of fire models, most notably the Fire
Dynamics Simulator.
\item[Simo Hostikka] is a Senior Research Scientist at VTT Technical
Research Centre of Finland.  He is the principal developer of the
radiation and solid phase sub-models within FDS.
\item[Jason Floyd] is a Senior Engineer at Hughes Associates, Inc., in
Baltimore, Maryland. He received a bachelors of science degree and a
doctorate from the Nuclear Engineering Program of the University of
Maryland. After graduating, he won a National Research Council
Post-Doctoral Fellowship at the Building and Fire Research Laboratory
of NIST, where he developed the combustion algorithm within FDS. He is
currently funded by NIST under grant 60NANB5D1205 from the Fire
Research Grants Program (15 USC 278f).  He is the principal developer
of the multi-parameter mixture fraction combustion model and control
logic within FDS.
\item[Bryan Klein] is an Information Technology Specialist in the
Building and Fire Research Laboratory of NIST.  Before coming to NIST,
Bryan worked for five years with Western Fire Center, Inc., performing a
wide range of activities including fire modeling, data acquisition programming,
and quantitative fire measurements. His current focus is on FDS development and
user support, along with experimental model validation work.
\end{description}



\chapter{Acknowledgments}

The Fire Dynamics Simulator, in various forms, has been under development for almost 25 years. However,
the publicly released software has only existed since 2000. Since its first release, continued improvements
have been made to the software based largely on feedback from its users.
Included here are some who made important contributions.

At NIST, thanks to Dan Madrzykowski, Doug Walton, Bob Vettori, Dave Stroup, Steve Kerber and Nelson Bryner,
who have used FDS and Smokeview as part of several investigations of fire fighter line of duty deaths.
As part of these studies, they have provided valuable information on the model's usability and accuracy
when compared to large scale measurements made during fire reconstructions.

The US Nuclear Regulatory Commission has provided financial support for the maintenance and development of FDS,
along with valuable insights into how fire models are used as part of probabilistic risk assessments of nuclear
facilities. Special thanks to Mark Salley and Jason Dreisbach of NRC, and Francisco Joglar of SAIC.

The Society of Fire Protection Engineers (SFPE) sponsors a training course on the use of FDS and Smokeview.
Chris Wood of ArupFire, Dave Sheppard of the US Bureau of Alcohol, Tobacco and Firearms (ATF), and
Doug Carpenter of Combustion Science and Engineering developed the materials for the course, along with
Morgan Hurley of the SFPE.

Prof.~David McGill of Seneca College, Ontario, Canada has conducted a remote-learning course
on the use of FDS, and he has also maintained a web site that has provided valuable suggestions from users.

Thanks to Chris Lautenburger and Carlos Fernandez-Pello for their assistance with the ``two-reaction'' test case.

Thanks to Ian Thomas, Khalid Moinuddin, and Ian Bennetts for their description of and data for the ethanol pan fire example.
Prof.~Ian Thomas of Victoria University has also presented short courses on the use of FDS in Australia.
His students have also performed some validation work on compartment fires.

Prof.~Charles Fleischmann of the University of Canterbury, New Zealand, has also provided valuable assistance
in improving the documentation of the model.

Profs.~Johnathan Barnett and Nick Dembsey of Worcester Polytechnic, Profs.~Fred Mowrer, Jim Milke, Jim Quintiere,
and Jose Torero of the University of Maryland along with James White Jr.~of the Western Fire Center, who have taught
classes or supervised students and interns in various applications of the model.

The fire protection engineering firms ArupFire, Schirmer Engineering, Rolf Jensen and Associates, Hughes Associates,
and Combustion Science and Engineering have invited several of the FDS/Smokeview developers to in-house workshops
on various uses of the model.



\tableofcontents

\mainmatter



\part{Running FDS}


\chapter{Introduction}

The software described in this document, Fire Dynamics Simulator (FDS), is a computational
fluid dynamics (CFD) model of fire-driven fluid flow. FDS solves numerically a form of the
Navier-Stokes equations\index{Navier-Stokes} appropriate for low-speed, thermally-driven flow
with an emphasis on smoke and heat transport from fires.
The formulation of the equations and the numerical algorithm are contained the FDS Technical Reference Guide~\cite{FDS_Tech_Guide_5}.

Smokeview is a separate visualization program that is used to display the
results of an FDS simulation.
A detailed description of Smokeview is found in the
{\em User's Guide for Smokeview Version 5}~\cite{Smokeview_Users_Guide_5}.


\section{Features of FDS}

The first version of FDS was publicly released in February 2000.
To date, about half of the applications of the model have been for design of smoke
handling systems and sprinkler/detector activation studies. The other half consist of
residential and industrial fire reconstructions. Throughout its development, FDS has
been aimed at solving practical fire problems in fire protection engineering, while
at the same time providing a tool to study fundamental fire dynamics and combustion.

\begin{description}
\index{Features}
\item[Hydrodynamic Model]
FDS solves numerically a form of the Navier-Stokes\index{Navier-Stokes} equations appropriate
for low-speed, thermally-driven flow with an emphasis on
smoke and heat transport from fires. The core algorithm is an
explicit predictor-corrector scheme, second order accurate in space
and time. Turbulence is treated by means of the Smagorinsky form of
Large Eddy Simulation (LES). It is possible to perform a Direct
Numerical Simulation (DNS) if the underlying numerical mesh is fine
enough. LES is the default mode of operation.

\item[Combustion Model]
For most applications, FDS uses a single step chemical reaction whose products are tracked via
a two-parameter mixture fraction model.  The mixture fraction is a conserved
scalar quantity that represents the mass fraction of one or more components of the gas at
a given point in the flow field.  By default, two components of the mixture fraction are explicitly
computed. The first is the mass fraction of unburned fuel and
the second is the mass fraction of burned fuel (i.e. the mass of the combustion products
that originated as fuel.).  A two-step chemical reaction with a three parameter
mixture fraction decomposition can also be used with the first step being oxidation of fuel
to carbon monoxide and the second step the oxidation of carbon monoxide to carbon dioxide.
The three mixture fraction components for the two step reaction
are unburned fuel, mass of fuel that has completed the first reaction step, and the mass
of fuel that has completed the second reaction step.  The mass fractions of all of the major
reactants and products can be derived from the mixture fraction parameters by means of
``state relations,''.  Lastly, a multiple-step finite rate model is also available.

\item[Radiation Transport] Radiative heat transfer is included in the
model via the solution of the radiation transport equation for a
gray gas, and in some limited cases using a wide band
model.  The equation is solved using a technique similar to finite
volume methods for convective transport, thus the name given to it is
the Finite Volume Method (FVM).  Using approximately 100 discrete
angles, the finite volume solver requires about 20~\% of the total CPU
time of a calculation, a modest cost given the complexity of radiation
heat transfer. The absorption coefficients of the gas-soot mixtures
are computed using RADCAL narrow-band model.  Liquid droplets can
absorb and scatter thermal radiation. This is important in cases
involving mist sprinklers, but also plays a role in all sprinkler
cases.  The absorption and scattering coefficients are based on Mie
theory.

\item[Geometry]
FDS approximates the governing equations on a rectilinear mesh.
Rectangular obstructions are forced to conform with the underlying mesh.

\item[Multiple Meshes] This is a term used to describe the use of
more than one rectangular mesh in a calculation. It is possible to prescribe
more than one rectangular mesh to handle cases where the computational
domain is not easily embedded within a single mesh.

\item[Parallel Processing] It is possible to run an FDS calculation on
more than one computer using the Message Passing Interface (MPI). Details
can be found in Section~\ref{info:parallelprocessing}.

\item[Boundary Conditions]
All solid surfaces are assigned thermal boundary conditions, plus
information about the burning behavior of the material.
Heat and mass transfer to and from solid surfaces is
usually handled with empirical correlations, although it is possible
to compute directly the heat and mass transfer when performing a
Direct Numerical Simulation (DNS).

\end{description}


\section{What's New in FDS 5?}

FDS 5 differs from previous versions in its treatment of solid boundaries and
gas phase combustion. Among the more important changes are:
\begin{description}
\index{Features!Recent Changes}
\item[{\bf Multi-Step Combustion}] Previous versions of FDS have assumed only one gas
phase reaction. Now, multiple-step reaction schemes are available to describe local
extinction, CO production, among various other phenomena. The most important improvements to the combustion model are a more
accurate heat release rate calculation, and a better treatment of local flame extinction.

\item[{\bf Material Layers}] Past versions of FDS have assumed that solid boundaries
consist of a single homogenous layer. Now, solid boundaries can be modeled with
multiple layers of materials, with each material specified via a new namelist
group called {\ct MATL}. This change makes past input files obsolete.

\item[{\bf Command Line Format}] FDS is still run from the command line, but the syntax
is slightly different than in previous versions. See Section~\ref{info:runningFDS} for
details.

\item[{\bf Database}] Previous versions of FDS used a separate ``database'' file to store
material and reaction parameters. This file is no longer available, and now all
parameters must be specified within the input file.

\item[{\bf Device Descriptions}] The method used to describe a device and/or sensor
(Sprinkler, Heat Detector, Thermocouple, etc.) has changed.  See Section~\ref{info:DEVC}
for more information on defining devices and their properties.  Any device can be used to control
sprinkler activation and the creation and removal of vents or obstacles.

\item[{\bf Sprinklers}] The external sprinkler files used in previous versions
are no longer used. All information about sprinklers and other fire-specific devices are
conveyed in the input file.  Sprinklers are now defined with the new method of describing
devices mentioned above.  See Section~\ref{info:DEVC} for more information.

\item[{\bf Control Functions}] A new group of input parameters is available to describe functions
that control sprinkler activation, the creation and removal of vents or obstacles,
and code execution (termination or dumping of restart files). See Section~\ref{info:CTRL} for details.

\item[{\bf Numerical Mesh}] Previous versions of FDS used separate input groups
to define the numerical grid and the computational domain.  Now the two groups
have been merged into a single, simplified {\ct MESH} namelist group. Namelist groups {\ct PDIM} and
{\ct GRID} shall no longer be used in the input file.  See Section~\ref{info:MESH} for more detail.

\item[{\bf Pressure Zones}] It is possible in FDS 5 to declare individual
regions in the computational domain to have background pressures different from ambient,
allowing for calculations of leakage, fan curves, and so forth. See Section~\ref{info:ZONE} for more details.

\item[{\bf Stack Effect and Atmospheric Stratification}] Improvements have been made to
better characterize a stratified atmosphere and the movement of air in a tall building due
to temperature differences between inside and outside.

\item[{\bf Adiabatic Surface Temperature}] A new output quantity has been added to
facilitate using FDS output in thermal and mechanical finite element models.
See Section~\ref{info:thermalboundary} for more information.

\item[{\bf Development, Distribution and Formal User Support}] Starting with FDS 5, the open-source
development environment SourceForge.net is being used for configuration management
(code archiving, revision tracking, bug fixes, user suggestions, and so on).
See Section~\ref{info:sfcvs} for more information.

\item[{\bf FDS Verification and Validation Guide}] Starting with FDS 5, more emphasis has been placed on maintaining
a permanent collection of Verification and Validation cases.  This improves the
quality of each FDS update and release, as a standard test suite will now be used to insure that changes
made to the source code do not degrade FDS output.  This also provides users with a standard
data set to verify their own installation of FDS and to compare the results that FDS is returning
on their system to published data.
\end{description}


\chapter{Getting Started}
\label{info:gettingstarted}
FDS is a computer program that solves equations that describe the evolution of fire.
It is a Fortran program that reads input parameters from a text file, computes
a numerical solution to the governing equations, and writes user-specified output data to files.
Smokeview is a companion program that reads FDS output files and produces animations on the computer screen.
Smokeview has a simple menu-driven interface. FDS does not. However, there are various third-party programs
that have been developed to generate the text file containing the input parameters needed by FDS.

This guide describes how to obtain FDS and Smokeview and how to use FDS.
A separate document~\cite{Smokeview_Users_Guide_5} describes how to use Smokeview. Other tools related to
FDS and Smokeview can be found at the web site.

\section{How to Acquire FDS and Smokeview}
\label{info:sfcvs}
\index{Download}
Detailed instructions on how to download executables, manuals, source-code and related utilities,
can be found on the FDS-SMV Website
\href{http://fire.nist.gov/fds}{{\ct http://fire.nist.gov/fds}} for more information.
The typical FDS/Smokeview distribution consists of an installation package or compressed archive, which is available for MS Windows, Mac OS X, and Linux.  For other operating systems, consult the web site.

\begin{warning}
\noindent
If you ever want to keep an older version of FDS and Smokeview, copy the installation directory to some other
place so that it is not overwritten during the updated installation.
\end{warning}

\section{Computer Hardware Requirements}
\index{System Requirements!Hardware}
FDS requires a fast CPU and a substantial amount of random-access memory (RAM) to run efficiently.
For minimum specifications, the system should have a 1~GHz CPU, and at least 512~MB RAM.
The CPU speed will determine how long the computation will take to finish, while the amount
of RAM will determine how many mesh cells can be held in memory.
A large hard drive is required to store the output of the calculations. It is not unusual for
the output of a single calculation to consume more than 1~GB of storage space.

Most computers purchased within the past few years are adequate for running Smokeview
with the caveat that additional memory (RAM) should be purchased to bring the
memory size up to at least 512~MB. This is so the computer can display results without
``swapping" to disk. For Smokeview it is also important to obtain a fast graphics card
for the PC used to display the results of the FDS computations.

For Multi-Mesh calculations, the MPI version of FDS will operate over standard 100 Mbps networks.
A Gigabit or 1000 Mbps network will further reduce latency and improve data transfer rates between nodes.


\section{Computer Operating System (OS) and Software Requirements}
\index{System Requirements!Operating System}
The goal of making FDS and Smokeview publicly available has been to enable
practicing fire protection engineers to perform fairly sophisticated
fire simulations at a reasonable cost. Thus, FDS and Smokeview have been
designed for computers running Microsoft Windows, Mac OS X, and various
implementations of Unix/Linux.

\begin{description}
\item[{\bf MS Windows}]
An installation package is available for Windows operating system.  It is not recommended to run FDS/Smokeview under any version of MS Windows
released prior to Windows 2000.

\item[{\bf Mac OS X}]
A Mac OS X Tiger FDS .zip archive is available for both the PowerPC and Intel architectures.
OS X 10.4.x or better is recommended, versions of OS X prior to 10.4.x are not officially supported.
Users can always download the latest version of FDS source and
compile FDS for other versions of OS X (See Appendix~\ref{info:compilation} for details).

\item[{\bf Unix, Linux}]
Unix, Linux users can run FDS and Smokeview by downloading the appropriate pre-compiled
executables and installing them wherever they see fit. If the pre-compiled
FDS executable does not work (usually because of library incompatibilities),
the FDS source code can be downloaded and compiled using a Fortran 90 and
C compiler (See Appendix~\ref{info:compilation} for details). If Smokeview
does not work on the Linux or Unix workstation, you should use a Windows or Mac PC to view FDS output.

\item[{\bf FDS in Parallel}] \index{System Requirements!MPI}For those wishing to run FDS in parallel,
MPI (Message Passing Interface) must be installed on each of the
computers within the network that will be used for FDS computations.
Information about installing MPI on different computer platforms is given on the FDS website.
See the Development section of the website for more information.
\end{description}



\chapter{Running FDS}
\label{info:runningFDS}

This chapter describes the procedure to run an FDS calculation.
The primary requirement for any calculation is an FDS input file. The creation of an
input file is covered in detail in Part~\ref{info:inputfilecreation}.
If you are new to FDS and Smokeview, it is strongly suggested that you start with an existing data file, run it as is,
and then make the appropriate changes to the input file for the
desired scenario. Sample input files are included as part of the standard installation.
By running a sample case, you become familiar with the procedure, learn how to use Smokeview, and
ensure that your computer is up to the task before embarking on
learning how to create new input files.

\section{Starting an FDS Calculation}
\index{Running FDS}
FDS can be run from the command prompt, or with a third party Graphical User Interface (GUI).
In the discussion to follow, it is assumed that FDS is being run from the command prompt.
FDS can be run on a single computer, using only one CPU, or it can be run on multiple
computers and use multiple CPUs. For any operating system, there are two FDS executable files.
The single CPU Windows executable is called {\bf fds\#.exe}.
The parallel executable is called {\bf fds\#\_mpi.exe}. The letters ``mpi'' in the filename denote
Message Passing Interface (MPI), which will be discussed below.

\begin{warning}
\noindent
Note that the input file for both single and parallel versions of FDS are the same.
In fact, it is recommended that before embarking on parallel processing, you should run your input
file in serial mode to ensure that it is properly set up.
\end{warning}


\subsection{Starting an FDS Calculation (Single Processor Version)}
\index{Running FDS!Serial}
Sample input files are provided with the program for new users who
are encouraged to first run a sample calculation before attempting to
write an input file. Assuming that an input file called {\bf job\_name.fds}
exists in some directory, run the program either in a DOS or Unix command prompt as follows:


\subsubsection{MS Windows}

Open up a Command Prompt window, and change directories (``cd'') to where the
input file for the case is located, then run the code by typing at the command prompt
\begin{verbatim}
fds5 job_name.fds
\end{verbatim}
The character string {\ct job\_name} is usually
designated within the input file as the {\ct CHID}. It is recommended that the
name of the input file and the {\ct CHID} be the same so that all of the
files associated with a given calculation have a consistent name.
The progress of a simulation is indicated by diagnostic output that is written out onto the screen.
Detailed diagnostic information is automatically
written to a file {\bf CHID.out}, where {\ct CHID} is a character
string, usually the same as {\ct job\_name}, designated in the input file..
Screen output can be redirected to a file via the alternative command
\begin{verbatim}
fds5 job_name.fds > job_name.err
\end{verbatim}



\subsubsection{Mac OS X, Unix, Linux}

Depending on the type of installation, you may need to set various path or environment variables in order to invoke
FDS without a full path reference to the executable. The easiest way to do this is via an ``alias'' in your shell start-up
script. For the example below, it is assumed that {\ct fds5} is aliased to its full path name.
You may also need to ``chmod + x'' to make the file executable. Once this is done, run FDS from the command line by typing:
\begin{verbatim}
fds5 job_name.fds
\end{verbatim}
The input parameters are read from the file {\bf job\_name.fds},
and error statements and other diagnostics are written out to the screen.
To run the job in the background:
\begin{verbatim}
fds5 job_name.fds >& job_name.err &
\end{verbatim}


Note that in the latter case, the screen output is stored in the file {\bf job\_name.err} and the
detailed diagnostics are saved automatically in a file {\bf CHID.out}, where {\ct CHID} is a character
string, usually the same as {\ct job\_name}, designated in the input file.
It is preferable to run jobs in the background so as to free the console for other uses.



\subsection{Starting an FDS Calculation (Multiple Processor Version)}
\label{info:parallelprocessing}
\index{Running FDS!Parallel}
Running FDS across a network using multiple processors and multiple
banks of memory (RAM) is more difficult than running the single
processor version.  More is required of the user to make the
connections between the machines as seamless as possible. This
involves creating accounts for a given user on each machine, sharing
directories, increasing the speed of the network, making each machine
aware of the others, {\em etc.}  Some of these details are handled by
the parallel-processing software, others are not. Undoubtedly the
process will be simplified in years to come, but for the moment,
parallel-processing is still relatively new and requires more
expertise in terms of understanding both the operating system and the
network connections of a given set of computers.

FDS uses MPI (Message-Passing Interface)~\cite{Gropp:1} to allow
multiple computers to run a single FDS job. Actually, the job must be
broken up into multiple meshes, and a processor is assigned to work on
each mesh. Each processor runs an FDS job (called a thread) for its
given mesh, and the MPI handles the transfer of information between
meshes.  There are different implementations of MPI, much like there
are different Fortran and C compilers. Each implementation is
essentially a library of subroutines called from FDS that transfer
data from one thread to another across a fast network. The format of
the subroutine calls has been widely accepted in the community,
allowing different vendors and organizations the freedom to develop
better software while working within an open framework.

The way FDS is executed in parallel depends on which implementation of
MPI has been installed.  At NIST, the parallel version of FDS is
presently run on Windows PCs connected by the Local Area Network (LAN,
100~Mbps) or on a cluster of Linux PCs linked together with a
dedicated, fast (1000 Mbps) network.  The Windows computers use
MPICH2, a free implementation of MPI from Argonne National Laboratory,
USA.

\subsubsection{MPICH2}
\index{Running FDS!Parallel!MPICH2}
With MPICH2, a parallel FDS calculation can be invoked either
from the command line or by using a Graphical User Interface
(GUI). After the MPICH2 libraries are installed on each computer and
the necessary directories are shared, FDS is run using the command
issued from one of the computers
\begin{verbatim}
mpiexec -file config.txt
\end{verbatim}
where {\bf config.txt} is a text file containing the name and location
of the FDS executable, name of the FDS input file, the working directory,
and the names of the various computers that are to run the job. For
example, the {\bf config.txt} file might look like this for a job run at NIST with computers named
fire\_1, fire\_2, and fire\_3:
\begin{verbatim}
exe \\fire_1.nist.gov\NIST\FDS\fds5_mpi.exe job_name.fds
dir \\fire_1.nist.gov\Projects\
hosts
fire_1.nist.gov 2
fire_2.nist.gov 1
fire_3.nist.gov 2
\end{verbatim}
The numbers following the ``host'' machines represent the number of threads to run on that particular machine. In this
example, 5 threads are run for an FDS calculation that has 5 meshes. The {\ct exe} and {\ct dir} directories need to be shared, with the
latter having read and write permissions.

\begin{warning}
\noindent
All the computers must be able to access the executable and the working directory on {\ct fire\_1}.
This is achieved under Windows by ``sharing.'' Under Unix/Linux and OS X, the process involves cross-mounting the file
systems of the various machines.
\end{warning}


\subsubsection{LAM-MPI}
\index{Running FDS!Parallel!LAM-MPI}
On the Linux cluster in the Building and Fire Research Lab at NIST, LAM-MPI, a free implemenation from Indiana University,
is installed.\footnote{\href{http://www.lam-mpi.org}{{\ct http://www.lam-mpi.org}}}
With LAM/MPI, the computers to be used are linked prior to the actual execution of FDS with a separate
command called a ``lamboot.''
FDS is then run using the command
\begin{verbatim}
mpirun -np 5 fds5_mpi job_name.fds
\end{verbatim}
where the 5 indicates that 5 processors are to be used. In this case, the executable {\bf fds5\_mpi} is located in the
working directory. To make the process run in the background
\begin{verbatim}
mpirun -np 5 fds5_mpi job_name.fds >& job_name.err &
\end{verbatim}
The file {\bf job\_name.err} contains what is normally printed out to the screen.


\begin{warning}
\noindent
Note that there are several other implementations of MPI, some free, some not.
Support for the software varies, thus FDS has been designed to run under any of the
more popular versions without too much user intervention. However, keep in mind
that parallel processing is a relatively new area of computer science,
and there are bound to be painful growth spurts in the years ahead.
\end{warning}


\section{Monitoring Progress}
\index{Output Files!.out}
Diagnostics for a given calculation are written into a file called {\bf CHID.out}.
The CPU usage and simulation time are written here, so you can see how
far along the program has progressed. At any time during a calculation,
Smokeview can be run and the progress can be checked visually.
To stop a calculation before its scheduled time, either
kill the process, or preferably create a file in the same directory as
the output files called {\bf CHID.stop}\index{Output Files!.stop}. The existence of this
file stops the program gracefully, causing it to dump out the
latest flow variables for viewing in Smokeview.

Since calculations can be hours or days long, there is a restart
feature in FDS. Details of how to use this feature
are given in Section~\ref{info:restart}. Briefly, specify at the
beginning of calculation how often a ``restart'' file should be saved.
Should something happen to disrupt the calculation, like a power
outage, the calculation can be restarted from the time the last restart
file was saved.

It is also possible to control the stop time and the dumping of restart files by using
control functions as described in Section~\ref{info:CTRL}.



\chapter{User Support}
\index{Support}

It is not unusual over the course of a
project to run into various problems, some related to FDS, some related to your computer.
FDS is not a typical PC application. It is a serious calculation that pushes your computer's
processor and memory to its limits. In fact, there are no hardwired bounds within FDS that
prevent you from starting a calculation that is too much for your hardware.
Even if your machine has adequate memory (RAM), you can still easily set up calculations that can require
weeks or months to complete. It is difficult to predict at the start of a simulation just how long and
how much memory will be required. Learn how to monitor the resource usage of your computer.
Start with small calculations and build your way up.

Although many features in FDS are fairly mature, there are many that are not. FDS is used for
practical engineering applications, but also for research in fire and combustion. As you become
more familiar with the software, you will inevitably run into areas that are of current research
interest. Indeed, burning a roomful of ordinary furniture is one of the most challenging applications
of the model. So be patient, and learn to dissect a given scenario into its constitutive parts.
For example, do not attempt to simulate a fire spreading through an entire floor of a
building unless you have simulated the burning of the various combustibles with relatively small calculations.
The examples described in Part~\ref{part:verification} should help
you to develop larger, more complicated simulations from smaller building blocks.

Along with the FDS User's Guide, there are resources available on the internet.
These include an ``Issue'' tracker, that allows you to report bugs, feature requests and ask specific clarifying questions,
and ``Group Discussions,'' which support more general topics than just specific problems.
Before using these on-line resources, it is important to first try to solve your own
problems by performing simple test calculations, or debugging your input file. The next few sections
provide a list of error statements and suggestions on how to solve problems.


\section{Common Error Statements}
\index{Support!Error Statements}
An FDS calculation may end before the user-prescribed time limit.
Following is a list of common error statements and how to diagnose the problems:
\begin{description}
\item[{\bf Input File Errors}:] \index{Support!Error Statements!Input File}
The most common errors in FDS are due to mis-typed input statements.
These errors result in the immediate halting of the program and a statement like, ``ERROR: Problem
with the HEAD line.'' For these errors, check the line in the input file named in the error statement.
Make sure the parameter names are spelled correctly. Make sure that a / (forward slash)
is put at the end of each namelist entry. Make sure that the right type of information is
being provided for each parameter, like whether one real number is expected, or several integers, or
whatever. Make sure there are no non-ASCII characters being used, as can sometimes happen when text is
cut and pasted from other applications or word-processing software. Make sure zeros are zeros and
O's are O's. Make sure 1's are not !'s. Make sure apostrophes are used to designate character strings.
Make sure the text file on a Unix/Linux machine was not created on a DOS machine, and {\em vice versa}.
Make sure that all the parameters listed are still being used -- new versions of FDS often drop or
change parameters to force you to re-examine old input files.

\item [{\bf Numerical Instability Errors}:] \index{Support!Error Statements!Numerical Instability}
It is possible that during an FDS calculation the flow
velocity at some location in the domain can increase due to numerical error causing the time step
size to decrease to a point where logic in the code decides that the results are unphysical
and stops the calculation with an error message in the file {\bf CHID.out}.
In these cases, FDS ends by dumping out one final
Plot3D file giving the user some means by which to see where the
error is occurring within the computational domain. Usually, a numerical
instability can be identified by fictitiously large velocity vectors emanating from
a small region within the domain. Common causes of such instabilities are
mesh cells that have an aspect ratio larger than 2 to 1, high speed flow through a small
opening, a sudden change in the heat release rate, or any number of sudden changes to the
flow field. There are various ways to solve the problem, depending on the situation.
Try to diagnose and fix the problem before reporting it. It is difficult
for anyone but the originator of the input file to diagnose the problem.

\item[{\bf Inadequate Computer Resources}:] \index{Support!Error Statements!Inadequate Resources}
The calculation might be using more RAM than the machine
has, or the output files could have used up all the available disk space. In these situations, the
computer may or may not produce an intelligible error message. Sometimes the computer is just
unresponsive. It is the user's responsibility to ensure that the computer has adequate resources to
do the calculation. Remember, there is no limit to how big or how long FDS calculations can be -- it
depends on the resources of the computer. For any new simulation, try running the case with a modest-sized mesh,
and gradually make refinements until the computer can no longer handle it. Then back off
somewhat on the size of the calculation so that the computer can comfortably run the
case. Trying to run with 90~\% to 100~\% of computer resources is risky.
In fact, for a typical Windows PC with 4 GB RAM, only 2 GB will be available to FDS, based on user feedback.

\item[{\bf Run-Time Errors}:] \index{Support!Error Statements!Run-Time}
An error occurs either within the computer operating system or the
FDS program. An error message is printed out by the operating system of
the computer onto the screen or into the diagnostic output file. This
message is most often unintelligible to most people, including the programmers,
although occasionally one might get a small clue if there is mention of a specific problem,
like ``stack overflow,'' ``divide by zero,'' or ``file write error, unit=...''
These errors may be caused by a bug in FDS, for example if a number is divided by zero,
or an array is used before it is allocated, or any number of other problems.
Before reporting the error to the SourceForge Support Tracker, try to systematically simplify the
input file until the error goes away. This process usually brings to light some feature of the
calculation responsible for the problem and helps in the debugging.

\item[{\bf Poisson Initialization}:] \index{Support!Error Statements!Poisson}
Sometimes at the very start of a calculation, an error
appears stating that there is a problem with the ``Poisson initialization.''\index{Poisson initialization} The equation for
pressure in FDS is known as the Poisson equation. The Poisson solver consists of large system
of linear equations that must be initialized at the start of the calculation.
Most often, an error in the initialization step is due to a mesh {\ct IJK} dimension
being less than 4 (except in the case of a two-dimensional calculation). It is also possible that something is
fundamentally wrong with the coordinates of the computational domain. Diagnose the problem by
checking the {\ct MESH} lines in the input file.
\end{description}


\section{Support Requests and Bug Tracking}
\index{Support!Issue Reporting}

Because FDS development is on-going, problems will inevitably occur
with various routines and features. The developers need to know if a certain
feature is not working, and reporting problems is encouraged. However, the
problem must be clearly identified. The best way to do this is to simplify
the input file as much as possible so that the bug can be diagnosed.
Also, limit the bug reports to those features that clearly do not work.
Physical problems such as fires that do not ignite, flames that do not
spread, {\em etc.}, may be related to the mesh resolution or scenario
formulation and need to be investigated first by the user before being
reported. If an error message originates from the operating system as
opposed to FDS, first investigate some of the more obvious possibilities,
such as memory size, disk space, {\em etc.}

If that does not solve the problem, report the problem with as much information about the error message and
circumstances related to the problem. The input file should be simplified
as much as possible so that the bug occurs early in the calculation.
Attach the simplified input file if necessary, following the instructions provided at the web site.
In this way, the developers can quickly run the problem input file and hopefully diagnose the problem.

\begin{warning}
\noindent
NOTE: Reports of specific problems, feature requests and enhancements
should be posted to the Issue Tracker and not the Discussion Group.
\end{warning}



\part{Writing an FDS Input File}
\label{info:inputfilecreation}



\chapter{The Basic Structure of an Input File}
\label{info:fdsBasic} \index{Input File!Overview}


\section{Naming the Job}

The operation of FDS is based on a single input text\footnote{ASCII -- American Standard Code
for Information Interchange} file containing parameters organized into {\em namelist}
\footnote{A {\em namelist} is a Fortran input record.} groups. \index{Namelist Group}
The input file provides FDS  with all of the necessary information to
describe the scenario.
The input file is saved with a name such as {\bf job\_name.fds},
where {\bf job\_name} is any character string that helps to identify
the simulation. If this same string is repeated under the {\ct HEAD} namelist group within the
input file, then all of the output files associated with the calculation will then have this common name.

There should be no blank spaces in the job name. Instead use the underscore
character to represent a space.  Using an underscore characters instead of a space also applies
to the general practice of naming directories on your system.

Be aware that FDS will simply over-write the output files of a given case if its assigned
name is the same. This is convenient when developing an input file because you save on disk space. Just be careful
not to overwrite a calculation that you want to keep.



\section{Namelist Formatting}

\noindent
Parameters are specified within the input file by using {\em namelist} formatted records.
Each namelist record begins with the ampersand character ``{\ct \&}'' followed
immediately by the name of the namelist group, then a comma-delimited list of the input parameters, and
finally a forward slash ``{\ct /}''. For example, the line

\footnotesize
\begin{verbatim}
&DUMP NFRAMES=1800, DT_HRR=10., DT_DEVC=10., DT_PROF=30. /
\end{verbatim}

\normalsize \noindent
sets various values of parameters contained in the {\ct DUMP} namelist group. The meanings of these various parameters will
be explained in subsequent chapters. The namelist records can span multiple lines in the input file, but just be sure to
end the record with a ``/'' or else the data will not be understood. Do not add anything to a namelist line other than the
parameters and values appropriate for that group. Otherwise, FDS will stop immediately upon execution.

Parameters within a namelist record can be separated by either commas, spaces, or line breaks. It is a good idea to use
commas or line breaks. Some machines do not recognize the spaces.
Comments and notes can be written into the file so long as nothing comes
before the {\ct \&} except a space and nothing comes between the ampersand
{\ct \&} and the slash {\ct /} except appropriate parameters corresponding
to that particular namelist group.

The parameters in the input file can be integers ({\ct T\_END=5400}),
real numbers ({\ct CO\_YIELD=0.008}), groups of real numbers or integers
({\ct XYZ=6.04,0.28,3.65}) or ({\ct IJK=90,36,38}),
character strings:

{\ct CHID='WTC\_05\_v5'}

\noindent
groups of character strings:

{\ct SURF\_IDS='burner','INERT','INERT'}

\noindent
or logical parameters:

{\ct POROUS\_FLOOR=.FALSE.}

\noindent
A logical parameter is either
{\ct .TRUE.} or {\ct .FALSE.} -- the periods are a
Fortran convention. Character strings that are listed in
this User's Manual must be copied exactly as written -- the code
is case sensitive and underscores {\em do} matter.

Most of the input parameters are simply real or integer scalars, like {\ct DT=0.02}, but sometimes the inputs are
multidimensional arrays. For example, when describing a particular solid surface, you need to express the mass
fractions of multiple materials that are to be found in multiple layers. The input array {\ct MATL\_MASS\_FRACTION(IL,IC)} is
intended to convey to FDS the mass fraction of component {\ct IC} of layer {\ct IL}. For example, if the mass fraction of the
second material of the third layer is 0.5, then write

{\ct MATL\_MASS\_FRACTION(3,2)=0.5}

\noindent
To enter more than one mass fraction, use
this notation:

{\ct MATL\_MASS\_FRACTION(1,1:3)=0.5,0.4,0.1}

\noindent
which means that the first three materials of layer 1 have
mass fractions of 0.5, 0.4, and 0.1, respectively. The notation {\ct 1:3} means array element 1 through 3, inclusive.



\begin{warning}
\noindent
Note that character strings can be enclosed either by apostrophes or quotation marks.
Be careful not to create the input file by pasting text from something other than a
simple text editor, in which case the punctuation marks may not transfer
properly into the text file.
\end{warning}





\section{Input File Structure}

In general, the namelist records can be entered in any order in the input file, but it is a good idea to organize them
in some systematic way. Typically, general information is listed near the top of the input file, and detailed information, like
obstructions, devices, and so on, are listed below. FDS scans the entire input file each time it processes a particular namelist group.
With some text editors, it has been noticed that the last line of the file is often not read by FDS because of the presence of an
``end of file'' character.
To ensure that FDS reads the entire input file, add \index{TAIL}

\footnotesize
\begin{verbatim}
&TAIL /
\end{verbatim}
\normalsize \noindent
as the last line at the end of the input file. This completes the file from {\ct \&HEAD} to {\ct \&TAIL}. FDS does not even look for
this last line. It just forces the ``end of file'' character past relevant input.

Another general rule of thumb when writing input files is to only add to the file parameters that are to change from their
default value. That way, you can more easily distinguish between what you want and what FDS wants. Add comments liberally to the file, so long as
these comments do not fall within the namelist records.

The general structure of an input file is shown below, with many
lines of the original validation input file (WTC\_05\_v5.fds) removed for clarity.

\footnotesize
\begin{verbatim}
&HEAD CHID='WTC_05_v5', TITLE='WTC Phase 1, Test 5, FDS version 5' /
&MESH IJK=90,36,38, XB=-1.0,8.0,-1.8,1.8,0.0,3.82 /
&TIME T\_END=5400. /
&MISC SURF_DEFAULT='MARINITE BOARD', TMPA=20., POROUS_FLOOR=.FALSE. /
&DUMP NFRAMES=1800, DT_HRR=10., DT_DEVC=10., DT_PROF=30. /

&REAC ID         = 'HEPTANE TO CO2'
      FYI        = 'Heptane, C_7 H_16'
      C          = 7.
      H          = 16.
      CO_YIELD   = 0.008 /
      SOOT_YIELD = 0.015 /

&OBST XB= 3.5, 4.5,-1.0, 1.0, 0.0, 0.0, SURF_ID='STEEL FLANGE' /  Fire Pan
...
&SURF ID        = 'STEEL FLANGE'
      COLOR     = 'BLACK'
      MATL_ID   = 'STEEL'
      BACKING   = 'EXPOSED'
      THICKNESS = 0.0063 /
...
&VENT MB='XMIN',SURF_ID='OPEN' /
...
&SLCF PBY=0.0, QUANTITY='TEMPERATURE', VECTOR=.TRUE. /
...
&BNDF QUANTITY='GAUGE_HEAT_FLUX' /
...
&DEVC XYZ=6.04,0.28,3.65, QUANTITY='oxygen', ID='EO2_FDS' /
...
&TAIL / End of file.
\end{verbatim}
\normalsize

\noindent
It is strongly recommended that when looking at a new scenario,
first select a pre-written input file that resembles the case,
make the necessary changes, then run the case at fairly low
resolution to determine if the geometry is set up correctly.
It is best to start off with a relatively simple file that captures the main
features of the problem without getting tied down with too much detail that
might mask a fundamental flaw in the calculation. Initial calculations ought
to be meshed coarsely so that the run times are less than an hour and
corrections can easily be made without wasting too much time.
As you learn how to write input files, you will continually
run and re-run your case as you add in complexity.

Table~\ref{tbl:namelistgroups} provides a quick reference to all the namelist parameters and
where you can find the reference to where it is introduced in the document and the
table containing all of the keywords for each group.

\vspace{\baselineskip}
\begin{table}[ht]
\begin{center}
\caption{Namelist Group Reference Table}\index{Namlist Groups Table}
\label{tbl:namelistgroups}
\begin{tabular}{|c|l|c|c|}
\hline
Group Name  & Namelist Group Description& Reference Section & Parameter Table  \\ \hline
{\ct BNDF}  & Boundary File Output         & \ref{info:BNDF} & \ref{tbl:BNDF}  \\ \hline
{\ct CTRL}  & Control Function Parameters  & \ref{info:CTRL} & \ref{tbl:CTRL}  \\ \hline
%{\ct CLIP}  & Min/Max Clipping Parameters  & \ref{info:CLIP} & \ref{tbl:CLIP}  \\ \hline
{\ct DEVC}  & Device Parameters            & \ref{info:DEVC} & \ref{tbl:DEVC}  \\ \hline
{\ct DUMP}  & Output Parameters            & \ref{info:DUMP} & \ref{tbl:DUMP}  \\ \hline
{\ct HEAD}  & Input File Header            & \ref{info:HEAD} & \ref{tbl:HEAD}  \\ \hline
{\ct HOLE}  & Obstruction Cutout           & \ref{info:HOLE} & \ref{tbl:HOLE}  \\ \hline
{\ct INIT}  & Initial Condition            & \ref{info:INIT} & \ref{tbl:INIT}  \\ \hline
{\ct ISOF}  & Isosurface File Output       & \ref{info:ISOF} & \ref{tbl:ISOF}  \\ \hline
{\ct MATL}  & Material Property            & \ref{info:MATL} & \ref{tbl:MATL}  \\ \hline
{\ct MESH}  & Mesh Parameters              & \ref{info:MESH} & \ref{tbl:MESH}  \\ \hline
{\ct MISC}  & Miscellaneous                & \ref{info:MISC} & \ref{tbl:MISC}  \\ \hline
{\ct OBST}  & Obstruction                  & \ref{info:OBST} & \ref{tbl:OBST}  \\ \hline
{\ct PART}  & Lagrangian Particle          & \ref{info:PART} & \ref{tbl:PART}  \\ \hline
{\ct PROF}  & Profile Output               & \ref{info:PROF} & \ref{tbl:PROF}  \\ \hline
{\ct PROP}  & Device Property              & \ref{info:PROP} & \ref{tbl:PROP}  \\ \hline
{\ct RADI}  & Radiation                    & \ref{info:RADI} & \ref{tbl:RADI}  \\ \hline
{\ct RAMP}  & Ramp Profile                 & \ref{info:RAMP} & \ref{tbl:RAMP}  \\ \hline
{\ct REAC}  & Reactions                    & \ref{info:REAC} & \ref{tbl:REAC}  \\ \hline
{\ct SLCF}  & Slice File Output            & \ref{info:SLCF} & \ref{tbl:SLCF}  \\ \hline
{\ct SPEC}  & Species Parameters           & \ref{info:SPEC} & \ref{tbl:SPEC}  \\ \hline
{\ct SURF}  & Surface Properties           & \ref{info:SURF} & \ref{tbl:SURF}  \\ \hline
{\ct TIME}  & Simulation Time              & \ref{info:TIME} & \ref{tbl:TIME}  \\ \hline
%{\ct TREE}  & Conical Tree Parameters      & \ref{info:TREE} & \ref{tbl:TREE}  \\ \hline
{\ct TRNX}  & Mesh Stretching              & \ref{info:TRNX} & \ref{tbl:TRNX}  \\ \hline
{\ct VENT}  & Vent Parameters              & \ref{info:VENT} & \ref{tbl:VENT}  \\ \hline
{\ct ZONE}  & Pressure Zone Parameters     & \ref{info:ZONE} & \ref{tbl:ZONE}  \\ \hline
\end{tabular}
\end{center}
\end{table}


\clearpage

\chapter{Setting the Bounds of Time and Space}


\section{Naming the Job: The \texorpdfstring{{\tt HEAD}}{HEAD} Namelist Group (Table \ref{tbl:HEAD})}
\label{info:HEAD}\index{HEAD}

The first thing to do when setting up an input file is to give the
job a name.  The name of the job is important because often a project
involves numerous simulations in which case the names of the individual
simulations can help organize the effort.  The namelist group {\ct HEAD} contains
two parameters, as in this example:

\footnotesize
\begin{verbatim}
&HEAD CHID='WTC_05_v5', TITLE='WTC Phase 1, Test 5, FDS version 5' /
\end{verbatim}
\normalsize

\begin{description}
\item {\ct CHID}\index{HEAD!CHID} is a string of 30 characters or less used to tag the output files.
If, for example, {\ct CHID='WTC\_05\_v5'}, it is convenient to
name the input data file {\ct WTC\_05\_v5.fds} so that the input file
can be associated with the output files. No periods or spaces are allowed in
{\ct CHID} because the output files are tagged with suffixes that
are meaningful to certain computer operating systems.
\item {\ct TITLE}\index{HEAD!TITLE} is a string of 60 characters or less that describes the
simulation. It is simply descriptive text that is passed to various output files.
\end{description}


\section{Simulation Time: The \texorpdfstring{{\tt TIME}}{TIME} Namelist Group (Table \ref{tbl:TIME})}
\label{info:TIME}\index{TIME}

{\ct TIME} is the name of a group of parameters time define the time
duration of the simulation and the initial time step used to advance
the solution of the discretized equations. Usually, only the
duration of the simulation is required on this line, via the
parameter {\ct T\_END} (Time End)\index{TIME!T\_END}. The default is 1 s.
Note: {\ct TWFIN}{\ct TWFIN} will still work but it has been deprecated,
it is recommended that {\ct T\_END} be used now instead.

For example, the following line will instruct FDS to run the simulation for 5400 seconds.

\footnotesize
\begin{verbatim}
&TIME T_END=5400. /
\end{verbatim}

\normalsize
If {\ct T\_END} is set to zero, only the set-up work is performed,
allowing you to quickly check the geometry in Smokeview.

If you want the timeline to start at a number other than zero, you can ues the parameter
{\ct T\_BEGIN} (Time Begin)\index{TIME!T\_BEGIN} to specify the time written to file for the first timestep.
This would be useful for matching timelines of experimental data or or video recordings.

\begin{warning}
This does not run any of the simulation prior to the {\ct T\_BEGIN} value.
It is only used to offset the reported starting time from zero.
\end{warning}

The initial time step size can be specified with
{\ct DT}\index{TIME!DT}. This parameter is normally set automatically by dividing the size of a mesh cell by the
characteristic velocity of the flow.
During the calculation, the time step is adjusted so that the CFL (Courant, Friedrichs, Lewy) condition is
satisfied. The default value of {\ct DT} is $5 \, (\dx \, \dy \, \dz)^\ot/\sqrt{gH}$ s, where
$\dx$, $\dy$, and $\dz$ are the dimensions of the smallest mesh
cell, $H$ is the height of the computational domain, and $g$ is the acceleration of gravity.

\begin{warning}
If something sudden is to happen right at the start of a simulation,
like a sprinkler activation, it is a good idea to set the initial time step
to avoid a numerical instability caused by too large a time step.
Experiment with different values of {\ct DT} by monitoring the initial time step sizes
recorded in the output file {\bf job\_name.out}.
\end{warning}

\noindent
One additional parameter in the {\ct TIME} group is {\ct SYNCHRONIZE}\index{TIME!SYNCHRONIZE} , a
logical flag ({\ct .TRUE.} or {\ct .FALSE.}) indicating that in a
multi-mesh computation the time step for each mesh should be the same, thus
ensuring that each mesh is processed each iteration. More details can
be found in Section~\ref{info:multimesh}. The default value of {\ct SYNCHRONIZE} is {\ct .TRUE.}

\newpage

\section{Computational Meshes: The \texorpdfstring{{\tt MESH}}{MESH} Namelist Group (Table \ref{tbl:MESH})}
\label{info:MESH}\index{MESH}

All FDS calculations must be performed within a domain that is made up
of rectilinear volumes called {\em meshes}. Each mesh is divided into rectangular {\em cells},
the number of which depends on the desired resolution of the flow dynamics.
{\ct MESH} is the namelist group that defines the computational domain.
A mesh is a single right parallelepiped, {\em i.e.} a box.
The coordinate system within a mesh conforms to the right hand rule.
The origin point of a mesh is defined by the first, third
and fifth values of the real number sextuplet, {\ct XB}\index{MESH!XB}, and the opposite
corner is defined by the second, fourth and sixth values.
For example,

\footnotesize
\begin{verbatim}
&MESH IJK=10,20,30, XB=0.0,1.0,0.0,2.0,0.0,3.0 /
\end{verbatim}

\normalsize
\noindent
defines a mesh that spans the volume starting at the origin and extending 1~m in the positive
$x$ direction, 2~m in the positive $y$ direction, and 3~m in the positive $z$ direction.
The mesh is subdivided into uniform cells via the parameter
{\ct IJK}\index{MESH!IJK}. In this example, the mesh is divided into 10~cm cubes.
If it is desired that the mesh cells in a particular direction not be uniform in size,
then the namelist groups {\ct TRNX}, {\ct TRNY} and/or {\ct TRNZ} may be used to alter the
uniformity of the mesh (See Section~\ref{info:TRNX}).\index{TRNX,TRNY,TRNZ}

Any obstructions or vents that extend beyond the boundary of the mesh
are cut off at the boundary. There is no penalty for defining objects
outside of the mesh, and these objects will not appear in Smokeview either.

\begin{warning}
\noindent
Note that it is best if the mesh cells resemble cubes, that is, the
length, width and height of the cells ought to be roughly the same.
\end{warning}

\noindent
Because an important part of the calculation uses a Poisson solver based on
Fast Fourier Transforms (FFTs) in the $y$ and $z$ directions, the second and third dimensions
of the mesh should each be of the form $2^l \, 3^m \, 5^n$, where
$l$, $m$ and $n$ are integers. For example,
$64=2^6$, $72=2^33^2$ and $108=2^23^3$ are good mesh cell divisions, but 37, 99 and 109 are not.
The first number of mesh cell divisions (the {\ct I} in {\ct IJK}) does not use FFTs and need not be given as a
product of small numbers. However, you should experiment with different values of
divisions to ensure that those that are ultimately used do not unduly slow down the calculation.

Here is a list of numbers between 1 and 1024 that can be factored
down to 2's, 3's and 5's:

\footnotesize
\begin{verbatim}
   2     3     4     5     6     8     9    10    12    15    16    18    20    24    25
  27    30    32    36    40    45    48    50    54    60    64    72    75    80    81
  90    96   100   108   120   125   128   135   144   150   160   162   180   192   200
 216   225   240   243   250   256   270   288   300   320   324   360   375   384   400
 405   432   450   480   486   500   512   540   576   600   625   640   648   675   720
 729   750   768   800   810   864   900   960   972  1000  1024
\end{verbatim}
\normalsize


\subsection{Two-Dimensional and Axially-Symmetric Calculations}
\label{info:2D} \index{2D Calculations} \index{Axially-Symmetric Calculations}

The governing equations solved in FDS are written in terms of a
three dimensional Cartesian coordinate system. However,
a two dimensional Cartesian or two dimensional cylindrical
(axially-symmetric) calculation can be performed by setting the {\ct J} in the {\ct IJK} triplet
to 1 on the {\ct MESH} line. For axial symmetry, add {\ct CYLINDRICAL=.TRUE.} to the
{\ct MESH} line, and the coordinate $x$ is then interpreted as the radial coordinate $r$.
No boundary conditions should be set at the planes $y=\hbox{\ct YMIN=XB(3)}$ or
$y=\hbox{\ct YMAX=XB(4)}$, nor at $r=\hbox{\ct XMIN=XB(1)}$ in an axially-symmetric
calculation in which $r=\hbox{\ct XB(1)=0}$. For better visualizations, the difference between
{\ct XB(4)} and {\ct XB(3)} should be small so that the Smokeview rendering appears to be in 2-D.
An example of an axially-symmetric helium plume ({\bf helium\_2d}) is given in the V\&V Guide.


\subsection{Multiple Meshes and Parallel Processing}
\label{info:multimesh}\index{Multiple Meshes}

\begin{figure}[ht!]
\includegraphics[width=\textwidth]{FIGURES/hallways}
\caption{\bf An example of a multiple-mesh geometry.}
\label{fig:domain}
\end{figure}

The term ``multiple meshes'' means that the computational domain consists of
more than one computational mesh, usually connected although this is not
required. In each mesh, the governing equations can be solved with a time
step based on the flow speed within that particular mesh. Because each
mesh can have different time steps, this technique can save CPU time by
requiring relatively coarse meshes to be updated only when necessary.
Coarse meshes are best used in regions where temporal and spatial gradients of key
quantities are small or unimportant.
{\bf To run FDS in parallel, you need to break up the computational domain into
multiple meshes so that each processor receives one mesh to work on.} Whether
the calculation is to be run on a single processor, or on multiple processors,
the rules of prescribing multiple meshes are similar, with some issues to keep in mind.
Here is a list of guidelines and warnings about the use of multiple meshes.

\begin{itemize}
\item If more than one mesh is used, there should be a
{\ct MESH} line for each. The order in which these
lines are entered in the input file matters. In general, the meshes should be entered
from finest to coarsest. FDS assumes that a mesh listed first in the input file has
precedence over a mesh listed second if the two meshes overlap.
Meshes can overlap, abut, or not touch at all. In the last case, essentially two separate
calculations are performed with no communication at all between them. Obstructions and vents are entered
in terms of the overall coordinate system and need not apply to any one particular mesh.
Each mesh checks the coordinates of all the geometric
entities and decides whether or not they are to be included.
\item Avoid putting mesh boundaries where critical action is expected,
especially fire. Sometimes fire spread from mesh to mesh cannot be
avoided, but if at all possible try to keep mesh interfaces relatively
free of complicated phenomena since the exchange of information across
mesh boundaries is not yet as accurate as cell to cell exchanges within one
mesh.
\item Information from other meshes is received only at the exterior boundary
of a given mesh. This means that a mesh that is completely embedded within
another receives information at its exterior boundary, but the larger
mesh receives no information from the mesh embedded within. Essentially,
the larger, usually coarser, mesh is doing its own simulation of the scenario
and is not affected by the smaller, usually finer, mesh embedded within it.
Details within the fine mesh, especially related to fire growth and spread,
may not be picked up by the coarse mesh. In such cases, it is preferable to
isolate the detailed fire behavior within one mesh, and position coarser
meshes at the exterior boundary of the fine mesh. Then the fine and coarse
meshes mutually exchange information.
\item Experiment with different mesh configurations using relatively
coarse mesh cells to ensure that information is being transferred
properly from mesh to mesh. There are two issues of concern. First,
does it appear that the flow is being badly affected by the mesh boundary? If so,
try to move the mesh boundaries away from areas of activity. Second,
is there too much of a jump in cell size from one mesh to another? If so, consider
whether the loss of information moving from a fine to a coarse mesh is tolerable.
\item Be careful when using the shortcut convention of declaring an
entire face of the domain to be an {\ct OPEN} vent. Every mesh
takes on this attribute. See Section~\ref{info:VENT} for more details.
\item It is possible, starting with FDS 5, to have a background pressure rise in multiple pressure zones,
even if the pressure zones cross mesh boundaries. See Section~\ref{info:ZONE} for more information.
\item In a parallel calculation, you can force the time steps in all meshes to
be the same by setting {\ct SYNCHRONIZE=.TRUE.}\index{TIME!SYNCHRONIZE} on the {\ct TIME} line.
\begin{warning}
\noindent
Starting in FDS 5, this is the default for all modes of operation.
\end{warning}
With this setting, all meshes are active each iteration.
For a single-processor, multiple mesh calculation, this strategy reduces
and may even eliminate any benefit seen by using multiple meshes. However, in a
parallel calculation, if a particular mesh is inactive during an iteration because
it is not ready to be updated, then the processor assigned to that mesh is also
inactive. Forcing the mesh to be updated with a smaller than ideal time step does not
cost anything since that processor would have been idle anyway. The benefit is that
there is a tighter connection between meshes.
It is also possible to synchronize the time step in only a select set of meshes. To do
this, add {\ct SYNCHRONIZE=.TRUE.} to the appropriate {\ct MESH} lines and then add
{\ct SYNCHRONIZE=.FALSE.} to the {\ct TIME} line.\index{MESH!SYNCHRONIZE}
\item If a planar obstruction is close to where two meshes abut, make sure that each
mesh ``sees'' the obstruction. If the obstruction is even a millimeter outside of one
of the meshes, that mesh does not account for it, in which case information is not
transferred properly between meshes.
\item When running a case with multiple meshes in parallel, the efficiency of the \index{multi-mesh efficiency}
calculation can be checked as follows: (1) Set {\ct SYNCHRONIZE=.TRUE.} on the
{\ct TIME} line, (2) Let the program run several hundred time steps, (3) Calculate
the difference in wall clock time between two 100 iteration print outs in
the file {\bf CHID.out} (see Section~\ref{out:file}).
Divide the time difference by 100. This is the average
elapsed wall clock time per time step, (4) Look at the {\ct CPU/step} for each mesh. The
largest value should be less than, but close to, the average elapsed wall clock time.
The efficiency of the parallel calculation is the maximum {\ct CPU/step} divided by
the average wall clock time per step. If this number is between 90~\% and 100~\%, the
parallel code is working well.
\end{itemize}


\subsection{Mesh Stretching: The \texorpdfstring{{\tt TRNX}}{TRNX}, \texorpdfstring{{\tt TRNY}}{TRNY} and/or \texorpdfstring{{\tt TRNZ}}{TRNZ} Namelist Groups (Table \ref{tbl:TRNX})}
\label{info:TRNX}\index{TRNX,TRNY,TRNZ}

By default the mesh cells that fill the computational domain are uniform in size.
However, it is possible to specify that the cells be non-uniform in one or two
\begin{figure}[ht]
\begin{minipage}[t]{3.1in}
\includegraphics[width=3.1in]{FIGURES/piece_wise_linear}
\vspace{-.2in}
\caption{\bf Piecewise-Linear Transformation.}
\label{fig:grid2}
\end{minipage}
\hfill
\begin{minipage}[t]{3.1in}
\includegraphics[width=3.1in]{FIGURES/polygonal}
\vspace{-.2in}
\caption{\bf Polynomial Transformation.}
\label{fig:grid1}
\end{minipage}
\end{figure}
of the three coordinate directions.
For a given coordinate direction, $x$, $y$ or $z$, a function can be
prescribed that transforms the uniformly-spaced mesh to a
non-uniformly spaced mesh. {\bf Be careful with mesh transformations!}  If you shrink cells in one
region you must stretch cells somewhere else. When one
or two coordinate directions are transformed, the aspect ratio of the
mesh cells in the 3D mesh will vary. To be on the safe side, transformations
that alter the aspect ratio of cells beyond 2 or 3 should be avoided.
Keep in mind that the large eddy simulation technique is based on the
assumption that the numerical mesh should be fine enough to allow the formation
of eddies that are responsible for the mixing. In general, eddy formation
is limited by the largest dimension of a mesh cell, thus shrinking the
mesh resolution in one or two directions may not necessarily lead to a better
simulation if the third dimension is large.

\begin{warning}
\noindent
Transformations, in general, reduce the efficiency of the computation,
with two coordinate transformations impairing efficiency more
than a transformation in one coordinate direction. Experiment with different meshing
strategies to see how much of a penalty you will pay.
\end{warning}

\noindent
Here is an example of how to do a mesh transformation. Suppose your mesh is defined

\footnotesize
\begin{verbatim}
&MESH IJK=15,10,20, XB=0.0,1.5,1.2,2.2,3.2,5.2 /
\end{verbatim}
\normalsize

\noindent
and you want to alter the uniform spacing in the $x$ direction.
First, refer to the figures above.
You need to define a function $x = f(\xi)$ that maps the uniformly-spaced
{\em Computational Coordinate} ({\ct CC}) $0 \le \xi \le 1.5$
to the {\em Physical Coordinate} ({\ct PC}) $0 \le x \le 1.5$.
The function has three mandatory constraints: it must be monotonic (always increasing),
it must map $\xi=0$ to $x=0$, and it must map $\xi=1.5$ to $x=1.5$.
The default transformation function is $f(\xi) = \xi$ for a uniform mesh, but you need not do
anything in this case.

Two types of transformation functions are allowed. The first, and
simplest, is a piecewise-linear function.
Figure~\ref{fig:grid2} gives an example of a piecewise-linear transformation.
The graph indicates how 15 uniformly spaced mesh cells
along the horizontal axis are transformed into 15 non-uniformly spaced cells along the vertical axis.
In this case, the function is made up of straight line segments
connecting points ({\ct CC},{\ct PC}), in increasing order, as specified by the following lines in the input file:

\footnotesize
\begin{verbatim}
 &TRNX CC=0.30, PC=0.50, MESH_NUMBER=2 /
 &TRNX CC=1.20, PC=1.00, MESH_NUMBER=2 /
\end{verbatim} \normalsize

\noindent
The parameter {\ct CC} refers to the Computational Coordinate\index{TRNX,TRNY,TRNZ!CC}, $\xi$, located
on the horizontal axis; {\ct PC} is the Physical Coordinate\index{TRNX,TRNY,TRNZ!PC}, $x$, located on
the vertical axis.  The slopes of the
line segments in the plot indicate whether the mesh is being stretched (slopes greater
than 1) or shrunk (slopes less than 1). The tricky part about this
process is that you usually have a desired shrinking/stretching strategy
for the Physical Coordinate on the vertical axis, and must work backwards
to determine what the corresponding points should be for the Computational
Coordinate on the horizontal axis. Note that the above transformation is
applied to the second mesh in a multiple mesh job.

The second type of transformation is
a polynomial function whose constraints are of the form
$$ \frac{d^n f(\hbox{\ct CC})}{d\xi^n} = \hbox{\ct PC}   $$
Figure~\ref{fig:grid1} gives an example of a polynomial transformation, for which
the parameters are specified (assuming that this is the third mesh):

\footnotesize
\begin{verbatim}
 &TRNX IDERIV=0, CC=0.75, PC=0.75, MESH_NUMBER=3 /
 &TRNX IDERIV=1, CC=0.75, PC=0.50, MESH_NUMBER=3 /
\end{verbatim} \normalsize

\noindent
which correspond to the constraints
$f(0.75)=0.75$ and $\frac{df}{d\xi}(0.75) = 0.5$, or, in words, the
function maps 0.75 into 0.75 and the slope of the function at
$\xi=0.75$ is 0.5~.
The transform function must also pass through the points (0,0) and (1.5,1.5), meaning that
FDS must compute the coefficients for the
cubic polynomial $f(\xi) = c_0 + c_1 \, \xi + c_2 \, \xi^2 + c_3 \, \xi^3$.
More constraints on the function lead to higher order polynomial functions, so be careful about too many constraints which could lead
to non-monotonic functions.
The monotonicity of the function is checked by the
program and an error message is produced if it is not monotonic.


\subsection{Choosing the Right Mesh Dimensions}
\index{mesh dimensions}

A common question asked by new FDS users is, ``What size mesh should I use?''
The answer is not easy because it depends considerably on what you are trying
to accomplish. In general, you should build an FDS input file using a relatively
coarse mesh, and then gradually refine the mesh until you do not see
appreciable differences in your results. Formally, this is referred to as a mesh sensitivity study.

For simulations involving buoyant plumes, a measure of how well the flow field is resolved is given by the
non-dimensional expression $D^*/\dx$, where $D^*$ is a characteristic
fire diameter
\be D^* = \left(
     \frac{\dQ}{\rho_\infty \, c_p \, T_\infty \, \sqrt{g} }
     \right)^\frac{2}{5}  \ee
and $\dx$ is the nominal size of a mesh cell\footnote{The characteristic
fire diameter is related to the characteristic fire size via the
relation $Q^* = (D^*/D)^{5/2}$, where $D$ is the physical diameter of the
fire.}. The quantity $D^*/\dx$ can be thought of as the number of computational cells
spanning the characteristic (not necessarily the physical) diameter of the fire.
The more cells spanning the fire, the better the resolution of the
calculation. It is better to assess the quality of the mesh in terms
of this non-dimensional parameter, rather than an absolute mesh cell size.
For example, a cell size of 10~cm may be ``adequate,'' in some sense,
for evaluating the spread of smoke and heat through a building from a
sizable fire, but may not be appropriate to study a very small, smoldering source.

As an example, in the mesh sensitivity study for NUREG 1824~\cite{NUREG_1824}, the $D^*/\dx$ values ranged from 4 to 16.
These values were used to adequately resolve plume dynamics,
along with other geometrical characteristics of the models as well.
This range does not indicate what values to use for all models,
only what values worked well for that particular set of models.


\clearpage
\section{Miscellaneous Parameters: The \texorpdfstring{{\tt MISC}}{MISC} Namelist Group (Table \ref{tbl:MISC})}
\label{info:MISC}\index{MISC}

{\ct MISC} is the namelist group of global miscellaneous input parameters.
Only one {\ct MISC} line should be entered in the data file. For example, the input line

\footnotesize
\begin{verbatim}
&MISC SURF_DEFAULT='CONCRETE',TMPA=25. /
\end{verbatim}
\normalsize

\noindent
establishes that all bounding surfaces are to be made of {\ct CONCRETE} unless
otherwise specified, and that
the ambient temperature is 25 $^\circ$C.

The {\ct MISC} parameters vary in scope and degree of importance. Here is a partial list of {\ct MISC}ellaneous parameters. Others are described where necessary throughout this
guide.

\begin{description}
\item[{\ct DNS}] A logical parameter that, if {\ct .TRUE.}, directs FDS to perform a Direct Numerical Simulation, as opposed to the default Large Eddy Simulation (LES).
\item[{\ct GVEC}] The 3 components of gravity, in m/s$^2$. The default is {\ct GVEC=0,0,-9.81}.
\item[{\ct HUMIDITY}] Relative humidity, in units of \%. This need only be specified if there is a source of water in the simulation other than the fire
itself. Otherwise, water vapor is not explicitly tracked. Default 40~\%.
\item[{\ct ISOTHERMAL}] A logical parameter that indicates that the calculation does not involve any changes in temperature or
radiation heat transfer, thus reducing the number of equations that must be solved, and simplifying those that are. Automatically sets {\ct RADIATION} to
{\ct .FALSE.}
\item[{\ct NOISE}] FDS initializes the flow field with a very small amount of ``noise'' to prevent the development of a perfectly symmetric flow when the boundary
and initial conditions are perfectly symmetric. To turn this off, set {\ct NOISE=.FALSE.}
\item[{\ct P\_INF}] Background pressure (at the ground) in Pa. The default is 101325 Pa.
\item[{\ct RADIATION}] A logical parameter indicating whether radiation transport ought to be calculated. The default is {\ct .TRUE.}
\item[{\ct SUPPRESSION}] A logical parameter indicating whether FDS should include gas phase flame extinction. The default is {\ct .TRUE.}
\item[{\ct SURF\_DEFAULT}] The {\ct SURF} line that is to be applied to all boundaries, unless otherwise specified. The default is {\ct 'INERT'}.
\item[{\ct TMPA}] Ambient temperature, the temperature of everything at the start of the simulation. The default is 20~$^\circ$C.
\item[{\ct U0, V0, W0}] Initial values of the gas velocity in each of the coordinate directions. Normally, these are all 0~m/s, but there are a few applications where it is
convenient to start the flow immediately, like in an outdoor simulation involving wind.
\end{description}

\subsection{Stopping and Restarting Calculations}
\label{info:restart}\index{Restart}

An important {\ct MISC} parameter is called {\ct RESTART}. Normally, a simulation consists of a sequence of events
starting from ambient conditions. However, there are occasions
when you might want to stop a calculation, make a few
limited adjustments, and then
restart the calculation from that point in time. To do this,
first bring the calculation to a halt gracefully by creating a file
called {\bf CHID.stop}
in the directory where the output files are located. Remember that
FDS is case-sensitive. The file name must be exactly the same as
the {\ct CHID} and `stop' should be lower case. FDS checks for the
existence of this file at each time step, and if it finds it, gracefully
shuts down the calculation after first creating a final Plot3D
file and a file (or files in the case of a multiple mesh job)
called {\bf CHID.restart} (or {\bf CHID\_nn.restart}).
To restart a job, the file(s) {\bf CHID.restart} should exist in
the working directory, and
the phrase {\ct RESTART=.TRUE.} needs to be added
to the {\ct MISC} line of the input data file.
For example, suppose that the job
whose {\ct CHID} is ``plume'' is halted by creating a
dummy file called {\bf plume.stop} in the directory where
all the output files are being created. To restart this job from where it
left off, add {\ct RESTART=.TRUE.} to the {\ct MISC} line
of the input file {\bf plume.fds}, or whatever you have chosen to
name the input file. The existence of a restart file with the same
{\ct CHID} as the original job tells FDS
to continue saving the new data in the same files as the old.  If {\ct RESTART\_CHID} is also specified on the
{\ct MISC} line, then FDS will look for old output files tagged with this string instead of using the specified
{\ct CHID} on the {\ct HEAD} line. In this case, the new output files will be tagged with {\ct CHID}, and the
old output files will not be altered.

When running the restarted job, the diagnostic
output of the restarted job is appended to the file {\bf CHID.out} that was created by
the original job.
All of the other output files from the original run are appended as well.

There may be times when you want to save restart files periodically
during a run as insurance against power outages or system crashes.
If this is the case, at the start of the original run
set {\ct DT\_RESTART=50.} on the {\ct DUMP} line to save restart files
every 50~s, for example.
The default for {\ct DT\_RESTART} is 1000000, meaning no restart files are
created unless you gracefully stop a job by
creating a dummy file called {\bf CHID.stop}.

It is also possible to use the new control function feature (see Section~\ref{info:CTRL})
to stop a calculation or dump a restart file when the computation reaches
some measurable condition such as a first sprinkler activation.

Between job stops and restarts, major changes cannot be made in the calculation
like adding or removing vents and obstructions. The changes are limited to those parameters that do
not instantly alter the existing flow field. Since the restart
capability has been used infrequently by the developers, it should be considered
a fragile construct. Examine the output
to ensure that no sudden or unexpected events occur during the stop and
restart.


\subsection{Special Topic: Defying Gravity}
\label{info:GVEC}

Most users of FDS assume that the acceleration of gravity\index{gravity} points toward
the negative end of the $z$ axis, or more simply, downward.
However, to change the direction of gravity to model
a sloping roof or tunnel, for example, specify the gravity
vector on the {\ct MISC} line with a triplet of numbers of the form
{\ct GVEC=0.0, 0.0, -9.81} (units are m/s$^2$). This is the default, but it
can be changed to be any direction.

Note: if sprinklers are specified, the gravity vector must not be
changed. Much of the logic governing the trajectories of water droplets
over solid objects assumes that gravity points in the negative $z$
direction.

There are a few special applications where you might want to vary the gravity vector in
time, for instance, for spacecraft applications. The gravity vector, {\ct GVEC}, can be
made a function of time using ``ramps'' for the individual components, {\ct RAMP\_GX},
{\ct RAMP\_GY}, and {\ct RAMP\_GZ}, all specified on the {\ct MISC} line. More about
{\ct RAMP}s can be found in Section~\ref{info:RAMP}.


\subsection{Special Topic: Restoring the Baroclinic Vorticity}
\index{baroclinic torque}

There is an approximation made when solving for the pressure where it is assumed that
\be \nabla \cdot \frac{1}{\rho} \nabla \tp = \frac{1}{\rho_\infty} \nabla^2 \tp \label{Happrox} \ee
The consequence of this approximation is that the vorticity generated
due to the non-alignment of the density and pressure gradients, or the
baroclinic torque, is neglected. For most large scale applications,
the assumption is justified by the fact that the vorticity generated by
buoyancy is the dominant source of vorticity.
By neglecting the baroclinic torque the
solution of the elliptic partial differential equation obtained by
taking the divergence of the momentum equation is greatly simplified.
However, an option exists in the code to restore the baroclinic torque by
decomposing the relevant term in the pressure equation
\be \nabla \cdot \frac{1}{\rho^n} \nabla \tp^n = \nabla \cdot \frac{1}{\overline{\rho}^n} \nabla \tp^n +
   \nabla \cdot \left( \frac{1}{\rho^n} - \frac{1}{\overline{\rho}^n} \right) \nabla \tp^{n-1}   \ee
and evaluating the second term on the right hand side with values of
pressure from the
previous time step. The expression $\overline{\rho}$ is an average density,
equal to $2 \rho_{\min} \rho_{\max} / (\rho_{\min} + \rho_{\max})$.
To make this correction, simply include the statement {\ct BAROCLINIC=.TRUE.}
on the {\ct MISC} line. In a DNS calculation ({\ct DNS=.TRUE.}), the
correction is made by default. However, for an LES calculation (the default mode in FDS),
the correction must be explicitly invoked. The cost of the
correction is not prohibitive -- try calculations with and without
the correction to determine if its inclusion is warranted.




\subsection{Special Topic: Stack Effect}
\label{info:stackeffect} \index{stack effect}

Tall buildings often experience buoyancy-induced air movement due to temperature differences
between inside and outside, known as {\em stack effect}. To simulate this phenomenon in FDS, you must
include the entire building, or a substantial fraction of it, both inside and out, in the computational domain. It
is important to capture the pressure and density decrease in the atmosphere based on the specified
temperature {\ct LAPSE\_RATE} ($^\circ$C/m) that is entered on the {\ct MISC} line. Experiment with different meshing
strategies before including any fire or HVAC \index{HVAC} functionality. Slowly build in complexity.


\subsection{Special Topic: Large Eddy Simulation Parameters}
\label{info:LES} \index{Large Eddy Simulation}

In default mode, FDS uses the Smagorinsky form of Large Eddy Simulation (LES) to model subgrid-scale turbulence.
The viscosity $\mu$ is modeled
\be \mu_{\hbox{\tiny LES}} = \rho \, (C_s\, \Delta)^2 \,
   \left(2 \; \overline{\bS}_{ij} \cdot \overline{\bS}_{ij} - \frac{2}{3} (\nabla \cdot \overline{\bu})^2 \right)^\ha \ee
where $C_s$ is an empirical constant and $\Delta$ is a length on the
order of the size of a grid cell.
The bar above the various quantities denotes that these are the resolved, or {\em filtered}, values, meaning
that they are computed on a numerical grid.
The other diffusive parameters,
the thermal conductivity and material diffusivity, are related to the turbulent viscosity by
\be k_{\hbox{\tiny LES}} = \frac{\mu_{\hbox{\tiny LES}} \, c_p}{\PR_t}
\quad ; \quad
 (\rho D)_{l,\hbox{\tiny LES}} =\frac{\mu_{\hbox{\tiny LES}}}{\SC_t} \ee
The turbulent Prandtl number $\PR_t$ and the turbulent Schmidt number $\SC_t$ are assumed to be
constant for a given scenario. Although it is not recommended for most calculations, you can modify
$C_s=0.2$, $\PR_t=0.5$, and $\SC_t=0.5$ via the parameters {\ct CSMAG}, {\ct PR}, and {\ct SC} on the {\ct MISC} line. A more detailed
discussion of these parameters is given in the FDS Technical Reference Guide~\cite{FDS_Tech_Guide_5}.



\subsection{Special Topic: Numerical Stability Parameters}
\label{info:CFL}

The time step of an FDS simulation is constrained by the convective and diffusive
transport speeds via two conditions. The first is known as the
Courant-Friedrichs-Lewy (CFL) condition. The CFL condition asserts that the solution of the equations cannot be updated with a time step
larger than that which would allow a parcel of fluid to travel further than a single mesh cell.
In each mesh cell of dimension $\dx$ by $\dy$ by $\dz$ with velocity
components $u$, $v$, and $w$, the CFL number is defined:
\be \hbox{CFL} = \dt \; \max \left(\frac{|\hu|}{\dx},\frac{|\hv|}{\dy},\frac{|\hw|}{\dz} \right)   \label{cfl}
\ee
Every time step, the CFL number is computed in each mesh cell, and the time step, $\dt$, is adjusted if the
maximum value of the CFL number is not between {\ct CFL\_MIN} and {\ct CFL\_MAX}, whose default values are
0.8 and 1.0, respectively. These values are included in the {\ct MISC} namelist group.

A similar condition, but one constraining the time step when diffusive transport dominates, is sometimes called
the Von Neumann condition. The Von Neumann number is defined:
\be
\hbox{VN} = 2 \, \max \left( \nu , D , \frac{k}{\rho c_p} \right)  \; \dt  \left(\frac{1}{\dx^2}+\frac{1}{dy^2}+\frac{1}{\dz^2} \right)
\ee
Like the CFL number, VN is computed in each mesh cell, and the time step is adjusted if VN is outside the
range between {\ct VN\_MIN} and {\ct VN\_MAX}, which are 0.8 and 1.0 by default.
Note that this constraint is applied to the momentum, mass and energy equations via the
relevant diffusion parameter -- viscosity, material diffusivity or thermal conductivity.
This constraint on the time step is typical
of any explicit, second-order numerical scheme for solving a parabolic partial differential
equation. To save CPU time, the Von Neumann criterion is only invoked for DNS calculations or for LES
calculations with mesh cells smaller than 5~mm.

\begin{warning}
Resetting the stability parameters is not recommended except in very special circumstances, as they can lead to
simulations failing due to numerical instabilities.
\end{warning}


\clearpage


\section{Special Topic: Unusual Initial Conditions: The \texorpdfstring{{\tt INIT}}{INIT} Namelist Group (Table \ref{tbl:INIT})}
\label{info:INIT}\index{INIT}

Usually, an FDS simulation begins at time $t=0$ with ambient conditions. The air temperature is
assumed constant with height, and the density and pressure decrease with height (the $z$ direction). This
decrease is not noticed in most building scale calculations, but it is important in large outdoor
simulations. There are some scenarios for which it is convenient to change the ambient conditions within some
rectangular region of the domain. If so, add lines of the form

\footnotesize
\begin{verbatim}
&INIT XB=0.5,0.8,2.1,3.4,2.5,3.6, TEMPERATURE=30. /
\end{verbatim}

\normalsize
Here, within the region whose bounds are given by the sextuplet {\ct XB},
the initial temperature shall be 30~$^\circ$C instead of the ambient.
This construct can also be used for {\ct DENSITY} or
{\ct MASS\_FRACTION(N)} where {\ct N} indicates the {\ct N}th species listed in the input file.

The {\ct INIT} construct may be useful in examining the influence of
stack effect \index{stack effect} in a building, where the temperature
is different inside and out.

Note that a solid obstruction can be given an initial temperature via the
parameter {\ct TMP\_INNER} on the {\ct SURF} line. An initial velocity
can be prescribed via {\ct U0}, {\ct V0}, and {\ct W0} on the {\ct MISC} line.



\section{Special Topic: Setting Limits: The \texorpdfstring{{\tt CLIP}}{CLIP} Namelist Group (Table \ref{tbl:CLIP})}
\label{info:CLIP}\index{CLIP}

On rare occasions you might need to set upper or lower bounds on the density, temperature, or species mass fractions. The parameters
listed in Table~\ref{tbl:CLIP} are for diagnostic purposes only.








\chapter{Building the Model}

A considerable amount of work in setting up a calculation lies in specifying the
geometry of the space to be modeled and applying boundary conditions
to these objects. The geometry is described in terms
of rectangular obstructions that can heat up, burn, conduct heat, {\em etc.};
and vents from which air or fuel can be
either injected into, or drawn from, the flow domain.
A boundary condition needs to be assigned to each obstruction
and vent describing its thermal properties. A fire is just one type of
boundary condition. This chapter describes how to build the model. The next
chapter describes how to assign properties to the boundaries.



\section{Creating Obstructions: The \texorpdfstring{{\tt OBST}}{OBST} Namelist Group (Table \ref{tbl:OBST})}
\label{info:OBST}\index{OBST}

The namelist group {\ct OBST} contains parameters used to define obstructions.
Each {\ct OBST} line contains the coordinates of a rectangular
solid within the flow domain. This solid is defined by two points
($x_1$,$y_1$,$z_1$) and ($x_2$,$y_2$,$z_2$) that are entered on the
{\ct OBST} line in terms of the sextuplet {\ct XB = X1, X2, Y1, Y2, Z1, Z2}.
In addition to the coordinates, the boundary conditions for the obstruction
can be specified with the parameter {\ct SURF\_ID}, which designates which
{\ct SURF} group (Section~\ref{info:SURF}) to apply at the surface of the obstruction.
If the obstruction has different properties for its top,
sides and bottom, do not specify only one {\ct SURF\_ID}. Instead, use {\ct SURF\_IDS}, an array of three character
strings specifying the boundary condition {\ct ID}s for the top,
sides and bottom of the obstruction, respectively.
If the default
boundary condition is desired, then {\ct SURF\_ID(S)} need not be set.
However, if at least one of the surface conditions for an
obstruction is the inert default, it can be referred to as {\ct 'INERT'}.
For example:

\footnotesize
\begin{verbatim}
&SURF ID='FIRE',HRRPUA=1000.0 /
&OBST XB=2.3,4.5,1.3,4.8,0.0,9.2,SURF_IDS='FIRE','INERT','INERT' /
\end{verbatim}
\normalsize
puts a fire on top of the obstruction. This is a simple way of
prescribing a burner.

\noindent
Some additional features of obstructions are as follows:
\begin{itemize}
\item In addition to {\ct SURF\_ID} and {\ct SURF\_IDS}, you can also use
the sextuplet {\ct SURF\_ID6} as follows:

\footnotesize
\begin{verbatim}
&OBST XB=2.3,4.5,1.3,4.8,0.0,9.2,
      SURF_ID6='FIRE','INERT','HOT','COLD','BLOW','INERT' /
\end{verbatim}
\normalsize
where the six surface descriptors refer to the planes $x=2.3$, $x=4.5$, $y=1.3$, $y=4.8$,
$z=0.0$, and $z=9.2$, respectively.
Note that {\ct SURF\_ID6} should not be used on the same {\ct OBST}
line as {\ct SURF\_ID} or {\ct SURF\_IDS}.
\item Obstructions can have zero thickness. Often, thin sheets, like a window, form a barrier,
but if the numerical mesh is coarse relative to the thickness of the barrier, the obstruction
might be unnecessarily large if it is assumed to be one layer of mesh cells thick. All faces
of an obstruction are shifted to the closest mesh cell. If the obstruction is very thin, the two
faces may be approximated on the same cell face. FDS and Smokeview render
this obstruction as a thin sheet, but it is allowed to have thermally
thick boundary conditions. This feature is fragile, especially in terms
of burning and blowing gas. A thin sheet obstruction can only have one velocity
vector on its face, thus a gas cannot be injected reliably from a
thin obstruction because whatever is pushed from one side is necessarily pulled from the other.
For full functionality, the obstruction should be specified to
be at least one mesh cell thick. Thin sheet obstructions
work fine as flow barriers, but other features are fragile and should be used with
caution. To prevent FDS from allowing thin sheet obstructions, set {\ct THICKEN\_OBSTRUCTIONS=.TRUE.} on the
{\ct MISC} line, or {\ct THICKEN=.TRUE.} on each {\ct OBST} line for which the thin sheet assumption is not allowed.
\item Unlike earlier versions of FDS, obstructions that are
too small relative to the underlying numerical mesh are rejected.
Be careful when testing cases on coarse meshes.
\item Obstructions may be created or removed during a simulation. See
Section~\ref{info:create_remove} for details.
\item If two obstructions overlap at one or more faces, the one listed last in the input file takes precedence over the one
listed first, in the sense that the latter's surface properties will be applied to the overlapping face. Smokeview renders both obstructions
independently of each other, often leading to an unsightly cross-hatching of the two surface colors where there is an overlap. A
simple remedy for this is to ``shrink'' the first obstruction slightly by adjusting its coordinates ({\ct XB}) accordingly. Then, in
Smokeview, toggle the ``q'' key to show the obstructions as you specified them, rather than as FDS rendered them.
\item Obstructions can be protected from the {\ct HOLE} punching feature. Sometimes
it is convenient to create a door or window using a {\ct HOLE}. For example, suppose a
{\ct HOLE} is punched in a wall to represent a door or window. An obstruction can be
defined to fill this hole (presumably to be removed or colored differently or whatever) so
long as the phrase {\ct PERMIT\_HOLE=.FALSE.} is included on the {\ct OBST} line. In general,
any {\ct OBST}ruction can be made impenetrable to a {\ct HOLE} using this phrase. By default,
{\ct PERMIT\_HOLE=.TRUE.}, meaning that an {\ct OBST}ruction is assumed to be penetrable unless
otherwise directed.
\item If the obstruction is not to be removed or rejected for any reason, set {\ct REMOVABLE=.FALSE.} This is sometimes needed to stop
FDS from removing the obstruction if it is embedded within another, like a door within a wall.
\item In rare cases, you might not want to allow a {\ct VENT} to be attached to a particular obstruction, in which case set
{\ct ALLOW\_VENT=.FALSE.}
\item Obstructions can be made semi-transparent by assigning a {\ct TRANSPARENCY} on the {\ct OBST} line. This real parameter ranges from
0 to 1, with 0 being fully transparent. The parameter should always be set along with either {\ct COLOR} or an {\ct RGB} triplet. It can
also be specified on the appropriate {\ct SURF} line, along with a color indicator.
\item Obstructions are drawn solid in Smokeview. To draw an outline representation, set {\ct OUTLINE=.TRUE.}
\end{itemize}

\subsection{Non-rectangular Geometry and Sloped Ceilings}
\label{info:SAWTOOTH}
\index{Sawtooth}
\index{Sloped Ceilings}
The efficiency of FDS is due to the simplicity of its numerical mesh.
However, there are situations in which certain geometric features do
not conform to the rectangular mesh, such as a sloped ceiling or roof. In these cases,
construct the curved geometry using rectangular obstructions, a process
sometimes called ``stair stepping''. A concern is that
the stair stepping changes the flow pattern near the wall. To lessen
the impact of stair stepping on the flow field near the wall,
prescribe the parameter

\footnotesize
\begin{verbatim}
SAWTOOTH=.FALSE.
\end{verbatim}
\normalsize

\noindent
on each {\ct OBST} line that makes up the stair stepped obstruction.
The effect of this parameter is to prevent vorticity from being generated
at sharp corners, in effect smoothing out the jagged steps that make up
the obstruction. This is not a complete solution of the problem, but it
does provide a simple way of ensuring that the flow field around a
non-rectangular obstruction is not inhibited by extra drag created at
sharp corners.

\begin{warning}
Do not apply {\ct SAWTOOTH=.FALSE.} to obstructions that have any {\ct SURF\_ID}s with the
attribute {\ct BURN\_AWAY=.TRUE.}
\end{warning}




\section{Creating Voids: The \texorpdfstring{{\tt HOLE}}{HOLE} Namelist Group (Table \ref{tbl:HOLE})}
\label{info:HOLE}\index{HOLE}

The {\ct HOLE} namelist group is used to define parameters (Table \ref{tbl:HOLE}) to carve a hole
out of an existing obstruction or set of obstructions. \index{HOLE!XB}To do this, add lines of the form

\footnotesize
\begin{verbatim}
&HOLE XB=2.0,4.5,1.9,4.8,0.0,9.2 /
\end{verbatim}
\normalsize
Any solid mesh cells within the volume $2.0<x<4.5$, $1.9<y<4.8$,
$0.0<z<9.2$ are removed. Obstructions intersecting the volume are
broken up into smaller blocks.

\begin{notebox}
\noindent
If the hole represents a door or window, a good rule of thumb is to punch more than enough to create the hole.
This ensures that the hole is created through the entire obstruction.
\end{notebox}

\noindent
For example, if the {\ct OBST} line denotes a wall 0.1 m thick:

\footnotesize
\begin{verbatim}
&OBST XB=1.0,1.1,0.0,5.0,0.0,3.0 /
\end{verbatim}
\normalsize
and you want to create a door, add this:

\footnotesize
\begin{verbatim}
&HOLE XB=0.99,1.11,2.0,3.0,0.0,2.0 /
\end{verbatim}
\normalsize
The extra centimeter added to the $x$ coordinates of the hole make it clear
that the hole is to punch through the entire obstruction.

When a {\ct HOLE} is created, the affected obstruction(s) are either rejected, or
created or removed at pre-determined times. See Section~\ref{info:create_remove} for details.
To allow a hole to be controlled with either the {\ct CTRL} or {\ct DEVC} namelist groups, you will need to add the {\ct CTRL\_ID} or {\ct DEVC\_ID}
parameter respectively, to the {\ct HOLE} line.\index{HOLE!CTRL\_ID} \index{HOLE!DEVC\_ID}

If it is desired that the obstruction(s) to be cut out should have a different color
than the original obstruction, set the {\ct COLOR} \index{HOLE!COLOR} or integer triplet
{\ct RGB} \index{HOLE!RGB} on the {\ct HOLE} line (see Section~\ref{info:colors}).

When a {\ct HOLE} is in a {\ct .FALSE.} state, an obstruction is placed in the hole.
To make this obstruction transparent, the {\ct TRANSPARENCY}\index{HOLE!TRANSPARENCY} parameter should be specified by
a real number from 0-1. Note that if {\ct TRANSPARENCY} is specified, then either a {\ct COLOR} or {\ct RGB} triplet ought to be specified as well.
A {\ct TRANSPARENCY} value near, but not equal to, zero can be used to simulate a window when the {\ct HOLE}'s {\ct INITIAL\_STATE=.FALSE.} When the {\ct DEVC} or {\ct CTRL}
is activated and changes the state of the hole to {\ct .TRUE.}, the {\ct HOLE} is then open and completely transparent.
See Section~\ref{create_remove} for an example.

If an obstruction is not to be punctured by a {\ct HOLE}, add
{\ct PERMIT\_HOLE=.FALSE.} to the {\ct OBST} line.\index{OBST!PERMIT\_HOLE}

\begin{warning}
\noindent
It is a good idea to inspect the geometry by running either a setup job
({\ct T\_END=0} on the {\ct TIME} line) or a short-time job to test the operation of devices and control functions.
\end{warning}

\begin{warning}
\noindent
Note that a {\ct HOLE} has no effect on a {\ct VENT} or a mesh boundary. It only applies to {\ct OBST}structions.
\end{warning}



\section{Applying Surface Properties: The \texorpdfstring{{\tt VENT}}{VENT} Namelist Group (Table \ref{tbl:VENT})}
\label{info:VENT} \index{VENT}

Whereas the {\ct OBST} group is used to specify obstructions within the
computational domain, the {\ct VENT} group (Table \ref{tbl:VENT}) is used to prescribe planes
adjacent to obstructions or external walls. The vents are chosen in a
similar manner to the obstructions, with the sextuplet {\ct XB}
denoting a plane abutting a solid surface. Two of the six coordinates must
be the same, denoting a plane as opposed to a solid.

The term ``{\ct VENT}'' is somewhat misleading. Taken literally, a
{\ct VENT} can be used to model components of the ventilation system in
a building, like a diffuser or a return.
In these cases, the {\ct VENT} coordinates form a plane on a
solid surface forming the boundary of the duct.
No holes need to be created through the solid; it is
assumed that air is pushed out of or sucked into duct work within the
wall. Less literally, a {\ct VENT} is used simply as a means of applying
a particular boundary condition to a rectangular patch on a solid surface.
A fire, for example, is usually created by first generating a solid
obstruction via an {\ct OBST} line, and then specifying a {\ct VENT}
somewhere on one of the faces of the solid with a {\ct SURF\_ID}
with the characteristics of the thermal and combustion properties of the fuel.
For example, the lines

\footnotesize
\begin{verbatim}
&OBST XB=0.0,5.0,2.0,3.0,0.0,4.0, SURF_ID='big block' /
&VENT XB=1.0,2.0,2.0,2.0,1.0,3.0, SURF_ID='hot patch' /
\end{verbatim} \normalsize

\noindent
specify a large obstruction (with the properties given elsewhere in the file under the name {\ct 'big block'}) with
a ``patch'' applied to one of its faces with alternative properties under the name {\ct 'hot patch'}. This latter
surface property need not actually be a ``vent,'' like a supply or return duct, but rather just a patch with different boundary
conditions than those assumed for the obstruction. Note that the surface properties of a {\ct VENT} over-ride those of the
underlying obstruction.

An easy way to specify an entire external wall is to replace {\ct XB} with
{\ct MB} (Mesh Boundary)\index{MB - Mesh Boundary}, a character string whose value is one of the following:
{\ct 'XMAX'}, {\ct 'XMIN'}, {\ct 'YMAX'}, {\ct 'YMIN'}, {\ct 'ZMAX'} or
{\ct 'ZMIN'} denoting the planes $x=\hbox{\ct XMAX}$, $x=\hbox{\ct XMIN}$,
$y=\hbox{\ct YMAX}$, $y=\hbox{\ct YMIN}$, $z=\hbox{\ct ZMAX}$
or $z=\hbox{\ct ZMIN}$, respectively.
Like an obstruction, the boundary condition index of a vent is specified
with {\ct SURF\_ID}, indicating which of the listed {\ct SURF} lines to
apply. If the default boundary condition is desired, then {\ct SURF\_ID} need not be set.

Be careful when using the {\ct MB} shortcut when doing a multiple mesh
simulation, that is, when more than one rectangular mesh is used. The
plane designated by the keyword {\ct MB} is applied to all of the
meshes, possibly leading to confusion about whether a plane is a solid
wall or an open boundary. Check the geometry in Smokeview to assure that
the {\ct VENT}s are properly prescribed. Use color as much as
possible to double-check the set-up.  More detail on color in
Section~\ref{info:colors} and Table \ref{tab:colors}. Also, the parameter {\ct OUTLINE=.TRUE.} causes the
{\ct VENT} to be drawn as an outline in Smokeview.


\subsection{Special {\tt VENT}s}

There are two reserved {\ct SURF\_ID}'s that may be applied to a {\ct VENT}.
The first is {\ct SURF\_ID='OPEN'}. This is used only if the {\ct VENT}
is applied to the exterior boundary of the computational domain, where
it denotes a passive opening to the outside. It is assumed here that
the exterior boundary of the computational domain is a solid wall, and
the {\ct OPEN} vent is essentially an open door or window.
The second reserved {\ct SURF\_ID} is for a symmetry plane, in which
case the {\ct VENT} has the attribute {\ct SURF\_ID='MIRROR'}.
Usually, a {\ct MIRROR} spans an entire face of the computational
domain, essentially doubling the size of the domain with the {\ct MIRROR}
acting as a plane of symmetry. The flow on the opposite side of the
{\ct MIRROR} is exactly reversed. From a numerical point of view,
a {\ct MIRROR} is a no-flux, free-slip boundary.
As with {\ct OPEN}, a {\ct MIRROR} can only be prescribed at an
exterior boundary of the computational domain.
Often, {\ct OPEN} or {\ct MIRROR} {\ct VENT}s are prescribed along an
entire side of the computational domain, in which case the ``{\ct MB}''
notation is handy.

\begin{warning}
\noindent
Note that the mirror image of a scene is {\bf not} shown in Smokeview.
\end{warning}

\begin{warning}
Vents to the outside of the computational domain ({\ct OPEN} vents)
may {\bf not} be opened or closed during a simulation. See Section~\ref{info:activate_deactivate} for details.
\end{warning}

\begin{warning}
Unlike previous versions of FDS, you can no longer specify a free-standing fan using the {\ct VENT}
construct. A {\ct VENT} must always be attached to a solid obstruction. See
Section~\ref{info:ZONE} for instructions on specifying different types of fans.
\end{warning}


\subsection{Controlling {\tt VENT}s}

{\ct VENT} functionality can be controlled in some cases using ``devices'' and ``controls,'' specified via a {\ct DEVC\_ID} or a {\ct CTRL\_ID}.
See Section~\ref{info:activate_deactivate} for details.



\subsection{Trouble-Shooting {\tt VENT}s}

If an error message appears requesting that \index{Troubleshooting!VENT Orientation}
the orientation of a vent be specified, first check to make sure that the vent is a plane.
If the vent is a plane, then the orientation can be forced by specifying the parameter {\ct IOR}.
If the normal direction of the {\ct VENT} is in the positive $x$ direction, set {\ct IOR=1}.
If the normal direction is in the negative $x$ direction, set {\ct IOR=-1}. For the $y$ and
$z$ direction, use the number 2 and 3, respectively. Setting {\ct IOR} may sometimes solve
the problem, but it is more likely that if there is an error message about orientation, then
the {\ct VENT} is buried within a solid obstruction, in which case the program cannot determine
the direction in which the {\ct VENT} is facing.










\chapter{Boundary Conditions}
\index{boundary conditions}

This chapter describes how to specify the properties of the objects
that make up the bounding surfaces of the flow domain. {\bf This is
the most challenging part of setting up the simulation.} Why?  First,
for both real and simulated fires, the growth of the fire is very
sensitive to the thermal properties of the surrounding
materials. Second, even if all the material properties are known to
some degree, the physical phenomena of interest may not be simulated
properly due to limitations in the model algorithms or resolution of
the numerical mesh. It is your responsibility to supply the thermal
properties of the materials, and then assess the performance of the
model to ensure that the phenomena of interest are being captured.


\section{Basics}

By default, the outer boundary of the computational domain is assumed
to be a solid boundary that is maintained at ambient temperature. The
same is true for any obstructions that are added to the scene. To
specify the properties of solids, use the namelist group {\ct SURF}
(Section~\ref{info:SURF}). Starting in FDS 5, solids are assumed to
consist of layers which can be made of different materials.  The
properties of each material required are designated via the {\ct MATL}
namelist group (Section~\ref{info:MATL}).  These properties indicate how
rapidly the materials heat up, and how they burn.  Each {\ct MATL}
entry in the input file must have an {\ct ID}, or name, so that they
may be associated with a particular {\ct SURF} via the parameter {\ct
MATL\_ID}.  For example, the input file entries:

\footnotesize
\begin{verbatim}
&MATL ID             = 'BRICK'
      CONDUCTIVITY   = 0.69
      SPECIFIC_HEAT  = 0.84
      DENSITY        = 1600. /

&SURF ID        = 'BRICK WALL'
      MATL_ID   = 'BRICK'
      COLOR     = 'RED'
      BACKING   = 'EXPOSED'
      THICKNESS = 0.20 /

&OBST XB=0.1, 5.0, 1.0, 1.2, 0.0, 1.0, SURF_ID='BRICK WALL' /
\end{verbatim}
\normalsize

\noindent
define a brick wall that is 4.9~m long, 1~m high, and 20~cm thick.
\begin{warning}
\noindent
The thickness of the wall indicated by the {\ct OBST} line need not
match that indicated by the {\ct SURF} line. The thickness of the material on the surface of the wall
is dictated by the parameter {\ct THICKNESS}.  These two parameters are independent for each other,
the {\ct OBST} line describes the overall geometric structure, the {\ct SURF} line describes the
characteristics of the surfaces of the geometry which includes the thickness of the layers of
materials applied to that surface.
\end{warning}
\index{SURF!THICNKNESS}

\section{Describing the Bounding Surfaces: The \texorpdfstring{{\tt SURF}}{SURF} Namelist Group (Table \ref{tbl:SURF})}
\label{info:SURF}\index{SURF}

{\ct SURF} is the namelist group (Table \ref{tbl:SURF}) that defines
the structure of all solid surfaces or openings within or
bounding the flow domain. Boundary conditions for obstructions and vents are \index{boundary conditions}
prescribed by referencing the appropriate {\ct SURF} line(s) whose
parameters are described in this section.

The default boundary condition for all solid surfaces is that of a
cold, inert wall. If only this
boundary condition is needed, there is no need to add any {\ct SURF} lines
to the input file. If additional boundary conditions are desired,
they are to be listed one boundary condition at a time.
Each {\ct SURF} line consists of an identification string {\ct ID='...'} to
allow references to it by an obstruction or vent. Thus, on each
{\ct OBST} and {\ct VENT} line, the character string {\ct SURF\_ID='...'}
indicates the {\ct ID} of the {\ct SURF} line containing the desired boundary
condition parameters. If a particular {\ct SURF} line is to be applied
as the default boundary condition, {\ct CONCRETE} for example,
set {\ct SURF\_DEFAULT='CONCRETE'} on the {\ct MISC} line.

\begin{notebox}
\noindent
The default boundary condition {\ct INERT} does allow for heat loss and is not the same as an adiabatic surface.
If you wish to define a surface as adiabatic, then you should set {\ct ADIABATIC=.TRUE.} on the {\ct SURF} line.
\end{notebox}
\index{SURF!ADIABATIC}


\subsection{Specifying a Fire with a Known Heat Release Rate}
\index{HRRPUA} \index{Fire from Heat Release Rate}

Solids and liquid fuels can be modeled by specifying their relevant
properties via the {\ct MATL} namelist group. However, if you simply
want to specify a fire of a given heat release rate (HRR),
you need not specify any material properties. A specified fire is
basically modeled as the ejection of gaseous fuel
from a solid surface or vent. This is essentially a burner, with a
specified Heat Release Rate Per Unit Area, {\ct HRRPUA}, in units of
kW/m$^2$. For example

\footnotesize
\begin{verbatim}
&SURF ID='FIRE',HRRPUA=500. /
\end{verbatim}
\normalsize

\noindent
applies 500~kW/m$^2$ to any surface with the attribute
{\ct SURF\_ID='FIRE'}. See the discussion of {\bf Time Dependent Conditions}
in Section~\ref{info:RAMP} to learn how to ramp the heat release rate up and down.

An alternative to {\ct HRRPUA} with the exact same functionality is
{\ct MLRPUA}, except this parameter \index{MLRPUA}
specifies the Mass Loss Rate of fuel gas Per Unit Area in kg/m$^2$/s. Do not specify both
{\ct HRRPUA} and {\ct MLRPUA} on the same {\ct SURF} line. With either,
the stoichiometry of the gas phase reaction is set by the
parameters on the {\ct REAC} line. All of the
species associated with the combustion process are accounted for
by way of the mixture fraction variable and should not be
explicitly prescribed. The exception to this rule is
where a non-reacting gas is introduced into the domain that merely serves
as a diluent, like CO$_2$ from an extinguisher or H$_2$O from evaporated
sprinkler droplets (see Section~\ref{info:SPEC} for details).
If a finite rate combustion model is desired instead of the default mixture
fraction model, see Section~\ref{info:finite}.

\begin{warning}
Specifying {\ct HRRPUA} or {\ct MLRPUA} automatically invokes the mixture fraction
combustion model.
\end{warning}



\subsection{Simple Thermal Boundary Conditions}
\label{info:thermalboundary} \index{fixed surface temperature}
\index{SURF!TMP\_FRONT}
\index{SURF!CONVECTIVE\_HEAT\_FLUX}
\index{SURF!EMISSIVITY}

Usually, the thermal properties of a solid boundary are specified via the
{\ct MATL} namelist group, which is in turn invoked by the {\ct SURF} entry via
the character string {\ct MATL\_ID}. However, sometimes it is convenient to
simply specify a fixed temperature boundary condition, in which case set
{\ct TMP\_FRONT} to be the surface temperature in units of $^\circ$C.
For a solid surface of fixed convective heat flux, set {\ct CONVECTIVE\_HEAT\_FLUX} to be
the convective heat flux in units of kW/m$^2$. If {\ct CONVECTIVE\_HEAT\_FLUX} is
positive, the wall heats up the surrounding gases. If {\ct CONVECTIVE\_HEAT\_FLUX}
is negative, the wall cools the surrounding gases. The radiative heat
flux can be specified only by setting both {\ct TMP\_FRONT} and {\ct EMISSIVITY}.

Fixed temperature or fixed heat flux boundary conditions are
easy to apply, but only of limited usefulness in real fire scenarios.
In most cases, walls, ceilings and floors are made up of several layers
of lining materials.

It is assumed that the innermost layer backs up to an air gap at ambient
temperature (like a sheet of gypsum board attached to wood studs), or
it backs up to an insulated material in which case no heat is lost to
the backing material, or it backs up to the room on the other side of
the wall. By default, it is assumed that the wall liner backs up to an air gap
({\ct BACKING='VOID'}). If the wall liner is assumed to back up
against an insulating material, like a sheet of steel attached to a
fiber insulating board, the expression {\ct BACKING='INSULATED'} on
the {\ct SURF} line prevents any heat loss from the back side of the material.
\index{SURF!BACKING}

Finally, if it is desired that the heat transfer
through the wall into the space behind the wall, the attribute
{\ct BACKING='EXPOSED'} should be listed. This feature only works
if the wall is less than or equal to one mesh cell thick, and if there is a non-zero volume
of computational domain on the other side of the wall. Obviously, if
the wall is an external boundary of the domain, the heat is lost
to the void.

For some special applications, it is often desired that a solid
surface be adiabatic, that is, there is no net heat transfer
(radiative and convective) from the gas to the solid. For this case,
all that must be prescribed on the {\ct SURF} line is {\ct
ADIABATIC=.TRUE.}, nothing else.  FDS will compute a wall temperature
so that the sum of the convective and radiative fluxes is zero.
\index{SURF!ADIABATIC}

\subsection{Velocity and Total Mass Flux Boundary Conditions}
\index{Volume Flux} \index{Mass Flux}
\index{SURF!VOLUME\_FLUX}
\index{SURF!VEL}
Velocity boundary conditions affect both the normal and tangential
components of the velocity vector at boundaries.
The normal component of velocity is controlled by the parameter
{\ct VEL}. If {\ct VEL} is negative, the flow is entering the
computational domain. If {\ct VEL} is positive, the flow is exiting the
domain.
Sometimes it is desired that a given volume flux through a vent
be prescribed rather than a velocity. If this is the case then
{\ct VOLUME\_FLUX} can be prescribed instead of {\ct VEL}. The units
are m$^3$/s.
If the flow is entering the computational domain, {\ct VOLUME\_FLUX}
should be a negative number.
\begin{warning}
\noindent
Note that either {\ct VEL} or {\ct VOLUME\_FLUX} should be prescribed,
not both.  The choice depends on whether an exact velocity is desired at a
given vent, or whether the given volume flux is desired.
\end{warning}
The dimensions of the vent that are prescribed usually change
because the prescribed vent dimensions are sometimes altered so that
the vent edges line up with mesh cells. Also note that a {\ct SURF}
group with a {\ct VOLUME\_FLUX} prescribed should only be called by a
{\ct VENT}, not an {\ct OBST}.
Finally, note that if {\ct HRRPUA} or solid phase reaction parameters are
specified, no velocity should be prescribed. The combustible gases
are ejected at a velocity computed by the code.

As an example, a simple blowing vent would be described by the line

\footnotesize
\begin{verbatim}
&SURF ID='BLOWER',VEL=-1.2,TMP_FRONT=50. /
\end{verbatim}
\normalsize

\noindent
The vent with {\ct SURF\_ID='BLOWER'} would blow 50~$^\circ$C
air at 1.2 m/s into the flow domain. Making {\ct VEL} positive would
suck air out, in which case {\ct TMP\_FRONT} would not be necessary.

At other times the user may wish that a specific flux of mass, be added or removed at
a vent.  This can be accomplished by specifying the quantity {\ct MASS\_FLUX\_TOTAL}.
{\ct MASS\_FLUX\_TOTAL} uses the same sign convention as {\ct VEL}.  In fact, the value entered for
{\ct MASS\_FLUX\_TOTAL} is converted internally into a velocity boundary condition whose value
for an outflow is adjusted based on the local density.
\index{SURF!MASS\_FLUX\_TOTAL}

The tangential velocity boundary condition controls how the gas
``sticks'' to a solid surface. In theory, the tangential
\index{tangential velocity}component of velocity is zero at the surface, but
increases rapidly through a narrow region called the boundary layer \index{boundary layer}.
For most practical problems, the mesh is not fine enough to resolve the
boundary layer, which is typically a few millimeters thick.
For this reason, in an LES calculation, the velocity at the wall
is set to be a fraction of its value in the mesh cell adjacent to the
wall. Only in a DNS calculation is the velocity at the wall set to zero.
To alter these defaults, set a parameter called
{\ct SLIP\_FACTOR}. \index{SURF!SLIP\_FACTOR} This parameter ranges
from -1 to 1. If a no-slip wall is desired, {\ct SLIP\_FACTOR=-1}. If
a free-slip wall is desired, {\ct SLIP\_FACTOR=1}. Numbers in between
-1 and 1 can represent partial slip conditions, which may be
appropriate for simulations involving large mesh cells.
(Default {\ct SLIP\_FACTOR} is 0.5 for LES, -1.0 for DNS)

In the case of a blowing vent (or even a solid surface),
it is possible to prescribe both the normal and tangential components of the flow (or just the tangential).
The normal component is specified with {\ct VEL} as described above. The tangential is prescribed
via a pair of real numbers {\ct VEL\_T} representing the desired tangential
velocity components. For example, the line

\footnotesize
\begin{verbatim}
&SURF ID='LOUVER',VEL=-1.2,VEL_T=0.5,-0.3 /
\end{verbatim}
\normalsize

\noindent
is a boundary condition for a louver \index{louver}vent that pushes air into the
space with a normal velocity of 1.2~m/s, and with a tangential velocity
of 0.5~m/s in either the $x$ or $y$ direction and -0.3~m/s in either
the $y$ or $z$ direction, depending on what the normal direction is.

\subsection{Species and Species Mass Flux Boundary Conditions}
\index{SURF!MASS\_FLUX}
\index{SURF!MASS\_FRACTION}


There are two species boundary conditions that can be specified
(see Section~\ref{info:SPEC} for details on inputting and using species).
These boundary conditions are {\ct MASS\_FLUX(N)} and {\ct MASS\_FRACTION(N)}
where {\ct N} refers to a given species is via its place in the
input file. For example, the second listed species is {\ct N=2}.
If a simple no-flux condition is desired at a solid wall, do not set
anything. If the mass fraction of the {\ct N}th species is to be some
value at a forced flow boundary ({\ct VEL} or {\ct MASS\_FLUX\_TOTAL}) set
{\ct MASS\_FRACTION(N)} equal to the desired mass fraction on the appropriate
{\ct SURF} line.
If the mass flux of the {\ct N}th species is desired, set
{\ct MASS\_FLUX(N)} instead of {\ct MASS\_FRACTION(N)}.
If {\ct MASS\_FLUX(N)}
is set, no {\ct VEL} should be set. It is automatically
calculated based on the mass flux.
The inputs {\ct MASS\_FLUX(N)} (and typically {\ct MASS\_FRACTION(N)}) should only be used
for inflow boundary conditions.  {\ct MASS\_FLUX(N)} should be positive with
units of kg/m$^2$/s.

\begin{warning}
\noindent
Note that specifying {\ct MASS\_FRACTION(N)}, sets the "ghost" cell values for the species
mass fractions.  Since the mass conservation equation is an advection-diffusion equation,
if the specified velocity is small, then the diffusion term can dominate resulting in an unintended
mass flux of species.  To obtain a guaranteed mass flux of a species, you should use {\ct MASS\_FLUX(N)}
\end{warning}


\subsection{Special Topic: Fires and Flows in the Outdoors}
\label{info:stratification}
\index{outdoor fires}
\index{atmospheric stratification}
\index{SURF!PLE}
\index{SURF!Z0}
\index{SURF!PROFILE}
Simulating a fire in the outdoors is not much different than a fire
indoors, but there are a few issues that need to be addressed.
First, the velocity of the wind profile at any exterior boundary will be a top hat (constant) by default,
but the parameter {\ct PROFILE} on the {\ct SURF} line
can yield other profiles.
For example, {\ct PROFILE='PARABOLIC'} produces a parabolic profile with
{\ct VEL} being the maximum velocity,
and {\ct 'ATMOSPHERIC'} produces a typical atmospheric wind
profile of the form $u=u_0 (z/z_0)^p$. If an atmospheric profile is
prescribed, also prescribe {\ct Z0} for $z_0$  and {\ct PLE} for $p$.
{\ct VEL} specifies the reference velocity $u_0$.

Another useful parameter for outdoor simulations is the temperature
lapse rate of the atmosphere. Typically, in the first few hundred meters
of the atmosphere, the temperature decreases several degrees Celsius
per kilometer. These few degrees are important when considering the rise
of smoke since the temperature of the smoke decreases rapidly as it
rises. The {\ct LAPSE\_RATE} of the atmosphere can be specified on the
{\ct MISC} line in units of $^\circ$C/m. A negative sign indicates that the
temperature {\em decreases} with height.
This need only be set for outdoor calculations where the height of the
domain is tens or hundreds of meters.
The default value of the {\ct LAPSE\_RATE} is 0~$^\circ$C/m.

By default, FDS assumes that the density and pressure decrease with height, regardless of the
application or domain size. For most simulations, this effect is negligible, but it can be
turned off completely by setting {\ct STRATIFICATION=.FALSE.} on the {\ct MISC} line.


\subsection{Special Topic: A Radially-Spreading Fire}
\label{info:spread}
\index{radial fire spread}
\index{SURF!RAMP\_Q}
\index{SURF!HRRPUA}

Sometimes it is desired that a fire spread radially at some specified
rate. Rather than trying to design material properties
to achieve this, you can alternatively use a {\ct VENT} in a special way.
If the {\ct SURF\_ID} associated with a {\ct VENT}
defines a specified heat release rate, {\ct HRRPUA}, and
time history, {\ct RAMP\_Q} or {\ct TAU\_Q}, you can also specify {\ct
XYZ} and {\ct SPREAD\_RATE} on the {\ct VENT} line.
Then the fire is directed to start at the point {\ct XYZ} and spread
radially at a rate of {\ct SPREAD\_RATE} (m/s). The ramp-up begins at
the time when the fire arrives at a given point.
For example, the lines

\footnotesize
\begin{verbatim}
&SURF ID='FIRE', HRRPUA=500.0, RAMP_Q='fireramp' /
&RAMP ID='fireramp', T= 0.0, F=0.0 /
&RAMP ID='fireramp', T= 1.0, F=1.0 /
&RAMP ID='fireramp', T=30.0, F=1.0 /
&RAMP ID='fireramp', T=31.0, F=0.0 /
&VENT XB=0.0,5.0,1.5,9.5,0.0,0.0, SURF_ID='FIRE', XYZ=1.5,4.0,0.0, SPREAD_RATE=0.03 /
\end{verbatim}
\normalsize
create a rectangular patch at $z=0$ on which the fire starts at the
point (1.5,4.0,0.0) and spreads outwards at a rate of 0.03~m/s. Each surface cell
burns for 30~s as the fire spreads outward, creating a widening ring of fire. Note that the {\ct RAMP\_Q} is used in this
construct to turn the burning on and off to simulate the consumption of fuel as the fire spreads radially. It should not
be used to mimic the ``$t$-squared'' curve -- the whole point of the exercise is to mimic this curve in a more natural way.
Eventually, the fire goes out as the ring grows past the boundary of the rectangle.
Some trial and error is probably required to find the {\ct SPREAD\_RATE} that
leads to a desired time history of the heat release rate.


\subsection{Special Topic: Non-Planar Walls and Targets}
\index{non-planar geometries}
\index{SURF!GEOMETRY}
All obstructions in FDS are assumed to conform to the rectilinear
mesh, and all bounding surfaces are assumed to be flat
planes. However, many objects, like cables, pipes, and ducts, are not
flat. Even though these objects have to be represented in FDS as
``boxes,'' you can still perform the internal heat transfer
calculation as if the object were really cylindrical or spherical. For
example, the input lines:

\footnotesize
\begin{verbatim}
&OBST XB=0.0,5.0,1.1,1.2,3.4,3.5, SURF_ID='CABLE' /
&SURF ID='CABLE', MATL_ID='PVC', GEOMETRY='CYLINDRICAL', THICKNESS=0.01 /
\end{verbatim} \normalsize

\noindent
can be used to model a power cable that is 5~m long, cylindrical in
cross section, 2~cm in diameter. The heat transfer calculation is
still one-dimensional; that is, it is assumed that there is a uniform
heat flux all about the object. This can be somewhat confusing because
the cable is represented as an obstruction of square cross section,
with a separate heat transfer calculation performed at each face, and
no communication among the four faces. Obviously, this is not an ideal
way to do solid phase heat transfer, but it does provide a reasonable
bounding surface temperature for the gas phase calculation. More
detailed assessment of a cable would require a two or
three-dimensional heat conduction calculation, which is not included
in FDS. Use {\ct GEOMETRY='SPHERICAL'} to describe a spherical object.







\clearpage

\section{Pressure-Related Effects: The \texorpdfstring{{\tt ZONE}}{ZONE} Namelist Group (Table \ref{tbl:VENT})}
\label{info:ZONE} \index{ZONE} \index{pressure leakage}

The basic FDS equation set assumes pressure
to be composed of a ``background'' component, $\bp(z,t)$, plus a perturbation, $\tp(\bx,t)$. Most
often, $\bp$ is just the hydrostatic pressure, and $\tp$ is the flow-induced pressure field that
FDS calculates at each time step. Originally (FDS v.~1-4), it was possible to create a single, sealed
compartment whose walls conformed to the exterior of the computational domain. A fire or fan could
increase (or decrease) the background pressure in this single compartment, and a leakage area could
be defined between the compartment and the ambient exterior. Flow through the ``cracks'' was simply
a function of the background pressure via the usual empirical rules.
This idea has been generalized starting in FDS 5. Now, you can specify any number of sealed portions of the computational
domain to have their own ``background'' pressures, and these zones can be connected via leakage and duct paths.

There are several restrictions to assigning pressure zones. First, the pressure zones must be completely surrounded by
obstructions (an external boundary also suffices).
Second, the obstructions cannot be removed during the calculation. In other words, the door or window cannot
suddenly fly open (equivalently, there must be no {\ct OPEN} vents if one of the zone boundaries
is an external boundary of the computational domain).
Third, the pressure zones {\bf can} span multiple meshes,
but check the pressure in each mesh to ensure consistency.


\subsection{Leaks}
\label{info:Leaks}

The volume flow, $\dot{V}$, through a leak of area $A_L$ is given by
\be  \dot{V}_{\hbox{\footnotesize leak}} = A_L \; \hbox{sign} (\Delta p) \; \sqrt{2 \frac{ | \Delta p |}{\rho_\infty}} \ee
where $\Delta p$ is the pressure difference between the adjacent compartments (in units of Pa) and
$\rho_\infty$ is the ambient density (in units of kg/m$^3$). The discharge coefficient normally seen in this type of formula is assumed
to be 1. Leakage is inherently a submesh-scale phenomenon because the leakage area is usually very small. In other words, it is not possible to define a leak directly on the
numerical mesh. It is sometimes possible to ``lump'' the leaks into a single mesh-resolvable hole, but this is problematic
for two reasons. First, the leakage area rarely corresponds neatly to the area of a single mesh cell-sized hole. Second, the
flow speeds through the hole can be large and cause numerical instabilities.

A better way to handle leakage is by exploiting pressure zones. A pressure zone is a user-specified volume within the computational domain that is
entirely surrounded by solid obstructions. For example, the interior of a closed room can be, and should be, declared a pressure zone. Leakage from one
compartment to another is then designated on the input lines defining the individual pressure {\ct ZONE}s:

\footnotesize
\begin{verbatim}
&ZONE XB=0.3,1.2,0.4,2.9,0.3,4.5, LEAK_AREA(0)=0.0001 /
&ZONE XB=2.3,5.8,1.4,2.9,6.8,9.7, LEAK_AREA(1)=0.0002 /
\end{verbatim}
\normalsize

\noindent
The first line designates a region of the computational domain to be ``Pressure Zone'' 1.
Zone 0 is by default the ambient pressure exterior.
In this example, a leak exists between Zone 1 and the exterior Zone 0, and the area of the leak
is 0.0001~m$^2$ (1 cm by 1 cm hole, for example). Zone 2 leaks to Zone 1 (and vis verse)
with a leak area of 0.0002~m$^2$.
At least one of the obstructions that form the walls of Zone 1 must have the attribute
{\ct LEAK\_PATH=1,0}, meaning that the leak between Zones 1 and 0 is uniformly distributed
over solids defined with:
\index{SURF!LEAK\_PATH}

\footnotesize
\begin{verbatim}
&SURF ID='whatever',..., LEAK_PATH=1,0 /
\end{verbatim}
\normalsize

\noindent
Likewise, the boundaries of Zone 1 and Zone 2 must include solids whose {\ct SURF} properties include {\ct LEAK\_PATH=1,2}. This tells FDS to lump all of the
leakage over these surfaces. The order of the pressure zones designated by {\ct LEAK\_PATH} is unimportant.




\subsection{Fans}
\label{info:Fans}

In Section~\ref{info:SURF} there is a discussion of velocity boundary conditions, in which a fan is modeled simply as a solid boundary that blows or
sucks air, regardless of the surrounding pressure field. In reality, fans operate based on the pressure drop across the duct or manifold in which they are
installed. A very simple ``fan curve'' is given by:
\be \dot{V}_{\hbox{\footnotesize fan}} = A_{\hbox{\footnotesize duct}} U_{\hbox{\footnotesize max}} \;
   \hbox{sign} (\Delta p_{\hbox{\footnotesize max}}-\Delta p)
   \sqrt{ \frac{ |\Delta p - \Delta p_{\hbox{\footnotesize max}}|}{\Delta p_{\hbox{\footnotesize max}} } }  \ee
where $A_{\hbox{\footnotesize duct}}$ is the area of the duct~(m$^2$), $U_{\hbox{\footnotesize max}}$ is the air velocity~(m/s), and $\Delta p_{\hbox{\footnotesize max}}$ is the maximum
pressure difference the fan can operate upon. Figure~(\ref{fig:Fan_Curve} displays a typical fan curve.

\begin{figure}[ht!]
\begin{center}
\includegraphics[width=3.5in]{FIGURES/Fan_Curve}
\caption{\bf Fan curve corresponding to {\ct VOLUME\_FLUX=10} and {\ct MAX\_PRESSURE=500}.}
\label{fig:Fan_Curve}
\end{center}
\end{figure}

The ideal velocity of the fan, $U_{\hbox{\footnotesize max}}$, is
specified via the parameter {\ct VEL} on the appropriate {\ct SURF}
line. Alternatively, the volume flow rate, $A_{\hbox{\footnotesize
duct}} U_{\hbox{\footnotesize max}}$, can be specified using {\ct
VOLUME\_FLUX}. Do not use both.  These parameters were already
introduced in Section~\ref{info:SURF}. To simulate the behavior of a
real fan, a few extra parameters need to be specified. To set $\Delta
p_{\hbox{\footnotesize max}}$, the maximum operating over-pressure,
add {\ct MAX\_PRESSURE} to the {\ct SURF} line. Note that {\ct
MAX\_PRESSURE} should always be positive and in units of Pa.  If in
the simulation the computed pressure exceeds the specified {\ct
MAX\_PRESSURE}, then there will be a backflow in the duct.
\index{SURF!MAX\_PRESSURE}

Here is an example how fans can be specified. The actual case ({\bf
fan\_test}) is included in the V\&V Guide. In it, two simple
compartments share a common wall. Both compartments are considered as
separate ``pressure zones.'' Two fans are mounted in the Partition
Wall, blowing in opposite directions.

\footnotesize
\begin{verbatim}
&SURF ID='BLOW LEFT',  POROUS=.TRUE., VEL=-0.2, DUCT_PATH=1,2, MAX_PRESSURE=1000. /
&SURF ID='BLOW RIGHT', POROUS=.TRUE., VEL= 0.4, DUCT_PATH=2,1, MAX_PRESSURE=1000. /

&ZONE XB=-3.0, 0.0,-1.0, 1.0, 0.0, 2.0 /  Pressure Zone 1
&ZONE XB= 0.0, 3.0,-1.0, 1.0, 0.0, 2.0 /  Pressure Zone 2

&OBST XB= 0.0, 0.0,-1.0, 1.0, 0.0, 2.0 / Partition Wall

&HOLE XB=-0.1, 0.1,-0.1, 0.1, 0.4, 0.6 /
&OBST XB= 0.0, 0.0,-0.1, 0.1, 0.4, 0.6, ..., SURF_ID='BLOW RIGHT', PERMIT_HOLE=.FALSE. /

&HOLE XB=-0.1, 0.1,-0.1, 0.1, 1.4, 1.6 /
&OBST XB= 0.0, 0.0,-0.1, 0.1, 1.4, 1.6, ..., SURF_ID='BLOW LEFT', PERMIT_HOLE=.FALSE. /
\end{verbatim}
\normalsize

\noindent
\index{SURF!POROUS}
\index{SURF!DUCT\_PATH}
Consider a few of the extra parameters. The attribute {\ct
POROUS=.TRUE.} allows hot, smokey gases to pass through the
obstructions that represent the fans. These obstructions are merely
flat plates, by necessity. The velocity {\ct VEL} associated with a
{\ct POROUS} surface is meant to represent the velocity in the
positive or negative coordinate direction, as indicated by its
sign. This is different than the convention used when the {\ct SURF}
is attached to a solid wall. The {\ct DUCT\_PATH} defines the pressure
{\ct ZONE} downstream and upstream of the fan, respectively. The fan
with {\ct ID='BLOW LEFT'}, for example, blows air into {\ct ZONE} 1
from {\ct ZONE} 2.  In more complicated scenarios, it is possible to
tie the fan behavior to disconnected compartments, where it is assumed
that a ``virtual'' duct connects the two spaces. The {\ct HOLE}s in
the Partition Wall serve only to carve out space for the obstructions
that represent the fans. Note the obstructions have zero thickness, as
required by the {\ct POROUS} surface. The attribute {\ct
PERMIT\_HOLE=.FALSE.} tells FDS not to reject the obstructions because
they are embedded within the Partition Wall.










\clearpage


\section{Describing Real Materials: The \texorpdfstring{{\tt MATL}}{MATL} Namelist Group}
\label{info:MATL}\index{MATL}\index{Material layers}
\index{SURF!MATL\_ID}
\index{SURF!THICKNESS}

A solid boundary can consist of multiple layers of different
materials, and each layer can consist of multiple material
components. These combinations of layers and material components are
specified on the {\ct SURF} line via the array called {\ct
MATL\_ID(IL,IC)}. The argument {\ct IL} is an integer indicating the
layer index, starting at 1, the layer at the exterior boundary. The
argument {\ct IC} is an integer indicating the component index. For
example, {\ct MATL\_ID(2,3)='BRICK'} indicates that the third material
component of the second layer is {\ct BRICK}. In practice, the
materials are often listed as in the following example:

\footnotesize
\begin{verbatim}
&MATL ID             = 'INSULATOR'
      CONDUCTIVITY   = 0.041
      SPECIFIC_HEAT  = 2.09
      DENSITY        = 229. /

&SURF ID        = 'BRICK WALL'
      MATL_ID   = 'BRICK','INSULATOR'
      COLOR     = 'RED'
      BACKING   = 'EXPOSED'
      THICKNESS = 0.20,0.10 /

\end{verbatim}
\normalsize

\noindent
Without arguments, the parameter {\ct MATL\_ID} is assumed to be a list of the materials in multiple layers, with each layer consisting of only a single
material component.

Note also in this example that the {\ct BRICK WALL} is not symmetric. Be careful when applying this {\ct SURF} line to an entire obstruction, because the
attribute {\ct EXPOSED} implies that the back surface of the obstruction is different than the front surface.

\begin{warning}
\noindent
The maximum number of material layers is 20. The maximum number of material components is 20.
\end{warning}

Mixtures of solid materials within the same layer can be defined using
the {\ct MATL\_MASS\_FRACTION} keyword. This parameter has the same
two indices as the {\ct MATL\_ID} keyword. For example, if the
brick layer contains some additional water, the input could look like this:
\index{SURF!MATL\_MASS\_FRACTION}
\index{SURF!MATL\_ID}

\footnotesize
\begin{verbatim}
&MATL ID            = 'WATER'
      CONDUCTIVITY  = 0.60
      SPECIFIC_HEAT = 4.19
      DENSITY       = 1000. /

&SURF ID                        = 'BRICK WALL'
      MATL_ID(1,1:2)            = 'BRICK','WATER'
      MATL_MASS_FRACTION(1,1:2) = 0.95,0.05
      MATL_ID(2,1)              = 'INSULATOR'
      COLOR                     = 'RED'
      BACKING                   = 'EXPOSED'
      THICKNESS                 = 0.20,0.10 /  <--- for layers 1 and 2

\end{verbatim}
\normalsize
\noindent
It is important to notice that the components of the solid mixtures
are treated as pure substances with no voids. The density of the
mixture is
\be
\rho = \left(\sum_i\frac{Y_i}{\rho_i}\right)^{-1}
\ee
where $Y_i$ are the material mass fractions and $\rho_i$ are the
material bulk densities defined on the {\ct MATL} lines. In the
example above, the resulting density of the wall would be about
1553~kg/m$^3$. The fact that the wall density is smaller than the
density of pure brick may be confusing, but can be explained easily.
If the wall can contain water, the whole volume of the wall can not be
pure brick. Instead there are voids (pores) that are
filled with water. If the water is taken away, there is only about
1476~kg/m$^3$ of brick left. To have a density of 1600~kg/m$^3$ for a
partially void wall, a higher density should be used for the pure
brick.


\subsection{Thermal Properties}
\index{MATL!CONDUCTIVITY}
\index{MATL!DENSITY}
\index{MATL!SPECIFIC\_HEAT}
\index{MATL!EMISSIVITY}

For any solid material, specify its thermal
{\ct CONDUCTIVITY} (W/m$\cdot$K), {\ct DENSITY} (kg/m$^3$),
{\ct SPECIFIC\_HEAT} (kJ/kg/K), and {\ct EMISSIVITY} (0.9 by default).
Both {\ct CONDUCTIVITY} and {\ct SPECIFIC\_HEAT} can be functions of
temperature. {\ct DENSITY} and {\ct EMISSIVITY} cannot.
Temperature-dependence is specified using the {\ct RAMP} convention.
As an example, consider marinite, a wall material suitable for high temperature applications:

\footnotesize
\begin{verbatim}
&MATL ID                 = 'MARINITE'
      EMISSIVITY         = 0.8
      DENSITY            = 737.
      SPECIFIC_HEAT_RAMP = 'c_ramp'
      CONDUCTIVITY_RAMP  = 'k_ramp' /
&RAMP ID='k_ramp', T= 24., F=0.13 /
&RAMP ID='k_ramp', T=149., F=0.12 /
&RAMP ID='k_ramp', T=538., F=0.12 /
&RAMP ID='c_ramp', T= 93., F=1.172 /
&RAMP ID='c_ramp', T=205., F=1.255 /
&RAMP ID='c_ramp', T=316., F=1.339 /
&RAMP ID='c_ramp', T=425., F=1.423 /
\end{verbatim}
\normalsize
Notice that with temperature-dependent quantities, the {\ct RAMP} parameter
{\ct T} means Temperature, and {\ct F} is the value of either
the specific heat or conductivity. In this case, neither {\ct CONDUCTIVITY} nor {\ct SPECIFIC\_HEAT} is given on the
{\ct MATL} line, but rather the {\ct RAMP} names.

Prior to FDS5, the thermal radiation from the gas space was always
absorbed at the surface of the solid material and the emission to the
gas space took place on the surface. Starting in FDS5, the solid
material can be given an {\ct ABSORPTION\_COEFFIENT} (1/m) that allows
the radiation penetrate and absorb into the solid. Correspondingly,
the emission of the material is based on the internal temperatures,
not just the surface.
\index{MATL!ABSORPTION\_COEFFICIENT}

\subsection{Pyrolysis Models}
\index{Pyrolysis models}

FDS has several approaches for describing the pyrolysis of solids and liquids. The approach to take depends largely
on the availability of material properties and the appropriateness of the underlying pyrolysis model. This
section provides a description of the input parameters, starting with a general solid.

\subsubsection{Solid Fuels}
\index{Solid fuels}
\index{MATL!A}
\index{MATL!E}
\index{MATL!HEAT\_OF\_REACTION}
\index{MATL!N\_S}
\index{MATL!NU\_FUEL}
\index{MATL!NU\_RESIDUE}
\index{MATL!NU\_WATER}
\index{MATL!RESIDUE}

Each {\ct MATL} can undergo several reactions, with each
reaction creating a {\ct RESIDUE}, water vapor, and/or fuel
gas. Designate the number of reactions with the integer {\ct
N\_REACTIONS}, the residue {\ct MATL} of the $j$th reaction by {\ct
RESIDUE(j)}, the heat of reaction by {\ct HEAT\_OF\_REACTION(j)}, the
yields of the residue, wator vapor, and fuel vapor as
{\ct NU\_RESIDUE(j)}, {\ct NU\_WATER(j)}, and {\ct NU\_FUEL(j)},
respectively. Currently, the maximum number of reactions for each
material is 10 and the chain of consecutive reactions may contain up
to 20 steps. The reaction rate of the $i$th material undergoing its
$j$th reaction is given by
\be
  r_{ij} =
  \dod{ }{t} \left( \frac{\rho_{s,i}}{\rho_{s0}} \right) =
  \left(\frac{\rho_{s,i}}{\rho_{s0}} \right)^{n_{s,ij}}
  A_{ij} \exp\left(-\frac{E_{ij}}{RT_s} \right)
  \max\left[0,T_s-T_{thr,ij}\right]^{n_{t,ij}}  \label{rr}
\ee
where $\rho_{s,i}$ is the current density of the $i$th material and
$\rho_{s0}$ is the initial density of the material layer.
$A_{ij}$ is prescribed under the name {\ct A(j)}, with units of
1/s. $E_{ij}$, the activation energy, is prescribed via {\ct E(j)} in
units of kJ/kmol. Remember that 1~kcal is 4.184~kJ, and be careful
with factors of 1000. $n_{s,ij}$ is the reaction order and prescribed under the name
{\ct N\_S(j)}.

$T_{thr,ij}$ is an optional ``threshold'' temperature that
allows the definition of non-Arrhenius pyrolysis functions and
ignition criteria, and is prescribed by {\ct THRESHOLD\_TEMPERATURE(j)}.
By default, $T_{thr,ij}$ is -273.15 degrees Celsius, $n_{t,j}$ is zero
and the last term of Equation~\ref{rr} does not affect the pyrolysis rate.
The term can be used to describe a threshold temperature for the pyrolysis
reaction by setting $T_{thr,ij}$ and $n_{t,j}$ = 0. Then the term
becomes 0 at temperatures below $T_{thr,ij}$ and 1 elsewhere.
$n_{t,j}$ is prescribed under the name {\ct N\_T(j)}.
\index{MATL!THRESHOLD\_TEMPERATURE}
\index{MATL!N\_T}

$A$ and $E$  are not readily accessible for most materials found at a
fire scene. However, if they are known, specify both. Avoid specifying
just one because they act as a pair.  If $A$ and $E$ are not known,
which is usually the case, specify {\ct REFERENCE\_RATE} (1/s) and
{\ct REFERENCE\_TEMPERATURE} ($^\circ$C). This directs FDS to choose
{\ct A} and {\ct E} so that the reaction rate ({\ct REFERENCE\_RATE})
is achieved at the {\ct REFERENCE\_TEMPERATURE}. The default value of {\ct
REFERENCE\_RATE} is 0.1~s$^{-1}$. If the value of $n_s$ is not known,
it is a good starting point to assume $n_s=1$.
\index{MATL!REFERENCE\_RATE}
\index{MATL!REFERENCE\_TEMPERATURE}
\begin{warning}
\noindent
The temperature is read in using degrees Celsius, but is then converted to
degrees Kelvin within the program.
\end{warning}

Here is an example of a material that burns in the neighborhood of 350~$^\circ$C,
converting all mass to fuel gases ({\ct NU\_FUEL=1.}).

\footnotesize
\begin{verbatim}
&MATL ID                    = 'Whatever'
      FYI                   = 'Properties completely fabricated'
      SPECIFIC_HEAT         = 1.0
      CONDUCTIVITY          = 0.1
      DENSITY               = 100.0
      N_REACTIONS           = 1
      NU_FUEL               = 1.
      REFERENCE_TEMPERATURE = 350.
      HEAT_OF_REACTION      = 3000.
      HEAT_OF_COMBUSTION    = 15000. /
\end{verbatim}
\normalsize
\noindent
The {\ct HEAT\_OF\_REACTION(j)} (kJ/kg) indicates the amount of energy
consumed by the solid phase reaction. A positive value indicates that
the reaction is {\em endothermic}; that is, the reaction takes energy
out of the system. The {\ct HEAT\_OF\_COMBUSTION} ensures that if the
fuel vapors burn with a different $\Delta H$ than that of other
materials included in the simulation, the model will account for this
accordingly.
\index{MATL!HEAT\_OF\_COMBUSTION}

\index{SURF!SHRINK}
If all the material components of the surface are reacting, and the
pyrolysis reactions have no solid residue, the thickness of the
surface is going to shrink when the surface reacts. The shrinking
behaviour can be prevented in the numerical model by setting {\ct
SHRINK = .FALSE.} on the {\ct SURF} line.
\begin{warning}
\noindent
Setting {\ct SHRINK = .FALSE.} may introduce numerical problems in the
wall solver.
\end{warning}

\subsubsection{Solid Fuels that Burn at a Specified Rate}
\index{SURF!HEAT\_OF\_VAPORIZATION}
\index{SURF!HRRPUA}
\index{SURF!IGNITION\_TEMPERATURE}
\index{SURF!RAMP\_Q}
Real materials, like furnishings, office equipment, and so on, are
often very difficult to describe via the {\ct SURF} and {\ct MATL}
parameters. Often, the only information about a given object is its
bulk thermal properties, its ``ignition'' temperature, and what its
subsequent burning rate is, as a function of time from ignition. For
this situation, add lines similar to the following:

\footnotesize
\begin{verbatim}
&MATL ID                   = 'stuff'
      CONDUCTIVITY         = 0.1
      SPECIFIC_HEAT        = 1.0
      DENSITY              = 900.0 /

&SURF ID                   = 'my surface'
      COLOR                = 'GREEN'
      MATL_ID              = 'stuff'
      HRRPUA               = 1000.
      IGNITION_TEMPERATURE = 500.
      RAMP_Q               = 'fire_ramp'
      THICKNESS            = 0.01 /

&RAMP ID='fire_ramp', T=  0.0, F=0.0 /
&RAMP ID='fire_ramp', T= 10.0, F=1.0 /
&RAMP ID='fire_ramp', T=310.0, F=1.0 /
&RAMP ID='fire_ramp', T=320.0, F=0.0 /
\end{verbatim} \normalsize

\noindent
An object with surface properties defined by {\ct 'my surface'} shall
burn at a rate of 1000~kW/m$^2$ after a linear ramp-up of 10 s
following its ``ignition'' when its surface temperature reaches
500~$^\circ$C. Burning shall continue for 5~min, and then ramp-down
in 10~s. Note that the time {\ct T} in the {\ct RAMP} means time from
ignition. Note also that now the ''ignition temperature'' is a surface
property, not material property.

After the surface has ignited, the heat transfer into the solid is
still being solved but there is no coupling between the burning rate
and the surface temperature. As a result, the surface temperature may
increase too much. To account for the energy loss due to the
vaporization of the solid fuel, {\ct HEAT\_OF\_VAPORIZATION} can be
specified for the surface. For example, when using the lines below,
the net heat flux at the material surface is reduced by a factor
1000~kJ/kg times the instantaneous burning rate.

\footnotesize
\begin{verbatim}
&SURF ID                   = 'my surface'
      COLOR                = 'GREEN'
      MATL_ID              = 'stuff'
      HRRPUA               = 1000.
      IGNITION_TEMPERATURE = 500.
      HEAT_OF_VAPORIZATION = 1000.
      RAMP_Q               = 'fire_ramp'
      THICKNESS            = 0.01 /
\end{verbatim} \normalsize

\noindent
The parameters {\ct HRRPUA}, {\ct IGNITION\_TEMPERATURE}, and {\ct HEAT\_OF\_VAPORIZATION} are all telling FDS that you want to control the
burning rate yourself, but you still want to simulate the heating up and ``ignition'' of the fuel. When these parameters appear on the {\ct SURF} line, they
are acting in concert. If {\ct HRRPUA} appears alone, the surface will begin burning at the start of the simulation, like a piloted burner. The addition of
an {\ct IGNITION\_TEMPERATURE} delays burning until your specified temperature is reached. The addition of {\ct HEAT\_OF\_VAPORIZATION}
tells FDS to account for the energy used to vaporize the fuel. For any of these options, if a {\ct MATL} line is invoked by a {\ct SURF} line containing
a specified {\ct HRRPUA}, then that {\ct MATL} ought to have only thermal properties. It should have no reaction parameters, product yields, and so on, like
those described in the previous sections. By specifying {\ct HRRPUA}, you are controlling the burning rate rather than letting the material pyrolyze based on
the conditions of the surrounding environment.


\subsubsection{Liquid Fuels}
\index{Liquid Fuels}

For a liquid fuel, the thermal properties are similar to those of a solid
material, with a few exceptions. The evaporation rate of the fuel
is governed by the Clausius-Clapeyron equation (see FDS Technical Reference
Guide for details). The only drawback of
this approach is that the fuel gases burn regardless of any ignition
source. Thus, if a liquid fuel is specified, the fuel
begins burning at once. Here is an example of a steel pan filled with a thin layer of ethanol. Note that the material
properties have not all been verified.

\footnotesize
\begin{verbatim}
&MATL ID                     = 'ETHANOL LIQUID'
      EMISSIVITY             = 1.0
      NU_FUEL                = 0.97
      HEAT_OF_REACTION       = 880.
      CONDUCTIVITY           = 0.17
      SPECIFIC_HEAT          = 2.45
      DENSITY                = 787.
      ABSORPTION_COEFFICIENT = 40.
      BOILING_TEMPERATURE    = 76. /

&MATL ID            = 'STEEL'
      EMISSIVITY    = 1.0
      DENSITY       = 7850.
      CONDUCTIVITY  = 45.8
      SPECIFIC_HEAT = 0.46 /

&MATL ID            = 'CONCRETE'
      DENSITY       = 2200.
      CONDUCTIVITY  = 1.2
      SPECIFIC_HEAT = 0.88 /

&SURF ID        = 'ETHANOL POOL'
      FYI       = '4 kg of ethanol in a 0.7 m x 0.8 m pan'
      COLOR     = 'YELLOW'
      MATL_ID   = 'ETHANOL LIQUID','STEEL','CONCRETE'
      THICKNESS = 0.0091,0.001,0.05
      TMP_INNER = 18. /
\end{verbatim} \normalsize

\noindent
\index{MATL!BOILING\_TEMPERATURE}
The inclusion of {\ct BOILING\_TEMPERATURE} on the {\ct MATL} line tells FDS to use its liquid
pyrolysis model. It also automatically sets {\ct N\_REACTIONS=1}, that is, the only ``reaction'' is the
phase change from liquid to gaseous fuel. Thus, {\ct HEAT\_OF\_REACTION} in this case is the latent
heat of vaporization. The gaseous fuel yield, {\ct NU\_FUEL}, is 0.97 instead of 1 to account for
impurities in the liquid that do not take part in the combustion process.

The thermal conductivity, density and specific heat are used
to compute the loss of heat into the liquid via conduction using the
same one-dimensional heat transfer equation that is used for solids. Obviously,
the convection of the liquid is important, but is not considered in
the model.

Note also the {\ct ABSORPTION\_COEFFICIENT} for the liquid. This
denotes the absorption in depth of thermal radiation. Liquids do not
just absorb radiation at the surface, but rather over a thin layer
near the surface. Its effect on the burning rate is significant. An
example is given in Section~\ref{ethanol_pan}.


\subsection{Special topic: Making Fuels Disappear (BURN\_AWAY)}
\index{SURF!BURN\_AWAY}

If a burning object is to disappear from the
calculation once it is exhausted of fuel, set {\ct BURN\_AWAY=.TRUE.}.
Use this parameter cautiously. If an object has the potential of
burning away, a significant amount of extra memory has to be set aside
to store additional surface information as the rectangular block is
eaten away. If {\ct BURN\_AWAY} is prescribed as a {\ct SURF} parameter, then a solid
object with this {\ct SURF\_ID} disappears from a calculation as
the mass of each of its mesh cells are consumed. The mass of each mesh
cell is the volume of the mesh cell multiplied by the {\ct DENSITY} of the
materials making up the the obstruction.

\begin{warning}
\noindent
Note also that if {\ct BURN\_AWAY} is prescribed, the {\ct SURF} should be applied to the
entire object, not just a face of the object because it is unclear how to handle edges
of solid obstructions that have different {\ct SURF\_ID}s on different faces.
\end{warning}

\noindent
Also note that the amount of combustible fuel equals the {\ct DENSITY} of the designated materials
multiplied by the volume of the mesh cell. If the volume of the obstruction changes because it has
to conform to the uniform mesh, FDS does {\bf not} adjust the burning rate to account for this as
it does with various quantities associated with areas, like {\ct HRRPUA}.

\subsection{Special Topic: Initial and Backside Boundary Conditions}
\index{initial solid temperature}
\index{SURF!TMP\_BACK}
\index{SURF!TMP\_INNER}
By default, the initial temperature of the solid material is set to
ambient temperature. Use {\ct TMP\_INNER} on the {\ct SURF} line to
specify a different initial temperature.
Also, the backside temperature boundary condition of a solid can be
set using the parameter {\ct TMP\_BACK} on the {\ct SURF}
line. {\ct TMP\_BACK} is not the actual backside surface temperature,
but the gas temperature that the surface transfer heat with. This
parameter has no meaning for surfaces with {\ct BACKING='EXPOSED'} or
{\ct BACKING='INSULATED'}.

\begin{warning}
\noindent
Note that the parameters {\ct TMP\_INNER} and {\ct TMP\_BACK} are only meaningful for solids with specified {\ct THICKNESS} and material
properties (via the {\ct MATL\_ID} keyword).
\end{warning}

\subsection{Special Topic: Numerical Accuracy and Stability}
\index{SURF!CELL\_SIZE\_FACTOR}
\index{SURF!STRETCH\_FACTOR}

To compute the temperature and reactions inside the solids, FDS solves
the one-dimensional heat transfer equation numerically. The size of
the mesh cells on the surface of the solid is automatically chosen
using a rule that makes the cell size smaller than the square root of
the material diffusivity $(k/\rho c)$. By default, the solid mesh
cells increase towards the middle of the material layer and are smallest
on the layer boundaries.

The default parameters are usually appropriate for simple heat
transfer calculations but sometimes the use of pyrolysis reactions
makes the temperatures and burning rate fluctuate. The numerical
stability of the solid phase solution may then be improved by making
the mesh density more uniform inside the material and by making the
mesh cells smaller. Adjustments may also be needed in case of
extremely transient heat transfer situations. Use {\ct STRETCH\_FACTOR
= 1.} on the {\ct SURF} line to have a perfectly uniform mesh. Values
between 1.0 and 2.0 give different levels of stretching.  The size of
all the mesh cells can be scaled by setting {\ct CELL\_SIZE\_FACTOR}
less than 1.0. For example, {\ct CELL\_SIZE\_FACTOR = 0.5} makes the
mesh cells half the size. Setting {\ct WALL\_INCREMENT=1}\index{TIME!WALL\_INCREMENT} on the
{\ct TIME} line forces the solid phase temperatures to be solved on every
time step.

See Section~\ref{solid_phase_verification} for ways to check and improve the accuracy of the solid phase calculation.






\clearpage

\section{User-Specified Functions: The \texorpdfstring{{\tt RAMP}}{RAMP} and \texorpdfstring{{\tt TABL}}{TABL} Namelist Groups}
\label{info:RAMP}\index{RAMP}
\label{info:TABL}\index{TABL}

Many of the parameters specified in the input file are fixed constants. However, there are several parameters that may vary in
time, temperature, or space. These functions can be complex, thus you have to have some way to convey them. The namelist group
{\ct RAMP} and {\ct TABL}, as it names imply, allow you to control the behavior of selected parameters.  {\ct RAMP} allows you
to specify a function with one independent variable (such as time) is mapped to one dependent variable (such as velocity).
{\ct TALB} allows for the specification of a mapping from multiple independent variables (such as a solid angle) to multiple
dependent variables (such as a sprinkler flow rate and droplet speed).

\subsection{Time-Dependent Functions}

At the start of any calculation, the temperature is ambient
everywhere, the flow velocity is zero everywhere, nothing is burning,
and the mass fractions of all species are uniform.  When the
calculation starts temperatures, velocities, burning rates, {\em
etc.}, are ramped-up from their starting values because nothing can
happen instantaneously. By default, everything is ramped-up to their
prescribed values in roughly 1~s. However, control the rate at which
things turn on, or turn off, by specifying time histories for the
boundary conditions that are listed on a given {\ct SURF} line.  The
above boundary conditions can be made time-dependent using either
prescribed functions or user-defined functions.  The parameters {\ct
TAU\_Q}, {\ct TAU\_T}, and {\ct TAU\_V} indicate that the heat release
rate ({\ct HRRPUA}); surface temperature ({\ct TMP\_FRONT}); and/or
normal velocity ({\ct VEL}, {\ct VOLUME\_FLUX}), or {\ct
MASS\_FLUX\_TOTAL} are to ramp up to their prescribed values in {\ct
TAU} seconds and remain there.  If {\ct TAU\_Q} is positive, then the
heat release rate ramps up like tanh$(t/\tau)$. If negative, then the
HRR ramps up like $(t/\tau)^2$. If the fire ramps up following a $t^2$
curve, it remains constant after {\ct TAU\_Q} seconds.  These rules
apply to {\ct TAU\_T} and {\ct TAU\_V} as well.  The default value for
all {\ct TAU}s is 1~s.  If something other than a tanh or $t^2$ ramp
up is desired, then a user-defined burning history must be input. To
do this, set {\ct RAMP\_Q}, {\ct RAMP\_T} or {\ct RAMP\_V} equal to a
character string designating the ramp function to use for that
particular surface type, then somewhere in the input file generate
lines of the form:
\index{SURF!RAMP\_Q}
\index{SURF!RAMP\_T}
\index{SURF!RAMP\_V}

\footnotesize
\begin{verbatim}
 &RAMP ID='rampname1', T= 0.0, F=0.0 /
 &RAMP ID='rampname1', T= 5.0, F=0.5 /
 &RAMP ID='rampname1', T=10.0, F=0.7 /
                    .
                    .
                    .
 &RAMP ID='rampname2', T= 0.0, F=0.0 /
 &RAMP ID='rampname2', T=10.0, F=0.3 /
 &RAMP ID='rampname2', T=20.0, F=0.8 /
                    .
                    .
                    .
\end{verbatim}
\normalsize

\noindent

Here, {\ct T} is the time, and {\ct F} indicates the fraction of the heat
release rate, wall temperature, velocity, mass fraction, {\em etc.}, to apply.
Linear interpolation is used to fill in intermediate time points.
Be sure that the prescribed function starts at {\ct T=0.0}.

\begin{warning}
\noindent
Note that each set of {\ct RAMP} lines must have a unique {\ct ID} and that the lines must
be listed with monotonically increasing {\ct T}.
\end{warning}

\begin{warning}
\noindent
Note that the {\ct TAU}s and the {\ct RAMP}s are mutually exclusive. For a given
surface quantity, both cannot be prescribed.
\end{warning}

As an example, the simple blowing vent from above can be controlled via the lines:

\footnotesize
\begin{verbatim}
&SURF ID='BLOWER',VEL=-1.2,TMP_FRONT=50., RAMP_V='BLOWER RAMP', RAMP_T='HEATER RAMP' /
&RAMP ID='BLOWER RAMP',T= 0.0,F=0.0 /
&RAMP ID='BLOWER RAMP',T=10.0,F=1.0 /
&RAMP ID='BLOWER RAMP',T=80.0,F=1.0 /
&RAMP ID='BLOWER RAMP',T=90.0,F=0.0 /
&RAMP ID='HEATER RAMP',T= 0.0,F=0.0 /
&RAMP ID='HEATER RAMP',T=20.0,F=1.0 /
&RAMP ID='HEATER RAMP',T=30.0,F=1.0 /
&RAMP ID='HEATER RAMP',T=40.0,F=0.0 /
\end{verbatim}
\normalsize

\noindent
Now the temperature and velocity of the incoming air stream would
follow the same ramp functions.

\begin{warning}
\noindent
Note that the temperature and
velocity can be independently controlled by assigning different
{\ct RAMP}s to {\ct RAMP\_T} and {\ct RAMP\_V}, respectively.
\end{warning}

Use {\ct TAU\_MF(N)} or {\ct RAMP\_MF(N)}
to control the ramp-ups for either the mass
fraction or mass flux of species {\ct N}.
The mass fraction of species $N$ at the surface is given by
$$ Y_N(t) = Y_N(0) + f(t) \left( Y_N - Y_N(0) \right) $$ where
$Y_N(0)$ is the ambient mass fraction of species {\ct N} ({\ct
MASS\_FRACTION\_0} in the {\ct N}th {\ct SPEC} namelist line is used
to prescribe $Y_N(0)$), $Y_N$ is the desired mass fraction to which
the function $f(t)$ is ramping ({\ct MASS\_FRACTION(N)} specified in
the {\ct SURF} line is used to prescribe $Y_N$).  The function $f(t)$
is either a $\tanh$, $t^2$, or user-defined function. For a
user-defined function, indicate the name of the ramp function with
{\ct RAMP\_MF(N)}, a character string.
\index{SURF!RAMP\_MF}
\index{SURF!TAU\_MF}
\index{SURF!MASS\_FRACTION}

\subsection{Temperature-Dependent Functions}

Thermal properties like conductivity and specific heat can vary significantly with temperature. In such cases, use
the {\ct RAMP} function like this:

\footnotesize
\begin{verbatim}
&MATL ID                 = 'STEEL'
      FYI                = 'A242 Steel'
      SPECIFIC_HEAT_RAMP = 'c_steel'
      CONDUCTIVITY_RAMP  = 'k_steel'
      DENSITY            = 7850. /

&RAMP ID='c_steel', T= 20., F=0.45   /
&RAMP ID='c_steel', T=377., F=0.60   /
&RAMP ID='c_steel', T=677., F=0.85   /

&RAMP ID='k_steel', T= 20., F=48.    /
&RAMP ID='k_steel', T=677., F=30.    /
\end{verbatim}
\normalsize

\noindent
Note that here (as opposed to time ramps) the parameter {\ct F} is the actual physical quantity, not just
a fraction of some other quantity. Thus, if {\ct CONDUCTIVITY\_RAMP} is used, there should be no
value of {\ct CONDUCTIVITY} given. Note also that for values of temperature, {\ct T}, below and above the
given range, FDS will assume a constant value equal to the first or last {\ct F} specified.

\begin{warning}
\noindent
Note that each set of {\ct RAMP} lines must have a unique {\ct ID} and that the lines must
be listed with monotonically increasing {\ct T}.
\end{warning}



\subsection{Tabular Functions}

Some input quantities, such as a sprinkler spray pattern, vary multi-dimensionally. In such cases, use
the {\ct TABL} namelist group. The format of the {\ct TABL} lines is application-specific, but in general look like this:

\footnotesize
\begin{verbatim}
&TABL ID='TABLE1', TABLE_DATA=40,50, 85, 95,10,0.5 /
&TABL ID='TABLE1', TABLE_DATA=40,50,185,195,10,0.5 /
\end{verbatim}
\normalsize

\noindent
A detailed description of the various table entries is given in the sections that describe quantities that use such
tables. Currently, only sprinklers and nozzles use this group of parameters to define a complex spray pattern.

\begin{warning}
\noindent
Note that each set of {\ct TABL} lines must have a unique {\ct ID}.  Specific requirements on ordering the lines
will depend upon the type of TABL and those requirements are provided in the appropriate section in this guide.
\end{warning}


\clearpage

\section{Coloring Obstructions, Vents, Surfaces and Meshes}
\label{info:colors}\index{Colors}
\index{SURF!COLOR}
\index{SURF!RGB}
Colors for many items within FDS can be prescribed in two ways; a triplet of
integers after keyword {\ct RGB} or one of many {\ct COLOR} name character strings.

The three {\ct RGB} integer numbers range from 0 to 255, indicating the amount of Red, Green and Blue
that make up the color. If you define the {\ct COLOR} by name, it is important that you type the name EXACTLY as it
is listed in the color tables here in this document and on the FDS website.

Table~\ref{tab:colors} provides a small sampling of {\ct RGB} values and {\ct COLOR} names
for a variety of colors. A complete listing of all 500+ colors that can be
specified by name after the {\ct COLOR} keyword is available on the FDS website.
If the {\ct COLOR} name is not listed in the table on the website, then that name does not exist to FDS.

It is highly recommended that colors be assigned to surfaces via the {\ct SURF} line because as
the geometries of FDS simulations become more complex, it is very useful
to use color as a spot check to determine if the desired
surface properties have been assigned throughout the room or building under study.

For example, if you desire that all surfaces associated with a
given {\ct SURF} line be colored the same way, prescribe a triplet of
integers called {\ct RGB} on the {\ct SURF} line. The following {\ct SURF} line;
\footnotesize
\begin{verbatim}
&SURF ID='UPHOLSTERY',...,RGB=0,255,0 /
\end{verbatim}
\normalsize
will cause the furnishings with a ``SURF'' of ``UPHOLSTERY'' to be colored green in Smokeview.
It is best to avoid using the primary colors because these same colors are
used by Smokeview to draw color contours.

Obstructions and vents may be colored individually (over-riding the
{\ct SURF} line's {\ct RGB}) by specifying {\ct COLOR} value to any of
the listed names in Table~\ref{tab:colors} or {\ct 'INVISIBLE'} on
the respective {\ct OBST} or {\ct VENT} line. Using {\ct 'INVISIBLE'}
causes the vent or obstruction to not be drawn.

Colors may also be specified using the integer triplet {\ct RGB} on an {\ct OBST} or {\ct VENT} line to gain
a wider color palette. The use of {\ct RGB} is preferable, especially
to create colors that do not clash with the pastel colors used to
show temperatures, concentrations, {\em etc.} See Table \ref{tab:colors}
for a list of color names and RGB values.


\begin{table}[p]
\begin{center}
\caption{Sample of Color Definitions (A complete list is included on the website) }
\label{tab:colors}
\vspace{0.1in}
\begin{tabular}{|c|c|c|c|c|c||c|c|c|c|}
\hline
Name & &  R  & G & B & Name & & R & G & B   \\ \hline \hline
{\ct AQUAMARINE} & \textcolor{AQUAMARINE} {$\blacksquare$} & 127& 255& 212& {\ct MAROON} &  \textcolor{MAROON} {$\blacksquare$} & 128& 0& 0  \\ \hline
{\ct ANTIQUE WHITE} & \textcolor{ANTIQUE WHITE} {$\blacksquare$} & 250& 235& 215& {\ct MELON} &  \textcolor{MELON} {$\blacksquare$} & 227& 168& 105  \\ \hline
{\ct BEIGE} & \textcolor{BEIGE} {$\blacksquare$} & 245& 245& 220& {\ct MIDNIGHT BLUE} &  \textcolor{MIDNIGHT BLUE} {$\blacksquare$} & 25& 25& 112  \\ \hline
{\ct BLACK} & \textcolor{BLACK} {$\blacksquare$} & 0& 0& 0& {\ct MINT} &  \textcolor{MINT} {$\blacksquare$} & 189& 252& 201  \\ \hline
{\ct BLUE} & \textcolor{BLUE} {$\blacksquare$} & 0& 0& 255& {\ct NAVY} &  \textcolor{NAVY} {$\blacksquare$} & 0& 0& 128  \\ \hline
{\ct BLUE VIOLET} & \textcolor{BLUE VIOLET} {$\blacksquare$} & 138& 43& 226& {\ct OLIVE} &  \textcolor{OLIVE} {$\blacksquare$} & 128& 128& 0  \\ \hline
{\ct BRICK} & \textcolor{BRICK} {$\blacksquare$} & 156& 102& 31& {\ct OLIVE DRAB} &  \textcolor{OLIVE DRAB} {$\blacksquare$} & 107& 142& 35  \\ \hline
{\ct BROWN} & \textcolor{BROWN} {$\blacksquare$} & 165& 42& 42& {\ct ORANGE} &  \textcolor{ORANGE} {$\blacksquare$} & 255& 128& 0  \\ \hline
{\ct BURNT SIENNA} & \textcolor{BURNT SIENNA} {$\blacksquare$} & 138& 54& 15& {\ct ORANGE RED} &  \textcolor{ORANGE RED} {$\blacksquare$} & 255& 69& 0  \\ \hline
{\ct BURNT UMBER} & \textcolor{BURNT UMBER} {$\blacksquare$} & 138& 51& 36& {\ct ORCHID} &  \textcolor{ORCHID} {$\blacksquare$} & 218& 112& 214  \\ \hline
{\ct CADET BLUE} & \textcolor{CADET BLUE} {$\blacksquare$} & 95& 158& 160& {\ct PINK} &  \textcolor{PINK} {$\blacksquare$} & 255& 192& 203  \\ \hline
{\ct CHOCOLATE} & \textcolor{CHOCOLATE} {$\blacksquare$} & 210& 105& 30& {\ct POWDER BLUE} &  \textcolor{POWDER BLUE} {$\blacksquare$} & 176& 224& 230  \\ \hline
{\ct COBALT} & \textcolor{COBALT} {$\blacksquare$} & 61& 89& 171& {\ct PURPLE} &  \textcolor{PURPLE} {$\blacksquare$} & 128& 0& 128  \\ \hline
{\ct CORAL} & \textcolor{CORAL} {$\blacksquare$} & 255& 127& 80& {\ct RASPBERRY} &  \textcolor{RASPBERRY} {$\blacksquare$} & 135& 38& 87  \\ \hline
{\ct CYAN} & \textcolor{CYAN} {$\blacksquare$} & 0& 255& 255& {\ct RED} &  \textcolor{RED} {$\blacksquare$} & 255& 0& 0  \\ \hline
{\ct DIMGRAY } & \textcolor{DIMGRAY } {$\blacksquare$} & 105& 105& 105& {\ct ROYAL BLUE} &  \textcolor{ROYAL BLUE} {$\blacksquare$} & 65& 105& 225  \\ \hline
{\ct EMERALD GREEN} & \textcolor{EMERALD GREEN} {$\blacksquare$} & 0& 201& 87& {\ct SALMON} &  \textcolor{SALMON} {$\blacksquare$} & 250& 128& 114  \\ \hline
{\ct FIREBRICK} & \textcolor{FIREBRICK} {$\blacksquare$} & 178& 34& 34& {\ct SANDY BROWN} &  \textcolor{SANDY BROWN} {$\blacksquare$} & 244& 164& 96  \\ \hline
{\ct FLESH} & \textcolor{FLESH} {$\blacksquare$} & 255& 125& 64& {\ct SEA GREEN} &  \textcolor{SEA GREEN} {$\blacksquare$} & 84& 255& 159  \\ \hline
{\ct FOREST GREEN} & \textcolor{FOREST GREEN} {$\blacksquare$} & 34& 139& 34& {\ct SEPIA} &  \textcolor{SEPIA} {$\blacksquare$} & 94& 38& 18  \\ \hline
{\ct GOLD } & \textcolor{GOLD } {$\blacksquare$} & 255& 215& 0& {\ct SIENNA} &  \textcolor{SIENNA} {$\blacksquare$} & 160& 82& 45  \\ \hline
{\ct GOLDENROD} & \textcolor{GOLDENROD} {$\blacksquare$} & 218& 165& 32& {\ct SILVER} &  \textcolor{SILVER} {$\blacksquare$} & 192& 192& 192  \\ \hline
{\ct GRAY} & \textcolor{GRAY} {$\blacksquare$} & 128& 128& 128& {\ct SKY BLUE} &  \textcolor{SKY BLUE} {$\blacksquare$} & 135& 206& 235  \\ \hline
{\ct GREEN} & \textcolor{GREEN} {$\blacksquare$} & 0& 255& 0& {\ct SLATEBLUE} &  \textcolor{SLATEBLUE} {$\blacksquare$} & 106& 90& 205  \\ \hline
{\ct GREEN YELLOW} & \textcolor{GREEN YELLOW} {$\blacksquare$} & 173& 255& 47& {\ct SLATE GRAY} &  \textcolor{SLATE GRAY} {$\blacksquare$} & 112& 128& 144  \\ \hline
{\ct HONEYDEW} & \textcolor{HONEYDEW} {$\blacksquare$} & 240& 255& 240& {\ct SPRING GREEN} &  \textcolor{SPRING GREEN} {$\blacksquare$} & 0& 255& 127  \\ \hline
{\ct HOT PINK} & \textcolor{HOT PINK} {$\blacksquare$} & 255& 105& 180& {\ct STEEL BLUE} &  \textcolor{STEEL BLUE} {$\blacksquare$} & 70& 130& 180  \\ \hline
{\ct INDIAN RED} & \textcolor{INDIAN RED} {$\blacksquare$} & 205& 92& 92& {\ct TAN} &  \textcolor{TAN} {$\blacksquare$} & 210& 180& 140  \\ \hline
{\ct INDIGO} & \textcolor{INDIGO} {$\blacksquare$} & 75& 0& 130& {\ct TEAL} &  \textcolor{TEAL} {$\blacksquare$} & 0& 128& 128  \\ \hline
{\ct IVORY} & \textcolor{IVORY} {$\blacksquare$} & 255& 255& 240& {\ct THISTLE} &  \textcolor{THISTLE} {$\blacksquare$} & 216& 191& 216  \\ \hline
{\ct IVORY BLACK} & \textcolor{IVORY BLACK} {$\blacksquare$} & 41& 36& 33& {\ct TOMATO } &  \textcolor{TOMATO } {$\blacksquare$} & 255& 99& 71  \\ \hline
{\ct KELLY GREEN} & \textcolor{KELLY GREEN} {$\blacksquare$} & 0& 128& 0& {\ct TURQUOISE} &  \textcolor{TURQUOISE} {$\blacksquare$} & 64& 224& 208  \\ \hline
{\ct KHAKI} & \textcolor{KHAKI} {$\blacksquare$} & 240& 230& 140& {\ct VIOLET} &  \textcolor{VIOLET} {$\blacksquare$} & 238& 130& 238  \\ \hline
{\ct LAVENDER} & \textcolor{LAVENDER} {$\blacksquare$} & 230& 230& 250& {\ct VIOLET RED} &  \textcolor{VIOLET RED} {$\blacksquare$} & 208& 32& 144  \\ \hline
{\ct LIME GREEN} & \textcolor{LIME GREEN} {$\blacksquare$} & 50& 205& 50& {\ct WHITE} &  \textcolor{WHITE} {$\blacksquare$} & 255& 255& 255  \\ \hline
{\ct MAGENTA} & \textcolor{MAGENTA} {$\blacksquare$} & 255& 0& 255& {\ct YELLOW} &  \textcolor{YELLOW} {$\blacksquare$} & 255& 255& 0  \\ \hline
\hline
\end{tabular}
\end{center}
\end{table}


\subsection{Texture Mapping}
\label{info:texture_map}
\index{Surface Texture Maps}
\index{SURF!TEXTURE\_MAP}
There are various ways of prescribing the color of various objects
within the computational domain, but there is also a way of pasting
images onto the obstructions for the purpose of making the Smokeview
images more realistic. This technique is known as ``texture mapping.''
For example, to apply a wood paneling image to a wall,
add to the {\ct SURF} line defining the physical properties of the
paneling the text

\footnotesize
\begin{verbatim}
&SURF ID='wood paneling',...,TEXTURE_MAP='paneling.jpg',TEXTURE_WIDTH=1.,
      TEXTURE_HEIGHT=2. /
\end{verbatim}
\normalsize
Assuming that a JPEG file called {\bf paneling.jpg} exists in the
working directory, Smokeview should read it and display the image
wherever the paneling is used (SGI Users: use rgb files instead of jpg).
Note that the image does not appear when Smokeview is first invoked. It is an option controlled by
the {\ct Show/Hide} menu. The parameters {\ct TEXTURE\_WIDTH}
and {\ct TEXTURE\_HEIGHT} are the physical dimensions of the image.
\index{SURF!TEXTURE\_HEIGHT} \index{SURF!TEXTURE\_WIDTH} In this case,
the JPEG image is of a 1 m wide by 2 m high piece of
paneling. Smokeview replicates the image as often as necessary to
make it appear that the paneling is applied where desired.
Consider carefully how the image repeats itself when
applied in a scene. If the image has no obvious pattern, there is no
problem with the image being repeated. If the image has an obvious
direction, the real triplet {\ct TEXTURE\_ORIGIN} should be added to
the {\ct VENT} or {\ct OBST} line to which a texture map
should be applied. For example,

\footnotesize
\begin{verbatim}
&OBST XB=1.0,2.0,3.0,4.0,5.0,7.0,SURF_ID='wood paneling',
      TEXTURE_ORIGIN=1.0,3.0,5.0 /
\end{verbatim}
\normalsize
applies paneling to an obstruction whose dimensions are 1 m by
1 m by 2 m, such that the image of the paneling is positioned
at the point (1.0,3.0,5.0). The default value of {\ct TEXTURE\_ORIGIN}
is (0,0,0), and the global default can be changed by added a
{\ct TEXTURE\_ORIGIN} statement to the {\ct MISC} line.




\clearpage

\section{Verifying the Solid Phase Properties}
\label{solid_phase_verification}

As this chapter has demonstrated, real materials can be very complicated. Undoubtedly, the {\ct SURF} and {\ct MATL} lines in the
input file will consist of a combination of empirical and fundamental properties, often originating from different sources. How do you know
that the various property values and the associated thermo-physical model in FDS
constitute an appropriate description of the solid? For a full-scale simulation, it is hard to untangle the uncertainties associated with the gas and solid
phase routines. However, it is easy to perform a simple check of any set of surface properties by essentially turning off the gas phase -- no combustion and
no convective heat transfer. There are several parameters that allow you do this, spread out over the various namelist groups.

\begin{enumerate}
\item Create a trivially small mesh, just to let FDS run. Since the
gas phase calculation is essentially being shut off, you just need 4
cells in each direction ({\ct IJK=4,4,4}) for the pressure solver to
function properly.
\item On the {\ct TIME} line, set {\ct WALL\_INCREMENT=1}\index{TIME!WALL\_INCREMENT} to force FDS
to update the solid phase every time step (normally it does this every
other time step), and set {\ct DT} to whatever value appropriate for
the solid phase calculation. Since there is no gas phase calculation
that will limit the time step, it is best to control this yourself.
\item Put {\ct H\_FIXED=0.} on the {\ct MISC} line. This turns off the
convective heat flux from gas to surface and vis verse. The heat flux
to the solid is specified via {\ct EXTERNAL\_FLUX} (kW/m$^2$) on the
{\ct SURF} line that is assigned to the solid surface. If you want to specify a particular
convective heat flux to the solid surface, you can set {\ct ASSUMED\_GAS\_TEMPERATURE} on the
{\ct MISC} line, along with a non-zero value of {\ct H\_FIXED}.
\item Turn off all the gas phase computations by setting {\ct SOLID\_PHASE\_ONLY=.TRUE.}
on the {\ct MISC} line. This will also speed
up the computations significantly. If the gas phase computations are
needed, you may turn off combustion by creating a {\ct REAC} line with only
{\ct Y\_O2\_INFTY=0.01}. This sets the background oxygen mass fraction
to 0.01, too low to support any burning.
\item Generate {\ct MATL} lines, plus a single {\ct SURF} line, as you
normally would, except add {\ct EXTERNAL\_FLUX} \index{SURF!EXTERNAL\_FLUX} to the {\ct SURF}
line. This is simply a ``virtual'' source that heats the solid. Think
of this as a perfect radiant panel or cone calorimeter.
\item Assign the {\ct SURF\_ID} to a {\ct VENT} that spans the bottom
of the computational domain. Create {\ct OPEN} vents on all other
faces.
\item Finally, add solid phase output devices to the solid surface,
like {\ct WALL\_TEMPERATURE}, {\ct HEAT\_FLUX}, {\ct BURNING\_RATE},
{\ct GAUGE\_HEAT\_FLUX}, and {\ct WALL\_THICKNESS} (assuming the solid
is to burn away). Use these to track the condition of the solid as a
function of time. In particular, make sure that the {\ct
BURNING\_RATE} is appropriate for the particular external heat flux
applied. Make sure that the {\ct WALL\_TEMPERATURE} is
appropriate. Compare your results to measurements made in a
bench-scale device, like the cone calorimeter. Keep in mind, however,
that the calculation and the experiment are not necessarily perfectly
matched. The calculation is designed to eliminate uncertainties
related to convection, combustion, and apparatus-specific phenomena.
\end{enumerate}



\chapter{Combustion and Radiation}
\label{chap:combustion}

A common source of confusion in FDS is the distinction between gas phase {\em combustion} and solid phase {\em pyrolysis}. The former
refers to the reaction of fuel vapor and oxygen; the latter the generation of fuel vapor at a solid or liquid surface. Whereas there
can be many types of combustibles in an FDS fire simulation, there can only be one gaseous fuel. The reason is cost. It is expensive to
solve transport equations for multiple gaseous fuels. Consequently, the burning rates of solids and liquids are automatically adjusted by
FDS to account for the difference in the heats of combustion of the various combustibles. In effect, you specify a single gas phase
reaction as a surrogate for all the potential fuel sources.

The gas phase reaction can be described in two ways. By default, a so-called {\em mixture fraction} model is used to account for the evolution of
the fuel gas from its surface of origin through the combustion process. The alternative is what is referred to as the {\em finite-rate}
approach, where all of the individual gas species involved in the combustion process are defined and tracked individually. This is a
costlier and more complicated approach than the {\em mixture fraction} model. This chapter describes both methods, with an emphasis on the more
commonly used mixture fraction model.


\section{Mixture Fraction Combustion: The \texorpdfstring{{\tt REAC}}{REAC} Namelist Group}
\label{info:REAC}\index{REAC}


There are two ways of designating a fire: the first is to specify a
Heat Release Rate Per Unit Area {\ct HRRPUA} on a
{\ct SURF} line. The other is to specify a
{\ct HEAT\_OF\_REACTION}, along with other thermal parameters on a {\ct MATL} line,
in which case the burning rate of the fuel depends on the net heat feedback to the surface.
In both cases, the mixture fraction combustion model is used. In fact, the mere presence of these
parameters automatically invokes the mixture fraction model. Do not specify explicitly gas species like
oxygen if you have also specified heat release rates or solid phase reaction rates.

A single {\ct REAC} line is used with the mixture fraction model. If the {\ct REAC} line is not found in the input file, propane will
be used as the surrogate fuel, and all burning rates will be adjusted accordingly.
If you only specify the fire's heat release
rate with {\ct HRRPUA}, then the reaction parameters may not
require adjusting, and no {\ct REAC} line need be added to the input file.
However, if you know something about the predominant fuel gas, you might want to consider
specifying, at the very least, the basic stoichiometry via the {\ct REAC} line.

Using the mixture fraction model, each reaction is assumed to be of the form:
\be \mathrm{C_xH_yO_zN_vOther_w + \nu_{O_2} \; O_2 \rightarrow
    \nu_{CO_2} \; CO_2 + \nu_{H_2O} \; H_2O +
    \nu_{CO}   \; CO   + \nu_{Soot} \; Soot + \nu_{N_2} \; N_2 + \nu_{Other} \; Other } \ee
You need only specify the chemical formula of the fuel along with
the yields of CO, soot, and H$_2$, and the amount of hydrogen in the soot, H$_{frac}$.
For completeness you can specify the N$_2$ content of
the fuel and the presence of other species. FDS will use that information internally to
determine the amount of combustion products that are formed:
\begin{eqnarray*}
\nu_{O_2} &=& \nu_{CO_2} + \frac{\nu_{CO}}{2} + \frac{\nu_{H_2O}}{2} - \frac{\hbox{z}}{2} \\
\nu_{CO_2} &=& \hbox{x} - \nu_{CO} - (1-H_{frac}) \nu_{soot}  \\
\nu_{H_2O} &=& \frac{\hbox{y}}{2} - \frac{H_{frac}}{2} \nu_{soot} - \nu_{H_2} \\
\nu_{CO}   &=& \frac{W_f}{W_{CO}} y_{CO} \\
\nu_{H_2}  &=& \frac{W_f}{W_{H_2}} y_{H_2} \\
\nu_{soot} &=& \frac{W_f}{W_S} y_s \\
\nu_{N_2} &=& \frac{\hbox{v}}{2} \\
\nu_{other} &=& w\\
W_s &=& H_{frac} W_H + (1-H_{frac}) W_C
\end{eqnarray*}
The following parameters may be prescribed on the {\ct REAC} line.
Note that the various {\ct YIELD}s are for well-ventilated, post-flame conditions. There are options to
predict various species yields in under-ventilated fire scenarios, but these special models still require
the post-flame yields for CO, soot and any other species listed below.
\begin{description}
\item[{\ct ID}] A character string naming the reaction.
\item[{\ct C, H, O, N, OTHER}] The fuel chemical formula. All numbers are positive.
(Mixture Fraction only, default values are those of propane)
\item[{\ct MW\_OTHER}] Average molecular weight for {\ct OTHER} (g/mol).
(Mixture Fraction only, default is the molecular weight of N$_2$, 28 g/mol)
\item[{\ct Y\_O2\_INFTY}] Ambient mass fraction of oxygen (Mixture Fraction only, default 0.23)
\item[{\ct Y\_F\_INLET}] Mass fraction of fuel in fuel stream (Mixture Fraction only, default 1.0)
\item[{\ct SOOT\_YIELD}] The fraction of fuel mass converted into smoke particulate, $y_s$.
Note that this parameter does not apply to the processes of soot growth and oxidation,
but rather to the net production of the smoke particulate from the fire.  (Mixture Fraction only, default 0.01)
\item[{\ct SOOT\_H\_FRACTION}] The fraction of the atoms in the soot that are hydrogen.
(Mixture Fraction only, default 0.1)
\item[{\ct CO\_YIELD}] The fraction of fuel mass converted into carbon
monoxide, $y_{CO}$. (Mixture Fraction only, default 0.0)
\item[{\ct H2\_YIELD}] The fraction of fuel mass converted into hydrogen, $y_{H_2}$. (Mixture Fraction only, default 0.0)
\item[{\ct HEAT\_OF\_COMBUSTION}] $\Delta H$ (kJ/kg). The amount of
energy released per unit mass of fuel consumed. Note that if the heat of combustion is not
specified, it is assumed to be
$$ \Delta H \approx \frac{\nu_{O_2} \; W_{O_2} } { \nu_{f} \; W_{f} } \; \;
   \hbox{\ct EPUMO2}  \quad \quad \hbox{kJ/kg}  $$
\item[{\ct EPUMO2}] The amount of energy released per unit mass of oxygen consumed. (kJ/kg)
Default is 13,100 kJ/kg.  Note that if both {\ct EPUMO2} and {\ct HEAT\_OF\_COMBUSTION} are
specified that FDS will ignore the value for {\ct EPUMO2}.
\item[{\ct IDEAL}] Logical value indicating whether or not the {\ct EPUMO2} or {\ct  HEAT\_OF\_COMBUSTION}
values represent values for complete combustion ({\ct .TRUE.}) or for incomplete combustion ({\ct .FALSE.}),
i.e. the values account for the specified $y_{CO}$, $y_{H_2}$, and $y_s$.  If {\ct IDEAL}, then
FDS will internally adjust $\Delta H$ to account for products of incomplete combustion.
\end{description}

\noindent
A few sample {\ct REAC} lines are given here. The values are for demonstration only.


\footnotesize
\begin{verbatim}
&REAC ID         = 'METHANE'
      C          = 1.
      H          = 4. /

&REAC ID                 = 'PROPANE'
      SOOT_YIELD         = 0.01
      C                  = 3.
      H                  = 8.
      HEAT_OF_COMBUSTION = 46460.
      IDEAL              = .TRUE. /

&REAC ID                 = 'PROPANE'
      SOOT_YIELD         = 0.01
      C                  = 3.
      H                  = 8.
      HEAT_OF_COMBUSTION = 46124.
      IDEAL              = .FALSE. /

&REAC ID                 = 'ACRYLONITRILE'
      C                  = 3.
      H                  = 3.
      N                  = 1.
      HEAT_OF_COMBUSTION = 24500.
      IDEAL              = .TRUE. /

&REAC ID                 = 'CARBON DISULFIDE'
      C                  = 1.
      Other              = 2.
      MW_OTHER           = 32.
      HEAT_OF_COMBUSTION = 13600.
      IDEAL              = .TRUE. /
\end{verbatim}
\normalsize



\subsection{Important Issues Related to the Mixture Fraction Models}
\label{info:combustion}

This section explains the various approximations that
affect both the gas phase parameters ({\ct REAC} line) and the
solid (or liquid) phase parameters ({\ct SURF} line). These
approximations are needed either to compensate for less than
desirable mesh resolution or limitations of the mixture fraction
combustion model.


\vspace{\baselineskip}
\noindent
{\bf Heat of Combustion:} By default the {\ct EPUMO2} value is combined with
the stoichiometric parameters listed
on the {\ct REAC} line to compute the heat of combustion.  Specifying the
{\ct HEAT\_OF\_COMBUSTION} will override that computation.
However, if heats of reaction have been specified on the
{\ct MATL} line and
the heat of combustion of the material differs from that specified by
the governing reaction, then add a
{\ct HEAT\_OF\_COMBUSTION} (kJ/kg) to the {\ct MATL} line.
With the mixture fraction combustion
model, it is assumed that there is only one fuel. However, in a realistic
fire scenario, there may be many fuels originating from the various
burning objects in the building. Specify
the stoichiometry of the predominant reaction via the {\ct REAC}
namelist group. If the stoichiometry of the burning material
differs from the global reaction, the {\ct HEAT\_OF\_COMBUSTION} is
used to ensure that an equivalent amount of fuel is injected into the
flow domain from the burning object.



\vspace{\baselineskip}
\noindent
{\bf Gas Phase Fire Suppression:} \index{Flame Extinction}
Modeling suppression of a fire due to the introduction of a suppression
agent like CO$_2$ or water mist, or due to the exhaustion of oxygen
within a compartment is challenging because
the relevant physical mechanisms occur at length scales smaller than a
single mesh cell. Flames are extinguished due to lowered
temperatures and dilution of the oxygen supply. A simple
suppression algorithm has been implemented in FDS that attempts to
gauge whether or not a flame is viable at the fuel-oxygen interface. The Technical Reference Guide~\cite{FDS_Tech_Guide_5}
contains more details about how the mechanism works. The only
parameters you can control are the Limiting
Oxygen Index {\ct X\_O2\_LL},
and the {\ct CRITICAL\_FLAME\_TEMPERATURE}. Both are
set on the {\ct REAC} line.
The default values are 0.15 (volume fraction) and 1427~$^\circ$C, respectively.
To eliminate any gas phase suppression, set {\ct X\_O2\_LL} to 0. To turn off suppression completely,
set {\ct SUPPRESSION=.FALSE.} on the {\ct MISC} line.

\vspace{\baselineskip}
\noindent
{\bf CO Production:} \index{CO Production}
An algorithm has been implemented that computes the combustion as a two step reaction that
predicts the formation and destruction of CO.  The Technical Reference Guide~\cite{FDS_Tech_Guide_5}
contains more details about how the mechanism works. This algorithm is used when
{\ct CO\_PRODUCTION} is set to {\ct .TRUE.} on the {\ct MISC} line. Even though the algorithm predicts
CO formation and its eventual oxidation at elevated temperature, it cannot predict the post-flame
yield of CO. For example, within a flashed over compartment, the algorithm predicts the elevated
CO levels, but it cannot predict the CO concentration of the exhaust gases that exit the flaming region.
Thus, even if using this model, you must specify the {\ct CO\_YIELD} that is expected of a well-ventilated fire.

\begin{warning}
\noindent
Note that when active, this algorithm requires the use of three parameters
for the mixture fraction vs. the two parameters used when it is disabled and will therefore
increase run times and memory usage accordingly.  If the simulation you are
performing will not result in an under-ventilated fire, then there will be of
little if any benefit to enabling the CO production algorithm.
\end{warning}



\clearpage

\section{Extra Gas Species: The \texorpdfstring{{\tt SPEC}}{SPEC} Namelist Group}
\label{info:SPEC}\index{SPEC}

Normally when you specify a fire via either {\ct HRRPUA} on the {\ct SURF} line or
reaction parameters on the {\ct MATL} line, the mixture fraction combustion model
is applied. A a set of two or three scalar variables, $Z_i$, represent the state of
the combustion process from pure fuel ($\sum Z_i=1$) to pure air ($\sum Z_i=0$).
The major reactants and products of combustion -- fuel, O$_2$, CO$_2$,
H$_2$O, N$_2$, CO and soot -- are all pre-tabulated functions of
the mixture fraction, $Z$. In other words, the values of $Z_i$ in any
given mesh cell determines the mass fraction of all the gases listed.
The fuel chemistry listed under the {\ct REAC} namelist
group is used to generate the table associating the mass fractions
with $Z_i$. You need not, {\em and should not},
explicitly list the reactants and products of combustion.

Suppose however that gases are introduced into the
domain that are neither reactants nor products of combustion.
This gas can be tracked separately from the mixture fraction via an additional scalar transport equation\footnote{
Often an extra gas introduced into a calculation is the same as a
product of combustion, like water vapor from a sprinkler or carbon
dioxide from an extinguisher. These gases are tracked separately,
thus water vapor generated by the combustion is tracked via the
mixture fraction variable and water vapor generated by evaporating
sprinkler droplets is tracked via its own transport equation. In the
case of sprinklers, do not specify {\ct WATER VAPOR} as
an extra species -- it is done automatically.}.
In fact, there does not need to be any fire
at all -- FDS can be used to transport a mixture of non-reacting
ideal gases.

The namelist group {\ct SPEC} is used to specify each additional
species. Each {\ct SPEC} line should include at the very least
the name of the species via a character string called ({\ct ID}).
Next, if the ambient (initial) mass fraction of the gas is something
other than 0, then the parameter {\ct MASS\_FRACTION\_0} is used to
specify it.
Several gases that can be included in a calculation are listed in
Table~\ref{tab:gasspecies}. The physical properties
of these gases are known and do not need to be specified. However, if a
desired gas is not included in Table~\ref{tab:gasspecies}, its
molecular weight {\ct MW} must be specified in units of g/mol.
In addition, if a DNS calculation is being performed, either
the Lennard-Jones potential parameters $\sigma$ ({\ct SIGMALJ}) and
$\epsilon/k$ ({\ct EPSILONKLJ}) should be specified; or
the {\ct VISCOSITY} (kg/m/s), {\ct CONDUCTIVITY} (W/m/K), and
{\ct DIFFUSIVITY} (m$^2$/s) between the given species
and the background species should be specified.

\footnotesize
\begin{verbatim}
&SPEC ID='ARGON',MASS_FRACTION_0=0.1,MW=40. /
\end{verbatim}
\normalsize

\noindent
As an example, the lines:

\footnotesize
\begin{verbatim}
&SPEC ID='ARGON', MASS_FRACTION_0=0.1, MW=40. /
&SPEC ID='HELIUM' /
       .
       .
&SURF ID='INLET', MASS_FRACTION(2)=0.2, VEL=-0.3, TAU_MF(2)=0.5, TAU_V=0.5 /
\end{verbatim}
\normalsize

\noindent
specify that {\ct ARGON} and {\ct HELIUM} are to be included in the calculation
in addition to the (unlisted) default
{\ct BACKGROUND\_SPECIES='AIR'}. At
the {\ct INLET}, a mixture of helium (0.2 by mass), argon (0.1 by mass
because nothing different is specified), and air (0.7 by mass making
up the rest) flows out at a velocity of 0.3~m/s {\em into} the flow
domain. The mass fraction of helium and the velocity are both
ramped up according to the function $\tanh(t/0.5)$.

If the simulation does not involve the mixture fraction model -- either because no combustion is
desired or if a finite rate reaction(s) is being specified (see Section~\ref{info:finite}) -- you can
specify that the background gas species be something other than air. For a gas mixture comprised of
$n$ species, FDS only solves transport equations for $n-1$ because it also solves an equation for
total mass conservation. To set the properties of the implicitly defined {\ct BACKGROUND\_SPECIES}, use the
{\ct MISC} line. If this species is not listed in Table~\ref{tab:gasspecies}, specify its molecular weight, {\ct MW},
and (optionally) its {\ct VISCOSITY} and {\ct CONDUCTIVITY}. In the absence of any of these parameters, the appropriate
values of {\ct 'AIR'} are assumed.


\begin{table}[t]
\begin{center}
\caption{\bf Optional Gas Species~\cite{Reid:1}}
\label{tab:gasspecies}
\vspace{0.1in}
\begin{tabular}{|l|c|c|c|}
\hline
Species &   Mol.~Wgt.        & $\sigma$  & $k/\epsilon$  \\
        &   (g/mol)          & (\AA)     & (K)            \\ \hline
\hline
{\ct AIR}             & 29   & 3.711     & 78.6           \\ \hline
{\ct CARBON DIOXIDE}  & 44   & 3.941     &195.2           \\ \hline
{\ct CARBON MONOXIDE} & 28   & 3.690     & 91.7           \\ \hline
{\ct HELIUM}          &  4   & 2.551     & 10.22          \\ \hline
{\ct HYDROGEN}        &  2   & 2.827     & 59.7           \\ \hline
{\ct METHANE}         & 16   & 3.758     &148.6           \\ \hline
{\ct NITROGEN}        & 28   & 3.798     & 71.4           \\ \hline
{\ct OXYGEN}          & 32   & 3.467     &106.7           \\ \hline
{\ct PROPANE}         & 44   & 5.118     &237.1           \\ \hline
{\ct WATER VAPOR}     & 18   & 2.641     &809.1           \\ \hline
\end{tabular}
\end{center}
\end{table}

Recognized species that are emissive will been defined as {\ct ABSORBING} and radiative absorption for those species
will be computed.  The keyword {\ct ABSORBING} can be specified on the {\ct SPEC} line as well.  If {\ct .TRUE.} and the
species is not in the recognized list, then it will be assumed to be a fuel when invoking RADCAL to compute its
absorptivity.

\clearpage

\section{Finite-Rate Combustion}
\label{info:finite}

Usually, FDS uses mixture fraction concepts to describe combustion. However, FDS can also explicitly track gas species and
reactions that can occur between them. This section describes how to do this.

\begin{enumerate}
\item It is strongly recommended that finite-rate reactions be invoked only
when FDS is running in DNS mode. Set {\ct DNS=.TRUE.} on the {\ct MISC} line.
Note: you may use the finite-rate reaction scheme in an
LES calculation, but because the temperature in a large scale calculation
is smeared out over a mesh cell, some of the reaction parameters may need
to be modified to account for the lower temperatures.

\item The {\ct BACKGROUND\_SPECIES} on the {\ct MISC} line is normally
set to be {\ct 'NITROGEN'}.

\item The namelist group {\ct SPEC} is used to specify each additional
species. Do not enter a {\ct SPEC} line for the background species.

\item Read Section~\ref{info:SPEC} for a description of the boundary
conditions for the gas species.

\item The {\ct REAC} namelist group is used to designate the fuel and the reaction rate
parameters.  For a finite-rate reaction you can specify multiple {\ct REAC}lines.  Note that
FDS will evalute the reactions in the order they are listed in the input file. %Jason add tech man ref
\begin{description}
\item[{\ct FUEL}] Character string indicating which of the listed
optional gas species is the fuel.
\item[{\ct OXIDIZER}] Character string indicating which of the listed
optional gas species is the oxidizerl.
\item[{\ct BOF}] Pre-exponential factor in one-step chemical reaction in
units of cm$^3$/mole/s.
\item[{\ct E}] Activation energy for one-step chemical reaction in
units of kJ/kmol.
\item[{\ct NU}] Array containing the stoichiometry of the chemical reaction for each {\ct SPEC} where
negative values indicate reactants and positive values indicate products.  Note that the background species
cannot participate in the reaction.
\item[{\ct N\_S}] Array containing the exponents for the finite rate equation for each {\ct SPEC}.
Note that a {\ct SPEC} can be given an {\ct N\_S} but not a {\ct NU}, i.e the rate equation can
be dependent on a species that does not participate directly in the reaction.  Note that the background species
cannot participate in the reaction.
\item[{\ct HEAT\_OF\_COMBUSTION}] The effective heat of combustion the chemical reaction in units of kJ/kg. (Default 40,000 kJ/kg)
\end{description}

\end{enumerate}




\section{Radiation Transport: The \texorpdfstring{{\tt RADI}}{RADI} Namelist Group}
\label{info:RADI}\index{RADI}
\index{RADI!RADIATIVE\_FRACTION}

For most FDS simulations, thermal radiation transport is computed by default and you need not set any
parameters to make this happen. However, there are situations where it is important to be aware of
issues related to the radiative transport solver. The most important issue involves the fraction of energy released from the
fire as thermal radiation, commonly referred to as the {\em radiative fraction}. It is a function of both the flame temperature
and chemical composition, neither of which are reliably calculated in a large
scale fire calculation because the flame sheet is not well-resolved on the mesh.
In calculations in which the mesh cells are on the order of a centimeter and
larger, the temperature near the flame surface cannot be relied upon when
computing the source term in the radiation transport equation, especially
because of the $T^4$ dependence.
To compensate, if you prescribe a non-zero
value of {\ct RADIATIVE\_FRACTION} on the {\ct RADI} line, a mesh cell cut by the flame
radiates that fraction of the chemical energy being released into it.
Some of that energy may be reabsorbed elsewhere, yielding a net radiative
loss that is less than {\ct RADIATIVE\_FRACTION}, depending mainly on the size of
the fire and the soot loading. If it is desired to use the radiation transport
equation as is, then {\ct RADIATIVE\_FRACTION} ought to be set to zero,
and the source term in the radiative transport equation is then based solely
on the gas temperature and the chemical composition. By default, the {\ct RADIATIVE\_FRACTION} is
0.35 for an LES calculation, and zero for DNS.

\index{RADI!NUMBER\_RADIATION\_ANGLES}
\index{RADI!TIME\_STEP\_INCREMENT}
\index{RADI!ANGLE\_INCRMENT}
There are several ways to improve the performance of the Finite Volume
Method in solving the radiation transport equation (RTE), most of which
increase the computation time. The solver has two modes of
operation -- a gray gas model (default) and a wide band model~\cite{FDS_Tech_Guide_5}.
Modifications to these models can be made via a namelist group called
{\ct RADI}. If running in gray gas mode (default), increase the number
of angles from the default 100 with the integer parameter
{\ct NUMBER\_RADIATION\_ANGLES}. The frequency of calls to the radiation
solver can be reduced from every 3 time steps with integer
{\ct TIME\_STEP\_INCREMENT}. The increment over which the angles are
updated can be reduced from 5 with the integer {\ct ANGLE\_INCREMENT}.
Briefly, if {\ct TIME\_STEP\_INCREMENT} and {\ct ANGLE\_INCREMENT} are
both set to 1, the radiation field is completely updated in a single
time step, but the cost of the calculation increases significantly.

\index{RADI!NMIEANG}
\index{RADI!RADTMP}
A few parameters affecting the absorption of radiation by water
droplets are as follows: {\ct RADTMP} is the assumed radiative source temperature.
It is used in the computation of the mean scattering
and absorption cross sections of water droplets. The default is 900~$^\circ$C.
{\ct NMIEANG} is the number of angles in the numerical integration of the Mie-phase function.
Increasing {\ct NMIEANG} improves the accuracy
of the radiative properties of water droplets. The cost
of the better accuracy is seen in the initialization phase,
not during the actual simulation. The default value for {\ct NMIEANG}
is 15.

\index{RADI!WIDE\_BAND\_MODEL}
\index{RADI!CH4\_BANDS}
If the optional six band model is desired,
set {\ct WIDE\_BAND\_MODEL=.TRUE.}. It is recommended that this option
only be used when the fuel is relatively non-sooting because it
adds significantly to the cost of the calculation. To add three
additional fuel bands, set {\ct CH4\_BANDS=.TRUE.}. See FDS Technical
Reference Guide for more details.

\index{MISC!RADIATION}
Note also that it is possible to turn off the radiation transport
solver (saving roughly 20 \% in CPU time) by adding the statement
{\ct RADIATION=.FALSE.} to the {\ct MISC} line. For isothermal
calculations, the radiation is turned off automatically. If burning
is taking place and radiation is turned off, then the total heat
release rate is reduced by the {\ct RADIATIVE\_FRACTION}, which is
input on the {\ct RADI} line. This radiated energy completely
disappears from the calculation. More on this feature can be found in
Section~\ref{info:combustion}.





\clearpage

\chapter{Lagrangian Particles: The \texorpdfstring{{\tt PART}}{PART} Namelist Group}
\label{info:PART}\index{PART}

Lagrangian particles are used in FDS as water or liquid fuel
droplets, flow tracers, and various other objects that are not defined or confined by the numerical mesh. Sometimes the
particles have mass, sometimes they do not. Some evaporate,
absorb radiation, {\em etc.}
{\ct PART} is the namelist group that is used to prescribe
parameters associated with Lagrangian particles.

\begin{warning}
All Lagrangian particles must be explicitly defined via the {\ct PART} namelist group. In versions of FDS prior to 5, water droplets and
smoke particles were implicitly defined. Shortcuts for defining water droplets and smoke particles are possible, via parameters like
{\ct WATER=.TRUE.} and {\ct MASSLESS=.TRUE.}
\end{warning}


\section{Basics}

Properties of different types of
Lagrangian particles are designated via the {\ct PART} namelist group.
Much like {\ct SURF} lines contain the properties of a solid surface or
vent, {\ct PART} lines contain information about particles and droplets.
Once a particular type of particle or droplet has been described using
a {\ct PART} line, then the name of that particle or droplet type is invoked
elsewhere in the input file via the parameter {\ct PART\_ID}. There are no reserved {\ct PART\_ID}s -- all must be defined.
For example, an input file may have several {\ct PART} lines that include the
properties of different types of Lagrangian particles:

\footnotesize
\begin{verbatim}
&PART ID='my smoke',... /
&PART ID='my water',... /
\end{verbatim}
\normalsize
These Lagrangian particles can be introduced at a solid surface via the {\ct SURF} line
that defines the properties of the material, for example

\footnotesize
\begin{verbatim}
&SURF ...,PART_ID='my smoke' /
\end{verbatim}
\normalsize
or the {\ct PART} type can be invoked from a {\ct PROP} line to change
the properties of the droplets ejected by a sprinkler or nozzle, for example

\footnotesize
\begin{verbatim}
&PROP ID='Acme Sprinkler 123', QUANTITY='SPRINKLER LINK TEMPERATURE', PART_ID='my water',... /
\end{verbatim}
\normalsize
Note that a surface on which particles are specified must have a non-zero normal velocity directed into the
computational domain. This happens automatically if the surface is burning, but must be specified
if it is not. Also, specify {\ct PARTICLE\_MASS\_FLUX} on the {\ct SURF} line if non-massless particles
are to have a specified mass flux. The number of particles inserted at each solid cell every
{\ct DT\_INSERT} seconds is specified by {\ct NPPC} on the {\ct SURF} line defining the solid surface. The default
value of {\ct NPPC} is 1.
\index{SURF!NPPC}
\index{SURF!PARTICLE\_MASS\_FLUX}
\index{SURF!PART\_ID}

\section{Tracer Particles}

The simplest use of Lagrangian particles is for visualization, in which case the
particles are considered massless tracers. In this case, the particles are
defined via the line

\footnotesize
\begin{verbatim}
&PART ID='tracers',MASSLESS=.TRUE.,... /
\end{verbatim}
\normalsize

\noindent
Other options for massless particles are
\begin{description}
\item[{\ct DT\_INSERT}]    Time increment in seconds between Lagrangian particle insertions.
If more particles are desired, lower the input value of this parameter. This value can be different
for different particle groups. This parameter is appropriate for all types of particles. (Default 0.05~s)
\item[{\ct SAMPLING\_FACTOR}]     Sampling factor for the particle output
file {\bf CHID.prt5}. This parameter can be used to reduce the size
of the particle output file used to animate the simulation. (Default 1)
\item[{\ct AGE}]  Number of seconds the particle or droplet exists. Useful parameter to use when
trying to reduce the number of droplets or particles in a simulation.
\end{description}
Note that if the
particles are {\ct MASSLESS}, it is not appropriate to color them according to any particular property.
Unlike early versions of FDS, particles are no longer
colored by gas phase quantities, but rather by properties of the particle itself. For example,
{\ct 'DROPLET\_TEMPERATURE'} for a non-massless particle refers to the temperature of the particle itself
rather than the local gas temperature.


\section{Droplets}

For Lagrangian particles that are not {\ct MASSLESS}, the following additional parameters can be
included on the {\ct PART} line. Note that
many of these parameters are used only for certain types of particles or
droplets and need to be specified only if they are relevant.
\begin{description}
\item[{\ct DENSITY}] The density of the liquid or solid droplet/particle.
(Default 1000~kg/m$^3$)
\item[{\ct VAPORIZATION\_TEMPERATURE}] Boiling temperature of liquid droplet.
(Default 100~$^\circ$C)
\item[{\ct MELTING\_TEMPERATURE}] Melting (solidification) temperature of liquid droplet.
(Default 0~$^\circ$C)
\item[{\ct INITIAL\_TEMPERATURE}] Initial temperature of liquid droplet.
(Default {\ct TMPA})
\item[{\ct SPECIFIC\_HEAT}] Specific heat of liquid or solid droplet/particle.
(Default 4.184~kJ/kg/K)
\item[{\ct HEAT\_OF\_VAPORIZATION}] Latent heat of vaporization of liquid droplet.
(Default 2259~kJ/kg)
\item[{\ct DIAMETER}] Median volumetric diameter of droplets/particles, with the
distribution assumed to be a combination of Rosin-Rammler and log-normal (Default 500~$\mu$m). The
width of the distribution is controlled by the parameter {\ct GAMMA\_D} (default 2.4)
The Rosin-Rammler/log-normal distribution is given by
\be F(d) = \left\{ \begin{array}{ll}
   \frac{1}{\sqrt{2\pi}} {\displaystyle \int_0^d} \, \frac{1}{\sigma\, d'} \,
   e^{-\frac{[\ln(d'/d_m)]^2}{2\sigma^2}} \; dd'       & (d \le d_m) \\
   1 - e^{-0.693 \left(\frac{d}{d_m}\right)^\gamma }  & (d_m < d)
   \end{array} \right.  \ee
Note that the parameter $\sigma$ is given the value
$\sigma=2/(\sqrt{2\pi} \, (\ln\,2) \; \gamma)=1.15/\gamma$
which ensures that the two functions are smoothly joined at $d=d_m$.
The larger the value of $\gamma$, the narrower the droplet size is
distributed about the median value. Note that you can prevent droplets or particles from
exceeding {\ct MAXIMUM\_DIAMETER}, which is infinitely large by default. Also note that
droplets less than {\ct MINIMUM\_DIAMETER} are assumed to evaporate in a single time step, eliminating numerical
instabilities that can occur when droplets get very, very small. The default {\ct MINIMUM\_DIAMETER} is 20~$\mu$m.
To prevent FDS from generating a distribution of droplets/particles altogether, set
{\ct MONODISPERSE=.TRUE.} on the {\ct PART} line, in which case every droplet or particle will be assigned the
same {\ct DIAMETER}.
\item[{\ct QUANTITIES}] A character string indicating which
scalar quantities should be used to color the particles when viewed as an
animation. The choices are {\ct 'DROPLET\_TEMPERATURE'} ($^\circ$C), {\ct 'DROPLET\_DIAMETER'} ($\mu$m),
{\ct 'DROPLET\_VELOCITY'} (m/s), {\ct 'DROPLET\_MASS'} (kg), {\ct 'DROPLET\_AGE'} (s).
As a default, if no {\ct QUANTITIES} are specified and none are selected in Smokeview, then
Smokeview will display particles with a single color.  To select this color specify either {\ct RGB} or
{\ct COLOR}.
\item[{\ct STATIC}] Logical parameter indicating whether particles move or just serve
as obstructions or clutter. This parameter should only be used when
{\ct NUMBER\_INITIAL\_DROPLETS} is greater than 0. (Default {\ct .FALSE.})
\item[{\ct FUEL}] Logical parameter indicating whether the liquid droplets evaporate
into fuel gas and burn. (Default {\ct .FALSE.}). If {\ct FUEL=.TRUE.},
then also add {\ct HEAT\_OF\_COMBUSTION} (kJ/kg) of the fuel. Fuel droplets are colored yellow by default in Smokeview.
\item[{\ct WATER}] Logical parameter indicating whether the liquid droplets evaporate
into {\ct WATER VAPOR}, which is a separate species that is automatically added to the calculation (Default {\ct .FALSE.}).
Water droplets are colored blue in Smokeview.
\item[{\ct NUMBER\_INITIAL\_DROPLETS}]
Number of particles/droplets within the computational domain at the start of the simulation.
(Default 0). If non-zero, also specify {\ct MASS\_PER\_VOLUME} (kg/m$^3$) which
specifies the particle/droplet mass per unit volume (Default 1~kg/m$^3$). Do
not confuse this parameter with {\ct DENSITY}. For example, water has a
{\ct DENSITY} of 1000~kg/m$^3$, whereas a liter of water broken up into droplets
and spread over a cubic meter has a {\ct MASS\_PER\_VOLUME} of 1~kg/m$^3$. Also, to limit the particles/droplets to a
certain region of the domain, add the real sextuplet {\ct XB} to designate the coordinates of a rectangular volume. The format
for {\ct XB} is the same as that used on the {\ct OBST} line.
\item[{\ct DROPLETS\_PER\_SECOND}]  Number of sprinkler droplets inserted every
second per active sprinkler. Note that this parameter only affects sprinkler
droplets. Changing this parameter does {\em not} change the flow rate, but rather the number
of droplets used to represent the flow. (Default 1000)
\end{description}







\section{Special Topic: Droplet Fuel Sprays}

The evaporation of water droplets from sprinklers has been
generalized so that a liquid fuel spray
nozzle can be modeled. Fuel evaporation is triggered by the inclusion of the
phrase {\ct FUEL=.TRUE.} on the appropriate {\ct PART} line.
The spray nozzle characteristics are specified
in the same way as those for a sprinkler. Here is an example of a liquid fuel spray nozzle ({\bf spray\_burner} in the V\&V Guide):

\footnotesize
\begin{verbatim}
&DEVC ID='nozzle_1', XYZ=4.0,-.3,0.5, PROP_ID='nozzle', QUANTITY='TIME', SETPOINT=0. /

&PART ID='heptane droplets', FUEL=.TRUE., VAPORIZATION_TEMPERATURE=98.,
      HEAT_OF_VAPORIZATION=316., SPECIFIC_HEAT=2.25, DENSITY=688.,
      QUANTITIES(1:2)='DROPLET_DIAMETER','DROPLET_TEMPERATURE',
      DROPLETS_PER_SECOND=2000, DIAMETER=1000., HEAT_OF_COMBUSTION=44500.,
      DT_INSERT=0.02, SAMPLING_FACTOR=1 /

&PROP ID='nozzle', PART_ID='heptane droplets', FLOW_RATE=1.96,
      FLOW_RAMP='fuel', DROPLET_VELOCITY=10., SPRAY_ANGLE=0.,30.    /
&RAMP ID='fuel', T= 0.0, F=0.0 /
&RAMP ID='fuel', T=20.0, F=1.0 /
&RAMP ID='fuel', T=40.0, F=1.0 /
&RAMP ID='fuel', T=60.0, F=0.0 /
\end{verbatim}
\normalsize

\noindent
The vaporization (boiling) temperature of
the liquid fuel is in degrees Celsius, the heat of vaporization
is in units of kJ/kg, the specific heat is in units of
kJ/kg/K, and the density is in units of kg/m$^3$.
{\ct FUEL=.TRUE.} automatically
invokes a mixture fraction calculation in which fuel
from the evaporating fuel droplets is burned according to the overall reaction scheme.

Note
that this construct is fragile and subject to mesh
dependence. If the mesh cells are too coarse, the
evaporating fuel is diluted to such a degree that it
never burns. Proper resolution depends on the type of
fuel and the amount of fuel being ejected from the
nozzle.

\begin{warning}
Simulations with both fuel and water droplets are possible, unlike versions of FDS prior to 5.
\end{warning}


\section{Special Topic: Suppression by Water (Mixture Fraction Model Only)}
\label{info:suppression}
\index{Sprinkler Suppression}
\index{SURF!E\_COEFFICIENT}
Modeling suppression of a fire by a water spray is challenging because
the relevant physical mechanisms occur at length scales smaller than a
single mesh cell. In the gas phase, flames are extinguished due to lowered
temperatures and dilution of the oxygen supply. See Section~\ref{info:combustion}
for more information about gas phase suppression.

For the solid phase,
water reduces the fuel pyrolysis rate by cooling the fuel surface and also
changing the chemical reactions that liberate fuel gases from the solid.
If the solid or liquid fuel has been given reaction parameters via the {\ct MATL} line, there is no
need to set any additional suppression parameters. It is assumed that
water impinging on the fuel surface takes energy away from the
pyrolysis process and thereby reduces the burning rate of the fuel.
If the surface has been assigned a {\ct HRRPUA} (Heat Release Rate Per Unit Area),
a parameter needs to be specified that governs the suppression of the fire by water.
An empirical way to account for fire suppression by water
is to characterize the reduction of the pyrolysis rate in terms
of an exponential function. The local mass loss rate of the
fuel is expressed in the form
\be \dm_f''(t) = \dm_{f,0}''(t) \; e^{-\int k(t) \; dt} \label{nistexting} \ee
Here $\dm_{f,0}''(t)$ is the user-specified burning rate per unit
area when no water is applied and $k$ is a function of the local water
mass per unit area, $m_w''$, expressed in units of kg/m$^2$.
\be
k(t) = \hbox{\ct E\_COEFFICIENT} \; m_w''(t) \quad          \hbox{s}^{-1}
\ee
The parameter {\ct E\_COEFFICIENT} must be obtained experimentally, and
it is expressed in units of m$^2$/kg/s. Usually, this type of suppression
algorithm is invoked when the fuel is complicated, like a cartoned commodity.

The rate at which the water droplets move over the horizontal and vertical surfaces is difficult to
quantify. The parameters {\ct HORIZONTAL\_VELOCITY} and {\ct VERTICAL\_VELOCITY} on the {\ct PART} line
allow you to control the rate at which droplets move horizontally or vertically (downward). The defaults are
0.2~m/s and 0.5~m/s, respectively.



\clearpage

\chapter{Devices and Control Logic}

Sprinklers, smoke detectors, heat flux gauges, and thermocouples
may seem to be completely unrelated, but from the point of view
of FDS, they are simply devices that operate in specific ways depending
on the properties assigned to them. They can be used to record some
quantity of the simulated environment, like a thermocouple, or they can represent a mathematical model
of a complex sensor, like a smoke detector,
and in some cases they can trigger events to happen, like a timer.

Past versions of FDS used device specific namelist groups, like {\ct SPRK},
{\ct HEAT}, {\ct SMOD}, and {\ct THCP}, but the number and variety
of fire-specific sensing and measurement devices continues to expand, and
the data structures in FDS could not easily accommodate all possibilities.
In addition, the logic associated with sensor activation and
subsequent actions, like a vent opening, had become too complicated and prone to bugs.
Devices are now specified with a new format that streamlines and expands the possibilities of sensor profiles.

Starting in FDS 5, all devices, in the broadest sense of the word,
are designated via the namelist group {\ct DEVC}.
In addition, advanced functionality and properties are accommodated
via additional namelists groups called {\ct CTRL} (Control) and
{\ct PROP} (Properties).




\section{Device Location and Orientation: The \texorpdfstring{{\tt DEVC}}{DEVC} Namelist Group (Table \ref{tbl:DEVC})}
\label{info:DEVC} \index{DEVC} \index{DEVC}

Regardless of the specific properties, each device needs to be sited either at a point within the computational domain, or
over a span of the domain, like a beam smoke detector. For example, a sprinkler is sited within the domain with a line like:

\footnotesize
\begin{verbatim}
&DEVC XYZ=3.0,5.6,2.3, PROP_ID='Acme Sprinkler 123', ID='Spk_39' /
\end{verbatim}
\normalsize

\noindent
The physical coordinates of the
device are given by a triplet of real numbers {\ct XYZ} \index{DEVC!XYZ}.
The properties of the device are contained on the {\ct PROP} line
{\ct PROP\_ID}\index{DEVC!PROP\_ID}, which will be explained below for each of the
special devices included in FDS.
The character string {\ct ID} \index{DEVC!ID}is merely a descriptor to identify the
device in the output files, and if any action is tied to its activation.

Some devices have a particular orientation which can be specified
with various parameters; {\ct IOR}, {\ct ORIENTATION}, {\ct ROTATION}.
{\ct IOR} or the Index of Orientation\index{DEVC!IOR}, is necessary for any device that is
placed on the surface of a solid. The values $\pm$1 or $\pm$2 or $\pm$3 indicate the direction
that the device ``points'', where 1 is parallel to the X axis, 2 is parallel to the Y axis
and 3 is parallel to the Z axis.

{\ct ORIENTATION}\index{DEVC!ORIENTATION} is used for devices that are not on a surface
and require a directional specification, like a sprinkler. {\ct ORIENTATION} is specified with a
triplet of real number values that indicate the components of the direction vector.
The default value of {\ct ORIENTATION} is (0,0,-1).

For example, a default downward-directed sprinkler spray can be redirected in other direction.
If you were to prescribe,

\footnotesize
\begin{verbatim}
&DEVC XYZ=3.0,5.6,2.3, PROP_ID='...', ID='...', ORIENTATION=1,0,0 /
\end{verbatim}
\normalsize

\noindent
the sprinkler would point in the positive $x$ direction.
For other devices, the {\ct ORIENTATION} would only change the way the device is drawn by Smokeview.



\section{Device Output}
\label{info:out:DEVC}

Each device has a {\ct QUANTITY} \index{DEVC!QUANTITY}associated with it.
The output file for all {\ct DEVC} quantities is a comma-delimited
ASCII file called {\bf CHID\_devc.csv} \index{Output Files!\_devc.csv}
(See Section~\ref{out:DEVC} for output file format.)
This file can be imported into most spread sheet software packages.
If the number of {\ct DEVC} lines exceeds 256, the limit of some spreadsheet
applications, the output file will be split into appropriately sized smaller
files. To prevent the file splitting, specify {\ct COLUMN\_DUMP\_LIMIT=.FALSE.}
\index{DUMP!COLUMN\_DUMP\_LIMIT} on the {\ct DUMP} line.


\begin{warning}
All devices must have a specified {\ct QUANTITY}.  Some special devices (Section~/ref{info:PROP}) have their {\ct QUANTITY}
specifed on a {\ct PROP} line.
\end{warning}

\begin{warning}
A {\ct QUANTITY} specified on a {\ct PROP} line associated with a {\ct DEVC} line will override an {\ct QUANTITY}
specified on the {\ct DEVC} line.
\end{warning}


\section{Special Devices and their Properties: The \texorpdfstring{{\tt PROP}}{PROP} Namelist Group (Table \ref{tbl:PROP})}
\label{info:PROP} \index{PROP}

Many devices are fairly easy to describe, like a point measurement, with only a few parameters which can be included on the
{\ct DEVC} line. However, for more complicated devices, it is inconvenient to list all of the properties on each and every
{\ct DEVC} line. For example, a simulation might include hundreds of sprinklers, but it is tedious to list the properties of the
sprinkler each time the sprinkler is sited. For these devices, use a separate namelist group called {\ct PROP} to store the relevant parameters.
Each {\ct PROP} line is identified by a unique {\ct ID}, and invoked by a {\ct DEVC} line by the string {\ct PROP\_ID}.
The {\ct ID} might be the manufacturer's
name, like {\ct 'ACME Sprinkler 123'}, for example.

The best way to describe the {\ct PROP} group is to list the various special devices and their properties.


\subsection{Sprinklers}
\label{info:sprinklers}
\index{Device!Sprinkler} \index{sprinkler}

Here is a very simple example of sprinkler:

\footnotesize
\begin{verbatim}
&PROP ID='K-11', QUANTITY='SPRINKLER LINK TEMPERATURE', RTI=148., C_FACTOR=0.7,
      ACTIVATION_TEMPERATURE=74., OFFSET=0.10,PART_ID='water drops', FLOW_RATE=189.3,
      DROPLET_VELOCITY=10., SPRAY_ANGLE=30.,80.   /

&DEVC ID='Spr_60', XYZ=22.88,19.76,7.46, PROP_ID='K-11' /
&DEVC ID='Spr_61', XYZ=22.88,21.76,7.46, PROP_ID='K-11' /
\end{verbatim} \normalsize

\noindent
A sprinkler, known as {\ct 'Spr\_60'}, is located at a point in space given by {\ct XYZ}. It is a {\ct 'K-11'} type sprinkler, whose properties are given on
the {\ct PROP} line. Note that the various names ({\ct ID}s) mean nothing to FDS, except as a means of associating one thing with another, so try to use {\ct ID}s that are as
meaningful to you as possible.  The parameter {\ct QUANTITY='SPRINKLER LINK TEMPERATURE'} {\em does} have a specific meaning to FDS, directing it to compute the activation of
the device using the standard RTI algorithm. The various sprinkler properties will be discussed below.
\footnote{Past versions of FDS used a separate file to store
properties of a given sprinkler. This file is no longer used.}

Properties associated with sprinklers included in the {\ct PROP} group are:
\begin{description}
\item[{\ct RTI}] Response Time Index in units of $\sqrt{\hbox{m}\cdot \hbox{s}}$. (Default 165.)
\item[{\ct C\_FACTOR}] in units of $\sqrt{\hbox{m/s}}$. (Default 0.)
\item[{\ct ACTIVATION\_TEMPERATURE}] in units of $^\circ$C. (Default 74~$^\circ$C)
\item[{\ct INITIAL\_TEMPERATURE}] of the link in units of $^\circ$C. (Default {\ct TMPA})
\item[{\ct FLOW\_RATE}] in units of L/min.
An alternative is to provide the {\ct K\_FACTOR} in units of L/min/bar$^\ha$ and the
{\ct OPERATING\_PRESSURE} in units of atm.
The flow rate is then given by $ \dm_w = K \sqrt{p}$. Note that 1 bar is equivalent to
14.5~psi, 1 gpm is equivalent to 3.785~L/min, 1~gpm/psi$^\ha$ is
equivalent to 14.41~L/min/bar$^\ha$.
\item[{\ct OFFSET}] Radius of a sphere (m) surrounding the
sprinkler where the water droplets are initially placed in the simulation. It is assumed that
at and beyond the {\ct OFFSET} the droplets have completely broken
up and are transported independently of each other. (Default 0.05~m)
\item[{\ct DROPLET\_VELOCITY}]  Initial droplet velocity. (Default 5~m/s)
\item[{\ct SPRAY\_ANGLE}] A pair of angles (in degrees) through which the droplets are sprayed.
The angles outline a conical spray pattern relative to the
south pole of the sphere centered at the sprinkler with radius {\ct OFFSET}.
For example, {\ct SPRAY\_ANGLE=30.,80.} directs the water droplets to leave
the sprinkler through a band between 60$^\circ$ and 10$^\circ$ south latitude, assuming the orientation of
the sprinkler is (0,0,-1), the default. The droplets are uniformly
distributed within this belt.
\item[{\ct SPRAY\_PATTERN\_TABLE}] Name of a set of {\ct TABL} lines containing the description of the spray pattern.
\item[{\ct PART\_ID}] The name of the {\ct PART} line containing properties of the droplets.
See Section~\ref{info:PART} for additional details.
\end{description}

\noindent
Be aware that sprinklers produce many droplets that need to be
tracked in the calculation. To limit the burden, sprinkler droplets disappear when they hit the
lower boundary of the computational domain, regardless of whether it is solid
or not. To stop FDS from removing sprinkler droplets from the lower boundary of the computational domain,
add the phrase {\ct POROUS\_FLOOR=.FALSE.} to the {\ct MISC} (Section~\ref{info:MISC}) line. Be aware, however, that
droplets that land on the floor continue to move horizontally in randomly selected
directions; bouncing off obstructions, and consuming CPU time.

\noindent
For more information about sprinklers, their activation and spray dynamics, is included in the FDS
Technical Reference Guide~\cite{FDS_Tech_Guide_5}.

\subsubsection{Special Topic: Specifying Complex Spray Patterns}
\label{info:spraypattern}
\index{Spray Pattern}
\index{spinkler!Spray Pattern}

If a more complex spray pattern is desired than can be achieved by using {\ct SPRAY\_ANGLE}, {\ct VELOCITY},
and {\ct FLOW\_RATE}, then a {\ct SPRAY\_PATTERN\_TABLE} can be specified using the {\ct TABL} (Section~\ref{info:TABL})
namelist group.  For a spray pattern, specify the total flow using {\ct FLOW\_RATE} of the {\ct PROP} line, the name of the spray pattern using
{\ct SPRAY\_PARTTERN\_TABLE} and then one or more {\ct TABL} lines of the format:

\footnotesize
\begin{verbatim}
&TABL ID='table_id', TABLE_DATA=LAT1,LAT2,LON1,LON2,VELO,FRAC /
\end{verbatim} \normalsize

\noindent
where each {\ct TABL} line for a given {\ct 'table\_id'} provides information about the spherical distribution of the spray pattern
for a specified solid angle. {\ct LAT1} and {\ct LAT2} are the bounds of the solid angle measured in degrees from
the south pole (0 is the south pole and 90 is the equator, 180 is the north pole).  Note that this is not the conventional way of
specifying a latitude, but rather a convenient system based on the fact that a typical sprinkler sprays water downwards, which is
why 0 degrees is assigned to the ``south pole,'' or the $-z$ direction. The parameters {\ct LON1} and {\ct LON2} are the
bounds of the solid angle (also in degrees),
where 0 (or 360) is aligned with the $-x$ axis and 90 is aligned with the $-y$ axis.  {\ct VELO} is the velocity (m/s) of the droplets at their
point of insertion.
{\ct FRAC} the fraction of the total flow rate of liquid that should emerge from that particular solid angle.

In the example below, the spray pattern is defined as two jets, each with a velocity of 10~m/s and a flow rate
of 20~L/min (the total {\ct FLOW\_RATE} is 40~L/min and the fraction for each jet is 0.5). The jets are centered at points 45$^\circ$ below the ``equator,'' and are separated
by 180$^\circ$.

\footnotesize
\begin{verbatim}
&PROP ID='y-pipe',
      QUANTITY='SPRINKLER LINK TEMPERATURE',
      FLOW_RATE=40.,
      PART_ID='water_drops',
      SPRAY_PATTERN_TABLE='TABLE1' /

&TABL ID='TABLE1', TABLE_DATA=40,50, 85, 95,10,0.5 /
&TABL ID='TABLE1', TABLE_DATA=40,50,185,195,10,0.5 /
\end{verbatim}
\normalsize

\begin{warning}
\noindent
Note that each set of {\ct TABL} lines must have a unique {\ct ID}.  Specific requirements on ordering the lines
will depend upon the type of TABL and those requirements are provided in the appropriate section in this guide. Also note that
the {\ct TABL} lines can be specified in any order.
\end{warning}





\subsection{Nozzles}
\label{info:nozzles}
\index{Device!Spray Nozzle}

Nozzles are very much like sprinklers, only they do not activate based on the standard RTI model.
To simulate a nozzle that activates at a given time, for example,
specify a {\ct QUANTITY} and {\ct SETPOINT} directly on the {\ct DEVC} line.
An example of a nozzle can be found in the verification case {\bf water\_fuel\_sprays.fds}

The following lines:
\footnotesize
\begin{verbatim}
&DEVC XYZ=23.91,21.28,0.50, PROP_ID='nozzle', ORIENTATION=0,0,1, QUANTITY='TIME',
      SETPOINT=0., ID='noz_1' /
&DEVC XYZ=26.91,21.28,0.50, PROP_ID='nozzle', ORIENTATION=0,0,1, QUANTITY='TIME',
      SETPOINT=5., ID='noz_2' /
&PROP ID='nozzle', PART_ID='heptane drops', FLOW_RATE=2.132,
      FLOW_TAU=-50., DROPLET_VELOCITY=5., SPRAY_ANGLE=0.,45.    /
\end{verbatim}
\normalsize

\noindent
designate two nozzles of the same type, one which activates at zero seconds, the other at 5 s. Note that nozzles must have an
associated {\ct PROP} line. The parameter {\ct PART\_ID} tells FDS to spray liquid droplets.




\subsection{Heat Detectors}
\label{info:heat_detectors}
\index{Device!Heat Detector}

{\ct QUANTITY='LINK TEMPERATURE'}, as in this example, defines a heat detector, which uses essentially the same activation algorithm as a sprinkler, without the water spray.

\footnotesize
\begin{verbatim}
&DEVC ID='HD_66', PROP_ID='Acme Heat', XYZ=2.3,4.6,3.4 /
&PROP ID='Acme Heat', QUANTITY='LINK TEMPERATURE', RTI=132., ACTIVATION_TEMPERATURE=74. /
\end{verbatim}

\normalsize
\noindent
Like a sprinkler, {\ct RTI} is the Response Time Index in units of
$\sqrt{\hbox{m}\cdot \hbox{s}}$.
{\ct ACTIVATION\_TEMPERATURE} is the link activation temperature in degrees C (Default 74~$^\circ$C).
{\ct INITIAL\_TEMPERATURE} is the initial temperature of the link in units of $^\circ$C (Default {\ct TMPA}).



\subsection{Smoke Detectors}
\label{info:smoke_detector}
\index{Device!Smoke Detector}

A smoke detector is defined in the input file with an entry similar to:

\footnotesize
\begin{verbatim}
&DEVC ID='SD_29', PROP_ID='Acme Smoke Detector', XYZ=2.3,4.6,3.4 /
&PROP ID='Acme Smoke Detector', QUANTITY='spot obscuration', LENGTH=1.8,
      ACTIVATION_OBSCURATION=3.28 /
\end{verbatim}

\normalsize
\noindent
for the single parameter Heskestad model. Note that a {\ct PROP} line is mandatory for a smoke detector, in which case the
{\ct DEVC QUANTITY} can be specified on the {\ct PROP} line. For the four parameter Cleary model, use a {\ct PROP} line like:

\footnotesize
\begin{verbatim}
&PROP ID='Acme Smoke Detector', QUANTITY='spot obscuration', ALPHA_C=1.8, BETA_C=-1.1,
      ALPHA_E=0.98, BETA_E=-0.77, ACTIVATION_OBSCURATION=3.28 /
\end{verbatim}

\normalsize
\noindent
where the two characteristic filling or ``lag'' times are of the form:
\be \delta t_e = \alpha_e u^{\beta_e} \quad ; \quad \delta t_c = \alpha_c u^{\beta_c} \ee
The default detector parameters are for the Heskestad model with a characteristic {\ct LENGTH} of
1.8~m. For the Cleary model, the {\ct ALPHA}s and {\ct BETA}s must all be listed explicitly.
Suggested constants for unidentified ionization and photoelectric detectors
presented in Table~\ref{tab:sdvalues}.
{\ct ACTIVATION\_OBSCURATION} is the threshold value in units of \%/m.
The threshold can be set according to the setting commonly provided by the manufacturer.
The default setting is 3.28~\%/m (1~\%/ft).

\begin{table}[ht]
\caption{Suggested Values for Smoke Detector Model. See Ref.~\cite{SFPE} for others.}
\vspace{0.1in}
\label{tab:sdvalues}
\begin{center}
\begin{tabular}{|l||c|c|c|c|}
\hline
Detector                      & $\alpha_e$  &  $\beta_e$   &  $\alpha_c, \; L$   &  $\beta_c$  \\ \hline \hline
Cleary Ionization    I1       & 2.5         & -0.7         &  0.8                &  -0.9      \\ \hline
Cleary Ionization    I2       & 1.8         & -1.1         &  1.0                &  -0.8      \\ \hline
Cleary Photoelectric P1       & 1.8         & -1.0         &  1.0                &  -0.8      \\ \hline
Cleary Photoelectric P2       & 1.8         & -0.8         &  0.8                &  -0.8      \\ \hline
Heskestad Ionization          & ---         & ---          &  1.8                &  ---       \\ \hline\end{tabular}
\end{center}
\end{table}


\subsection{Beam Detection Systems}
\label{info:beam_detector}
\index{Device!Beam Detector}

A beam detector can be defined by specifying the endpoints {\ct (x1,y1,z1),(x2,y2,z2)}, of the beam, using {\ct XB}, and the total
total \% obscuration at which the detector activates.  The two endpoints must lie in the same mesh.  FDS determines which mesh
cells lie along the path specified by the two endpoints.  The beam detector response is evaluated as
\be
  \hbox{Obscuration}  = \left(1 - \exp \left( -K_m \sum_{i=1}^N {\rho_{soot,i}\; \Delta x_i} \right)  \right) \times 100  \; \; \hbox{\%}
\ee
where $i$ is a mesh cell along the path of the beam, $\rho_{soot,i}$ is the soot density of the mesh cell, and $ \Delta x_i$
is the distance within the mesh cell that is traversed by the beam.

\footnotesize
\begin{verbatim}
&DEVC XB=x1,x2,y1,y2,z1,z2, QUANTITY='path obscuration', ID='beam1', SETPOINT=0.33 /
\end{verbatim}
\normalsize

\subsection{Aspiration Detection Systems}
\label{info:aspiration_detector}
\index{Device!Aspiration Detector}

An aspiration detection system groups together a series of soot measurement devices.
An aspiration system consists of a sampling pipe network that draws air from a series of locations to a central point
where an obscuration measurement is made.  To define such a system in FDS, you must provide the sampling locations,
sampling flow rates, the transport time from each sampling location, and if an alarm output is desired, the overall obscuration
``setpoint.''  One or more {\ct DEVC} inputs are used to specify details of the sampling locations, and one additional input is
used to specify the central detector:

\footnotesize
\begin{verbatim}
&DEVC XYZ=..., QUANTITY='soot density', ID='soot1', DEVC_ID='asp1', FLOWRATE=0.1, DELAY=20 /
&DEVC XYZ=..., QUANTITY='soot density', ID='soot2', DEVC_ID='asp1', FLOWRATE=0.2, DELAY=10 /
 ...
&DEVC XYZ=..., QUANTITY='soot density', ID='sootN', DEVC_ID='asp1', FLOWRATE=0.3, DELAY=30 /

&DEVC XYZ=..., QUANTITY='aspiration', ID='asp1', BYPASS_FLOWRATE=0.4, SETPOINT=0.02 /
\end{verbatim}
\normalsize

\noindent
where the {\ct DEVC\_ID} is used at each sampling point to reference the central detector, {\ct FLOWRATE} \index{DEVC!FLOWRATE}is the gas
flow rate in kg/s, {\ct DELAY} \index{DEVC!DELAY}is the transport time (in seconds) from the sampling location to the central detector,
{\ct BYPASS\_FLOWRATE} \index{DEVC!BYPASS\_FLOWRATE}is the flow rate in kg/s of any air drawn into the system from outside the computational
domain (accounts for portions of the sampling network lying outside the domain defined by the {\ct MESH}
inputs), and {\ct SETPOINT} is the alarm threshold obscuration in units of \%/m. The output of the aspiration system is
computed as
\be
  \hbox{Obscuration}  = \left(1 - \exp \left( -K_m \frac {\sum_{i=1}^N {\rho_{soot,i}( t-t_{d,i}) \; \dm_i}} {\sum_{i=1}^N{ \dm_i} } \right)  \right) \times 100  \; \; \hbox{\%/m}
\ee
where $\dm_i$ is the mass {\ct FLOWRATE} of the $i$th sampling location, $\rho_{soot,i}( t-t_{d,i})$ is the soot density at
the $i$th sampling location $t_{d,i}$ s prior ({\ct DELAY}) to the current time $t$, and $K_m$ is the {\ct MASS\_EXTINCTION\_COEFFICIENT} associated with visible light.




\clearpage

\section{Basic Control Logic}
\label{info:basic_control}
\index{Controls!Using DEVC}
Devices can be used to control various actions, like creating and removing obstructions, or activating and deactivating
fans and vents. Every device has an associated {\ct QUANTITY}, whether it is included directly on the {\ct DEVC} line or
indirectly on the optional {\ct PROP} line. Using the {\ct DEVC} parameter {\ct SETPOINT}, you can trigger an action to
occur when the {\ct QUANTITY} value passes above, or below, the given {\ct SETPOINT}. The choice is dictated by the
given {\ct TRIP\_DIRECTION}, which is just a positive or negative integer.
The following parameters dictate how a device will control something:
\begin{description}
\item[{\ct SETPOINT}] The value of the device at which its state changes.  For a detection type of device
(e.g. heat or smoke) this value is taken from the device's {\ct PROP} inputs and need not be specified on the {\ct DEVC} line.
\item[{\ct TRIP\_DIRECTION}] A positive integer means the device will change state when its value increases
past the setpoint and a negative integer means the device will change state
when its value decreases past the setpoint.  The default value is +1.
\item[{\ct LATCH}] If this logical value is set to {\ct .TRUE.} the device will only change state once.
The default value is {\ct .TRUE.}.
\item[{\ct INITIAL\_STATE}] This logical value is the initial state of the device. The default value
is {\ct .FALSE.} For example, if an obstruction associated with the device is to disappear, set {\ct INITIAL\_STATE=.TRUE.}
\end{description}
If you desire to control FDS using more complex logic than can be provided
by the use of a single device and its setpoint, control functions can be specified using the {\ct CTRL} input.
See Section \ref{info:CTRL} for more on {\ct CTRL} functions.

The simplest example of a device is just a timer:

\footnotesize
\begin{verbatim}
&DEVC XYZ=1.2,3.4,5.6, ID='my clock', QUANTITY='TIME', SETPOINT=30. /
\end{verbatim}
\normalsize

\noindent
Anything associated with the device via the parameter, {\ct DEVC\_ID='my clock'}, will change its state at 30 seconds. For example,
if the text were added to an {\ct OBST} line, that obstruction would change from its {\ct INITIAL\_STATE} of {\ct .FALSE.} to {\ct .TRUE.} after
30 s. In other words, it would be created at 30 s instead of at the start of the simulation. This is a simple way to open a door or window.


\subsection{Creating and Removing Obstructions}
\label{info:create_remove}
\index{Controls!Create and Remove Obstructions}
In many fire scenarios, the opening or closing of a door or window
can lead to dramatic changes in the course of the fire. Sometimes these
actions are taken intentionally, sometimes as a result of the fire.
Within the framework of an FDS calculation, these actions are
represented by the creation or removal of solid obstacles, or the
opening or closing of exterior vents.

Remove or create a solid obstruction by assigning the character string {\ct DEVC\_ID} the name of
a {\ct DEVC} {\ct ID} on the {\ct OBST} line that is to be created or removed.  This will direct
FDS to remove or create the obstruction when
the device changes state to {\ct .FALSE.} or {\ct .TRUE.}, respectively. For example, the lines

\footnotesize
\begin{verbatim}
&OBST XB=..., SURF_ID='...', DEVC_ID='det2' /
                   .
                   .
&DEVC XYZ=..., PROP_ID='...', ID='det1' /
&DEVC XYZ=..., PROP_ID='...', ID='det2', INITIAL_STATE=.TRUE. /
\end{verbatim}
\normalsize

\noindent
will cause the given obstruction to be removed when the specified {\ct DEVC} changes state.

\begin{warning}
\noindent
Note that while single {\ct DEVC} can be used to control multiple items, a {\ct DEVC}
that is being used for a {\ct HOLE} should not be used for anything else other than additional {\ct HOLE}s.
\end{warning}

\noindent
Creation or removal at a predetermined time can be performed using a {\ct DEVC} that has {\ct TIME} as
its measured quantity. For example, the following instructions will cause the specified {\ct HOLE}s and {\ct OBST}structions to
appear/disappear at the various designated times:

\footnotesize
\begin{verbatim}
&HOLE XB=0.25,0.45,0.20,0.30,0.20,0.30, COLOR='RED',   DEVC_ID='timer 1' /
&HOLE XB=0.25,0.45,0.70,0.80,0.70,0.80, COLOR='GREEN', DEVC_ID='timer 2' /
&OBST XB=0.70,0.80,0.20,0.30,0.20,0.30, COLOR='BLUE',  DEVC_ID='timer 3' /
&OBST XB=0.70,0.80,0.60,0.70,0.60,0.70, COLOR='PINK',  DEVC_ID='timer 4' /

&DEVC XYZ=..., ID='timer 1', SETPOINT= 1., QUANTITY='TIME', INITIAL_STATE=.FALSE./
&DEVC XYZ=..., ID='timer 2', SETPOINT= 2., QUANTITY='TIME', INITIAL_STATE=.TRUE. /
&DEVC XYZ=..., ID='timer 3', SETPOINT= 3., QUANTITY='TIME', INITIAL_STATE=.FALSE./
&DEVC XYZ=..., ID='timer 4', SETPOINT= 4., QUANTITY='TIME', INITIAL_STATE=.TRUE. /
\end{verbatim}
\normalsize

\noindent
The blue obstruction appears at 3~s because its initial state is false, meaning that it does not exist initially. The pink
obstruction disappears at 4~s because it does exist initially. The red hole is created at 1~s because it does not exist initially (it is filled in with a
red obstruction). The green hole is filled in at 2~s because it does exist (as a hole) initially. {\bf You should always try a simple example first before
embarking on a complicated creation/removal scheme for obstructions and holes.}


To remove an obstruction, then re-create a different one in its place, use 2 lines

\footnotesize
\begin{verbatim}
&OBST XB=..., SURF_ID='whatever', DEVC_ID='device 1' /
&OBST XB=..., SURF_ID='whatever', DEVC_ID='device 2' /
\end{verbatim}

\normalsize
\noindent
since the code simply sees this as two different obstructions.

\begin{warning}
Until further notice, an obstruction that makes up the boundary of a ``pressure zone'' (see Section~\ref{info:ZONE}) should not be created or
removed. The reason for this restriction is that abrupt changes in pressure can cause numerical instabilities.
\end{warning}


\subsection{Activating and Deactivating Vents}
\label{info:activate_deactivate}

When a device or control function is applied to a {\ct VENT}, the purpose is to either activate or deactivate any time ramp associated with
the {\ct VENT} via its {\ct SURF\_ID}. For example, to control a fan with the device {\ct 'det2'}, do the following:

\footnotesize
\begin{verbatim}
&SURF ID='FAN', VOLUME_FLUX=5. /
&VENT XB=..., SURF_ID='FAN', DEVC_ID='det2' /
&DEVC ID='det2', XYZ=..., QUANTITY='TIME', SETPOINT=30., INITIAL_STATE=.FALSE. /
\end{verbatim}
\normalsize

\noindent
Note that at 30 seconds, the ``state'' of the {\ct 'FAN'} changes from {\ct .FALSE.} to {\ct .TRUE.}, or more simply, the {\ct 'FAN'} turns on. Since there
is no explicit time function associated with the {\ct 'FAN'}, the default 1 second ramp-up will begin at 30 seconds instead of at 0 seconds.

If in this example {\ct INITIAL\_STATE=.TRUE.}, then the fan should ``deactivate,'' or turn off at 30 seconds. Essentially, ``activation'' of a {\ct VENT} causes all associated
time functions to be delayed until the device {\ct SETPOINT} is reached. ``Deactivation'' of a {\ct VENT} turns off all time functions. Usually this means
that the parameters on the {\ct SURF} line are all nullified, so it is a good idea to check the functionality with a simple example.


\begin{warning}
Until further notice, a {\ct 'MIRROR'} or {\ct 'OPEN'} {\ct VENT} should not be activated or deactivated.
The reason for this restriction is that abrupt changes in pressure can cause numerical instabilities.
\end{warning}



\clearpage

\section{Advanced Control Functions: The \texorpdfstring{{\tt CTRL}}{CTRL} Namelist Group}
\label{info:CTRL} \index{CTRL}
\index{Controls}

There are many systems whose functionality cannot be described by a simple device with a single ``setpoint.''
Consider for example, a typical HVAC\index{HVAC} system.  It is controlled by a thermostat that is given a temperature setpoint.
The system turns on when the temperature goes below the setpoint by some
amount and then turns off when the temperature rises above that same setpoint by some amount.
This behavior can not be defined by merely specifying a single setpoint.
You must also define the range or ``deadband'' around the setpoint, and whether an
increasing or decreasing temperature activates the system.  For the HVAC example, crossing the
lower edge of the deadband activates heating; crossing the upper edge activates cooling.

While HVAC is not the primary purpose of FDS, there are numerous situations where a system responds to
the fire in non-trivial way.  The {\ct CTRL} \index{CTRL}input is used to define these more complicated behaviors.
A control function will take as input the outputs of one or more devices and/or control functions.
In this manner, complicated behaviors can be simulated by making functions of other functions.  For most of the
control function types, the logical value output of the devices and control functions and the time they last changed
state are used as the inputs.


\begin{table}[h!]
\index{Controls!Function List}
\caption{Control function types for {\ct CTRL}}
\label{tab:funcvalues} \index{CTRL!FUNCTION\_TYPE}
\begin{center}
\begin{tabular}{|l||l|}
\hline
Function Type                     & Description   \\ \hline \hline
{\ct ANY}                         & Changes state if \underline{any} {\ct INPUT}s are {\ct .TRUE.}     \\ \hline
{\ct ALL}                         & Changes state if \underline{all} {\ct INPUT}s are {\ct .TRUE.}  \\ \hline
{\ct ONLY}                        & Changes state if and \underline{only} if {\ct N} {\ct INPUT}s are {\ct .TRUE.}     \\ \hline
{\ct AT\_LEAST}                   & Changes state if \underline{at least} {\ct N} {\ct INPUT}s are {\ct .TRUE.}     \\ \hline \hline
%{\ct CYCLING}                     & Changes state in a cyclical manner once its sole {\ct INPUT} is {\ct .TRUE.}     \\ \hline
{\ct TIME\_DELAY}                 & Changes state {\ct DELAY} s after {\ct INPUT} becomes {\ct .TRUE.}      \\ \hline
{\ct CUSTOM}                      & Changes state based on evaluating a {\ct RAMP} of the function's input     \\ \hline
{\ct DEADBAND}                    & Behaves like a thermostat     \\ \hline
{\ct KILL}                        & Terminates code execution if its sole {\ct INPUT} is {\ct .TRUE.}  \\ \hline
{\ct RESTART}                     & Dumps restart files if its sole {\ct INPUT} is {\ct .TRUE.} \\ \hline
\end{tabular}
\end{center}
\end{table}

A control is identified by the {\ct ID} \index{CTRL!ID}parameter.  The inputs to the control are identified
by the {\ct INPUT\_ID} \index{CTRL!INPUT\_ID}parameter.  {\ct INPUT\_ID} would be passed one or more {\ct ID} strings
from either devices or other controls.


If you want to design a system of controls and devices that involves multiple changes of state,
include the attribute {\ct LATCH=.FALSE.} \index{CTRL!LATCH}on the relevant {\ct DEVC} or {\ct CTRL} input lines.
By default, devices and controls may only change state once, like a sprinkler activating or
smoke detector alarming. {\ct LATCH=.TRUE.} by default for both devices and controls.

\subsection{Control Functions: \texorpdfstring{{\tt ANY}}{ANY}, \texorpdfstring{{\tt ALL}}{ALL}, \texorpdfstring{{\tt ONLY}}{ONLY}, and
\texorpdfstring{{\tt AT\_LEAST}}{AT\_LEAST}}

Suppose you want an obstruction to be removed (a door is opened, for example) after any
of four smoke detectors in a room has activated. Use input lines of the form:

\footnotesize
\begin{verbatim}
&OBST XB=..., SURF_ID='...', CTRL_ID='SD' /

&DEVC XYZ=1,1,3, PROP_ID='Acme Smoker', ID='SD_1' /
&DEVC XYZ=1,4,3, PROP_ID='Acme Smoker', ID='SD_2' /
&DEVC XYZ=4,1,3, PROP_ID='Acme Smoker', ID='SD_3' /
&DEVC XYZ=4,4,3, PROP_ID='Acme Smoker', ID='SD_4' /
&CTRL ID='SD', FUNCTION_TYPE='ANY', INPUT_ID='SD_1','SD_2','SD_3','SD_4',
      INITIAL_STATE=.TRUE. /
\end{verbatim}
\normalsize

\noindent
The {\ct INITIAL\_STATE} \index{CTRL!INITIAL\_STATE}of the control function {\ct SD} is {\ct .TRUE.},
meaning that the obstruction exists initially. The ``change of state'' means that the obstruction is
removed when \underline{any} \index{CTRL!FUNCTION\_TYPE!ANY} smoke detector alarms.  By default, the {\ct INITIAL\_STATE}
of the control function {\ct SD} is {\ct .FALSE.}, meaning that the obstruction does not exist initially.

Suppose that now you want the obstruction to be created (a door is closed, for example) after all \index{CTRL!FUNCTION\_TYPE!ALL}
four smoke detectors in a room have activated. Use a control line of the form:

\footnotesize
\begin{verbatim}
&CTRL ID='SD', FUNCTION_TYPE='ALL', INPUT_ID='SD_1','SD_2','SD_3','SD_4' /
\end{verbatim}
\normalsize

\noindent

The control functions {\ct AT\_LEAST} and {\ct ONLY} are generalizations of {\ct ANY} and {\ct ALL}.

For example,

\footnotesize
\begin{verbatim}
&CTRL ID='SD', FUNCTION_TYPE='AT_LEAST', N=3, INPUT_ID='SD_1','SD_2','SD_3','SD_4' /
\end{verbatim}

\normalsize
\noindent
changes the state from {\ct .FALSE.} to {\ct .TRUE.} when \underline{at least}
\index{CTRL!FUNCTION\_TYPE!AT\_LEAST}3 detectors activate.

Note that in this example, and the example below, the parameter {\ct N} \index{CTRL!N}is used to
specify the number of activated or ``TRUE'' inputs required for the conditions
of the Control Function to be satisfied.

The control function,

\footnotesize
\begin{verbatim}
&CTRL ID='SD', FUNCTION_TYPE='ONLY', N=3, INPUT_ID='SD_1','SD_2','SD_3','SD_4' /
\end{verbatim}

\normalsize
\noindent
changes the state from {\ct .FALSE.} to {\ct .TRUE.} when 3,
and \underline{only} \index{CTRL!FUNCTION\_TYPE!ONLY}3, detectors activate.


\subsection{Control Function: \texorpdfstring{{\tt TIME\_DELAY}}{TIME\_DELAY}}

There is often a time delay \index{CTRL!FUNCTION\_TYPE!TIME\_DELAY}\index{CTRL!DELAY}
between when a device activates, and when some other action occurs, like in a dry pipe sprinkler system.

\footnotesize
\begin{verbatim}
&DEVC XYZ=2,2,3, PROP_ID='Acme Sprinkler_link', QUANTITY='LINK TEMPERATURE',
      ID='Spk_29_link', CTRL_ID='dry pipe' /
&DEVC XYZ=2,2,3, PROP_ID='Acme Sprinkler', QUANTITY='CONTROL', ID='Spk_29',
      CTRL_ID='dry pipe' /
&CTRL ID='dry pipe', FUNCTION_TYPE='TIME_DELAY', INPUT_ID='Spk_29_link', DELAY=30. /
\end{verbatim}
\normalsize

\noindent
This relationship between a sprinkler \index{sprinkler}and its pipes means that the sprinkler spray is controlled (in this case delayed) by the
{\ct dry pipe}, which adds 30 s to the activation time of {\ct Spk\_29}, measured by  {\ct Spk\_29\_link},
before water can flow out of the head. %A more complicated function is given by the lines:

%\footnotesize
%\begin{verbatim}
%&DEVC XYZ=2,2,3, PROP_ID='Acme Sprinkler', ID='Spk_29', CTRL_ID='dry pipe' /
%&CTRL ID='dry pipe', FUNCTION_TYPE='CYCLING', INPUT_ID='Spk_29', CYCLE_TIME=30., CYCLES=5 /
%\end{verbatim}
%\normalsize

%\noindent
%Here, the sprinkler will cycle on and off 5 times for 30 s each time.



\subsection{Control Function: \texorpdfstring{{\tt DEADBAND}}{DEADBAND}}

For an HVAC\index{HVAC} example, the following lines of input would set up a simple thermostat\index{thermostat}:
\index{CTRL!FUNCTION\_TYPE!DEADBAND}

\footnotesize
\begin{verbatim}
&SURF ID='FAN', TMP_FRONT=40., VOLUME_FLUX=-1. /
&VENT XB=-0.3,0.3,-0.3,0.3,0.0,0.0, SURF_ID='FAN', CTRL_ID='thermostat' /
&DEVC ID='TC', XYZ=2.4,5.7,3.6, QUANTITY='TEMPERATURE' /
&CTRL ID='thermostat', FUNCTION_TYPE='DEADBAND', INPUT_ID='TC',
      ON_BOUND='LOWER', SETPOINT=23.,27.,LATCH=.FALSE./
\end{verbatim} \normalsize

\noindent
Here, we want to control the {\ct VENT} that simulates the {\ct FAN}\index{fan}, which blows hot air
into the room. A {\ct DEVC} called {\ct TC} is positioned in the room to measure the {\ct TEMPERATURE}.
The {\ct thermostat} uses a {\ct SETPOINT}\index{CTRL!SETPOINT} to turn on the
{\ct FAN} when the temperature falls below 23~$^\circ$C ({\ct ON\_BOUND='LOWER'}) \index{CTRL!ON\_BOUND}
and it turns off when the temperature rises above 27~$^\circ$C.

\begin{warning}
Note that a deadband controller needs to have {\ct LATCH} set to {\ct .FALSE.} .
\end{warning}

\subsection{Control Function: \texorpdfstring{{\tt RESTART} and {\tt KILL}} {RESTARTKILL} }

There are times when one only wishes to run a simulation until some
goal is reached.  Previously this could generally only be done by
constantly monitoring the simulation's output and manually stopping
the calculation when one observed  the goal being met.  By using the
{\ct KILL} \index{CTRL!FUNCTION\_TYPE!KILL}control function this can be done automatically.

Additionally there are analyses where one wishes to create some
baseline condition and the run multiple permutations of that baseline.
For example one may wish to run a series of simulations where
different mitigation strategies are tried once a detector alarms.  By
using the {\ct RESTART} \index{CTRL!FUNCTION\_TYPE!RESTART}
control function, one can cause a restart file
to be created once a desired condition is met.  The simulation can
continue and the restart files can be copied to have the {\ct CHID} of
the various permutations (providing of course that the usual
restrictions on the use of restart files are followed).
For example, the lines

\footnotesize
\begin{verbatim}
&DEVC ID='temp', QUANTITY='TEMPERATURE', SETPOINT=1000., XYZ=4.5,6.7,3.6 /
&DEVC ID='velo', QUANTITY='VELOCITY', SETPOINT=10., XYZ=4.5,6.7,3.6 /

&CTRL ID='kill', FUNCTION_TYPE='KILL', INPUT_ID='temp' /
&CTRL ID='restart', FUNCTION_TYPE='RESTART', INPUT_ID='velo' /
\end{verbatim} \normalsize

\noindent
will lead to the job being stopped gracefully, with restart files output, when the temperature at a given point rises above
1000~$^\circ$C; or to just restart files being output when the velocity at a given point exceeds 10~m/s.



\subsection{Control Function: \texorpdfstring{{\tt CUSTOM}}{CUSTOM} }

For most of the control function types, the logical (true/false) output of
the devices and control functions and the time they last changed
state are taken as inputs.  In the case below, the {\ct CUSTOM} \index{CTRL!FUNCTION\_TYPE!CUSTOM}
control function uses the numerical output of a timer device as its input.  The function returns true, when the {\ct F} parameter
in the ramp specified with {\ct RAMP\_ID}\index{CTRL!RAMP\_ID} is a positive value and
false when the {\ct RAMP} {\ct F} value is negative.
In this case, the control would start false and would switch to
true when the timer reaches 60 seconds.  It would then stay in a true
state until the timer reaches 120 seconds and would then change back to false.

\begin{warning}
Note that when using control functions the {\ct ID}s assigned to both the
{\ct CTRL} and the {\ct DEVC} inputs must be unique across both sets of inputs, i.e. you cannot use the
same {\ct ID} for both a control function and a device.
\end{warning}

\noindent
In the HVAC\index{HVAC}
example above, we could set the system to function
on a fixed cycle by using a {\ct CUSTOM} control function based on time:

\footnotesize
\begin{verbatim}
&SURF ID='FAN', TMP_FRONT=40., VOLUME_FLUX=-1. /
&VENT XB=-0.3,0.3,-0.3,0.3,0.0,0.0, SURF_ID='FAN', CTRL_ID='cycling timer' /
&DEVC ID='TIMER', XYZ=2.4,5.7,3.6, QUANTITY='TIME' /
&CTRL ID='cycling timer', FUNCTION_TYPE='CUSTOM, INPUT_ID='TIMER', RAMP_ID='cycle' /
&RAMP ID='cycle', T= 59, F=-1 /
&RAMP ID='cycle', T= 61, F= 1 /
&RAMP ID='cycle', T=119, F= 1 /
&RAMP ID='cycle', T=121, F=-1 /
\end{verbatim} \normalsize

\noindent
In the above example the fan will be off initially, turn on at 60~s and then turn off at 120~s.

You can make an obstruction appear and disappear multiple times by using lines like

\footnotesize
\begin{verbatim}
&OBST XB=..., SURF_ID='whatever', CTRL_ID='cycling timer' /
&DEVC ID='TIMER', XYZ=..., QUANTITY='TIME' /
&CTRL ID='cycling timer', FUNCTION_TYPE='CUSTOM, INPUT_ID='TIMER', RAMP_ID='cycle' /
&RAMP ID='cycle', T=  0, F=-1 /
&RAMP ID='cycle', T= 59, F=-1 /
&RAMP ID='cycle', T= 61, F= 1 /
&RAMP ID='cycle', T=119, F= 1 /
&RAMP ID='cycle', T=121, F=-1 /
\end{verbatim}

\normalsize
\noindent
The above will have the obstacle initially removed, then added at 60 s, and removed again at 120 s.

Experiment with these combinations using a simple
case before trying a case to make sure that FDS indeed is doing what is intended.


\subsection{Combining Control Functions: A Pre-Action Sprinkler System}

For a pre-action sprinkler system\index{pre-action sprinkler system}, the normally
dry sprinkler pipes are flooded when a detection event occurs. For this example, the detection event is
when two of four smoke detectors alarm.  It takes 30~s to flood the piping network.
The nozzle is a {\ct DEVC} named {\ct 'NOZZLE 1'} controlled by the {\ct CTRL} named {\ct 'nozzle trigger'}.
The nozzle activates when both detection \underline{and} the time delay have occurred.  Note that the {\ct DEVC} is
specified with {\ct QUANTITY='CONTROL'}.

\footnotesize
\begin{verbatim}
&DEVC XYZ=1,1,3, PROP_ID='Acme Smoker', ID='SD_1' /
&DEVC XYZ=1,4,3, PROP_ID='Acme Smoker', ID='SD_2' /
&DEVC XYZ=4,1,3, PROP_ID='Acme Smoker', ID='SD_3' /
&DEVC XYZ=4,4,3, PROP_ID='Acme Smoker', ID='SD_4' /
&DEVC XYZ=2,2,3, PROP_ID='Acme Nozzle', QUANTITY='CONTROL',
      ID='NOZZLE 1', CTRL_ID='nozzle trigger' /

&CTRL ID='nozzle trigger', FUNCTION_TYPE='ALL', INPUT_ID='smokey','delay' /
&CTRL ID='delay', FUNCTION_TYPE='TIME_DELAY', INPUT_ID='smokey', DELAY=30. /
&CTRL ID='smokey', FUNCTION_TYPE='AT_LEAST', N=2, INPUT_ID='SD_1','SD_2','SD_3','SD_4' /
\end{verbatim}
\normalsize

\subsection{Combining Control Functions: A Dry Pipe Sprinkler System}

For a dry-pipe sprinkler system\index{dry-pipe sprinkler system}, the normally
dry sprinkler pipes are pressurized with gas.  When a link activates in a sprinkler head, the pressure drop allows
water to flow into the pipe network.  For this example it takes 30~s to flood the piping network once a sprinkler link
has activated.  The sequence of events required for operation is first {\ct ANY} of the links must activate which
starts the 30~s {\ct TIME\_DELAY}.  Once the 30~s delay has occurred, each nozzle with an active link, the {\ct ALL}
control functions, will then flow water.

\footnotesize
\begin{verbatim}
&DEVC XYZ=2,2,3, PROP_ID='Acme Sprinkler Link', ID='LINK 1' /
&DEVC XYZ=2,3,3, PROP_ID='Acme Sprinkler Link', ID='LINK 2' /

&PROP ID='Acme Sprinkler Link', QUANTITY='LINK TEMPERATURE',
      ACTIVATION_TEMPERATURE=74., RTI=30./

&DEVC XYZ=2,2,3, PROP_ID='Acme Nozzle', QUANTITY='CONTROL',
      ID='NOZZLE 1', CTRL_ID='nozzle 1 trigger' /
&DEVC XYZ=2,3,3, PROP_ID='Acme Nozzle', QUANTITY='CONTROL',
      ID='NOZZLE 2', CTRL_ID='nozzle 2 trigger' /

&CTRL ID='check links', FUNCTION_TYPE='ANY', INPUT_ID='LINK 1','LINK 2'/
&CTRL ID='delay', FUNCTION_TYPE='TIME_DELAY', INPUT_ID='check links', DELAY=30. /
&CTRL ID='nozzle 1 trigger', FUNCTION_TYPE='ALL', INPUT_ID='delay','LINK 1'/
&CTRL ID='nozzle 2 trigger', FUNCTION_TYPE='ALL', INPUT_ID='delay','LINK 2'/
\end{verbatim}
\normalsize

\chapter{Output Data}
\label{info:outputdata}
\index{Output}
Before a calculation is started, carefully consider
what information should be saved. All output quantities must be specified
at the start of the calculation. In most cases, there is no way to
retrieve information after the calculation ends if it was not specified from the start.
There are several different ways of visualizing the results of a
calculation. Most familiar to
experimentalists is to save a given quantity at a single point in space so
that this quantity can be plotted as a function of time, like a
thermocouple temperature measurement. The namelist group {\ct DEVC},
described previously, is used to specify point measurements.

To visualize the flow patterns better, save planar
slices of data, either in the gas or solid phases, by using the
{\ct SLCF} (SLiCe File) or {\ct BNDF} (BouNDary File) namelist group.
Both of these output formats permit you to animate these quantities in
time.

For static pictures of the flow field, use the PLot3D files
that are automatically generated 5 times a run. Plot3D format is used by many CFD programs as a simple
way to store specified quantities over the entire mesh at one instant in
time.

Finally, tracer particles can be injected into the flow field from
vents or obstacles, and then viewed in Smokeview. Use the {\ct PART}
namelist group to control the injection rate, sampling rate and other
parameters associated with particles.

\begin{warning}
\noindent
Note: unlike in FDS version 1,
particles are no longer used to introduce heat into the flow, thus
particles no longer are ejected automatically from burning surfaces.
\end{warning}


\section{Output Control Parameters: The \texorpdfstring{{\tt DUMP}}{DUMP} Namelist Group}
\label{info:DUMP}\index{DUMP}

The namelist group {\ct DUMP} contains parameters (Table \ref{tbl:DUMP}) that control the rate at which output files
are written, and various other global parameters associated with output files.
This namelist group is new starting in FDS 5, although its
parameters have been specified via other namelist groups in past versions.

\begin{description}
\item[{\ct NFRAMES}] Number of output dumps per calculation. The default is 1000.
Device data, slice data, particle data, isosurface data, 3D smoke data, boundary data, solid phase profile data, and
control function data are saved every {\ct (T\_END-T\_BEGIN)/NFRAMES} seconds unless otherwise specified
using {\ct DT\_DEVC}, {\ct DT\_SLCF}, {\ct DT\_PART}, {\ct DT\_ISOF}, {\ct DT\_BNDF}, {\ct DT\_PROF},
or {\ct DT\_CTRL} Note that {\ct DT\_SLCF} controls Smoke3D output. {\ct DT\_HRR} controls the
output of heat release rate and associated quantities.
\item[{\ct MASS\_FILE}] If {\ct .TRUE.}, produce an output file listing the total masses of all gas species as a function of time. It is {\ct .FALSE.} by default because the calculation
of all gas species in all mesh cells is time-consuming. The parameter {\ct DT\_MASS} controls the frequency of output.
\item[{\ct MAXIMUM\_DROPLETS}] Maximum number of Lagrangian particles that can be included on any
mesh at any given time. (Default 500000)
\item[{\ct SMOKE3D}] If {\ct .FALSE.}, do not produce an animation of the smoke and fire. It is {\ct .TRUE.} by default.
\item[{\ct FLUSH\_FILE\_BUFFERS}] By default, every 10 time steps FDS purges the output file buffers and forces the data to be written out into the respective output files. To stop
this from happening, set this parameter to {\ct .FALSE.}
\end{description}


\section{Output Options}

\subsection{Point Measurement Devices}
\index{Output!Point Measurements}
For many commonly used measurement devices there is no need to associate a
specific {\ct PROP} line to the {\ct DEVC} entry. In such cases, use the character string
{\ct QUANTITY} to indicate that a particular gas or solid phase quantity at the point should be recorded in
the output file with the suffix {\bf \_devc.csv}. The quantities are listed in Table~\ref{tab:output}.
Many of the gas phase quantities are self-explanatory, but some are not. Some of the quantities require specification of
properties via the {\ct PROP} line.

When prescribing a solid phase quantity, be sure to position the
probe at a solid surface. It is not always obvious where the
solid surface is since the mesh does not always align with the input obstruction
locations. To help locate the appropriate surface, the parameter {\ct IOR} {\em must} be included
when designating a solid phase quantity.
If the orientation of the solid surface is in the
positive $x$ direction {\ct IOR=1}, negative $x$ direction {\ct IOR=-1},
positive $y$ {\ct IOR=2}, negative {\ct IOR=-2}, positive $z$ {\ct IOR=3},
and negative $z$ {\ct IOR=-3}. There are still instances where FDS cannot
determine which solid surface is being designated, in which case an
error message appears in the diagnostic output file.
Re-position the probe and try again. For example, the line

\footnotesize
\begin{verbatim}
&DEVC XYZ=0.7,0.9,2.1, QUANTITY='WALL_TEMPERATURE', IOR=-2, ID='...' /
\end{verbatim}
\normalsize

\noindent
designates the surface temperature of a wall facing the negative $y$
direction.



\subsection{Integrated (non-pointwise) Measurement Devices}
\index{Output!Integrated Measurements}
In addition to point measurements, the {\ct DEVC} group can be used
to report integrated quantities (See Table~\ref{tab:output}).
For example, you may want to know the mass flow out of a door or window.
To report this, add the line

\footnotesize
\begin{verbatim}
&DEVC XB=0.3,0.5,2.1,2.5,3.0,3.0, QUANTITY='MASS FLOW', ID='whatever' /
\end{verbatim}
\normalsize

\noindent
Note that in this case, a plane is specified rather than
a point. The sextuplet {\ct XB} is used for this purpose. Notice when a
flow is desired, two of the six coordinates need to be the same. Another
{\ct QUANTITY}, {\ct HRR}, can be used to compute the total heat release
rate within a subset of the domain. In this case, the sextuplet
{\ct XB} ought to define a volume rather than a plane. Specification of
the plane or volume over which the integration is to take place can only
be done using {\ct XB} -- avoid planes or volumes
that cross multiple mesh boundaries. FDS has to decide which mesh to
use in the integration, and it chooses the finest mesh overlapping
the centroid of the designated plane or volume.


\subsection{Output Statistics}
\label{info:statistics}
\index{Output!Statistics}

A useful feature of a device ({\ct DEVC}) is to specify an output quantity along with a desired statistic. For example,

\footnotesize
\begin{verbatim}
&DEVC XYZ=2.3,4.5,6.7, QUANTITY='TEMPERATURE', ID='whatever', STATISTICS='MAX' /
\end{verbatim}
\normalsize

\noindent
causes FDS to write out the maximum gas phase temperature over the entire mesh containing the point {\ct XYZ}. Note that it
does not compute the maximum over the entire computational domain, just that particular mesh. Other {\ct STATISTICS} include
{\ct 'MIN'} and {\ct 'MEAN'}. They can be used for both gas and solid phase output quantities. In the case of solids, the
specification of a {\ct SURF\_ID} limits the search to only those surfaces. Use the {\ct STATISTICS} feature with caution because
it demands that FDS evaluate the given {\ct QUANTITY} in all gas or solid phase cells.




\subsection{Quantities within Solids: The \texorpdfstring{{\tt PROF}}{PROF} Namelist Group}%Simo
\label{info:PROF} \index{PROF}

FDS uses a fine, non-uniform, one-dimensional mesh at each boundary
cell to compute heat transfer within a solid. The parameters
(Table~\ref{tbl:PROF}) to specify a given {\ct PROF}ile are similar to
those used to specify a surface quantity in the {\ct DEVC} group. {\ct
XYZ} designates the triplet of coordinates, {\ct QUANTITY} is the
physical quantity to monitor, {\ct IOR} the orientation,
and {\ct ID} an identifying character string. Here is an example of
how you would use this feature to get a time history of temperature
profiles within a given solid obstruction:
\index{PROF!XYZ}
\index{PROF!IOR}

\footnotesize
\begin{verbatim}
&PROF XYZ=..., QUANTITY='TEMPERATURE', ID='TU1SA_FDS', IOR=3 /
\end{verbatim} \normalsize

\noindent
\index{PROF!QUANTITY}
Other possible quantities are the total density of the wall ({\ct
QUANTITY = 'DENSITY'}) or densities of solid material components ({\ct
QUANTITY = 'MATL\_ID'}), where {\ct MATL\_ID} is the name of the
material.

Each {\ct PROF} line creates a separate file. This may be more than is
needed. Sometimes, all you want to know is the temperature at a
certain depth. To get an inner wall temperature, you can also just use
a device as follows:

\footnotesize
\begin{verbatim}
&DEVC XYZ=..., QUANTITY='INSIDE_WALL_TEMPERATURE', DEPTH=0.005, ID='Temp_1', IOR=3 /
\end{verbatim} \normalsize

\noindent
The parameter {\ct DEPTH} (m) indicates the distance inside the solid surface.
Note that this {\ct QUANTITY} is allowed only as a {\ct DEVC}, not a
{\ct BNDF}, output. Also note that if the wall thickness is decreasing
over time due to the solid phase reactions, the distance is
measured from the current surface, and the measurement point is
'moving' towards the back side of the solid. Eventually, the
measurement point may get out of the solid, in which case it starts to
show ambient temperature.


\subsection{Animated Planar Slices: The \texorpdfstring{{\tt SLCF}}{SLCF} Namelist Group}%Bryan
\label{info:SLCF}\index{SLCF}

The {\ct SLCF} (``slice file'') namelist group parameters (Table~\ref{tbl:SLCF})
allows you to record various gas phase quantities
at more than a single point. A ``slice'' refers to a subset of the whole domain. It can be a line,
plane, or volume, depending on the values of {\ct XB}.
The sextuplet {\ct XB} indicates the boundaries of the ``slice'' plane.
{\ct XB} is prescribed as in the {\ct OBST} or {\ct VENT} groups, with
the possibility that 0, 2, or 4 out of the 6 values be the same to
indicate a volume, plane or line, respectively. A handy trick is to
specify, for example, {\ct PBY=5.3} instead of {\ct XB} if it is desired
that the entire plane $y=5.3$ slicing through the domain be saved.
{\ct PBX} and {\ct PBZ} control planes perpendicular to the
$x$ and $z$ axes, respectively.

Animated vectors can be created in Smokeview if a given {\ct SLCF} line has the attribute {\ct VECTOR=.TRUE.} If two {\ct SLCF}
entries are in the same plane, then only one of the lines needs to have {\ct VECTOR=.TRUE.} Otherwise, a redundant set of velocity
component slices will be created.

Slice file information is recorded in files (See Section~\ref{out:SLCF}) \index{Output!Slice File}
labeled {\bf CHID\_$n$.sf}, where $n$ is the index of the slice file.
A short fortran program {\bf fds2ascii.f} produces a text file from a line,
plane or volume of data. See Section~\ref{info:fds2ascii} for more details.






\subsection{Animated Boundary Quantities: The \texorpdfstring{{\tt BNDF}}{BNDF} Namelist Group}
\label{info:BNDF}\index{BNDF}

The {\ct BNDF} (``boundary file'') \index{Output!Boundary File}
\index{BNDF} namelist group parameters allows you
to record surface quantities at all solid obstructions. As with
the {\ct SLCF} group, each quantity is prescribed with a separate
{\ct BNDF} line, and the output files are of the form {\bf CHID\_$n$.bf}.
No physical coordinates need be specified, however, just {\ct QUANTITY}\index{BNDF!QUANTITY}.
See Table \ref{tab:output}. For certain output quantities, additional parameters need to be specified via
the {\ct PROP} namelist group. In such cases, add the character string, {\ct PROP\_ID}, to the {\ct BNDF} line
to tell FDS where to find the necessary extra information.

Note that {\ct BNDF} files (Section~\ref{out:BNDF}) can become very
large, so be careful in prescribing the time interval.
One way to reduce the size of the output file is to turn off the
drawing of boundary information on desired obstructions. On any given
{\ct OBST} line, if the string {\ct BNDF\_OBST=.FALSE.} is included,
the obstruction is not colored. To turn off all boundary drawing,
set {\ct BNDF\_DEFAULT=.FALSE.} on the {\ct MISC} line. Then individual
obstructions can be turned back on with {\ct BNDF\_OBST=.TRUE.} on
the appropriate {\ct OBST} line. Individual faces of a given obstruction can be controlled
via {\ct BNDF\_FACE(IOR)}, where {\ct IOR} is the index of orientation (+1 for the positive $x$ direction, -1 for negative, and so on).



\subsection{Animated Isosurfaces: The \texorpdfstring{{\tt ISOF}}{ISOF} Namelist Group}
\label{info:ISOF} \index{ISOF}

The {\ct ISOF} (``ISOsurface File'') \index{Output!Isosurface File}namelist group is used to specify the output of
gas phase scalar quantities, as three dimensional animated contours.
For example, a 300~$^\circ$C temperature isosurface shows where the gas temperature is
300~$^\circ$C.
Three different values of the temperature can be saved via the line:

\footnotesize
\begin{verbatim}
&ISOF QUANTITY='TEMPERATURE', VALUE(1)=50., VALUE(2)=200., VALUE(3)=500. /
\end{verbatim}
\normalsize

\noindent
where the values are in degrees C. Note that the isosurface output
files {\bf CHID\_$n$.iso} can become very large, so experiment with different sampling rates.

Any gas phase quantity can animated via iso-surfaces, but use caution. To render an iso-surface, the desired quantity must be
computed in every mesh cell at every output time step. For quantities like {\ct TEMPERATURE}, this is not a problem, as FDS computes it and saves it
anyway. However, {\ct soot density} or {\ct oxygen} demand substantial amounts of time to compute at each mesh cell.




\subsection{Plot3D Static Data Dumps}
\label{info:PL3D}\index{Output!Plot3D}

By default, flow field data in Plot3D format is output 5 times a run.
Five quantities are written out to a file at one instant in time. The default specification is:

\footnotesize
\begin{verbatim}
&DUMP ..., PLOT3D_QUANTITY(1:5)='TEMPERATURE',
      'U-VELOCITY','V-VELOCITY','W-VELOCITY','HRRPUV' /
\end{verbatim}
\normalsize

\noindent
It's best to leave the velocity components as is, because Smokeview
uses them to draw velocity vectors. The first and fifth quantities can
be changed with the parameters {\ct PLOT3D\_QUANTITY(1)} and {\ct PLOT3D\_QUANTITY(5)}
on the {\ct DUMP} line.

\begin{warning}
Note that there can only be one {\ct DUMP} line.
\end{warning}

Data stored in Plot3D~\cite{PLOT3D} files (See Section~\ref{out:PL3D}) use a format developed by
NASA and used by many CFD programs for representing simulation results.
Plot3D data is visualized in three ways: as 2D contours, vector plots and iso-surfaces.
Vector plots may be viewed if one or more of the $u$, $v$ and $w$
velocity components are stored in the Plot3D file. The vector
length and direction show the direction and relative speed of the
fluid flow. The vector colors show a scalar fluid quantity such as
temperature.
Plot3D data are stored in files with extension {\ct .q} . There is
an optional file that can be output with coordinate information
if another visualization package is being used to render the
files. If you write {\ct WRITE\_XYZ=.TRUE.} on the {\ct DUMP}
line, a file with suffix {\ct .xyz} is written out. Smokeview
does not require this file because the coordinate information can be
obtained elsewhere.


\clearpage

\section{Special Output Quantities}

\subsection{Heat Release Rate}
\label{info:HRR} \index{Output Files!\_hrr.csv}

Quantities associated with the overall energy budget are
reported in the comma delimited file {\bf CHID\_hrr.csv}.
This file is automatically generated; the only input parameter associated with it is
{\ct DT\_HRR} on the {\ct DUMP} line. The file consists of six columns.
The first column contains the time in seconds. The second through
fifth columns contain integrated energy gains and losses, all in
units of kW. The second column contains the total heat release rate, the third contains the
radiative heat loss to all the boundaries (solid and open), the fourth contains the
convective and radiative heat loss to the boundaries ({\em i.e.} the energy
flowing out of or into the domain), and the fifth contains the energy conducted
into the solid surfaces.
The sixth column contains the total burning rate of fuel, in units of kg/s. It is included merely as a check
of the total heat release rate.

Let $\Omega$ denote the unblocked computational domain, {\em i.e.} the volume within the bounding rectangle
occupied by gas. Let $\partial \Omega$ by the boundary of $\Omega$. The boundary can be divided into two parts
$\partial \Omega = \partial \Omega_1 + \partial \Omega_2$. The first part $\partial \Omega_1$ consists of all the solid
walls. The second part $\partial \Omega_2$ consists of openings from outside the domain through which gases may flow. This
could be an open window to the exterior, or a forced vent.

The total heat release rate is given by
\be \dot{Q} = \int_\Omega \; \dq''' \; dV \ee
The radiative loss to the
boundaries can be computed with either a volume or boundary integral
\be \dot{Q}_r = \int_\Omega \; \nabla \cdot \bq_r \; dV =
\int_{\partial \Omega} \; \bq_r \cdot \dS = \int_{\partial \Omega} \; \dq_r'' \; \dA \ee
It represents the energy radiating away from the fire and hot gases into
the solid boundaries or out of the computational domain. The convective/radiative
loss to open boundaries is
\be \dot{Q}_{conv} =  \int_{\partial \Omega} \; c_p \; \rho \; (T-T_\infty) \; \bu \cdot \dS
   + \int_{\partial \Omega_2} \; \dq_r'' \; \dA  \ee
where the integral is positive if the flow and radiative flux are going out of the domain.
The conductive loss to solid surfaces is given by
\be \dot{Q}_{cond} = \int_{\partial \Omega_1} \; \dq_r'' + \dq_c'' \; \dA  \ee
where the integral is positive if heat is being lost into a wall colder
than the gas.

For scenarios in which the fire is the primary source of energy, after the gas temperatures
within the computational domain reach a nearly steady state
\be \dot{Q} \approx \dot{Q}_{conv} + \dot{Q}_{cond}  \ee
This is merely a check of the global energy balance, that is, the energy generated within the space
heats up the gases and solid surfaces, and then a balance between heat input and output is achieved.



\subsection{Visibility and Obscuration}
\label{info:visibility}
\label{info:obscuration}

If you are performing a fire calculation using the mixture fraction
approach, the smoke is tracked
along with all other major products of combustion. The most useful
quantity for assessing visibility in a space is the {\em light
extinction coefficient}, $K$~\cite{SFPE:Mulholland}. The intensity of
monochromatic light passing a distance $L$ through smoke
is attenuated according to
\be I/I_0 = e^{-KL} \ee
The light extinction coefficient, $K$, is a product of the
density of smoke particulate, $\rho Y_s$, and a mass specific
extinction coefficient that is fuel dependent
\be K = K_m \; \rho \, Y_s \label{mec} \ee
Devices that output a \% obscuration such as a {\ct DEVC} with a {\ct QUANTITY} of
{\ct aspiration}, {\ct spot obscuration} (smoke detector), or {\ct path obscuration} (beam detector)
are discussed respectively in Section~\ref{info:aspiration_detector}, Section~\ref{info:smoke_detector},
and Section~\ref{info:beam_detector}

Estimates of visibility through smoke can be made by using the
equation
\be  S = C/K  \label{vis}  \ee
where $C$ is a nondimensional constant characteristic of
the type of object being viewed through the smoke, {\em i.e.}
$C=8$ for a light-emitting sign and $C=3$ for a light-reflecting
sign~\cite{SFPE:Mulholland}. Since $K$ varies from point to point in the
domain, the visibility $S$ does as well. Keep in mind that
FDS can only track smoke whose production rate and composition
are specified. Predicting either is beyond the
capability of the present version of the model.

Three parameter control smoke production and visibility; each
parameter is input on the {\ct REAC} line. The first parameter
is {\ct SOOT\_YIELD}, which is the fraction of fuel mass that
is converted to soot. The second parameter is called the
{\ct MASS\_EXTINCTION\_COEFFICIENT}, and it is the $K_m$ in
Eq.~(\ref{mec}). The default value is 8700~m$^2$/kg, a value
suggested for flaming combustion of wood and plastics.
The third parameter is called the {\ct VISIBILITY\_FACTOR}, the
constant $C$ in Eq.~(\ref{vis}). It is 3 by default.

The gas phase output quantity {\ct extinction coefficient} is $K$.
The visibility $S$ is output via the keyword {\ct visibility}. Note
that each is tied to the mixture fraction formulation of combustion.


\subsection{Layer Height and the Average Upper and Lower Layer Temperatures}
\label{info:layerheight}

Fire protection engineers often need to estimate the location of the interface between
the hot, smoke-laden upper layer and the cooler lower layer in a burning compartment.
Relatively simple fire models, often referred to as {\em two-zone models}, compute
this quantity directly, along with the average temperature of the upper and lower layers.
In a computational fluid dynamics (CFD) model like FDS, there are not two distinct zones,
but rather a continuous profile of temperature. Nevertheless, there are methods that
have been developed to estimate layer height and average temperatures from a continuous
vertical profile of temperature. One such method~\cite{Janssens:JFS1992} is as follows:
Consider a continuous function $T(z)$ defining temperature $T$ as a function of height above
the floor $z$, where $z=0$ is the floor and $z=H$ is the ceiling. Define $T_u$ as the
upper layer temperature, $T_l$ as the lower layer temperature, and $z_{int}$ as the
interface height. Compute the quantities:
\begin{eqnarray*} (H-z_{int})\; T_u + z_{int} \; T_l = \int_0^H \; T(z) \; dz &=& I_1 \\
                  (H-z_{int})\; \frac{1}{T_u} + z_{int} \; \frac{1}{T_l} = \int_0^H \; \frac{1}{T(z)} \; dz &=& I_2 \end{eqnarray*}
Solve for $z_{int}$:
\be z_{int} = \frac{ T_l(I_1 \, I_2 - H^2)}{I_1+I_2 \, T_l^2 - 2\, T_l \, H} \ee
Let $T_l$ be the temperature in the lowest mesh cell and, using Simpson's Rule, perform the
numerical integration of $I_1$ and $I_2$. $T_u$ is defined as the average upper layer
temperature via
\be (H-z_{int})\; T_u = \int_{z_{int}}^H \; T(z) \; dz \ee
Further discussion of similar procedures can be found in Ref.~\cite{He:1}.

The quantities {\ct LAYER HEIGHT}, {\ct UPPER TEMPERATURE} and {\ct LOWER TEMPERATURE}
can be designated via ``device'' ({\ct DEVC}) lines in the input file\footnote{Note that in FDS 5 and beyond, these quantities
are no longer available as slice files.}. For example, the entry

\footnotesize
\begin{verbatim}
&DEVC XB=2.0,2.0,3.0,3.0,0.0,3.0, QUANTITY='LAYER HEIGHT', ID='whatever' /
\end{verbatim}
\normalsize

\noindent
produces a time history of the smoke layer height at $x=2$ and $y=3$ between $z=0$ and $z=3$.
If multiple meshes are being used, the vertical path {\em cannot} cross mesh boundaries.



\subsection{The True Gas Temperature vs. the Measured Gas Temperature}
\label{info:THERMOCOUPLE}

The output quantity {\ct THERMOCOUPLE} is the temperature
of the thermocouple itself, usually close to the gas temperature, but not
always. It is determined by solving the following equation
for $T_{TC}$ iteratively~\cite{Welsh:1}
\be \epsilon_{TC} (\sigma T_{TC}^4- U/4) + h(T_{TC}-T_g) = 0 \label{TC}  \ee
where $\epsilon_{TC}$ is the emissivity of the thermocouple, $U$ is the
integrated radiative intensity, $T_g$ is the true gas temperature, and
$h$ is the heat transfer coefficient to a small sphere,
$h=k_a \NU/\PR/d_{TC}$. The bead {\ct BEAD\_DIAMETER} and {\ct BEAD\_EMISSIVITY} are given on the associated {\ct PROP} line.
See the discussion on heat transfer to a water
droplet in the Technical Reference Guide for details of the convective
heat transfer to a small sphere.


\subsection{Heat Fluxes}
\label{info:heat_flux}

There are various ways of recording the heat flux at a solid boundary. If you want to record the {\em net} heat flux to
the surface, $\dq_c'' + \dq_r''$, use the {\ct QUANTITY} called {\ct HEAT\_FLUX}. The individual components, the {\em net}
convective and radiative fluxes, are {\ct CONVECTIVE\_FLUX} and {\ct RADIATIVE\_FLUX}, respectively. If you want to compare
predicted heat flux with a measurement, you often need to use {\ct GAUGE\_HEAT\_FLUX}.
The difference between {\ct HEAT\_FLUX} and {\ct GAUGE\_HEAT\_FLUX} is that
the former is the rate at which energy is absorbed by the solid surface;
the latter is the amount of energy that would be absorbed if the surface were cold (or some specified temperature):
$$\dq_r''/\epsilon +\dq_c'' + h(T_w-T_\infty) + \sigma (T_w^4-T_\infty^4)$$
If the heat flux gauge used in an experiment has
a temperature other than ambient, set {\ct GAUGE\_TEMPERATURE} on the {\ct PROP} line associated with the device.
When comparing against a radiometer measurement, use {\ct RADIOMETER}:
$$\dq_r''/\epsilon + \sigma (T_w^4-T_\infty^4) $$
For diagnostic purposes it is sometimes convenient to output the {\ct INCIDENT\_HEAT\_FLUX}:
$$ \dq_r''/\epsilon + \sigma T_w^4 +\dq_c'' $$
There is a gas phase output quantity called {\ct RADIANT\_INTENSITY}. This is used mainly for diagnosing problems with the
radiation solver. Even though its units are kW/m$^2$, it should not be interpreted as the heat flux to an object that would
occupy that particular point in space. Rather, it is the integral over all directions of the radiation intensity, $I(\bx,\bs)$, a function of both
space and direction. It is denoted by $U$, as in Eq.~(\ref{TC}).


\subsection{Droplet Output Quantities}
\label{info:part_output}

It is possible to record various properties of evaporating droplets. Some of the output quantities are associated with solid boundaries. For example,
{\ct [PART\_ID]\_MPUA} is the \underline{M}ass \underline{P}er \underline{U}nit \underline{A}rea of the droplets named
{\ct PART\_ID}. Likewise, {\ct [PART\_ID]\_AMPUA} is the \underline{A}ccumulated \underline{M}ass \underline{P}er \underline{U}nit \underline{A}rea. Both of these
are given in units of kg/m$^2$. Think of these outputs as measures of the instantaneous mass density per unit area, and the accumulated total, respectively. The
accumulated total is analogous to a ``bucket test,'' where the droplets are collected in buckets and the total mass determined at the end of a given time
period. The cooling of a solid surface by droplets of a given type is given by {\ct [PART\_ID]\_CPUA}, the \underline{C}ooling \underline{P}er \underline{U}nit \underline{A}rea
in units of kW/m$^2$.

Be aware of the fact that the default behavior for droplets hitting the ``floor,'' that is, the plane $z=\hbox{\ct ZMIN}$, is to disappear ({\ct POROUS\_FLOOR=.TRUE.} on the
{\ct MISC} line). \index{POROUS\_FLOOR!output issues}
In this case, {\ct [PART\_ID]\_MPUA} will be zero, but {\ct [PART\_ID]\_AMPUA} will not. FDS stores the droplet mass just before removing the droplet from
the simulation for the purpose of saving CPU time.

Away from solid surfaces, {\ct [PART\_ID]\_MPUV} is the \underline{M}ass \underline{P}er \underline{U}nit \underline{V}olume of the droplets as they fly through
the air, in units of kg/m$^3$.  {\ct [PART\_ID]\_FLUX\_X},  {\ct [PART\_ID]\_FLUX\_Y}, and {\ct [PART\_ID]\_FLUX\_Z} produce {\em only} slice and Plot3D files
of the mass flux of droplets in the $x$, $y$, and $z$ directions, respectively, in units of kg/m$^2$/s.




\subsection{Interfacing with Structural Models}
\label{info:AST} \index{Output!Adiabatic Surface Temperature}

FDS solves a one-dimensional heat conduction equation for each boundary cell marking the interface
between gas and solid, assuming that material properties for the material layer(s) are provided. The results can
be transferred (via either {\ct DEVC} or {\ct BNDF} output) to other models that predict the
mechanical response of the walls or structure. For many applications, the 1-D solution of the heat conduction
equation is adequate, but in situations where it is not, another approach can be followed. FDS includes a
calculation of the Adiabatic Surface Temperature (AST), a quantity that is representative of the heat flux to a
solid surface. Following the idea proposed by Ulf Wickstrom~\cite{Wickstrom:Interflam2007}, the following equation can
be solved via a simple iterative technique to determine an effective gas temperature, $T_{\hbox{\tiny AST}}$:
\be \dot{q}_r'' + \dot{q}_c'' = \epsilon \sigma \, \left( T_{\hbox{\tiny AST}}^4 - T_w^4 \right) + h (T_{\hbox{\tiny AST}} - T_w )  \ee
The sum $\dot{q}_r'' + \dot{q}_c''$ is the {\em net} heat flux onto the solid surface, whose temperature is
$T_w$. The heat fluxes and surface temperature are computed in FDS, and they are inter-dependent. The computed wall
temperature affects the net heat flux and vice versa. However, because FDS only computes the solution to the
1-D heat conduction equation in the solid, it may be prone to error if lateral heat conduction within the solid is
significant. Thus, in some scenarios neither the FDS-predicted heat fluxes or the surface temperature can be used as
an accurate indicator of the thermal insult from the hot, smokey gases onto solid objects.

Of course, both the heat fluxes, $\dot{q}_r''$ and $\dot{q}_c''$, and the surface temperature, $T_w$ can be passed from FDS to the
other model, and suitable corrections can be made based on a presumably more accurate prediction of the solid temperature.
Alternatively, the single quantity, $T_{\hbox{\tiny AST}}$, can be transferred, as this is the temperature that the solid
surface effectively ``sees.'' It represents the gas phase thermal environment, however complicated, but it does not
carry along the uncertainty associated with the simple solid phase heat conduction model within FDS. Obviously, the
objective in passing information to a more detailed model is to get a better prediction of the solid temperature (and
ultimately its mechanical response) than FDS can provide.



\subsection{Integrated Mass and Energy Fluxes through Openings}
\label{info:flows}

The net flow of mass and energy into or out of compartments can be useful for many applications. There are several outputs that address these. All are prescribed via
the device ({\ct DEVC}) namelist group only. For example:

\footnotesize
\begin{verbatim}
&DEVC XB=0.3,0.5,2.1,2.5,3.0,3.0, QUANTITY='MASS FLOW', ID='whatever' /
\end{verbatim}
\normalsize

\noindent
outputs the net integrated mass flux through the given planar area, oriented in the positive $z$ direction, in this case. The three flows -- {\ct 'VOLUME FLOW'}, {\ct 'MASS FLOW'},
and {\ct 'HEAT FLOW'} are defined:
\begin{eqnarray*} \dot{V} &=& \int \bu \cdot \dS  \\
                  \dot{m} &=& \int \rho \bu \cdot \dS \\
                  \dot{q} &=& \int c_p \rho (T-T_\infty) \bu \cdot \dS  \end{eqnarray*}
The addition of a {\ct +} or {\ct -} to the {\ct QUANTITY} names yields the integral of the flow in the positive or negative direction only. In other words, if you want to know
the mass flow out of a compartment, use {\ct 'MASS FLOW +'} or {\ct 'MASS FLOW -'}, depending on the orientation of the door.


\subsection{Wind and the Pressure Coefficient}
\label{info:wind}

In the field of wind engineering, a commonly used quantity is known as the {\ct PRESSURE\_COEFFICIENT}:
\be
   C_p = \frac{p-p_\infty}{\ha \rho_\infty U^2}
\ee
$p_\infty$ is the ambient, or ``free stream'' pressure, and $\rho_\infty$ is the ambient density.
The parameter $U$ is the free-stream wind speed, given as {\ct CHARACTERISTIC\_VELOCITY} on the {\ct PROP} line

\footnotesize
\begin{verbatim}
&BNDF QUANTITY='PRESSURE_COEFFICIENT', PROP_ID='whatever' /
&DEVC ID='pressure tap', XYZ=..., IOR=2, QUANTITY='PRESSURE_COEFFICIENT', PROP_ID='whatever' /
&PROP ID='whatever', CHARACTERISTIC_VELOCITY=3.4 /
\end{verbatim}
\normalsize

\noindent
Thus, you can either paint values of $C_p$ at all surface points, or create a single time history of $C_p$ using a single device at a single point.







\section{Extracting Numbers from the Output Data Files}
\label{info:fds2ascii} \index{Output!fds2ascii}

Often it is desired to present results of calculations in some form other
than those offered by Smokeview. In this case, there is a short
Fortran 90 program called {\bf fds2ascii.f90}, with a PC compiled version
called {\bf fds2ascii.exe}. To run the program, just type
\begin{verbatim}
fds2ascii
\end{verbatim}
\index{fds2ascii}
at the command prompt. You will be asked a series of questions
about which type of output file to process, what time interval to
time average the data, and so forth. A single file is produced
with the name {\bf CHID\_fds2ascii.csv}.


\clearpage
\section{Summary of Output Quantities}
\label{info:outputquantities} \index{Output!Summary of Quantities}

Table~\ref{tab:output}, spread over the following pages, summarizes the various Output Quantities.
Note that lower case quantities are appropriate only for calculations involving the mixture fraction, $Z$. If
individual species are listed via {\ct SPEC} namelist lines, the quantity for mass and volume
fractions are {\ct [SPEC\_ID]} and {\ct [SPEC\_ID]\_VF}, respectively. For example, the quantities
{\ct water vapor} and {\ct WATER VAPOR} denote the volume fraction of water vapor
generated by combustion and the {\em mass} fraction of water vapor from evaporated sprinkler
droplets, respectively.

The column ``File Type'' lists the allowed output files for the quantities. ``B'' is for Boundary ({\ct BNDF}),
``D'' is for Device ({\ct DEVC}), ``I'' is for Iso-surface ({\ct ISOF}), ``P'' is for Plot3D, ``PA'' for PArticle ({\ct PART}),
``S'' is for Slice ({\ct SLCF}). Be careful
when specifying complicated quantities for Iso-surface or Plot3D files, as it requires computation in every gas phase cell.

\begin{table}[h!]
\begin{center}
\caption{Summary of all Output Quantities}
\label{tab:output}
\begin{tabular}{|l|c|c|c|}
\hline
Output {\ct QUANTITY}                           & Symbol                                        & Units          & File Type    \\ \hline \hline
{\ct ABSORPTION\_COEFFICIENT}                   & $\kappa$                                      & 1/m            & D,I,P,S      \\ \hline
{\ct ADIABATIC\_SURFACE\_TEMPERATURE}           & See Section~\ref{info:AST}                    & $^\circ$C      & B,D          \\ \hline
{\ct aspiration}                                & See Section~\ref{info:aspiration_detector}    & \%             & D            \\ \hline
{\ct BURNING\_RATE}                             & $\dm_f''$                                     & kg/m$^2$/s     & B,D          \\ \hline
{\ct carbon dioxide}                            & $X_{CO_2}(Z)$                                 & mol/mol        & D,I,P,S      \\ \hline
{\ct carbon monoxide}                           & $X_{CO}(Z)$                                   & mol/mol        & D,I,P,S      \\ \hline
{\ct CONTROL}                                   & See Section~\ref{info:CTRL}                   &                & D            \\ \hline
{\ct CONVECTIVE\_FLUX}                          & $\dq_c''$ (Section~\ref{info:heat_flux})      & kW/m$^2$       & B,D          \\ \hline
{\ct DENSITY}                                   & $\rho$                                        & kg/m$^3$       & D,I,P,S      \\ \hline
{\ct DIVERGENCE}                                & $\nabla \cdot \bu$                            & s$^{-1}$       & D,I,P,S      \\ \hline
{\ct DROPLET\_DIAMETER}                         & $2 r_d$                                       & $\mu$m         & PA           \\ \hline
{\ct DROPLET\_VELOCITY}                         & $|\bu_d|$                                     & m/s            & PA           \\ \hline
{\ct DROPLET\_TEMPERATURE}                      & $T_d$                                         & $^\circ$C      & PA           \\ \hline
{\ct DROPLET\_MASS}                             & $m_d$                                         & kg             & PA           \\ \hline
{\ct DROPLET\_AGE}                              & $t_d$                                         & s              & PA           \\ \hline
{\ct extinction coefficient}                    & $K$ (Section~\ref{info:visibility})           & 1/m            & D,I,P,S      \\ \hline
{\ct fuel}                                      & $X_F(Z)$                                      & mol/mol        & D,I,P,S      \\ \hline
{\ct GAUGE\_HEAT\_FLUX}                         & See Section~\ref{info:heat_flux}              & kW/m$^2$       & B,D          \\ \hline
{\ct H}                                         & $H=|\bu|^2/2 + \tp/\rho_0$                    & (m/s)$^2$      & D,I,P,S      \\ \hline
{\ct HEAT FLOW}                                 & See Section~\ref{info:flows}                  & kW             & D            \\ \hline
{\ct HEAT\_FLUX}                                & See Section~\ref{info:heat_flux}              & kW/m$^2$       & B,D          \\ \hline
{\ct HRR}                                       & $\int \dq''' \; dV$                           & kW             & D            \\ \hline
{\ct HRRPUV}                                    & $\dq'''$                                      & kW/m$^3$       & D,I,P,S      \\ \hline
{\ct INCIDENT\_HEAT\_FLUX}                      & See Section~\ref{info:heat_flux}              & kW/m$^2$       & B,D          \\ \hline
{\ct INSIDE\_WALL\_TEMPERATURE}                 & See Section~\ref{info:PROF}                   & $^\circ$C      & D            \\ \hline
{\ct LAYER HEIGHT}                              & See Section~\ref{info:layerheight}            & m              & D            \\ \hline
{\ct LINK TEMPERATURE}                          & See Section~\ref{info:heat_detectors}         & $^\circ$C      & D            \\ \hline
{\ct LOWER TEMPERATURE}                         & See Section~\ref{info:layerheight}            & $^\circ$C      & D            \\ \hline
\end{tabular}
\end{center}
\end{table}

\begin{table}[h!]
\begin{center}
\begin{tabular}{|l|c|c|c|}
\hline
Output {\ct QUANTITY}                           & Symbol                                        & Units          & File Type    \\ \hline \hline
{\ct MASS FLOW}                                 & See Section~\ref{info:flows}                  & kg/s           & D            \\ \hline
{\ct MIXTURE\_FRACTION}                         & $Z$                                           & kg/kg          & D,I,P,S      \\ \hline
{\ct nitrogen}                                  & $X_{N_2}(Z)$                                  & mol/mol        & D,I,P,S      \\ \hline
{\ct oxygen}                                    & $X_{O_2}(Z)$                                  & mol/mol        & D,I,P,S      \\ \hline
{\ct oxygen mass fraction}                      & $Y_{O_2}(Z)$                                  & kg/kg          & D,I,P,S      \\ \hline
{\ct [PART\_ID]\_AMPUA}                         & See Section~\ref{info:part_output}            & kg/m$^2$       & B,D          \\ \hline
{\ct [PART\_ID]\_CPUA}                          & See Section~\ref{info:part_output}            & kW/m$^2$       & B,D          \\ \hline
{\ct [PART\_ID]\_FLUX\_X}                       & See Section~\ref{info:part_output}            & kg/m$^2$/s     & P,S          \\ \hline
{\ct [PART\_ID]\_FLUX\_Y}                       & See Section~\ref{info:part_output}            & kg/m$^2$/s     & P,S          \\ \hline
{\ct [PART\_ID]\_FLUX\_Z}                       & See Section~\ref{info:part_output}            & kg/m$^2$/s     & P,S          \\ \hline
{\ct [PART\_ID]\_MPUA}                          & See Section~\ref{info:part_output}            & kg/m$^2$       & B,D          \\ \hline
{\ct [PART\_ID]\_MPUV}                          & See Section~\ref{info:part_output}            & kg/m$^3$       & D,I,P,S      \\ \hline
{\ct path obscuration}                          & See Section~\ref{info:beam_detector}          & \%             & D            \\ \hline
{\ct PRESSURE}                                  & $\tp$                                         & Pa             & D,I,P,S      \\ \hline
{\ct PRESSURE\_COEFFICIENT}                     & $C_p$ (Section~\ref{info:wind})               &                & B,D          \\ \hline
{\ct RADIANT\_INTENSITY}                        & $\int I(\bx,\bs)\, d\Omega$                   & kW/m$^2$       & D,I,P,S      \\ \hline
{\ct RADIATIVE\_FLUX}                           & See Section~\ref{info:heat_flux}              & kW/m$^2$       & B,D          \\ \hline
{\ct RADIOMETER}                                & See Section~\ref{info:heat_flux}              & kW/m$^2$       & B,D          \\ \hline
{\ct soot volume fraction}                      & $\rho Y_s(Z)/\rho_s$                          & mol/mol        & D,I,P,S      \\ \hline
{\ct soot density}                              & $\rho Y_s(Z)$                                 & mg/m$^3$       & D,I,P,S      \\ \hline
{\ct [SPEC\_ID]}                                & $Y$                                           & kg/kg          & D,I,P,S      \\ \hline
{\ct [SPEC\_ID]\_VF}                            & $X$                                           & mol/mol        & D,I,P,S      \\ \hline
{\ct [SPEC\_ID]\_FLUX\_X}                       & $\rho u Y_\alpha$                             & kg/m$^2$/s     & D,I,P,S      \\ \hline
{\ct [SPEC\_ID]\_FLUX\_Y}                       & $\rho v Y_\alpha$                             & kg/m$^2$/s     & D,I,P,S      \\ \hline
{\ct [SPEC\_ID]\_FLUX\_Z}                       & $\rho w Y_\alpha$                             & kg/m$^2$/s     & D,I,P,S      \\ \hline
{\ct spot obscuration}                          & See Section~\ref{info:smoke_detector}         & \%/m           & D            \\ \hline
{\ct SPRINKLER LINK TEMPERATURE}                & See Section~\ref{info:sprinklers}             & $^\circ$C      & D            \\ \hline
{\ct TEMPERATURE}                               & $T$ (Section~\ref{info:THERMOCOUPLE})         & $^\circ$C      & D,I,P,S      \\ \hline
{\ct THERMOCOUPLE}                              & $T_{TC}$ (Section~\ref{info:THERMOCOUPLE})    & $^\circ$C      & D,I,P,S      \\ \hline
{\ct TIME}                                      & $t$ (Section~\ref{info:DEVC})                 & s              & D            \\ \hline
{\ct U-VELOCITY}                                & $u$                                           & m/s            & D,I,P,S      \\ \hline
{\ct V-VELOCITY}                                & $v$                                           & m/s            & D,I,P,S      \\ \hline
{\ct W-VELOCITY}                                & $w$                                           & m/s            & D,I,P,S      \\ \hline
{\ct UPPER TEMPERATURE}                         & See Section~\ref{info:layerheight}            & $^\circ$C      & D            \\ \hline
{\ct VELOCITY}                                  & $\sqrt{u^2+v^2+w^2}$                          & m/s            & D,I,P,S      \\ \hline
{\ct VISCOSITY}                                 & $\mu$                                         & kg/m/s         & D,I,P,S      \\ \hline
{\ct visibility}                                & $S=C/K$ (Section~\ref{info:visibility})       & m              & D,I,P,S      \\ \hline
{\ct VOLUME FLOW}                               & See Section~\ref{info:flows}                  & m$^3$/s        & D            \\ \hline
{\ct WALL\_TEMPERATURE}                         & $T_w$                                         & $^\circ$C      & B,D          \\ \hline
{\ct water vapor}                               & $X_{H_2O}(Z)$                                 & mol/mol        & D,I,P,S      \\ \hline
{\ct WATER VAPOR}                               & $X_{H_2O}$                                    & mol/mol        & D,I,P,S      \\ \hline
\end{tabular}
\end{center}
\end{table}




\chapter{Alphabetical List of Input Parameters}

This Appendix lists all of the input parameters for FDS in seperate tables grouped by Namelist,
these tables are in alphabetical order along with the parameters within them.
This is intended to be used as a quick reference and does not replace reading
the detailed description of the parameters in the main body of this guide.
See Table \ref{tbl:namelistgroups} for a cross-reference of relevant sections and the tables in this Appendix.
The reason for this statement is that many of the listed parameters are mutually exclusive -- specifying more than
one can cause the program to either fail or run in an unpredictable manner. Also, some of the parameters trigger the
code to work in a certain mode when specified. For example, specifying the thermal conductivity of
a solid surface triggers the code to assume the material to be thermally-thick, mandating that other
properties be specified as well. Simply prescribing as many properties as possible from a handbook is bad practice.
Only prescribe those parameters which are necessary to describe the desired scenario.


\clearpage

\section{\texorpdfstring{{\tt BNDF}}{BNDF} (Boundary File Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:BNDF}.}\label{tbl:BNDF}
\noindent
\begin{tabular*}{6.5in}{@{\extracolsep\fill}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct BNDF} (Boundary File Parameters)} \\ \hline \hline
{\ct FYI}          & Character   & Comment String (has no effect)    &           &     \\ \hline
{\ct PROP\_ID}     & Character   & Source of specific property info  &           &     \\ \hline
{\ct QUANTITY}     & Character   & Quantity to visualize             &           &     \\ \hline
\end{tabular*}
\end{table}


\vspace{\baselineskip}

\vfill


\section{\texorpdfstring{{\tt CLIP}}{CLIP} (MIN/MAX Clipping Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:CLIP}.}\label{tbl:CLIP}
\noindent
\begin{tabular*}{6.5in}{@{\extracolsep\fill}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct CLIP} (Specified Upper and Lower Limits)} \\ \hline \hline
{\ct FYI}                     & Character      & Comment String (has no effect)   &            &     \\ \hline
{\ct MAXIMUM\_DENSITY}        & Real           & Maximum Gas Density              & kg/m$^3$   &     \\ \hline
{\ct MAXIMUM\_MASS\_FRACTION} & Real Array     & Maximum Gas Mass Fraction        & kg/kg      &     \\ \hline
{\ct MAXIMUM\_TEMPERATURE}    & Real           & Maximum Gas Temperature          & $^\circ$C  &     \\ \hline
{\ct MINIMUM\_DENSITY}        & Real           & Minimum Gas Density              & kg/m$^3$   &     \\ \hline
{\ct MINIMUM\_MASS\_FRACTION} & Real Array     & Minimum Gas Mass Fraction        & kg/kg      &     \\ \hline
{\ct MINIMUM\_TEMPERATURE}    & Real           & Maximum Gas Temperature          & $^\circ$C  &     \\ \hline
\end{tabular*}
\end{table}

\vspace{\baselineskip}

\vfill


\section{\texorpdfstring{{\tt CTRL}}{CTRL} (Control Function Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:CTRL}.}\label{tbl:CTRL}
\noindent
\begin{tabular*}{6.5in}{@{\extracolsep\fill}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct CTRL} (Control Function Parameters)} \\ \hline \hline
%{\ct CYCLE\_TIME}    & Real         & Periodicity                                 & s  &                           \\ \hline
%{\ct CYCLES}         & Integer      & Number of times to cycle output             &    &                           \\ \hline
{\ct DELAY}          & Real         & Time delay                                  & s  &  0.                       \\ \hline
{\ct FUNCTION\_TYPE} & Character    & Type of control function                    &    &                           \\ \hline
{\ct ID}             & Character    & IDentifier                                  &    &                           \\ \hline
{\ct INITIAL\_STATE} & Logical      & Initial state of control function           &    & {\ct .FALSE.}             \\ \hline
{\ct INPUT\_ID}      & Char.~Array  & DEVC and/or CTRL input {\ct ID}s            &    &                           \\ \hline
{\ct LATCH}          & Logical      & Control function changes state only once    &    & {\ct .TRUE.}              \\ \hline
{\ct N}              & Integer      & Number of .TRUE. {\ct INPUT}s               &    &   1                       \\ \hline
{\ct ON\_BOUND}      & Character    & Active edge of a {\ct DEADBAND}             &    & {\ct LOWER}               \\ \hline
{\ct RAMP\_ID}       & Character    & {\ct ID} for a {\ct CUSTOM} ramp controller &    &                           \\ \hline
{\ct SETPOINT(2)}    & Real         & Lower and upper bound of a {\ct DEADBAND}   &    &                           \\ \hline
\end{tabular*}
\end{table}
%NAMELIST /CTRL/ ID,LATCH,INITIAL_STATE,FUNCTION_TYPE,SETPOINT,DELAY,CYCLE_TIME,INPUT_ID,RAMP_ID,CYCLES,N,ON_BOUND

\vspace{\baselineskip}

\vfill


\section{\texorpdfstring{{\tt DEVC}}{DEVC} (Device Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:DEVC}.}\label{tbl:DEVC}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct DEVC} (Device Parameters)} \\ \hline \hline
{\ct BYPASS\_FLOWRATE} & Real            & Aspiration smoke detector parameter                              & kg/s  & 0       \\ \hline
{\ct CTRL\_ID}         & Character       & Associated {\ct CTRL} line                                       &       &         \\ \hline
{\ct DELAY}            & Real            & Transport time for an aspiration detector                        & s     & 0       \\ \hline
{\ct DEVC\_ID}         & Character       & Associated {\ct DEVC} line for aspiration detector               &       &         \\ \hline
{\ct DEPTH}            & Real            & Depth into surface for internal wall temp                        & m     & 0       \\ \hline
{\ct FLOWRATE}         & Real            & Suction flowrate for an aspiration detector                      & kg/s  & 0       \\ \hline
{\ct FYI}              & Character       & Comment String (has no effect)                                   &       &         \\ \hline
{\ct IOR}              & Integer         & Index of Orientation ($\pm$1,$\pm$2,$\pm$3)                      &       &         \\ \hline
{\ct ID}               & Character       & Identifying label for output                                     &       &         \\ \hline
{\ct INITIAL\_STATE}   & Logical         & Initial state of device                                          &       & {\ct .FALSE.} \\ \hline
{\ct LATCH}            & Logical         & Device cannot change state multiple times                        &       & {\ct .TRUE.}  \\ \hline
{\ct ORIENTATION}      & Real Triplet    & Direction vector                                                 &       & 0,0,-1  \\ \hline
{\ct PROP\_ID}         & Character       & Associated {\ct PROP}erty line                                   &       &         \\ \hline
{\ct QUANTITY}         & Character       & Name of Quantity to output                                       &       &         \\ \hline
{\ct ROTATION}         & Real Triplet    & Rotation Angle                                                   & deg   & 0       \\ \hline
{\ct SETPOINT}         & Real            & Value at which device changes state                              &       &         \\ \hline
{\ct STATISTICS}       & Character       & See Section~\ref{info:statistics}                                &       &         \\ \hline
{\ct SURF\_ID}         & Character       & See Section~\ref{info:statistics}                                &       &         \\ \hline
{\ct TRIP\_DIRECTION}  & Integer         & Sign of derivative at first state change                         &       &  1      \\ \hline
{\ct XB(6)}            & Real Sextuplet  & Coordinates of non-point measurement                             & m     &         \\ \hline
{\ct XYZ}              & Real Triplet    & Physical coordinates                                             & m     &         \\ \hline
\end{tabular*}
\normalsize
\end{table}
%NAMELIST /DEVC/ DEPTH,FYI,IOR,ID,ORIENTATION,PROP_ID,QUANTITY,ROTATION,XB,XYZ,INITIAL_STATE,
%                LATCH,TRIP_DIRECTION,CTRL_ID,SETPOINT,DEVC_ID,FLOWRATE,DELAY,BYPASS_FLOWRATE

\vspace{\baselineskip}

\vfill


\section{\texorpdfstring{{\tt DUMP}}{DUMP} (Output Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:DUMP}.}\label{tbl:DUMP}
\noindent
\begin{tabular*}{6.5in}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct DUMP} (Output Parameters)} \\ \hline \hline
{\ct COLUMN\_DUMP\_LIMIT}       & Logical      & Limit text output to 255 columns  &           & {\ct .TRUE.}                      \\ \hline
{\ct DT\_BNDF}                  & Real         & Boundary dump interval            &  s        & $2\,\Delta t${\ct /NFRAMES} \\ \hline
%{\ct DEBUG}                     & Logical      & General purpose diagnostic flag   &           & {\ct .FALSE.}                      \\ \hline
{\ct DT\_CTRL}                  & Real         & Control status dump interval      &  s        & $\Delta t${\ct /NFRAMES}   \\ \hline
{\ct DT\_DEVC}                  & Real         & Device output dump interval       &  s        & $\Delta t${\ct /NFRAMES}   \\ \hline
{\ct DT\_HRR}                   & Real         & Heat release dump interval        &  s        & $\Delta t${\ct /NFRAMES}   \\ \hline
{\ct DT\_ISOF}                  & Real         & Iso-surface dump interval         &  s        & $\Delta t${\ct /NFRAMES}   \\ \hline
{\ct DT\_MASS}                  & Real         & Mass diagnostic dump interval     &  s        & $\Delta t${\ct /NFRAMES}   \\ \hline
{\ct DT\_PART}                  & Real         & Particle dump interval            &  s        & $\Delta t${\ct /NFRAMES}   \\ \hline
{\ct DT\_PL3D}                  & Real         & PLOT3D dump interval              &  s        & $\Delta t${\ct /5}         \\ \hline
{\ct DT\_PROF}                  & Real         & Profile dump interval             &  s        & $\Delta t${\ct /NFRAMES}   \\ \hline
{\ct DT\_RESTART}               & Real         & Restart core dump interval        &  s        & 1000000.                          \\ \hline
{\ct DT\_SLCF}                  & Real         & Slice dump interval               &  s        & $\Delta t${\ct /NFRAMES}    \\ \hline
{\ct FLUSH\_FILE\_BUFFERS}      & Logical      & Periodically empty file buffers   &           & {\ct .TRUE.}                      \\ \hline
{\ct MASS\_FILE}                & Logical      & Flag for species {\ct MASS} file  &           & {\ct .FALSE.}                     \\ \hline
{\ct MAXIMUM\_DROPLETS}         & Integer      & Max particles per mesh            &           & 500000                            \\ \hline
{\ct NFRAMES}                   & Integer      & Number of Frames of output data   &           & 1000                              \\ \hline
{\ct PLOT3D\_QUANTITY(5)}       & Char.~Quint  & Names of PLOT3D Quantities        &           & See Section~\ref{info:PL3D}       \\ \hline
%{\ct RENDER\_FILE}              & Character    & Name of render file from dxf2fds  &           &                                   \\ \hline
{\ct SMOKE3D}                   & Logical      & Flag for 3D Smoke Visualization   &           & {\ct .TRUE.}                      \\ \hline
%{\ct SMOKE3D\_COMPRESSION}      & Character    & Type of compression for S3D file  &           & {\ct 'RLE'}                      \\ \hline
%{\ct TIMING}                    & Logical      & General purpose timing flag       &           & {\ct .FALSE.}                      \\ \hline
{\ct WRITE\_XYZ}                & Logical      & Flag for writing PLOT3D .xyz file &           & {\ct .FALSE.}                     \\ \hline
\end{tabular*}
\normalsize
\end{table}

\noindent
$\Delta t$={\ct T\_END-T\_BEGIN}


\vspace{\baselineskip}

\vfill


\section{\texorpdfstring{{\tt HEAD}}{HEAD} (Header Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:HEAD}.}\label{tbl:HEAD}
\noindent
\begin{tabular*}{6.5in}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct HEAD} (Header Parameters)} \\ \hline \hline
{\ct CHID}      & Character   & Job Identification String      &           & {\ct 'output'} \\ \hline
{\ct FYI}       & Character   & Comment String (has no effect) &           &                            \\ \hline
{\ct TITLE}     & Character   & Title for job                  &           &                            \\ \hline
\end{tabular*}
\end{table}

\vspace{\baselineskip}

\vfill


\section{\texorpdfstring{{\tt HOLE}}{HOLE} (Obstruction Cutout Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:HOLE}.}\label{tbl:HOLE}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct HOLE} (Obstruction Cutout Parameters)} \\ \hline \hline
{\ct COLOR    }    & Character         & Color name of obstruction color                           &       &           \\ \hline
{\ct CTRL\_ID}     & Character         & {\ct ID} of {\ct ConTRoL} to control hole's existence     &       &           \\ \hline
{\ct DEVC\_ID}     & Character         & {\ct ID} of {\ct DEViCe} to control hole's existence      &       &           \\ \hline
{\ct FYI}          & Character         & Comment String (has no effect)                            &       &           \\ \hline
{\ct RGB(3)   }    & Integer Triplet   & Color indices (0 - 255) for resulting obstruction(s)      &       &           \\ \hline
{\ct TRANSPARENCY} & Real              & Transparency of obstruction                               &       &           \\ \hline
{\ct XB(6)    }    & Real Sextuplet    & Physical coordinates                                      & m     &           \\ \hline
\end{tabular*}
\end{table}

\vspace{\baselineskip}

\vfill


\section{\texorpdfstring{{\tt INIT}}{INIT} (Initial Conditions)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:INIT}.}\label{tbl:INIT}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct INIT} (Initial Conditions)} \\ \hline \hline
{\ct DENSITY}               & Real              & Initial value of density                          & kg/m$^3$      & Ambient       \\ \hline
{\ct MASS\_FRACTION(II)}    & Real Array        & Initial value of species {\ct II}                 & kg/kg         & Ambient       \\ \hline
{\ct TEMPERATURE}           & Real              & Initial value of temperature                      & $^\circ$C     & {\ct TMPA}    \\ \hline
{\ct XB(6)}                 & Real Sextuplet    & Coordinates                                       & m             &               \\ \hline
\end{tabular*}
\end{table}


\vspace{\baselineskip}

%\vfill

\section{\texorpdfstring{{\tt ISOF}}{ISOF} (Isosurface Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:ISOF}.}\label{tbl:ISOF}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct ISOF} (Isosurface Parameters)} \\ \hline \hline
{\ct FYI}                   & Character     & Comment String (has no effect)        &       &         \\ \hline
%{\ct COLOR\_QUANTITY}       & Character     & Secondary quantity to color surface   &       &         \\ \hline
{\ct QUANTITY}              & Character     & Quantity to visualize                 &       &         \\ \hline
%{\ct REDUCE\_TRIANGLES}     & Integer       & Smokeview parameter                   &       & 1       \\ \hline
{\ct VALUE(I)}              & Real Array    & Contour value(s)                      &       &         \\ \hline
\end{tabular*}
\end{table}


\vspace{\baselineskip}

\vfill

\section{\texorpdfstring{{\tt MATL}}{MATL} (Material Properties)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:MATL}.}\label{tbl:MATL}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct MATL} (Material Properties)} \\ \hline \hline
{\ct A}                       & Real        & Pre-exponential factor         &    1/s           & 1E13   \\ \hline
{\ct ABSORPTION\_COEFFICIENT} & Real        & Absorption Coefficient         &    1/m           & 50000. \\ \hline
{\ct BOILING\_TEMPERATURE}    & Real        & Boiling temperature            & $^\circ$C        & 5000.  \\ \hline
{\ct CONDUCTIVITY}            & Real        & Thermal conductivity           & W/m/K            & 0.1    \\ \hline
{\ct CONDUCTIVITY\_RAMP}      & Character   & Ramp ID for conductivity       &                  &        \\ \hline
{\ct DENSITY}                 & Real        & Solid mass per unit volume     & kg/m$^3$         & 500.   \\ \hline
{\ct E}                       & Real        & Activation energy              & kJ/kmol          &        \\ \hline
{\ct EMISSIVITY    }          & Real        & Emissivity                     &                  & 0.9    \\ \hline
{\ct FYI}                     & Character   & Comment String (has no effect) &                  &        \\ \hline
{\ct HEAT\_OF\_COMBUSTION}    & Real        & Heat of combustion             & kJ/kg            &        \\ \hline
{\ct HEAT\_OF\_REACTION}      & Real        & Heat of reaction               & kJ/kg            & 0.     \\ \hline
{\ct ID     }                 & Character   & IDentifier                     &                  &        \\ \hline
{\ct THRESHOLD\_TEMPERATURE}  & Real        & Threshold temperature          & $^\circ$C        & -273.15 \\ \hline
{\ct N\_REACTIONS}            & Character   & Number of Reactions            &                  & 0      \\ \hline
{\ct N\_S}                    & Real        & Exponent of mass fraction      &                  & 1.     \\ \hline
{\ct N\_T}                    & Real        & Exponent of temperature        &                  & 0.     \\ \hline
{\ct NU\_FUEL}                & Real        & Fuel Yield                     & kg/kg            & 0.     \\ \hline
{\ct NU\_RESIDUE}             & Real        & Residue Yield                  & kg/kg            & 0.     \\ \hline
{\ct NU\_WATER  }             & Real        & Steam Yield                    & kg/kg            & 0.     \\ \hline
{\ct REFERENCE\_RATE}         & Real        & Reaction rate at ref.~temp.    & s$^{-1}$         & 0.10   \\ \hline
{\ct REFERENCE\_TEMPERATURE}  & Real        & Reference temperature          & $^\circ$C        &        \\ \hline
{\ct RESIDUE}                 & Character   & {\ct ID} of residue {\ct MATL} &                  &        \\ \hline
{\ct SPECIFIC\_HEAT}          & Real        & Specific heat                  & kJ/kg/K          & 1.0    \\ \hline
{\ct SPECIFIC\_HEAT\_RAMP}    & Character   & Ramp ID for specific heat      &                  &        \\ \hline
\end{tabular*}
\end{table}

\vspace{\baselineskip}

\vfill

\clearpage
\section{\texorpdfstring{{\tt MESH}}{MESH} (Mesh Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:MESH}.}\label{tbl:MESH}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct MESH} (Mesh Parameters)} \\ \hline \hline
{\ct COLOR}       & Character                   & Mesh Line Color                             &    & {\ct 'BLACK'}    \\ \hline
{\ct CYLINDRICAL} & Logical                     & 2-D Axi-symmetric calculation               &    & {\ct .FALSE.}    \\ \hline
{\ct ID}          & Character                   & MESH IDentifier                             &    &                  \\ \hline
{\ct IJK}         & Integer Triplet             & No. cells in $x$, $y$, and $z$ directions   &    & 10               \\ \hline
{\ct FYI}         & Character                   & Comment String (has no effect)              &    &                  \\ \hline
{\ct RGB}         & Integer Triplet             & Color indices (0-255)                       &    & 0,0,0            \\ \hline
{\ct SYNCHRONIZE} & Logical                     & Sync. time steps of multiple meshes         &    & {\ct .TRUE.}     \\ \hline
{\ct XB}          & Real Sextuplet              & Min/Max Coordinates of the MESH             & m  & 0,1,0,1,0,1      \\ \hline
%{\ct POISSON\_BC} & Integer sextuplet           & Pressure boundary conditions      &    &    \\ \hline
%{\ct IBAR2}       & Integer                     & No. cells in $z$ direction        &    & 10  \\ \hline
%{\ct JBAR2}       & Integer                     & No. cells in $z$ direction        &    & 10  \\ \hline
%{\ct KBAR2}       & Integer                     & No. cells in $z$ direction        &    & 10  \\ \hline
\end{tabular*}
\end{table}


\vspace{\baselineskip}

\vfill


\section{\texorpdfstring{{\tt MISC}}{MISC} (Miscellaneous Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:MISC}.}\label{tbl:MISC}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct MISC} (Miscellaneous Parameters)} \\ \hline \hline
{\ct \footnotesize ASSUMED\_GAS\_TEMPERATURE} & Real & See Section~\ref{solid_phase_verification}    &               &                   \\ \hline
{\ct BACKGROUND\_SPECIES}       & Character     & See Section~\ref{info:SPEC}                   &               & {\ct 'AIR'}       \\ \hline
{\ct BAROCLINIC}                & Logical       & Baroclinic torque correction                  &               & {\ct .FALSE.}     \\ \hline
{\ct BNDF\_DEFAULT}             & Logical       & See Section~\ref{info:BNDF}                   &               & {\ct .TRUE.}      \\ \hline
{\ct CFL\_MAX}                  & Real          & See Section~\ref{info:CFL}                    &               & 1.0               \\ \hline
{\ct CFL\_MIN}                  & Real          & See Section~\ref{info:CFL}                    &               & 0.8               \\ \hline
%{\ct CHECK\_POISSON}            & Logical       & Poisson solver diagnostic print out           &               & {\ct .FALSE.}     \\ \hline
%{\ct C\_FORCED}                 & Real          & Convective heat transfer coefficient          &               & 0.037             \\ \hline
%{\ct C\_HORIZONTAL}             & Real          & Convective heat transfer coefficient          &               & 1.52             \\ \hline
%{\ct C\_VERTICAL}               & Real          & Convective heat transfer coefficient          &               & 1.31             \\ \hline
{\ct CSMAG}                     & Real          & Smagorinsky constant                          &               & 0.20              \\ \hline
{\ct CONDUCTIVITY}              & Real          & See Section~\ref{info:SPEC}                   &  W/m/K        &                   \\ \hline
{\ct CO\_PRODUCTION}            & Logical       & See Section~\ref{info:combustion}             &               & {\ct .FALSE.}     \\ \hline
{\ct DNS}                       & Logical       & Direct Numerical Simulation                   &               & {\ct .FALSE.}     \\ \hline
%{\ct EVAC\_PRESSURE\_ITERATIONS}& Character     & Pressure solves for Evac Model                &               &                   \\ \hline
%{\ct EVAC\_SURF\_DEFAULT}       & Character     & Default SURFace type for Evac Model           &               & {\ct 'INERT'}     \\ \hline
%{\ct EVAC\_TIME\_ITERATIONS}    & Character     & Time iterations for Evac Model                &               &                   \\ \hline
{\ct FYI}                       & Character     & Comment String (has no effect)                &               &                   \\ \hline
%{\ct GAMMA}                     & Real          & Ratio of specific heats                       &               & 1.4               \\ \hline
{\ct GVEC}                      & Real triplet  & Gravity vector                                & m/s$^2$       & 0,0,-9.81         \\ \hline
{\ct H\_FIXED}                  & Real          & See Section~\ref{solid_phase_verification}    &               &                   \\ \hline
{\ct HUMIDITY}                  & Real          & Relative Humidity                             & \%            & 40.               \\ \hline
{\ct ISOTHERMAL}                & Logical       & Isothermal calculation                        &               & {\ct .FALSE.}     \\ \hline
{\ct LAPSE\_RATE}               & Real          & See Section~\ref{info:stratification}         &  $^\circ$C/m  & 0                 \\ \hline
{\ct LES}                       & Logical       & Large Eddy Simulation                         &               & {\ct .TRUE.}      \\ \hline
{\ct MW}                        & Real          & Molecular Weight (Section~\ref{info:SPEC})    &  g/mol        &                   \\ \hline
{\ct NOISE}                     & Logical       & Toggle initial noise on and off               &               & {\ct .TRUE.}      \\ \hline
%{\ct NSTRATA}                   & Logical       & No. bins for droplet distribution             &               & 7                 \\ \hline
{\ct PR}                        & Real          & Prandtl number (LES only)                     &               & 0.5               \\ \hline
{\ct P\_INF}                    & Real          & Ambient pressure                              & Pa            & 101325            \\ \hline
{\ct POROUS\_FLOOR}             & Logical       & See Section~\ref{info:sprinklers}             &               & {\ct .TRUE.}      \\ \hline
%{\ct PRESSURE\_CORRECTION}      & Logical       & Experimental pressure solver                  &               & {\ct .FALSE.}     \\ \hline
{\ct RADIATION}                 & Logical       & Radiation calculation flag                    &               & {\ct .TRUE.}      \\ \hline
{\ct RAMP\_GX}                  & Character     & Time function, $x$ comp. of gravity           &               &                   \\ \hline
{\ct RAMP\_GY}                  & Character     & Time function, $y$ comp. of gravity           &               &                   \\ \hline
{\ct RAMP\_GZ}                  & Character     & Time function, $z$ comp. of gravity           &               &                   \\ \hline
%{\ct RELAXATION\_FACTOR}        & Real          & Pressure solver parameter                     &               & 1.0               \\ \hline
{\ct RESTART}                   & Logical       & Restart previous calculation                  &               & {\ct .FALSE.}     \\ \hline
{\ct RESTART\_CHID}             & Character     & Restart file CHID                             &               & {\ct CHID}        \\ \hline
{\ct SC}                        & Real          & Schmidt number (LES only)                     &               & 0.5               \\ \hline
{\ct SOLID\_PHASE\_ONLY}        & Logical       & See Section~\ref{solid_phase_verification}    &               & {\ct .FALSE.}     \\ \hline
{\ct STRATIFICATION}            & Logical       & See Section~\ref{info:stratification}         &               & {\ct .TRUE.}      \\ \hline
{\ct SUPPRESSION}               & Logical       & See Section~\ref{info:combustion}             &               & {\ct .TRUE.}      \\ \hline
{\ct SURF\_DEFAULT}             & Character     & Default SURFace type                          &               & {\ct 'INERT'}     \\ \hline
{\ct TEXTURE\_ORIGIN(3)}        & Char.~Triplet & See Section~\ref{info:texture_map}            & m             & (0.,0.,0.)        \\ \hline
{\ct THICKEN\_OBSTRUCTIONS}     & Logical       & See Section~\ref{info:OBST}                   &               & {\ct .FALSE.}     \\ \hline
{\ct TMPA}                      & Real          & Ambient Temperature                           & $^\circ$C     & 20.               \\ \hline
{\ct U0,V0,W0}                  & Reals         & Prevailing velocity field                     & m/s           & 0.                \\ \hline
{\ct VISCOSITY}                 & Real          & See Section~\ref{info:SPEC}                   &  kg/m/s       &                   \\ \hline
{\ct VN\_MAX}                   & Real          & See Section~\ref{info:CFL}                    &               & 1.0               \\ \hline
{\ct VN\_MIN}                   & Real          & See Section~\ref{info:CFL}                    &               & 0.8               \\ \hline
\end{tabular*}
\end{table}


\vspace{\baselineskip}

\vfill


\section{\texorpdfstring{{\tt OBST}}{OBST} (Obstruction Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:OBST}.}\label{tbl:OBST}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct OBST} (Obstruction Parameters)} \\ \hline \hline
{\ct ALLOW\_VENT}         & Logical             & Allow vents on obstruction            &    & {\ct .TRUE.}  \\ \hline
{\ct BNDF\_FACE(-3:3)}    & Logical Array       & See Section~\ref{info:BNDF}           &    & {\ct .TRUE.}  \\ \hline
{\ct BNDF\_OBST}          & Logical             & See Section~\ref{info:BNDF}           &    & {\ct .TRUE.}  \\ \hline
{\ct COLOR    }           & Character           & Color name of obstruction color       &    &               \\ \hline
{\ct CTRL\_ID }           & Character           & {\ct ID} of Controlling {\ct ConTRoL} &    &               \\ \hline
{\ct DEVC\_ID }           & Character           & {\ct ID} of Controlling {\ct DEViCe}  &    &               \\ \hline
%{\ct EVACUATION}          & Logical             & Only use for Evac case                &    & {\ct .FALSE.} \\ \hline
{\ct FYI}                 & Character           & Comment String (has no effect)        &    &               \\ \hline
%{\ct MESH\_ID}            & Character           & Only include in given mesh            &    &               \\ \hline
{\ct OUTLINE}             & Logical             & Draw as Outline                       &    & {\ct .FALSE.} \\ \hline
{\ct PERMIT\_HOLE}        & Logical             & Allow a Hole                          &    & {\ct .TRUE.}  \\ \hline
{\ct REMOVABLE}           & Logical             & Allow obstruction to be removed       &    & {\ct .TRUE.}  \\ \hline
{\ct RGB(3)}              & Integer Triplet     & Color indices (0 - 255)               &    &               \\ \hline
{\ct SAWTOOTH}            & Logical             & See Section~\ref{info:SAWTOOTH}       &    & {\ct .TRUE.}  \\ \hline
{\ct SURF\_ID}            & Character           & Associated Surface                    &    &               \\ \hline
{\ct SURF\_IDS(3)}        & Character Triplet   & Associated Surfaces (top,side,bot.)   &    &               \\ \hline
{\ct SURF\_ID6(6)}        & Character Sextuplet & Associated Surfaces (like {\ct XB})   &    &               \\ \hline
{\ct THICKEN}             & Logical             & Force at least one cell thick         &    & {\ct .FALSE.} \\ \hline
{\ct TEXTURE\_ORIGIN(3)}  & Real Triplet        & See Section~\ref{info:texture_map}    & m  & (0.,0.,0.)    \\ \hline
{\ct TRANSPARENCY}        & Real                & Transparency indicator                &    &  1            \\ \hline
{\ct XB(6) }              & Real Sextuplet      & Min/Max Physical coordinates          & m  &               \\ \hline
\end{tabular*}
\end{table}


\vspace{\baselineskip}

\vfill


\section{\texorpdfstring{{\tt PART}}{PART} (Lagrangian Particles/Droplets)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:PART}.}\label{tbl:PART}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct PART} (Lagrangian Particles/Droplets)} \\ \hline \hline
{\ct AGE}                       & Real            & Droplet lifetime                  & s         & 100000        \\ \hline
{\ct COLOR}                     & Character       & Default color of droplets         &           &               \\ \hline
{\ct DENSITY}                   & Real            & Droplet density                   & kg/m$^3$  & 1000          \\ \hline
{\ct DIAMETER}                  & Real            & Median Volumetric Diameter        & $\mu$m    & 100           \\ \hline
{\ct DROPLETS\_PER\_SECOND}     & Integer         & Drops per second per head         &           & 1000          \\ \hline
{\ct DT\_INSERT}                & Real            & Time between particle insertions  & s         & 0.05          \\ \hline
{\ct FYI}                       & Character       & Comment String (has no effect)    &           &               \\ \hline
{\ct FUEL}                      & Logical         & Liquid Fuel                       &           & {\ct .FALSE.} \\ \hline
%{\ct GAMMA}                     & Real            & Specific heat ratio for vapor     &           & 1.4           \\ \hline
{\ct GAMMA\_D}                  & Real            & Parameter for size distribution   &           & 2.4           \\ \hline
{\ct HEAT\_OF\_COMBUSTION}      & Real            & Heat of Combustion                & kJ/kg     &               \\ \hline
{\ct HEAT\_OF\_VAPORIZATION}    & Real            & Latent Heat of Vaporization       & kJ/kg     & 2259          \\ \hline
{\ct HORIZONTAL\_VELOCITY}      & Real            & See Section~\ref{info:suppression}& m/s       &  0.2          \\ \hline
{\ct ID}                        & Character       & Identifier                        &           &               \\ \hline
{\ct INITIAL\_TEMPERATURE}      & Real            & Initial Temperature               & $^\circ$C & {\ct TMPA}    \\ \hline
{\ct MASSLESS}                  & Logical         & Massless tracers                  &           & {\ct .FALSE.} \\ \hline
{\ct MASS\_PER\_VOLUME}         & Real            & Droplet mass per unit volume      & kg/m$^3$  & 1             \\ \hline
{\ct MAXIMUM\_DIAMETER}         & Real            & Above which droplet breaks up     & $\mu$m    & $\infty$      \\ \hline
{\ct MINIMUM\_DIAMETER}         & Real            & Below which droplet evaporates    & $\mu$m    & 20            \\ \hline
{\ct MELTING\_TEMPERATURE}      & Real            & Melting Temperature               & $^\circ$C & 0             \\ \hline
{\ct MONODISPERSE}              & Logical         & Uniform droplet size              &           & {\ct .FALSE.} \\ \hline
{\ct NUMBER\_INITIAL\_DROPLETS} & Integer         & Number of droplets at start       &           & 0             \\ \hline
{\ct QUANTITIES(10)}            & Character       & Quantities for coloring           &           &               \\ \hline
{\ct RGB(3)}                    & Integers        & Color indices (0-255)             &           &               \\ \hline
{\ct SAMPLING\_FACTOR}          & Integer         & Filter for output file            &           & 1             \\ \hline
%{\ct SPEC\_ID}                  & Character       & Name of gas species               &           &               \\ \hline
{\ct SPECIFIC\_HEAT}            & Real            & Droplet specific heat             & kJ/kg/K   & 4.184         \\ \hline
{\ct STATIC}                    & Logical         & Stationary Particles              &           & {\ct .FALSE.} \\ \hline
%{\ct TREE}                      & Logical         & Particles are leaves              &           & {\ct .FALSE.} \\ \hline
{\ct VAPORIZATION\_TEMPERATURE} & Real            & Liquid Droplet Boiling Temp       & $^\circ$C & 100           \\ \hline
{\ct VERTICAL\_VELOCITY}        & Real            & See Section~\ref{info:suppression}& m/s       &  0.5          \\ \hline
{\ct XB(6)}                     & Real            & Initial particle placement region & m         &               \\ \hline
{\ct WATER}                     & Logical         & Water Droplet                     &           & {\ct .FALSE.} \\ \hline
\end{tabular*}
\end{table}


\vspace{\baselineskip}

\vfill

\section{\texorpdfstring{{\tt PROF}}{PROF} (Wall Profile Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:PROF}.}\label{tbl:PROF}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct PROF} (Wall Profile Parameters)} \\ \hline \hline
{\ct IOR}      & Real             & Orientation of wall surface      &            &     \\ \hline
{\ct ID}       & Character        & Identifier                       &            &     \\ \hline
{\ct FYI}      & Character        & Comment String (has no effect)   &            &     \\ \hline
{\ct QUANTITY} & Character        & Name of output quantity          &            &     \\ \hline
{\ct XYZ}      & Real Triplet     & Coordinates of wall surface      & m          &     \\ \hline
\end{tabular*}
\end{table}

\vspace{\baselineskip}

\vfill

\section{\texorpdfstring{{\tt PROP}}{PROP} (Device Properties)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:PROP}.}\label{tbl:PROP}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct PROP} (Device Properties)} \\ \hline \hline
{\ct ACTIVATION\_TEMPERATURE}           & Real          & Threshold link temperature       & $^\circ$C             & 74        \\ \hline
{\ct ACTIVATION\_OBSCURATION}           & Real          & Threshold value of obscuration   & \%/m                  & 3.28      \\ \hline
{\ct ALPHA\_C}                          & Real          & Smoke detector parameter         &                       & 1.8       \\ \hline
{\ct ALPHA\_E}                          & Real          & Smoke detector parameter         &                       & 0.0       \\ \hline
{\ct BETA\_C}                           & Real          & Smoke detector parameter         &                       & 1.0       \\ \hline
{\ct BETA\_E}                           & Real          & Smoke detector parameter         &                       & 1.0       \\ \hline
{\ct BEAD\_DIAMETER}                    & Real          & Diameter of TC bead              & m                     & 0.001     \\ \hline
{\ct BEAD\_EMISSIVITY}                  & Real          & Emissivity of TC bead            &                       & 0.85      \\ \hline
{\ct C\_FACTOR}                         & Real          & Sprinkler activation parameter   &                       & 0.        \\ \hline
{\ct CHARACTERISTIC\_VELOCITY}          & Real          & See Section~\ref{info:wind}      & m/s                   & 1.0       \\ \hline
{\ct DROPLET\_VELOCITY}                 & Real          & Initial droplet velocity         & m/s                   & 5.0       \\ \hline
{\ct FLOW\_RATE}                        & Real          & Sprinkler or nozzle flow rate    & L/min                 &           \\ \hline
{\ct FLOW\_RAMP}                        & Character     & Time {\ct RAMP} for flow         &                       &           \\ \hline
{\ct FLOW\_TAU}                         & Real          & Time constant for flow           &                       & 0.0       \\ \hline
{\ct GAUGE\_TEMPERATURE}                & Real          & See Section~\ref{info:heat_flux} & $^\circ$C             & {\ct TMPA}\\ \hline
{\ct ID}                                & Character     & IDentifier                       &                       &           \\ \hline
{\ct INITIAL\_TEMPERATURE}              & Real          & Initial link temperature         & $^\circ$C             & {\ct TMPA}\\ \hline
{\ct K\_FACTOR}                         & Real          & Flow parameter                   & L/min/atm$^{1/2}$     & 1.        \\ \hline
{\ct LENGTH}                            & Real          & Smoke detector parameter         &                       & 1.8       \\ \hline
{\ct OFFSET}                            & Real          & Droplet offset distance          & m                     & 0.05      \\ \hline
{\ct OPERATING\_PRESSURE}               & Real          & Sprinkler pipe pressure          & atm                   & 1.        \\ \hline
{\ct PART\_ID}                          & Character     & Name of associated PART line     &                       &           \\ \hline
{\ct QUANTITY}                          & Character     & Name of associated output        &                       &           \\ \hline
{\ct RTI}                               & Real          & Response Time Index              & $\sqrt{\hbox{m~s}}$   & 100.      \\ \hline
{\ct SMOKEVIEW\_ID}                     & Character     & Name of drawn object             &                       &           \\ \hline
{\ct SPRAY\_ANGLE(2)}                   & Real          & Cone angles for water spray      & deg                   & 60.,75.   \\ \hline
{\ct SPRAY\_PATTERN\_TABLE}             & Character     & {\ct TABL} for spray pattern     &                       &           \\ \hline
\end{tabular*}
\end{table}


\vspace{\baselineskip}

\vfill

\section{\texorpdfstring{{\tt RADI}}{RADI} (Radiation Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:RADI}.}\label{tbl:RADI}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct RADI} (Radiation Parameters)} \\ \hline \hline
{\ct ANGLE\_INCREMENT}          & Integer  & Number of angles skipped per update &                   & 5             \\ \hline
{\ct CH4\_BANDS          }      & Logical  & Include extra fuel bands            &                   & {\ct .FALSE.} \\ \hline
{\ct KAPPA0                   } & Real     & Constant absorption coefficient     & 1/m               & 0             \\ \hline
{\ct NMIEANG                  } & Integer  & Number of polar angles              &                   & 15            \\ \hline
{\ct NUMBER\_RADIATION\_ANGLES} & Integer  & Number of solid angles              &                   & 104           \\ \hline
{\ct PATH\_LENGTH }             & Real     & Path length for radiation calc.     &   m               &               \\ \hline
{\ct RADIATIVE\_FRACTION}       & Real     & Radiative Loss Fraction             &                   & 0.35          \\ \hline
{\ct RADTMP                   } & Real     & Assumed radiative source temp.      & $^\circ$C         & 900           \\ \hline
{\ct TIME\_STEP\_INCREMENT}     & Integer  & Number time steps skipped           &                   & 3             \\ \hline
{\ct WIDE\_BAND\_MODEL    }     & Logical  & Non-gray gas assumption             &                   & {\ct .FALSE.} \\ \hline
\end{tabular*}
\end{table}

\vspace{\baselineskip}

\vfill

\section{\texorpdfstring{{\tt RAMP}}{RAMP} (Ramp Function Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:RAMP}.}\label{tbl:RAMP}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct RAMP} (Ramp Function Parameters)} \\ \hline \hline
%{\ct CTRL\_ID}                      & Character     & See Section~\ref{info:CTRL}       &                       &     \\ \hline
%{\ct DEVC\_ID}                      & Character     & See Section~\ref{info:CTRL}       &                       &     \\ \hline
{\ct FYI}                           & Character     & Comment String (has no effect)    &                       &     \\ \hline
{\ct F}                             & Real          & Function value                    &                       &     \\ \hline
{\ct FYI}                           & Character     & Comment String (has no effect)    &                       &     \\ \hline
%{\ct NUMBER\_INTERPOLATION\_POINTS} & Integer       & Points in interpolation function  &                       &  5000   \\ \hline
{\ct ID}                            & Character     & Identifier                        &                       &     \\ \hline
{\ct T}                             & Real          & Time (or Temperature)             & s (or $^\circ$C)      &     \\ \hline
\end{tabular*}
\end{table}


\vspace{\baselineskip}

\vfill

\section{\texorpdfstring{{\tt REAC}}{REAC} (Reaction Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:REAC}.}\label{tbl:REAC}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct REAC} (Reaction Parameters)} \\ \hline \hline
{\ct BOF}                                 & Real        & Pre-exponential Factor (Finite Rate)      &   cm$^3$/mol/s    &     \\ \hline
{\ct C}                                   & Real        & Carbon atoms in fuel                      &                   & 3    \\ \hline
{\ct CO\_YIELD}                           & Real        & Fraction of CO from the fuel              & kg/kg             & 0        \\ \hline
{\ct \tiny CRITICAL\_FLAME\_TEMPERATURE}  & Real        & Suppression criterion                     &   $^\circ$C       & 1427    \\ \hline
{\ct E}                                   & Real        & Activation Energy (Finite Rate)           &   kJ/kmol         &     \\ \hline
{\ct EPUMO2}                              & Real        & Energy per Unit Mass Oxygen               &   kJ/kg           & 13100    \\ \hline
{\ct FUEL}                                & Character   & Name of Fuel (Finite Rate)                &                   &     \\ \hline
{\ct FYI}                                 & Character   & Comment String (has no effect)            &                   &     \\ \hline
{\ct H}                                   & Real        & Hydrogen atoms in fuel                    &                   & 8    \\ \hline
{\ct H2\_YIELD}                           & Real        & Fraction of H$_2$ from the fuel           & kg/kg             & 0        \\ \hline
{\ct HEAT\_OF\_COMBUSTION}                & Real        & Energy per Unit Mass Fuel                 & kJ/kg             &         \\ \hline
{\ct HRRPUA\_SHEET}                       & Real        & Upper limit on flame HRR                  & kW/m$^2$          & 200.    \\ \hline
{\ct ID}                                  & Character   & Identifier                                &                   &     \\ \hline
{\ct IDEAL}                               & Logical     & Adjust for minor product yields           &                   & {\ct .FALSE.}    \\ \hline
{\ct \tiny MASS\_EXTINCTION\_COEFFICIENT} & Real        & Visibility parameter                      &  m$^2$/kg         & 8700.    \\ \hline
{\ct MAXIMUM\_VISIBILITY}                 & Real        & Visibility parameter                      &  m                &     30   \\ \hline
{\ct MW\_OTHER}                           & Real        & Molecular Weight of {\ct OTHER}           &  g/mol            & 28      \\ \hline
{\ct N}                                   & Real        & Nitrogen atoms in the fuel                &                   & 0    \\ \hline
{\ct N\_S(N)}                             & Real        & Arrhenius Exponents (Finite Rate)         &                   &     \\ \hline
{\ct NU(N)}                               & Real        & Reaction stoichiometry (Finite Rate)      &                   &     \\ \hline
{\ct O}                                   & Real        & Oxygen atoms in the fuel                  &                   & 0    \\ \hline
{\ct OTHER}                               & Real        & Other atoms in the fuel                   &                   & 0    \\ \hline
{\ct OXIDIZER}                            & Character   & Name of Oxidizer (Finite Rate)            &                   &         \\ \hline
{\ct SOOT\_YIELD}                         & Real        & Fraction of soot from the fuel            & kg/kg             & 0.01    \\ \hline
{\ct SOOT\_H\_FRACTION}                   & Real        & Atom fraction of hydrogen in soot         &                   & 0.1    \\ \hline
{\ct VISIBILITY\_FACTOR}                  & Real        & Visibility parameter                      &                   &     3   \\ \hline
{\ct X\_O2\_LL}                           & Real        & Lower Oxygen Limit                        &  mol/mol          & 0.15    \\ \hline
{\ct Y\_F\_INLET}                         & Real        & Mass Frac. of Fuel in Burner              &  kg/kg            & 1.0     \\ \hline
{\ct Y\_F\_LFL}                           & Real        & Lower Fuel limit (mass fraction)          &  kg/kg            & 0.0     \\ \hline
{\ct Y\_O2\_INFTY}                        & Real        & Ambient Oxygen Mass Frac.                 &  kg/kg            & 0.23    \\ \hline
\end{tabular*}
\end{table}
%NAMELIST /REAC/ E,BOF,HEAT_OF_COMBUSTION,FYI,FUEL,OXIDIZER,EPUMO2,ID, N_S,Y_O2_INFTY,Y_F_INLET,HRRPUA_SHEET,
%                H2_YIELD,SOOT_YIELD,CO_YIELD,Y_F_LFL,X_O2_LL,CRITICAL_FLAME_TEMPERATURE,
%                NU,SOOT_H_FRACTION,C,H,N,O,OTHER,MW_OTHER,IDEAL,MASS_EXTINCTION_COEFFICIENT,VISIBILITY_FACTOR,
%                MAXIMUM_VISIBILITY

\vspace{\baselineskip}

\vfill

\section{\texorpdfstring{{\tt SLCF}}{SLCF} (Slice File Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:SLCF}.}\label{tbl:SLCF}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct SLCF} (Slice File Parameters)} \\ \hline \hline
{\ct FYI}               & Character         & Comment String (has no effect)         &           &     \\ \hline
%{\ct MAXIMUM\_VALUE}    & Real              & See Section~\ref{info:SLCF}            &           &     \\ \hline
%{\ct MINIMUM\_VALUE}    & Real              & See Section~\ref{info:SLCF}            &           &     \\ \hline
{\ct MESH\_NUMBER}      & Integer           & Save only slices in this mesh          &           &     \\ \hline
{\ct PBX     }          & Real              & $x$-plane to save slice file           &           &     \\ \hline
{\ct PBY     }          & Real              & $y$-plane to save slice file           &           &     \\ \hline
{\ct PBZ     }          & Real              & $z$-plane to save slice file           &           &     \\ \hline
{\ct QUANTITY}          & Character         & Name of Quantity to display            &           &     \\ \hline
%{\ct RLE    }           & Logical           & Run Length Encoding                    &           & {\ct .FALSE.}    \\ \hline
%{\ct TWO\_BYTE    }     & Logical           & Save as 2 byte real                    &           & {\ct .FALSE.}    \\ \hline
{\ct VECTOR    }        & Logical           & Include flow vectors                   &           & {\ct .FALSE.}    \\ \hline
{\ct XB(6)}             & Real Sextuplet    & Min/Max coordinates of region to save  & m         &     \\ \hline
\end{tabular*}
\end{table}


\vspace{\baselineskip}

\vfill

\section{\texorpdfstring{{\tt SPEC}}{SPEC} (Species Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:SPEC}.}\label{tbl:SPEC}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct SPEC} (Species Parameters)} \\ \hline \hline
{\ct ABSORBING}         & Logical     & Gas species abosrbs radiation   &                   & {\ct .FALSE.} \\ \hline
{\ct CONDUCTIVITY}      & Real        & Conductivity $k$                & W/m/K             &     \\ \hline
{\ct DIFFUSIVITY}       & Real        & Diffusivity   $D$               & m$^2$/s           &     \\ \hline
{\ct EPSILONKLJ}        & Real        & Leonard-Jones Parameter         &                   & 0   \\ \hline
{\ct FYI}               & Character   & Comment String (has no effect)  &                   &     \\ \hline
{\ct ID }               & Character   & Name of species                 &                   &     \\ \hline
{\ct MASS\_FRACTION\_0} & Real        & Initial mass fraction           &                   & 0   \\ \hline
{\ct MW}                & Real        & Molecular Weight                & g/mol             & 29.  \\ \hline
{\ct SIGMALJ}           & Real        & Leonard-Jones Parameter         &                   & 0   \\ \hline
{\ct VISCOSITY}         & Real        & Dynamic Viscosity $mu$          & kg/m/s            &     \\ \hline
\end{tabular*}
\end{table}
%NAMELIST /SPEC/ MASS_FRACTION_0,MW,FYI,ID,SIGMALJ, EPSILONKLJ,CONDUCTIVITY, VISCOSITY,DIFFUSIVITY, ABSORBING

\vspace{\baselineskip}

\vfill


\section{\texorpdfstring{{\tt SURF}}{SURF} (Surface Properties)}

\begin{longtable}{|l|l|l|l|l|}
\caption[  ]{For more information see Section~\ref{info:SURF}.}
\label{tbl:SURF} \\
%\noindent
%\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct SURF} (Surface Properties)} \\ \hline \hline
{\ct ADIABATIC}                       & Logical         & Adiabatic thermal BC              &                     & {\ct .FALSE.}           \\ \hline
{\ct BACKING}                         & Character       & Back boundary condition           &                     & {\ct 'VOID'}            \\ \hline
{\ct BURN\_AWAY}                      & Logical         & Object can vanish                 &                     & {\ct .FALSE.}           \\ \hline
{\ct CELL\_SIZE\_FACTOR}              & Real            & Scale solid phase noding          &                     & 1.0                     \\ \hline
{\ct COLOR    }                       & Character       & Surface Color                     &                     &                         \\ \hline
{\ct CONVECTIVE\_HEAT\_FLUX}          & Real            & Heat flux at surface              & kW/m$^2$            & 0.                      \\ \hline
{\ct DUCT\_PATH}                      & Integer Pair    & Pressure Zones for fans           &                     & 0,0                     \\ \hline
{\ct E\_COEFFICIENT}                  & Real            & Extinguishing coefficient         & 1/s                 & 0.                      \\ \hline
{\ct EMISSIVITY}                      & Real            & Emissivity                        &                     & 0.9                     \\ \hline
{\ct EXTERNAL\_FLUX}                  & Real            & Heat flux to surface              & kW/m$^2$            & 0.                      \\ \hline
{\ct FYI}                             & Character       & Comment String (has no effect)    &                     &                         \\ \hline
{\ct GEOMETRY}                        & Character       & Geometry type                     &                     & {\ct 'CARTESIAN'}       \\ \hline
{\ct HEAT\_OF\_VAPORIZATION }         & Real            & For specified HRR only            & kJ/kg               & 0.                      \\ \hline
{\ct HRRPUA }                         & Real            & HRR Per Unit Area                 & kW/m$^2$            & 0.                      \\ \hline
{\ct ID     }                         & Character       & IDentifier                        &                     &                         \\ \hline
{\ct IGNITION\_TEMPERATURE}           & Real            & Ignition temperature              & $^\circ$C           & 5000.                   \\ \hline
{\ct LEAK\_PATH}                      & Integer Pair    & Pressure Zones for leakage        &                     &                         \\ \hline
{\ct MASS\_FLUX(I)}                   & Real Array      & For species {\ct I}               &                     & 0.                      \\ \hline
{\ct MASS\_FLUX\_TOTAL}               & Real            & Total Mass Flux                   &                     &                         \\ \hline
{\ct MASS\_FRACTION(I)}               & Real Array      & For species {\ct I}               &                     &                         \\ \hline
{\ct MATL\_ID}                        & Char. 2D Array  & (Layer,Component)                 &                     &                         \\ \hline
{\ct MATL\_MASS\_FRACTION}            & Real 2D Array   & (Layer,Component)                 &                     &                         \\ \hline
{\ct MAX\_PRESSURE }                  & Real            & Max over-pressure for fan         & Pa                  & 1E12                    \\ \hline
{\ct MLRPUA }                         & Real            & Mass loss rate per unit area      & kg/m$^2$s           & 0.                      \\ \hline
{\ct NPPC}                            & Integer         & Number of particles per cell      &                     & 1                       \\ \hline
{\ct PARTICLE\_MASS\_FLUX}            & Real            & Mass flux of particles            & kg/m$^2$ s          & 0.                      \\ \hline
{\ct PART\_ID}                        & Character       & Lagrangian Particle ID            &                     &                         \\ \hline
{\ct POROUS}                          & Logical         & Non-solid boundary                &                     & {\ct .FALSE.}           \\ \hline
{\ct PLE}                             & Real            & Atmospheric profile exponent      &                     & 0.3                     \\ \hline
{\ct PROFILE}                         & Character       & Name of velocity profile          &                     &                         \\ \hline
{\ct RAMP\_MF(I)}                     & Character       & Ramp ID for species I             &                     &                         \\ \hline
{\ct RAMP\_Q}                         & Character       & Ramp ID for HRR                   &                     &                         \\ \hline
{\ct RAMP\_T}                         & Character       & Ramp ID for temp.                 &                     &                         \\ \hline
{\ct RAMP\_V}                         & Character       & Ramp ID for velocity              &                     &                         \\ \hline
{\ct RGB(3)}                          & Integer Triplet & Color indices (0-255)             &                     & \small 255,204,102      \\ \hline
{\ct SHRINK}                          & Logical         & Shrinking material                &                     & {\ct .TRUE.}            \\ \hline
{\ct SLIP\_FACTOR    }                & Real            & Velocity Slip Condition           &                     & 0.5                     \\ \hline
{\ct STRETCH\_FACTOR    }             & Real            & Solid phase noding parameter      &                     & 2.0                     \\ \hline
{\ct TAU\_MF(I)}                      & Real Array      & Ramp time for species {\ct I}     & s                   & 1.     \\ \hline
{\ct TAU\_Q}                          & Real            & Ramp time for HRR                 & s                   & 1.     \\ \hline
{\ct TAU\_T}                          & Real            & Ramp time for temp.               & s                   & 1.     \\ \hline
{\ct TAU\_V}                          & Real            & Ramp time for velocity            & s                   & 1.     \\ \hline
{\ct TEXTURE\_HEIGHT}                 & Real            & Height of texture image           & m                   & 1.     \\ \hline
{\ct TEXTURE\_MAP}                    & Character       & Name of texture map file          &                     &        \\ \hline
{\ct TEXTURE\_WIDTH}                  & Real            & Width of texture image            & m                   & 1.     \\ \hline
{\ct THICKNESS(IL)}                   & Real Array      & Thickness of Layer {\ct IL}       & m                   & 0.    \\ \hline
{\ct TMP\_BACK}                       & Real            & Back surface temperature BC       & $^\circ$C           & 20.    \\ \hline
{\ct TMP\_FRONT}                      & Real            & Front surface temperature         & $^\circ$C           & 20.    \\ \hline
{\ct TMP\_INNER}                      & Real            & Initial solid temperature         & $^\circ$C           & 20.    \\ \hline
{\ct TRANSPARENCY}                    & Real            & Transparency of obstruction       &    1                &           \\ \hline
{\ct VEL    }                         & Real            & Normal velocity                   & m/s                 & 0.     \\ \hline
{\ct VEL\_T }                         & Real Pair       & Tangential velocity comps.        & m/s                 & 0.     \\ \hline
{\ct VOLUME\_FLUX}                    & Real            & Normal velocity x vent area       & m$^3$/s             & 0.     \\ \hline
{\ct Z0 }                             & Real            & Atmospheric profile origin        &  m                  & 10.    \\ \hline
%\end{tabular*}
\end{longtable}

\vspace{\baselineskip}

\vfill

\section{\texorpdfstring{{\tt TABL}}{TABL} (Table Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:TABL}.}\label{tbl:TABL}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct TABL} (Table Parameters)} \\ \hline \hline
{\ct ID}          & Character   & IDentifier                         &             &     \\ \hline
{\ct FYI}         & Character   & Comment String (has no effect)     &             &     \\ \hline
{\ct TABLE\_DATA} & Real Array  & Data for one row of the table      &             &     \\ \hline
\end{tabular*}
\end{table}


\vspace{\baselineskip}

\vfill

\section{\texorpdfstring{{\tt TIME}}{TIME} (Time Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:TIME}.}\label{tbl:TIME}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct TIME} (Time Parameters)} \\ \hline \hline
{\ct DT}                   & Real       & Initial time step                   & s           &               \\ \hline
{\ct FYI}                  & Character  & Comment String (has no effect)      &             &               \\ \hline
{\ct SYNCHRONIZE}          & Logical    & Sync time step of multiple meshes   &             & {\ct .TRUE.}  \\ \hline
{\ct T\_BEGIN}             & Real       & Starting time for calculation       & s           & 0.            \\ \hline
{\ct T\_END}or{\ct TWFIN } & Real       & Ending time for calculation         & s           & 1             \\ \hline
%{\ct TIME\_SHRINK\_FACTOR} & Real       & Scaling factor for time ramps and specific heat & & 1.            \\ \hline
{\ct WALL\_INCREMENT}      & Integer    & Timesteps between 1D wall solution updates  &     & 2             \\ \hline
\end{tabular*}
\end{table}

\vspace{\baselineskip}

\vfill

%\section{\texorpdfstring{{\tt TREE}}{TREE} (Conical Tree Parameters)}

%\hspace{0.5in}

%\begin{table}[H]
%\caption{For more information see Section~\ref{info:TIME}.}\label{tbl:TIME}
%\noindent
%\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
%\hline
%\multicolumn{5}{|c|}{{\ct TREE} (Conical Tree Parameters)} \\ \hline \hline
%{\ct CANOPY\_BASE\_HEIGHT}  & Real          & Height of Tree Cone Base from ground   & m       &     \\ \hline
%{\ct CANOPY\_WIDTH}         & Real          & Width of Tree Cone Base                & m       &     \\ \hline
%{\ct PART\_ID}              & Character     & Name of associated PART line           &         &     \\ \hline
%{\ct TREE\_HEIGHT}          & Real          & Height of Tree Cone Top from ground    & m       &     \\ \hline
%{\ct XYZ(3) }               & Real Triplet  & Physical coordinates                   & m       &     \\ \hline
%\end{tabular*}
%\end{table}
%NAMELIST /TREE/ XYZ,CANOPY_WIDTH,CANOPY_BASE_HEIGHT,TREE_HEIGHT,PART_ID

%\vspace{\baselineskip}

%\vfill


\section{\texorpdfstring{{\tt TRNX, TRNY, TRNZ}}{TRNX, TRNY, TRNZ} (MESH Transformations)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:TRNX}.}\label{tbl:TRNX}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct TRNX, TRNY, TRNZ} (MESH Transformations)} \\ \hline \hline
{\ct CC    }            & Real          & Computational coordinate           & m            &     \\ \hline
{\ct FYI}               & Character     & Comment String (has no effect)     &              &     \\ \hline
{\ct IDERIV}            & Integer       & Order of polynomial transformation &              &     \\ \hline
{\ct MESH\_NUMBER}      & Integer       & Number of mesh to transform        &              &     \\ \hline
{\ct PC    }            & Real          & Physical coordinate or derivative  &              &     \\ \hline
\end{tabular*}
\end{table}

\vspace{\baselineskip}

\vfill


\section{\texorpdfstring{{\tt VENT}}{VENT} (Vent Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:VENT}.}\label{tbl:VENT}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct VENT} (Vent Parameters)} \\ \hline \hline
{\ct COLOR    }             & Character         & See Section~\ref{info:colors}     &             &                     \\ \hline
{\ct CTRL\_ID }             & Character         & {\ct ID} of Control Function      &             &                     \\ \hline
{\ct DEVC\_ID }             & Character         & {\ct ID} of Controlling Device    &             &                     \\ \hline
%{\ct EVACUATION    }        & Logical           & Vent to be used in Evac calc      &             &  {\ct .FALSE.}      \\ \hline
{\ct FYI}                   & Character         & Comment String (has no effect)    &             &                     \\ \hline
{\ct IOR}                   & Integer           & Orientation Index                 &             &                     \\ \hline
{\ct MB    }                & Character         & Coordinate Plane                  &             &                     \\ \hline
%{\ct MESH\_ID    }          & Character         & Name of the controlling mesh      &             &                     \\ \hline
{\ct OUTLINE}               & Logical           & Draw vent as outline              &             &  {\ct .FALSE.}      \\ \hline
{\ct PBX, PBY, PBZ  }       & Real              & Coordinate Plane                  &             &                     \\ \hline
{\ct RGB(3)   }             & Integer Triplet   & See Section~\ref{info:colors}     &             &                     \\ \hline
{\ct SPREAD\_RATE}          & Real              & See Section~\ref{info:spread}     & m/s         &  0.0                \\ \hline
{\ct SURF\_ID}              & Character         & Associated Surface                &             &  {\ct 'INERT'}      \\ \hline
{\ct TEXTURE\_ORIGIN(3)}    & Real Triplet      & See Section~\ref{info:texture_map}& m           & (0.,0.,0.)          \\ \hline
{\ct TRANSPARENCY}          & Real              & Transparency indicator            &             &   1.0               \\ \hline
{\ct XB(6) }                & Real Sextuplet    & Min/Max physical coordinates      & m           &                     \\ \hline
{\ct XYZ(3) }               & Real Triplet      & See Section~\ref{info:spread}     & m           &                     \\ \hline
\end{tabular*}
\end{table}


\vspace{\baselineskip}

\vfill

\section{\texorpdfstring{{\tt ZONE}}{ZONE} (Pressure Zone Parameters)}

\hspace{0.5in}

\begin{table}[H]
\caption{For more information see Section~\ref{info:ZONE}.}\label{tbl:ZONE}
\noindent
\begin{tabular*}{\textwidth}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\hline
\multicolumn{5}{|c|}{{\ct ZONE} (Pressure Zone Parameters)} \\ \hline \hline
{\ct ID}                    & Character         & {\ct ID}entifier                       &        &               \\ \hline
{\ct LEAK\_AREA(N)}         & Real              & Leakage area to pressure zone {\ct N}  & m$^2$  & 0             \\ \hline
{\ct XB(6)}                 & Real Sextuplet    & Coordinates of Zone                    & m      &               \\ \hline
\end{tabular*}
\end{table}


\vfill





\chapter{Conversion of Old Input Files to FDS 5}

Many changes and improvements have been made in the latest release FDS 5.
To make an FDS 4 input data file compatible with the new FDS 5 application,
a few changes must be made to the file.
This appendix will point out all the changes that need to be made to convert
an FDS 4.x input file to the new FDS 5.x format.

\section{Numerical Domain Parameters: \texorpdfstring{{\tt GRID}}{GRID} and \texorpdfstring{{\tt PDIM}}{PDIM} }

In previous versions, the computational domain and numerical mesh were specified via lines of the form:

\footnotesize
\begin{verbatim}
&GRID IBAR=30, JBAR=20, KBAR=10 /
&PDIM XBAR0=0.0, XBAR=3.0, YBAR0=0.0, YBAR=2.0, ZBAR0=0.0, ZBAR=1.0 /
\end{verbatim} \normalsize

\noindent
In FDS 5, these two lines are now written via the single line:

\footnotesize
\begin{verbatim}
&MESH IJK=30,20,10, XB=0.0,3.0,0.0,2.0,0.0,1.0 /
\end{verbatim} \normalsize

\noindent
Rules for multiple meshes and mesh transformations still apply.

\section{Obstructions, Vents, and Holes: \texorpdfstring{{\tt OBST}}{OBST}, \texorpdfstring{{\tt VENT}}{VENT}, and \texorpdfstring{{\tt HOLE}}{HOLE}}

The syntax for these lines is fairly similar to past versions, with the following exceptions:
\begin{itemize}
\item For a {\ct VENT} that spans an entire mesh boundary, {\ct CB='XBAR0'} is now {\ct MB='XMIN'}. The character string
{\ct 'XBAR'} is now {\ct 'XMAX'}. The same applies for the $y$ and $z$ coordinate parameters.
\item Control parameters like {\ct T\_ACTIVATE}, {\ct HEAT\_REMOVE}, {\em etc.}, are now consolidated into {\ct DEVC\_ID} and
{\ct CTRL\_ID}. In brief,
any change to an obstruction, vent, or hole is tied to a specific device or control function. See Sections~\ref{info:DEVC} and
\ref{info:CTRL} for details.\index{OBST!CTRL\_ID}\index{VENT!CTRL\_ID}\index{HOLE!CTRL\_ID}
\end{itemize}


\section{Surface Parameters: \texorpdfstring{{\tt SURF}}{SURF}}

The most significant change to the input file format has been splitting of the {\ct SURF} line. In past versions, the {\ct SURF}
namelist group contained all the information about a particular boundary type -- its material properties, color, thickness, and so on.
However, in FDS 5, solid boundaries can now consist of multiple layers of materials, making the old {\ct SURF} line too cumbersome to
specify. Instead, there is a new namelist group called {\ct MATL} that just contains the properties of a given material. What used to
be

\footnotesize
\begin{verbatim}
&SURF ID        = 'BRICK WALL'
      RGB       = 0.6,0.2,0.2
      KS        = 0.69
      C_P       = 0.84
      DENSITY   = 1600.
      BACKING   = 'EXPOSED'
      THICKNESS = 0.20 /
\end{verbatim}
\normalsize

\noindent
is now given by two input lines:

\footnotesize
\begin{verbatim}
&MATL ID             = 'BRICK'
      CONDUCTIVITY   = 0.69
      SPECIFIC_HEAT  = 0.84
      DENSITY        = 1600. /

&SURF ID        = 'BRICK WALL'
      MATL_ID   = 'BRICK'
      RGB       = 166,41,41
      BACKING   = 'EXPOSED'
      THICKNESS = 0.20 /
\end{verbatim}
\normalsize

\noindent
The surface is still specified the same way as before, for example:

\footnotesize
\begin{verbatim}
&OBST XB=0.1, 5.0, 1.0, 1.2, 0.0, 1.0, SURF_ID='BRICK WALL' /
\end{verbatim}
\normalsize

\noindent
Notice the change in the names of the thermal properties {\ct KS} and {\ct C\_P} to {\ct CONDUCTIVITY} and
{\ct SPECIFIC\_HEAT}, respectively. Notice that the color {\ct RGB} is now specified via integers between 0 and 255, instead of
real numbers between 0.0 and 1.0. Better yet, just use the {\ct COLOR} Table~\ref{tab:colors}.



\section{Reaction Parameters: \texorpdfstring{{\tt REAC}}{REAC}}

For most applications, the specification of the combustion reaction has become easier. In past versions,
you needed to specify the fuel, its molecular weight, soot and/or CO yields, and the ideal stoichiometry of the reaction:

\footnotesize
\begin{verbatim}
&REAC ID                 = 'PROPANE'
      FYI                = 'C_3 H_8'
      MW                 = 44.
      SOOT_YIELD         = 0.01
      NU_O2              = 5.
      NU_CO2             = 3.
      NU_H2O             = 4. /
\end{verbatim}
\normalsize

\noindent
Now, you just need to describe the composition of the fuel molecule and any non-ideal product yield. FDS 5 computes what it needs based on
this information.

\footnotesize
\begin{verbatim}
&REAC ID                 = 'PROPANE'
      SOOT_YIELD         = 0.01
      C                  = 3.
      H                  = 8. /
\end{verbatim}
\normalsize


\section{Device Parameters: \texorpdfstring{{\tt SPRK}}{SPRK}, \texorpdfstring{{\tt SMOD}}{SMOD},
\texorpdfstring{{\tt HEAT}}{HEAT}, \texorpdfstring{{\tt THCP}}{THCP}}

Past versions of FDS had a variety of ways to specify devices. For example, a sprinkler was specified via a line of the form:

\footnotesize
\begin{verbatim}
&SPRK XYZ=4.5,6.7,3.6, MAKE='Acme_K-17', LABEL='spk_34' /
\end{verbatim} \normalsize

\noindent
which located the sprinkler at {\ct XYZ} and indicated that the sprinkler's properties were listed in a file called {\bf Acme\_K-17.spk}.
Smoke and heat detectors were specified via lines of the form:

\footnotesize
\begin{verbatim}
&SMOD XYZ=4.5,6.7,3.6, LENGTH=2.6, ACTIVATION_OBSCURATION=1.4, LABEL='sd_34' /
&HEAT XYZ=4.5,6.7,3.6, RTI=45., ACTIVATION_TEMPERATURE=74., LABEL='hd_39' /
\end{verbatim} \normalsize

\noindent
In FDS 5, these devices are all specified in the same way:

\footnotesize
\begin{verbatim}
&PROP ID='Acme_K-17', QUANTITY='SPRINKLER LINK TEMPERATURE', RTI=148., C_FACTOR=0.7,
      ACTIVATION_TEMPERATURE=74., PART_ID='water drops', FLOW_RATE=189.3,
      DROPLET_VELOCITY=10., SPRAY_ANGLE=30.,80.   /

&DEVC ID='spk_34', XYZ=4.5,6.7,3.6, PROP_ID='Acme_K-17' /
\end{verbatim} \normalsize

\noindent
Point output via ``thermocouples'' ({\ct THCP}s) are now given by ``devices'' ({\ct DEVC}s):

\footnotesize
\begin{verbatim}
&DEVC XYZ=0.7,0.9,2.1, QUANTITY='WALL_TEMPERATURE', IOR=-2, ID='probe_2' /
\end{verbatim}
\normalsize

\noindent
The syntax of the old {\ct THCP} namelist group is almost the same. Just swap {\ct DEVC} for {\ct THCP}, and change {\ct LABEL} to
{\ct ID}. In FDS 5, any input record is identified via its {\ct ID}.






\part{Sample Cases and Verification}
\label{part:verification}



\chapter{Forms of Verification}

ASTM~E~1355~\cite{ASTM:E1355} outlines methods to evaluate the
mathematical and numerical robustness of deterministic fire
models. This process, often referred to as {\em model verification},
ensures the accuracy of the numerical solution of the governing
equations. The methods include comparison with analytical solutions,
code checking, and numerical tests.

\section{Comparison with Analytical Solutions}
\label{Analytical Tests}

Most complex combustion processes, including fire, are turbulent and
time-dependent. There are no closed-form mathematical solutions for
the fully-turbulent, time-dependent Navier-Stokes equations. CFD
provides an approximate solution for the non-linear partial
differential equations by replacing them with discretized algebraic
equations that can be solved using a powerful computer. While there is
no general analytical solution for fully-turbulent flows, certain
sub-models address phenomenon that do have analytical solutions, for
example, one-dimensional heat conduction through a solid. These
analytical solutions can be used to test sub-models within a complex
code such as FDS. The developers of FDS routinely use such practices
to verify the correctness of the coding of the
model~\cite{Mell:1,McGrattan:4}. Such verification efforts are
relatively simple and routine and the results may not always be
published nor included in the documentation. Examples of routine
analytical testing include:
\begin{itemize}
\item The radiation solver has been verified with scenarios where
simple objects, like cubes or flat plates, are positioned in simple,
sealed compartments. All convective motion is turned off, the object
is given a fixed surface temperature and emissivity of one (making it
a black body radiator). The heat flux to the cold surrounding walls is
recorded and compared to analytical solutions.  These studies help
determine the appropriate number of solid angles to be set as the
default.
\item Solid objects are heated with a fixed heat flux, and the
interior and surface temperatures as a function of time are compared
to analytical solutions of the one-dimensional heat transfer
equation. These studies help determine the number of nodes to use in
the solid phase heat transfer model. Similar studies are performed to
check the pyrolysis models for thermoplastic and charring solids.
\item Early in its development, the hydrodynamic solver that evolved
to form the core of FDS was checked against analytical solutions of
simplified fluid flow phenomena. These studies were conducted at the
National Bureau of Standards (NBS)\footnote{The National Institute of
Standards and Technology (NIST) was formerly known as the National
Bureau of Standards.} by Rehm, Baum and
co-workers~\cite{Rehm:SIAM83,Rehm:SIAM84,Baum:CST84,Rehm:ANM85}. The
emphasis of this early work was to test the stability and consistency
of the basic hydrodynamic solver, especially the velocity-pressure
coupling that is vitally important in low Mach number
applications. Many numerical algorithms developed up to that point in
time were intended for use in high-speed flow applications, like
aerospace. Many of the techniques adopted by FDS were originally
developed for meteorological models, and as such needed to be tested
to assess whether they would be appropriate to describe relatively
low-speed flow within enclosures.
\item A fundamental decision made by Rehm and Baum early in the FDS
development was to use a direct (rather than iterative) solver for the
pressure. In the low Mach number formulation of the Navier-Stokes
equations, an elliptic partial differential equation for the pressure
emerges, often referred to as the Poisson equation. Most CFD methods
use iterative techniques to solve the governing conservation equations
to avoid the necessity of directly solving the Poisson equation. The
reason for this is that the equation is time-consuming to solve
numerically on anything but a rectilinear grid. Because FDS is
designed specifically for rectilinear grids, it can exploit fast,
direct solvers of the Poisson equation, obtaining the pressure field
with one pass through the solver to machine accuracy. FDS employs
double-precision (8 byte) arithmetic, meaning that the relative
difference between the computed and the exact solution of the
discretized Poisson equation is on the order of $10^{-12}$. The
fidelity of the numerical solution of the entire system of equations
is tied to the pressure/velocity coupling because often simulations
can involve hundreds of thousands of time steps, with each time step
consisting of two solutions of the Poisson equation to preserve
second-order accuracy. Without the use of the direct Poisson solver,
build-up of numerical error over the course of a simulation could
produce spurious results. Indeed, an attempt to use single-precision
(4 byte) arithmetic to conserve machine memory led to spurious results
simply because the error per time step built up to an intolerable
level.
\end{itemize}


\section{Code Checking}
\label{Code Checking}

An examination of the structure of the computer program can be used to
detect potential errors in the numerical solution of the governing
equations.  The coding can be verified by a third party either
manually or automatically with profiling programs to detect
irregularities and inconsistencies~\cite{ASTM:E1355}.

At NIST and elsewhere, FDS has been compiled and run on computers
manufactured by IBM, Hewlett-Packard, Sun Microsystems, Digital
Equipment Corporation, Apple, Silicon Graphics, Dell, Compaq, and
various other personal computer vendors. The operating systems on
these platforms include Unix, Linux, Microsoft Windows, and Mac
OSX. Compilers used include Lahey Fortran, Digital Visual Fortran,
Intel Fortran, IBM XL Fortran, HPUX Fortran, Forte Fortran for SunOS,
the Portland Group Fortran, and several others. Each combination of
hardware, operating system and compiler involves a slightly different
set of compiler and run-time options and a rigorous evaluation of the
source code to test its compliance with the Fortran 90 ISO/ANSI
standard~\cite{F90}. Through this process, out-dated and potentially
harmful code is updated or eliminated, and often the code is
streamlined to improve its optimization on the various
machines. However, simply because the FDS source code can be compiled
and run on a wide variety of platforms does not guarantee that the
numerics are correct. It is only the starting point in the process
because it at least rules out the possibility that erratic or spurious
results are due to the platform on which the code is running.

Beyond hardware issues, there are several useful techniques for
checking the FDS source code that have been developed over the
years. One of the most best ways is to exploit symmetry. FDS is filled
with thousands of lines of code in which the partial derivatives in
the conservation equations are approximated as finite differences. It
is very easy in this process to make a mistake. Consider, for example,
the finite difference approximation of the thermal diffusion term in
the $ijk$th cell of the three-dimensional grid:
\begin{eqnarray*}
(\nabla \cdot k \nabla T)_{ijk} &\approx&
              \frac{1}{\dx}
         \left[k_{i+\ha,jk}\frac{T_{i+1,jk}-T_{ijk}}{\dx}
              -k_{i-\ha,jk}\frac{T_{ijk}-T_{i-1,jk}}{\dx}\right]+  \nonumber \\
            &&\frac{1}{\dy}
         \left[k_{i,j+\ha,k}\frac{T_{i,j+1,k}-T_{ijk}}{\dy}
              -k_{i,j-\ha,k}\frac{T_{ijk}-T_{i,j-1,k}}{\dy}\right]+ \nonumber \\
            &&\frac{1}{\dz}
         \left[k_{ij,k+\ha}\frac{T_{ij,k+1}-T_{ijk}}{\dz}
              -k_{ij,k-\ha}\frac{T_{ijk}-T_{ij,k-1}}{\dz}\right]
\end{eqnarray*}
which is written as follows in the Fortran source code:
\begin{verbatim}
      DTDX = (TMP(I+1,J,K)-TMP(I,J,K))*RDXN(I)
      KDTDX(I,J,K) = .5*(KP(I+1,J,K)+KP(I,J,K))*DTDX
      DTDY = (TMP(I,J+1,K)-TMP(I,J,K))*RDYN(J)
      KDTDY(I,J,K) = .5*(KP(I,J+1,K)+KP(I,J,K))*DTDY
      DTDZ = (TMP(I,J,K+1)-TMP(I,J,K))*RDZN(K)
      KDTDZ(I,J,K) = .5*(KP(I,J,K+1)+KP(I,J,K))*DTDZ

      DELKDELT = (KDTDX(I,J,K)-KDTDX(I-1,J,K))*RDX(I) +
     .           (KDTDY(I,J,K)-KDTDY(I,J-1,K))*RDY(J) +
     .           (KDTDZ(I,J,K)-KDTDZ(I,J,K-1))*RDZ(K)
\end{verbatim}
This is one of the simpler constructs because the pattern that emerges
within the lines of code make it fairly easy to check. However, a
mis-typing of an {\ct I} or a {\ct J}, a plus or a minus sign, or any
of a hundred different mistakes can cause the code to fail, or worse
produce the wrong answer. A simple way to eliminate many of these
mistakes is to run simple scenarios that have perfectly symmetric
initial and boundary conditions.  For example, put a hot cube in the
exact center of a larger cold compartment, turn off gravity, and watch
the heat diffuse from the hot cube into the cold gas. Any simple error
in the coding of the energy equation will show up almost
immediately. Then, turn on gravity, and in the absence of any coding
error, a perfectly symmetric plume will rise from the hot cube. This
checks both the coding of the energy and the momentum
equations. Similar checks can be made for all of the three dimensional
finite difference routines. So extensive are these types of checks
that the release version of FDS has a routine that generates a tiny
amount of random noise in the initial flow field so as to eliminate
any false symmetries that might arise in the numerical solution.

The process of adding new routines to FDS is as follows: typically the
routine is written by one person (not necessarily a NIST staffer) who
takes the latest version of the source code, adds the new routine, and
writes a theoretical and numerical description for the FDS Technical
Reference Guide, plus a description of the input parameters for the
FDS User's Guide. The new version of FDS is then tested at NIST with a
number of benchmark scenarios that exercise the range of the new
parameters.  Provisional acceptance of the new routine is based on
several factors: (1) it produces more accurate results when compared
to experimental measurement, (2) the theoretical description is sound,
and (3) any empirical parameters are obtainable from the open
literature or standard bench-scale apparatus.  If the new routine is
accepted, it is added to a test version of the software and evaluated
by external users and/or NIST grantees whose research is related to
the subject. Assuming that there are no intractable issues that arise
during the testing period, the new routine eventually becomes part of
the release version of FDS.

Even with all the code checking performed at NIST, it is still
possible for errors to go unnoticed. One remedy is the fact that the
source code for FDS is publicly released. Although it consists of on
the order of 10,000 lines of Fortran statements, various researchers
outside of NIST have been able to work with it, add enhancements
needed for very specific applications or for research purposes, and
report back to the developers bugs that have been detected. The source
code is organized into 14 separate files, each containing subroutines
related to a particular feature of the model, like the mass, momentum,
and energy conservation equations, sprinkler activation and sprays,
the pressure solver, {\em etc.} The lengthiest routines are devoted to
input, output and initialization.  Most of those working with the
source code do not concern themselves with these lengthy routines but
rather focus on the finite-difference algorithm contained in a few of
the more important files. Most serious errors are found in these
files, for they contain the core of the algorithm. The external
researchers provide feedback on the organization of the code and its
internal documentation, that is, comments within the source code
itself.  Plus, they must compile the code on their own computers,
adding to its portability. Some of the work performed by researchers
who have modified the source code is discussed in Volume 2.  However, most of the routine
error reports are via electronic mail and are undocumented.  Most of
the current error reports involve routines that are not frequently
used by the FDS developers.  For example, the opening of compartment
doors or the breaking of windows, especially upon activation of a heat
detector, is a feature of FDS commonly used in the fire protection
engineering community but less so at NIST. As a result, numerous
reports have been made over the years in which a complicated sequence
of events prescribed by the user is not carried out by the program.
The errors are easy to fix, but the number of possible permutations of
events make it difficult to check them all. Another problem reported
by users are scenarios that extend the parameter range beyond which
the model was originally conceived.  Walls made of foam, fires in
refrigerators, gas leaks, fuel spills, {\em etc.}, are just some of
the phenomena that users have attempted to model but have run into
difficulty because the model parameters either have never been
exercised ({\em e.g.} very low thermal conductivities) or are not
allowed ({\em e.g.} temperatures below ambient). These reports by the
users help to improve and extend the use of the model.


\section{Numerical Tests}
\label{Numerical Tests}

Numerical techniques used to solve the governing equations within a
model can be a source of error in the predicted results.  The
hydrodynamic model within FDS is second-order accurate in space and
time.  This means that the error terms associated with the
approximation of the spatial partial derivatives by finite differences
is of the order of the square of the grid cell size, and likewise the
error in the approximation of the temporal derivatives is of the order
of the square of the time step. As the numerical grid is refined, the
``discretization error'' decreases, and a more faithful rendering of
the flow field emerges.  The issue of grid sensitivity is extremely
important to the proper use of the model and will be taken up in the
next chapter.

A common technique of testing flow solvers is to systematically refine
the numerical grid until the computed solution does not change, at
which point the calculation is referred to as a Direct Numerical
Solution (DNS) of the governing equations.  For most practical fire
scenarios, DNS is not possible on conventional computers. However, FDS
does have the option of running in DNS mode, where the Navier-Stokes
equations are solved without the use of sub-grid scale turbulence
models of any kind. Because the basic numerical method is the same for
LES and DNS, DNS calculations are a very effective way to test the
basic solver, especially in cases where the solution is steady-state.
Throughout its development, FDS has been used in DNS mode for special
applications.  For example, FDS (or its core algorithms) have been
used at a grid resolution of roughly 1~mm to look at flames spreading
over paper in a microgravity
environment~\cite{McGrattan:C&F1996,Kashiwagi:CS1996,Mell:CS98,Mell:CS00,Prasad:CS2002,Nakamura:C&F2002},
as well as "g-jitter" effects aboard spacecraft~\cite{Mell:g-jitter}.
Simulations have been compared to experiments performed aboard the US
Space Shuttle.  The flames are laminar and relatively simple in
structure, and the comparisons are a qualitative assessment of the
model solution. Similar studies have been performed comparing DNS
simulations of a simple burner flame to laboratory
experiments~\cite{Mukhopadhyay:1}. Another study compared FDS
simulations of a counterflow diffusion flames to experimental
measurements and the results of a one-dimensional multi-step kinetics
model~\cite{Hamins:NASA}.

Early work with the hydrodynamic solver compared two-dimensional
simulations of gravity currents with salt-water
experiments~\cite{McGrattan:1}. In these tests, the numerical grid was
systematically refined until almost perfect agreement with experiment
was obtained. Such convergence would not be possible if there were a
fundamental flaw in the hydrodynamic solver.





\chapter{Verification Test Suite}
\label{verification_suite}

This Chapter contains a set of relatively simple
calculations that are used to {\em verify} the major physical
algorithms within FDS.  That is, these samples confirm that the
equations have been properly coded.  They do not imply that the
equations actually represent some physical phenomena.  That is part of the Validation process. Note that the names in parentheses in each section header
correspond to the names of the input files for the cases.



\section{Hydrodynamics}

There are no analytical solutions of the fully-turbulent Navier-Stokes equations, but it is possible to simulate well
known fluid flows to determine if the basic fluid flow solver in FDS is working properly.



\subsection{Axially-Symmetric Helium Plume ({\bf helium\_2d}) }
\label{helium_2d}

The governing equations solved in FDS are written in terms of a
three dimensional Cartesian coordinate system. However,
a two dimensional Cartesian or two dimensional cylindrical
(axially-symmetric) calculation can be performed by setting the number of
cells in the $y$ direction to 1.
An example of an axially-symmetric helium plume is shown here, along with the input file:

\vspace{0.2in}
\scriptsize
\noindent
\begin{minipage}{1.1in}
\includegraphics[height=2in]{FIGURES/helium_2d}
\end{minipage}
\hfill
\begin{minipage}{5.5in}
\begin{verbatim}
&HEAD CHID='helium_2d',TITLE='Axisymmetric Helium Plume' /
&MESH IJK=72,1,144 XB=0.00,0.08,-0.001,0.001,0.00,0.16, CYLINDRICAL=.TRUE. /
&TIME TWFIN=5.0 /
&MISC DNS=.TRUE., ISOTHERMAL=.TRUE. /
&SPEC ID='HELIUM'  /
&SURF ID='HELIUM', VEL=-0.673, MASS_FRACTION(1)=1.0, TAU_MF(1)=0.3 /
&VENT MB='XMAX' ,SURF_ID='OPEN' /
&VENT MB='ZMAX' ,SURF_ID='OPEN' /
&OBST XB= 0.0,0.036,-0.001,0.001,0.00,0.02, SURF_IDS='HELIUM','INERT','INERT' /
&DUMP PLOT3D_QUANTITY(1)='PRESSURE',PLOT3D_QUANTITY(5)='HELIUM' /
&SLCF PBY=0.000,QUANTITY='DENSITY', VECTOR=.TRUE. /
&SLCF PBY=0.000,QUANTITY='HELIUM' /
&TAIL /
\end{verbatim}
\end{minipage}
\normalsize


\clearpage

\subsection{Pressure Rise in a Sealed Enclosure ({\bf pressure\_rise})  }
\label{pressure_rise}

This example tests several basic features of FDS. A narrow channel, 3~m long, 0.002~m wide, and 1~m tall, has air injected at a rate of
0.1~kg/m$^2$/s over an area of 0.2~m by 0.002~m for 60 s, with a linear ramp-up and ramp-down over 1 s. The total mass of air in the channel at the start
is 0.00718~kg. The total mass of air injected is 0.00244~kg.
The domain is assumed two-dimensional, the walls are adiabatic, and {\ct STRATIFICATION} is set to {\ct .FALSE.}. The domain is divided into three
meshes each 1~m long with identicle gridding.  We expect the pressure,
 temperature and density to rise during the 60~s injection period. Afterwards, the
temperature, density, and pressure should remain constant. A hand computation is performed at 10 second intervals using the First Law of
Thermodynamics and the equation of state.  The figures below show the results of this verification case.  As is seen denisty
matches exactly showing that FDS is injecting the appropriate quantity of mass and is properly initializing the domain.
Pressure rise and temperature rise; however, are overpredicted by 3 \% and 12 \% respectively.  Also a slight drop in pressure
is seen from 60 s to 120 s, indicating that the current implementation adiabatic boundary condition has a slight error in it.

\noindent
\begin{tabular*}{\textwidth}{lr}
\includegraphics[width=3.2in]{FIGURES/pressure_rise_T} &
\includegraphics[width=3.2in]{FIGURES/pressure_rise_P} \\
\includegraphics[width=3.2in]{FIGURES/pressure_rise_R} &
\includegraphics[width=3.2in]{FIGURES/pressure_rise_1000}
\end{tabular*}




\clearpage

\subsection{Leaks and Fans in a Sealed Enclosure ({\bf leak\_test} and {\bf leak\_test\_2})  }
\label{leak_test}

A new feature of FDS 5 is the idea of a ``pressure zone.''  Unlike traditional compartment or ``zone'' fire models, FDS was not designed under the assumption that there exist
rooms connected by doors or ducts. Rather, the geometry in FDS is completely specified by the user. However, there are features of simpler models that we want to retain. For example,
a leak through a small crack, or the transport of air through a ventilation duct.  In the following example, a simple compartment (3.6~m by 2.4~m by 2.4~m) has a small fan at one
end and one leak under the door at the other end. It is assumed for this example that the compartment is contained within a larger compartment that is perfectly sealed. The fan draws
air into the compartment from the plenum space, increasing the pressure inside and decreasing it outside.  A steady state is achieved when the volume flow into and out of the compartment
falls into balance.

The volume flow rate of the fan is given by the ``fan curve''
\be \dot{V}_{\hbox{\footnotesize fan}} = A_{\hbox{\footnotesize duct}} U_{\hbox{\footnotesize max}} \;
   \hbox{sign} (\Delta p_{\hbox{\footnotesize max}}-\Delta p)
   \sqrt{ \frac{ |\Delta p - \Delta p_{\hbox{\footnotesize max}}|}{\Delta p_{\hbox{\footnotesize max}} } }  \ee
where $\Delta p$ is the difference in pressure and $A_{\hbox{\scriptsize duct}}=0.16$~m$^2$, $U_{\hbox{\scriptsize max}}=0.1$~m/s, and $\Delta p_{\hbox{\scriptsize max}}=1000$~Pa.
The volume flow due to the leak is given by:
\be \dot{V}_{\hbox{\scriptsize leak}} = A_{\hbox{\scriptsize leak}} \sqrt{ \frac{ 2 \Delta p}{ \rho_\infty} } \ee
where $A_{\hbox{\scriptsize leak}}=0.0001$~m$^2$ and $\rho_\infty=1.2$~kg/m$^3$.
After 5~min the pressure difference is 938.2~Pa. The theoretical value, obtained by equating the fan and leak volume flow rates and solving for $\Delta_p$, is 938.9~Pa. The
slight difference is due to the fact that the solid boundaries within the interior of the computational domain admit a slight volume flux related to details of the
numerical solver.

Just for fun, we add another leak to the compartment, only this time the leak is to the exterior of the entire computational domain, an infinite void at ambient pressure.
Now the fan flow rate ought to balance the sum of the flow rates from the two leaks. After 5~min, the pressure difference is 935.2~Pa.

The two cases are summarized in the following plots:

\vspace{0.1in}
\noindent
\begin{tabular*}{\textwidth}{lr}
\includegraphics[width=3.1in]{FIGURES/leak_test_Pressure_Case_1} &
\includegraphics[width=3.1in]{FIGURES/leak_test_Pressure_Case_2}
\end{tabular*}

\clearpage


\subsection{Two Fans in a Wall ({\bf fan\_test})  }
\label{fan_test}

Consider two simple compartments divided by a wall with two fans installed, blowing in opposite directions.



\clearpage

\subsection{Stack Effect ({\bf stack\_effect})  }
\label{stack_effect}

If the interior temperature of a building is at a different temperature than the surrounding atmosphere, upward or
downward air flows within shafts or stairwells connected to the ambient via leakage paths will occur.  This
phenomena is known as the stack effect.  The {\bf stack\_effect} test case is a 2D simulation of a 304~m tall building
initialized to a temperature of 20~$^\circ$ with the surround ambient temperature initialized to 10~$^\circ$.
Two small openings in the building are defined 2.5~m above the ground floor of the building and 2.5~m below the
roof of the building.

The initial density stratification is defined by assuming a lapse rate of 0~$^\circ$C/m.
\be
   \rho_0(z) = \rho_\infty \, e^{ \frac{g W}{{\cal R}_0 T_0} z}
\ee
Applying this to the external and internal locations at the lower and upper vents results in densities of 1.2392,
1.1969, 1.1954, and 1.1546~kg/m$^3$, respectively.  FDS computes the same values to within machine precision.  Since the
openings in the building are equally spaced over its height, the neutral plane of the building will be close to its midpoint.
The pressure gradient across the building's wall can be computed as
\be
   \delta P = \frac{W P_0 g} {R_{0}} \left( \frac {1}{T_{ambient}} - \frac {1}{T_{building}} \right) h
\ee
where h is the distance from the neutral plane.  Using this pressure gradient in Bernoulli's equation (and assuming it remains constant)
results in a velocity of 10.09~m/s through the vent.  FDS computes a peak velocity of 10.13~m/s or an error of 0.5~\%.

\clearpage



\subsection{Sawtooth ({\bf sawtooth})  }
\label{sawtooth}

Sometimes it is desired to have stair-stepped obstructions representing curved or sloped geometry. A concern is that this may
change the flow pattern near the wall. To lessen the impact of stair-stepped boundaries near the edges of the obstructions,
one may specify the option {\ct SAWTOOTH=.FALSE.} If {\ct SAWTOOTH} is set to {\ct FALSE}, then the velocity boundary conditions will be applied in
such a way as to minimize the impact of the boundaries due to vortices at sharp corners, as shown in the following example:

\scriptsize
\begin{verbatim}
&OBST XB= 0.00, 0.05,-0.01, 0.01, 0.00, 0.05, SAWTOOTH=.FALSE., COLOR='EMERALD GREEN' /
&OBST XB= 0.05, 0.10,-0.01, 0.01, 0.00, 0.10, SAWTOOTH=.FALSE., COLOR='EMERALD GREEN' /
&OBST XB= 0.10, 0.15,-0.01, 0.01, 0.05, 0.15, SAWTOOTH=.FALSE., COLOR='EMERALD GREEN' /
&OBST XB= 0.15, 0.20,-0.01, 0.01, 0.10, 0.20, SAWTOOTH=.FALSE., COLOR='EMERALD GREEN' /
\end{verbatim}\normalsize

In the figure below, the top set of obstructions are using the default {\ct SAWTOOTH=.TRUE.} and the bottom set of
obstructions are using {\ct SAWTOOTH=.FALSE.} The adjacent obstructions that have {\ct SAWTOOTH=.FALSE.} are displayed
in Smokeview as one smooth obstruction, shown in green. Notice that as the air moves across the different sets of obstructions,
the air velocity on the bottom set of obstructions is not affected as much by the vortices.

\begin{center}
\includegraphics[width=3in]{FIGURES/sawtooth.jpg}
\end{center}

\clearpage





\section{Combustion}


\subsection{A Simple Under-Ventilated Compartment Fire ({\bf door\_crack}) }
\label{door_crack}

This example uses the same simple compartment that was used to test leakage and fan curves in the previous section. Now, we add a small (160~kW) fire, with the same
fan and leak under the door. The compartment now opens to the atmosphere, not a sealed plenum. We expect a rapid pressure rise in the compartment due to the effect of the
fire and the fan. Initially, the pressure rise is approximately:
\be \frac{d \overline{p}_1}{dt} \approx (\gamma - 1) \; \frac{\dQ}{V} + \gamma \, \overline{p} \; \frac{ \dot{V} }{V} \approx 3200 \; \hbox{Pa/s}  \approx 0.03 \; \hbox{atm/s}   \ee
where $\gamma \approx 1.4$, $\dot{Q}=160,000$~W, $V=20.7$~m$^3$, and $\dot{V}=0.016$~m$^3$/s. In roughly 150~s, the pressure rises about 0.6~atm, at which point the fire
dies due to lack of oxygen. Then the pressure decreases, and the fan starts up again (it had stalled due to high pressure in the compartment). The fan, and the leak under the
door, increase the oxygen concentration, at least near these openings, and the fuel-rich gases in the compartment continue to burn.

\vspace{0.1in}
\noindent
\begin{tabular*}{\textwidth}{lr}
\includegraphics[width=3.1in]{FIGURES/door_crack_Pressure} &
\includegraphics[width=3.1in]{FIGURES/door_crack_HRR}
\end{tabular*}

While this case has a number of interesting physical effects, and it {\em verifiies} several features of FDS, it is very important to note the following:
\begin{itemize}
\item Although there is smoke seen flowing backwards out the fan duct, in reality there would have been much more. Most conventionally built structures will not withstand over-pressures
of 0.6~atm without some sort of relief. The fan and the crack under the door obey simple formulae based on pressure differences, but these assumptions have limits.
\item It is likely that the fire in this scenario would indeed extinguish itself as the oxygen volume fraction decreased below about 15~\%. {\bf But,} its re-ignition at the door crack
and fan opening would depend on the presence of a spark or hot spot of some sort. FDS continues to flow fuel into the compartment past the point of local extinction, but the compartment
cools. The default combustion algorithm in FDS assumes that in every grid cell there is a ``virtual spark plug'' that initiates combustion if the local ratio of fuel and oxygen are
appropriate.
\end{itemize}





\clearpage

\section{Radiation}

\subsection{Radiation inside a box ({\bf radiation\_in\_a\_box}) }
\label{radiation_in_a_box}

This verification case tests the computation of three-dimensional
configuration factor $\Phi$ inside a cube box with one hot wall and
five cold (0~K) walls. An overview of the test geometry is shown here:
\begin{center}
\includegraphics[width=4.0in]{FIGURES/box}
\end{center}
The configuration factors are calculated at the
diagonal of the cold wall opposite to the hot wall. The exact values of the configuration factor
from plane element $dA$ to parallel rectangle $H$
are calculated using the analytical solution~\cite{Siegel:1}

\begin{center}
\begin{tabular}{|c|c|c|c|}
\hline (y,z) & $\Phi_{HdA}$ & (y,z) & $\Phi_{HdA}$ \\ \hline \hline
0.025   &0.1457 & 0.275 &0.2135 \\
0.075   &0.1603 & 0.325 &0.2233 \\
0.125   &0.1748 & 0.375 &0.2311 \\
0.175   &0.1888 & 0.425 &0.2364 \\
0.225   &0.2018 & 0.475 &0.2391 \\ \hline
\end{tabular}
\end{center}

\noindent
Different variations of the case include the mesh resolution (20$^3$ and 100$^3$ cells)
and the number of radiation angles (50, 100, 300, 1000, 2000).
The exact and FDS results are shown here:

\begin{tabular*}{\textwidth}{lr}
\includegraphics[width=3.2in]{FIGURES/box_results_20} &
\includegraphics[width=3.2in]{FIGURES/box_results_100}
\end{tabular*}





\clearpage

\subsection{Radiation from a plane layer ({\bf radiation\_plane\_layer}) }
\label{radiation_plane_layer}

This case tests the computation of three-dimensional
radiation from a homogenous, infinitely wide layer of radiating
material.  The temperature of the layer is 1273.15~K and absorption
coefficients are varied. The thickness of the layer is fixed at 1.0~m,
and the optical depth is $1.0 \kappa$. Wall temperatures are set to 0~K.
The results are compared against the exact solution $S(\tau)$ presented
in~\cite{Zeldovich:1}
\be
S(\tau) = S_b\left[1-2E_3(\tau)\right]
\ee
where $S_b = \sigma T^4$ is the black-body heat flux from
the radiating plane and $E_3(\tau)$ is the exponential
integral function (order 3) of optical depth $\tau$.

The FDS results are computed at two mesh resolutions in the
$x$-direction (I = 20 and I = 150). For I=20, both one-band and
six-band versions are included to test the correct integration of heat
fluxes over multiple bands. For I=20, 2D-versions are also computed
(J=1). A special case with {\ct KAPPA0} = 0 and
an opposite wall temperature of 1273.15~K is computed to test the wall
heat flux computation. The exact values and FDS predictions of the
wall heat fluxes are given here:
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|c|} \hline
$\tau$ & $S(\tau)$ & \multicolumn{2}{c}{FDS (I=20,J=20)}
           & \multicolumn{2}{c}{FDS (I=20,J=1)}
                   & FDS (I=150) \\
     &          & 1 band  & 6 bands   & 1 band & 6 bands & 1 band \\
                            \hline\hline
0    & 148.9709 & 148.9709&  148.4037 & 147.9426 &147.3793 &148.9709 \\
0.01 & 2.8970   & 2.9180  &  2.9069   & 2.8364   &2.8256   &2.9258   \\
0.1  & 24.9403  & 25.5501 &  25.4529  & 25.1078  &25.0122  &25.7045  \\
0.5  & 82.9457  & 83.1309 &  82.8144  & 84.3719  &84.0506  &84.0264  \\
1.0  & 116.2891 & 115.4051&  114.9656 & 117.801  &117.353  &116.7751 \\
10.  & 148.9698 & 148.9616&  148.3947 & 148.9677 &148.4005 &148.9695 \\ \hline
\end{tabular}
\end{center}



\clearpage

\section{Solid Phase Phenomena}

This section contains examples that test the one-dimensional heat conduction solver in FDS, along with those that include
pyrolysis.


\subsection{Simple Heat Conduction Through a Solid Slab ({\bf heat\_conduction}) }
\label{heat_conduction}

Analytical solutions of transient, one-dimensional heat conduction through a
slab can be found in Refs.~\cite{Drysdale:1} and
\cite{Carslaw:1}. Four cases are examined here. In each, a slab of
thickness $L=0.1$~m is exposed on one face to an air temperature of $T_g=120$~$^\circ$C. The other face is insulated (adiabatic). The convective
heat transfer from the gas to the slab is $\dq_c'' = h \, (T_g - T_s)$,
where $h$ is constant, and $T_s$ is the slab face temperature. No thermal radiation is included.
\begin{center}
\begin{tabular}{|c|c|c|c|c|c|}
\hline
Case  &  $k$      & $\rho$       &  $c$          &   $h$         &  Bi     \\
      & (W/m/K)   & (kg/m$^3$)   &  (kJ/kg/K)    &  (W/m$^2$/K)  &  $hL/k$ \\ \hline \hline
A     &   0.1     & 100          &  1            &  100          &  100    \\ \hline
B     &   0.1     & 100          &  1            &  10           &  10     \\ \hline
C     &   1.0     & 1000         &  1            &  10           &  1      \\ \hline
D     &  10.0     & 10000        &  1            &  10           & 0.1     \\ \hline
\end{tabular}
\end{center}

\noindent
\begin{tabular*}{\textwidth}{lr}
\includegraphics[width=3.2in]{FIGURES/heat_conduction_Slab_A_Temperatures} &
\includegraphics[width=3.2in]{FIGURES/heat_conduction_Slab_B_Temperatures} \\
\includegraphics[width=3.2in]{FIGURES/heat_conduction_Slab_C_Temperatures} &
\includegraphics[width=3.2in]{FIGURES/heat_conduction_Slab_D_Temperatures}
\end{tabular*}


\clearpage

\subsection{Temperature-Dependent Thermal Properties ({\bf heat\_conduction\_kc})}
\label{heat_conduction_kc}

This example demonstrates the 1-D heat conduction in cartesian,
cylindrical and spherical geometries with temperature-dependent
thermal properties. The reference results were computed using
HEATING (version~7.3), a multi-dimensional, finite-difference, general purpose heat transfer model~\cite{Childs}. In
cartesian and cylindrical cases, the results have also  been verified
using a commercial finite-element solver, ABAQUS.

The sample of homogenous material is initially at 0~$^\circ$C and
at $t>0$ exposed to a gas at 700~$^\circ$C. A fixed heat transfer
coefficient of 10~W/Km$^2$ is assumed. The density
of the material is 10000~kg/m$^3$. The conductivity and specific heat
are functions of temperature with the following values: $k(0)=0.10$~W/m/K,
$k(200)=0.20$~W/m/K, $c(0)=1.0$~kJ/kg/K, $c(100)=1.2$~kJ/kg/K,
$c(200)=1.0$~kJ/kg/K. The thickness (radius) of the sample is 0.01~m. In the
cartesian case, the back surface of the material is exposed to a gas
at 0~$^\circ$C. In the Figure below, the solid lines are FDS results and the open
symbols are the HEATING results. An example input with cylindrical
geometry looks like:

\scriptsize
\begin{verbatim}
&MATL ID='MAT_1'
      EMISSIVITY = 0.0
      CONDUCTIVITY_RAMP='K_RAMP'
      SPECIFIC_HEAT_RAMP = 'C_RAMP'
      DENSITY=10000. /

&RAMP ID = 'K_RAMP' T=0,   F= 0.10 /
&RAMP ID = 'K_RAMP' T=100, F= 0.15 /
&RAMP ID = 'K_RAMP' T=200, F= 0.20 /
&RAMP ID = 'C_RAMP' T=0,   F= 1.00 /
&RAMP ID = 'C_RAMP' T=100, F= 1.20 /
&RAMP ID = 'C_RAMP' T=200, F= 1.00 /

&SURF ID='SLAB'
      STRETCH_FACTOR = 1.0
      GEOMETRY = 'CYLINDRICAL'
      MATL_ID='MAT_1'
      THICKNESS=0.01 /
\end{verbatim} \normalsize

\noindent
\begin{center}
\includegraphics[width=4.5in]{FIGURES/heat_conduction_kc}
\end{center}


\subsection{A Simple Two-Step Pyrolysis Example ({\bf two\_step\_solid\_reaction}) }
\label{two_step_solid_reaction}

Consider  the set  of ordinary  differential equations  describing the
mass  fraction of  three  components of  a  solid material  undergoing
thermal degradation:
\begin{eqnarray}
    \frac{dY_a}{dt} &=&  -K_{ab} Y_a \nonumber  \\
    \frac{dY_b}{dt} &=&   K_{ab} Y_a  -  K_{bc}  Y_b  \\
    \frac{dY_c}{dt} &=&   K_{bc} Y_a
    \nonumber
\end{eqnarray}
where  the  mass  fraction  of  component  $a$  is  1  initially.  The
analytical solution is~\cite{Lautenberger:2006}
\begin{eqnarray}
    Y_a(t)    &=&    \exp(-K_{ab}t)    \nonumber   \\
    Y_b(t)    &=&    \frac{K_{ab}}{K_{bc}-K_{ab}} \exp(-K_{ab} t)  - \exp(-K_{bc} t) \\
    Y_c(t)    &=&    \left[   K_{ab}    (1-\exp(-K_{bc} t) )    +  K_{bc}*(\exp(-K_{ab} t) -1) \right] / (K_{ab}-K_{bc})
\end{eqnarray}
The analytical and  numerical solution
for the parameters $K_{ab} = 0.389$ and $K_{bc} = 0.262$ are shown here:

\begin{center}
\includegraphics[width=4.5in]{FIGURES/two_step_solid_reaction_Mass_Fractions}
\end{center}




\clearpage
\subsection{Wall Internal Radiation ({\bf wall\_internal\_radiation}) }
\label{wall_internal_radiation}


The radiative flux inside the walls is computed using a two-flux
model.  In this case, the accuracy of the two-flux model is tested in
the computation of emissive flux from a 0.10 m thick, homogenous layer
of material at temperature of 1273.15 K and at ambient temperature of
10 K. The absorption coefficient is varied to cover a range [0.01, 10]
of optical depths.

The exact solutions for radiative flux are the analytical solutions
of plane layer emission~\cite{Zeldovich:1}
\be
S(\tau) = S_b\left[1-2E_3(\tau)\right]
\ee
where $S_b = \sigma T^4$ is the black-body heat flux from
the radiating plane and $E_3(\tau)$ is the exponential
integral function (order 3) of optical depth $\tau$. The exact
solutions and FDS results are shown below

\begin{center}
\begin{tabular}{|c|c|c|} \hline
$\tau$ & $S(\tau) {\rm (kW/m^2)}$ & FDS $\rm(kW/m^2)$ \\ \hline\hline
0.01  & 2.897       & 2.950 \\
0.1   & 24.94       & 26.98 \\
0.5   & 82.95       & 93.90 \\
1.0   & 116.3       & 128.4 \\
10.   & 149.0       & 149.0 \\ \hline
\end{tabular}
\end{center}


\clearpage
\subsection{A Liquid Pool Fire ({\bf ethanol\_pan}) }
\label{ethanol_pan}

In this example, a steel pan (0.7~m by 0.8~m) is filled with a thin layer (about 5~L, 9~mm) of ethanol, which burns out within about 10~min. This case tests a number of features -- burning
liquids, multiple layers of solids/liquids, and, most importantly, the absorption coefficient of the liquid. The pyrolysis models in FDS prior to version 5
assumed that radiative feedback from the fire and hot gases within a compartment were absorbed at the surface. In reality, this energy is absorbed in
depth; the extent of which is characterized by the absorption coefficient, $\kappa$. This is a property of the liquid, as well as the gaseous vapors. FDS now uses
an absorption coefficient for both the gas and solid/liquid phases. Here are the input lines that describe the properties of ethanol, and the pan in which it lies:

\scriptsize
\begin{verbatim}
&MATL ID = 'ETHANOL LIQUID'
      EMISSIVITY = 1.0
      NU_FUEL =0.97
      HEAT_OF_REACTION=880.
      CONDUCTIVITY=0.17
      SPECIFIC_HEAT= 2.45
      DENSITY= 787.
      ABSORPTION_COEFFICIENT = 40.
      BOILING_TEMPERATURE=76. /

&SURF ID='ETHANOL POOL'
      FYI = '4 kg of ethanol in a 0.7 m x 0.8 m pan'
      COLOR = 'YELLOW'
      MATL_ID = 'ETHANOL LIQUID','STEEL','CONCRETE'
      THICKNESS=0.0091,0.001,0.05
      TMP_INNER = 18. /
\end{verbatim} \normalsize

\noindent
The results of three calculations are shown below, each identical except for the value of the \\ {\ct ABSORPTION\_COEFFICIENT}. The results of a single experiment
are also shown, courtesy of Ian Thomas, Victoria University, Australia~\cite{Thomas:JFPE}.


\begin{center}
\includegraphics[width=4.5in]{FIGURES/ethanol_pan_HRR}
\end{center}



\clearpage
\subsection{A Thermoplastic ({\bf thermoplastic}) }
\label{thermoplastic}

This example just exercises the solid phase algorithm in
FDS. Essentially, the gas phase is shut off except for the imposition
of a 50~kW/m$^2$ ``virtual'' heat flux. The solid in this example is a
slab of plastic, similar in composition to PMMA.

\scriptsize
\begin{verbatim}
&MATL ID='PMMA'
      CONDUCTIVITY=0.25
      SPECIFIC_HEAT=1.0
      DENSITY=500.
      N_REACTIONS=1
      NU_FUEL=1.
      HEAT_OF_REACTION=1578.
      HEAT_OF_COMBUSTION=25200.
      REFERENCE_TEMPERATURE=330. /

&SURF ID='PMMA SLAB'
      COLOR='BLACK'
      MATL_ID='PMMA'
      THICKNESS=0.025
      EXTERNAL_FLUX=50. /  External Flux is ONLY for this simple demo exercise
\end{verbatim} \normalsize

\noindent
The material undergoes only one reaction -- the conversion of solid to
gaseous fuel vapor. In this case, the {\ct HEAT\_OF\_REACTION} is
essentially the latent heat of vaporization. The {\ct
REFERENCE\_TEMPERATURE} indicates that the reaction is to occur at a
(default) rate of 0.1~s$^{-1}$ at 330~$^\circ$C. The {\ct
HEAT\_OF\_COMBUSTION} refers to the combustion of the gaseous fuel
vapor, which does not occur in this example.

\noindent
\begin{tabular*}{\textwidth}{lr}
\includegraphics[width=3.2in]{FIGURES/thermoplastic_Surface_Temperature} &
\includegraphics[width=3.2in]{FIGURES/thermoplastic_Burning_Rate}
\end{tabular*}

The figures above show that both the temperature and burning rate of the thermoplastic are more or less constant over
the burning phase. The slab ``burns away'' after about 10~min.






\clearpage
\subsection{A Charring Solid ({\bf charring\_solid}) }
\label{charring_solid}

This example just exercises the solid phase algorithm in FDS. Essentially, the gas phase is shut off except for the imposition of a 50~kW/m$^2$ ``virtual''
heat flux. The reaction mechanism is fairly complicated, as it includes various solids like cellulose, char, and ash. Each are input via {\ct MATL} lines
as follows:

\scriptsize
\begin{verbatim}
&SURF ID='SPRUCE'
      STRETCH_FACTOR = 1.
      CELL_SIZE_FACTOR = 0.5
      MATL_ID(1,1:3) = 'CELLULOSE','WATER','LIGNIN'
      MATL_MASS_FRACTION(1,1:3) = 0.70,0.1,0.20
      MATL_ID(2,1) = 'CASI'
      THICKNESS(1:2)  =  0.01,0.01
      EXTERNAL_FLUX = 50. /

&MATL ID               = 'CELLULOSE'
      CONDUCTIVITY_RAMP = 'k_cell'
      SPECIFIC_HEAT    = 2.3
      DENSITY          = 400.
      N_REACTIONS      = 1
      A                = 2.8E19
      E                = 2.424E5
      HEAT_OF_REACTION = 0.
      NU_RESIDUE       = 1.0
      RESIDUE          = 'ACTIVE'/

&MATL ID                    = 'ACTIVE'
      EMISSIVITY            = 1.0
      CONDUCTIVITY_RAMP     = 'k_cell'
      SPECIFIC_HEAT         = 2.3
      DENSITY               = 400.
      N_REACTIONS           = 2
      A(1:2)                = 1.3E10,  3.23E14
      E(1:2)                = 1.505E5, 1.965E5
      HEAT_OF_REACTION(1:2) = 418.,    418.
      NU_RESIDUE(1:2)       = 0.35,    0.0
      NU_FUEL(1:2)          = 0.65,    1.0
      RESIDUE(1)            = 'CHAR' /

&MATL ID               = 'WATER'
      EMISSIVITY       = 1.0
      DENSITY          = 1000.
      CONDUCTIVITY     = 0.6
      SPECIFIC_HEAT    = 4.19
      N_REACTIONS      = 1
      A                = 1E20
      E                = 1.62E+05
      NU_WATER         = 1.0
      HEAT_OF_REACTION = 2260. /

&MATL ID                = 'CASI'
      CONDUCTIVITY_RAMP = 'k_CASI'
      DENSITY           = 200.
      SPECIFIC_HEAT     = 1.0 /

&MATL ID               = 'LIGNIN'
      EMISSIVITY       = 1.0
      DENSITY          = 550.
      CONDUCTIVITY     = 0.1
      SPECIFIC_HEAT    = 1.1 /

&MATL ID               = 'CHAR'
      EMISSIVITY       = 1.0
      DENSITY          = 140.
      CONDUCTIVITY_RAMP = 'k_char'
      SPECIFIC_HEAT    = 1.1 /

&RAMP ID='k_cell', T= 20., F=0.15 /
&RAMP ID='k_cell', T=500., F=0.29 /

&RAMP ID='k_char', T= 20., F=0.08 /
&RAMP ID='k_char', T=900., F=0.25 /

&RAMP ID='k_CASI', T= 20., F=0.06 /
&RAMP ID='k_CASI', T=400., F=0.25 /
\end{verbatim} \normalsize

\noindent
Note the edition of the parameter {\ct EXTERNAL\_FLUX} on the {\ct SURF} line. This produces a 50~kW/m$^2$ flux on the sample, without any
additional input lines in the file. It is just to test the solid phase model and should not be copied into an actual fire simulation.

The figures below show the surface temperature and burning rate of the wood under the 50~kW/m$^2$ external heat flux. The burning rate peaks at the
start of the simulation, decreases throughout the burning phase, and then peaks again at the end due to presence of an external backing material. The
initial peak is typical of char-forming solids.

\noindent
\begin{tabular*}{\textwidth}{lr}
\includegraphics[width=3.2in]{FIGURES/charring_solid_Surface_Temperature} &
\includegraphics[width=3.2in]{FIGURES/charring_solid_Burning_Rate}
\end{tabular*}





\clearpage
\subsection{Testing the ``Burn-Away'' Feature ({\bf box\_burn\_away}) }
\label{box_burn_away}

This is a silly example of a solid block of ``foam'' that is ignited
and burns until it is completely consumed.  The properties of the
block of foam were chosen simply to assure a quick calculation. The
objective of the test is to check that the integrated heat release
rate is consistent with the material properties of the block.  The
block is 0.4~m on a side, with a density of 20~kg/m$^3$. Its heat of
combustion is 20000~kJ/kg. The ignitor is a 10~kW burner placed beside
the block. The integrated heat release rate for a 120 s calculation
ought to be:
\be
(0.4)^3 \; \hbox{m}^3 \times 20 \; \hbox{kg/m}^3
\times 20000 \; \hbox{kJ/kg} + 10 \; \hbox{kW} \times 120 \; \hbox{s} =
26.8 \; \hbox{MJ}
\ee



\clearpage
\subsection{A Couch Fire ({\bf couch}) }
\label{couch}

In residential fires, upholstered furniture makes up a significant fraction of the combustible load. A single couch can generate several
megawatts of energy and sometimes lead to compartment flashover. Modeling a couch fire requires a simplification of its structure and materials.
At the very least, we want the upholstery to be described as fabric covering foam:

\footnotesize
\begin{verbatim}
&MATL ID                    = 'FABRIC'
      FYI                   = 'Properties completely fabricated'
      SPECIFIC_HEAT         = 1.0
      CONDUCTIVITY          = 0.1
      DENSITY               = 100.0
      N_REACTIONS           = 1
      NU_FUEL               = 1.
      REFERENCE_TEMPERATURE = 350.
      HEAT_OF_REACTION      = 3000.
      HEAT_OF_COMBUSTION    = 15000. /

&MATL ID                    = 'FOAM'
      FYI                   = 'Properties completely fabricated'
      SPECIFIC_HEAT         = 1.0
      CONDUCTIVITY          = 0.05
      DENSITY               = 40.0
      N_REACTIONS           = 1
      NU_FUEL               = 1.
      REFERENCE_TEMPERATURE = 350.
      HEAT_OF_REACTION      = 1500.
      HEAT_OF_COMBUSTION    = 30000. /

&SURF ID             = 'UPHOLSTERY'
      FYI            = 'Properties completely fabricated'
      COLOR          = 'PURPLE'
      BURN_AWAY      = .TRUE.
      MATL_ID(1:2,1) = 'FABRIC','FOAM'
      THICKNESS(1:2) = 0.002,0.1
      PART_ID        = 'smoke' /
\end{verbatim} \normalsize

\noindent
Both the fabric and the foam decompose into fuel gases via single-step reactions. The fuel gases from each have different
composition and heats of combustion. FDS automatically adjusts the mass loss rate of each so that the ``effective'' fuel gas
is that specified by the user on the {\ct REAC} line. The attribute {\ct BURN\_AWAY} forces FDS to break up the couch into
individual cell-sized blocks that will disappear from the calculation as soon as the fuel is exhausted. The surface is specified
as consisting of two layers, with a thickness of 2~mm for the {\ct FABRIC} and 10~cm for the {\ct FOAM}. The 10~cm is chosen to be the
same as the mesh cell size.





\clearpage
\subsection{Flame Spread along a Cable Tray ({\bf cable\_tray}) }
\label{cable_tray}

A common combustible in industrial settings are power, control, and instrument cables. The cables may be bundled in a variety of conduits; the most
common of which is a ladder-like ``tray.'' From the point of view of FDS, the pile of cables in a tray is a composite of a variety of plastics, insulators,
and metal, usually copper. Here is one way to describe a tray of cables:

\footnotesize
\begin{verbatim}
&MATL ID                    = 'PLASTIC'
      CONDUCTIVITY          = 0.2
      SPECIFIC_HEAT         = 1.5
      DENSITY               = 1500.
      N_REACTIONS           = 1
      HEAT_OF_REACTION      = 3000.
      HEAT_OF_COMBUSTION    = 25000.
      REFERENCE_TEMPERATURE = 400.
      NU_FUEL               = 1.0 /

&MATL ID            = 'COPPER'
      SPECIFIC_HEAT = 0.38
      CONDUCTIVITY  = 387.
      DENSITY       = 8940.   /

&SURF ID                        = 'Loose Cable'
      COLOR                     = 'IVORY BLACK'
      MATL_ID(1,1:2)            = 'PLASTIC','COPPER'
      MATL_MASS_FRACTION(1,1:2) = 0.4,0.6
      BACKING                   = 'EXPOSED'
      THICKNESS                 = 0.02 /

&OBST XB=-2.00, 2.00,-0.14, 0.14, 0.51, 0.55, SURF_ID='Loose Cable' /

&OBST XB=-2.00, 2.00,-0.15,-0.15, 0.50, 0.60, SURF_ID='SHEET METAL' / Tray Side
&OBST XB=-2.00, 2.00, 0.15, 0.15, 0.50, 0.60, SURF_ID='SHEET METAL' / Tray Side
&OBST XB=-1.95,-1.90,-0.15, 0.15, 0.50, 0.50, SURF_ID='SHEET METAL' / Rung
&OBST XB=-1.60,-1.55,-0.15, 0.15, 0.50, 0.50, SURF_ID='SHEET METAL' / Rung
...
&OBST XB= 1.90, 1.95,-0.15, 0.15, 0.50, 0.50, SURF_ID='SHEET METAL' / Rung
\end{verbatim} \normalsize

\noindent
The pile of cables is assumed to be a solid slab, 28~cm wide and 2~cm deep. The tray is slightly wider and deeper, and because it is listed second in
the input file, its surface properties take precedence wherever the cable slab and tray coincide. The mesh cells in this example are 5~cm on a side, but the
heat transfer within the cable slab are governed by the 2~cm {\ct THICKNESS}. The slab is 60~\% copper, by mass. Note that we are not assuming multiple
layers in this example -- the slab is a single layer composite of plastic and copper. The plastic burns at about 400~$^\circ$, but the copper remains. Thus,
the cable does not ``burn away.''

The point of this test case is merely to propose a simple model of flame spread along a tray of assorted cable. Detailed thermo-physical property data for
industrial-grade cable is usually not available, and even if it were, it would probably not improve upon the given model. The properties given in this example
are almost completely fabricated. What is important here are the
{\ct HEAT\_OF\_REACTION} and {\ct REFERENCE\_TEMPERATURE}, obtained in most cases by a bench-scale measurement device like the cone calorimeter.






\clearpage

\section{Detectors}

\subsection{Aspiration Detector ({\bf beam\_detector}) }
\label{beam_detectors}

A 10~m x 10~m x 4~m compartment is filled with 0.006~kg/kg of {\ct MIXTURE\_FRACTION\_2} with the default soot yield
0.01~kg/kg.  This results in an initial soot density of 71.9~mg/m$^3$ which using the default extinction coefficient of
8700~m$^2$/kg results in an optical depth of 0.626~m$^{-1}$.  The compartment has a series of obstructions placed at varying depths that are
multiples of 1~m.  Using the correlation for the output quantity {\ct visibility}, one obtains a visibility distance of 4.8~m.
When viewing the smoke levels with Smokeview, one can just barely see the fifth obstacle which is at a distance of 5~m.
Smokeview, therefore, is properly displaying the obscuration of the initial soot density.  Three beam detectors are also
placed in the compartment.  These all have a path length of 10~m, but are at different orientations within the compartment.
Using the optical depth of 0.626~m$^{-1}$ and the path length of 10~m, the expected total obscuration is 99.81~\%, which is the
result computed by FDS for each of the three detectors.
\begin{tabular*}{\textwidth}{lr}
\includegraphics[width=3.2in]{FIGURES/beam_detector_nosmoke} &
\includegraphics[width=3.2in]{FIGURES/beam_detector_smoke}
\end{tabular*}

\clearpage

\subsection{Aspiration Detector ({\bf aspiration\_detector}) }
\label{aspiration_detector}

A cubical compartment, 2~m on a side with a fire has a three sampling location aspiration system.  The three locations
have flow rates of 0.1, 0.5, and 0.8~kg/s, respectively, and transport times of 0.2, 0.1, and 0.3~s, respectively.  No bypass flow rate is
specified for the aspiration detector.  The input file fixes the initial time step to 0.01~s so that the initial output
times in the {\bf aspiration\_detector\_devc.csv} file will line up exactly with the transport times.  At 0.75~s, when
FDS begins reducing the time step below 0.01~s, the time delayed soot densities at the three sampling locations are
$7.4x10^{-6}$~kg/m$^3$, $9.5x10^{-4}$~kg/m$^3$, and $1.6x10^{-18}$~kg/m$^3$, respectively.  Using these values along with the
respective flow rates results in a detector obscuration of 0.000823~\%/m which is the same obscuration as predicted by FDS.

\clearpage

\section{Droplets and Sprays}

This section considers cases involving evaporating droplets, both water and fuel.


\subsection{Water Droplet Evaporation ({\bf water\_evaporation}) }
\label{water_evaporation}

The case called {\bf water\_evaporation} is nothing more than stationary water droplets in an adiabatic box with dimensions of 1~m on a side. The air
within the box is stirred to maintain uniform conditions, and there are no leaks or heat losses. The initial air
 temperature is 40~$^\circ$C.
Initially, the droplets have a median volumetric diameter of 100~$\mu$m, a temperature of 90~$^\circ$C, and a total mass of 0.02~kg.
It is expected that a steady-state will be achieved after several minutes.  The initial energy content, sum of the
air and water enthalpies, of the box is 360,000~kJ.  After a short period of time, 0.0141 kg of water evaporate and the box
reaches an equilibrium temperature of 16.2~$^\circ$C, see the figure below.  At this point the energy content of the box is 372,000~kJ
 or a 3~\% error.  At 16.2~$^\circ$C, the expected evaporation is 0.0142~kg.

\begin{center}
\includegraphics[width=4.5in]{FIGURES/water_evaporation}
\end{center}


%\subsection{Fuel Droplet Evaporation ({\bf fuel\_evaporation}) }

%In the exact same geometry as the above example, stationary droplets of heptane at ambient temperature vaporize and burn.




\clearpage

\subsection{A Liquid Fuel Spray Burner ({\bf spray\_burner}) }
\label{spray_burner}

Controlled fire experiments are often conducted using a spray burner,
where a liquid fuel is sprayed out of a nozzle and ignited. In this
example ({\bf spray\_burner.data}), heptane from two nozzles is
sprayed downwards into a steel pan.  The flow rate is increased
linearly so that the fire grows to 2~MW in 20 s, burns steadily for
another 20 s, and then ramps down linearly in 20 s. The key input
parameters are given here:

\footnotesize
\begin{verbatim}
&DEVC ID='nozzle_1', XYZ=4.0,-.3,0.5, PROP_ID='nozzle', QUANTITY='TIME', SETPOINT=0. /
&DEVC ID='nozzle_2', XYZ=4.0,0.3,0.5, PROP_ID='nozzle', QUANTITY='TIME', SETPOINT=0. /

&PART ID='heptane droplets', FUEL=.TRUE., VAPORIZATION_TEMPERATURE=98.,
      HEAT_OF_VAPORIZATION=316., SPECIFIC_HEAT=2.25, DENSITY=688.,
      QUANTITIES(1:2)='DIAMETER','DROPLET_TEMPERATURE',
      DROPLETS_PER_SECOND=2000, DIAMETER=1000., HEAT_OF_COMBUSTION=44500.,
      DT_INSERT=0.02, SAMPLING_FACTOR=1 /

&PROP ID='nozzle', CLASS='NOZZLE', PART_ID='heptane droplets',
      FLOW_RATE=1.96, FLOW_RAMP='fuel', DROPLET_VELOCITY=10.,
      SPRAY_ANGLE=0.,30.   /
&RAMP ID='fuel', T= 0.0, F=0.0  /
&RAMP ID='fuel', T=20.0, F=1.0  /
&RAMP ID='fuel', T=40.0, F=1.0  /
&RAMP ID='fuel', T=60.0, F=0.0  /
\end{verbatim}
\normalsize
Many of these parameters are self-explanatory and the
units are given in the User's Guide~\cite{FDS_Users_Guide_5}. Note
that a 2~MW fire is achieved via 2 nozzles flowing heptane at
1.96~L/min each:
\be 2 \times 1.96 \; \frac{\hbox{L}}{\hbox{min}} \times \frac{1}{60} \; \frac{\hbox{min}}{\hbox{s}} \times 688 \;
\frac{\hbox{kg}}{\hbox{m}^3} \times \frac{1}{1000} \; \frac{\hbox{m}^3}{\hbox{L}} \times 44500 \;
\frac{\hbox{kJ}}{\hbox{kg}} = 2000 \; \hbox{kW} \ee
The parameter {\ct HEAT\_OF\_COMBUSTION} over-rides that for the overall reaction scheme. Thus, if other droplets
or solid objects have different heats of combustion, the effective burning rates are adjusted so that the
total heat release rate is that which the user expects. However, exercises like this ought to be conducted just to
ensure that this is the case. The HRR curve for this example is given here:

\begin{center}
\includegraphics[width=4.5in]{FIGURES/spray_burner_HRR}
\end{center}



\clearpage

\subsection{Measuring Water Flux ({\bf bucket\_test}) }
\label{bucket_test}

A common way of measuring the spray distribution for any fire sprinkler is called a ``bucket test.''  Usually, one or several sprinklers is
mounted a specified distance above an array of catch bins, the water flows for a given period of time, and the water flux distribution is calculated
from the accumulated water mass in each bin. In the test case {\bf bucket\_test}, a single sprinkler is mounted 10~cm below a 5~m ceiling. Water
flows for 5~s at a constant rate of 60~L/min.  The simulation continues for another 5~s to allow water drops time to reach the
floor. The total mass of water discharged is
\be
  \mathrm{ 60 \; \frac{L}{min} \times 1 \; \frac{kg}{L} \times \frac{1}{60} \; \frac{min}{s} \times 5 \; s = 5 \; kg }
\ee
In the simulation, the boundary quantity {\ct water\_drops\_AMPUA} (Accumulated Mass Per Unit Area) records the total water mass per unit area (kg/m$^2$), analogous to
actual buckets the size of a grid cell.
Summing the values of {\ct water\_drops\_AMPUA} over the entire floor yields 4.96~kg. Where is the missing water? Some droplets evaporate, and some droplets
fly beyond the computational domain. Also, there remain a small number of suspended drops at the end of the simulation. Note that
there are no actual ``buckets'' in the simulation.

The accumulated water mass at the floor is extracted from the boundary ({\ct BNDF}) file via the command line program {\bf fds2ascii}. Here is a transcript of the session
used to convert the binary FDS output file into ASCII format:

\footnotesize
\begin{verbatim}
>> fds2ascii
  Enter Job ID string (CHID):
bucket_test
  What type of file to parse?
  PL3D file? Enter 1
  SLCF file? Enter 2
  BNDF file? Enter 3
3
  Enter Sampling Factor for Data?
  (1 for all data, 2 for every other point, etc.)
1
  Limit the domain size? (y or n)
y
  Enter min/max x, y and z
-5 5 -5 5 0 1
  1   MESH  1, water_drops_AMPUA
  Enter starting and ending time for averaging (s)
9 10
  Enter orientation: (plus or minus 1, 2 or 3)
3
  Enter number of variables
1
 Enter boundary file index for variable 1
1
 Enter output file name:
bucket_test_fds2ascii.csv
  Writing to file...      bucket_test_fds2ascii.csv
\end{verbatim}

\normalsize \noindent


\subsection{Complex Spray Patterns ({\bf bucket\_test\_2}) }
\label{bucket_test_2}

The test case from the prior section is modified to create two jets of water.

\footnotesize
\begin{verbatim}
&PROP ID='K-11', QUANTITY='SPRINKLER LINK TEMPERATURE', OFFSET=0.10, PART_ID='water_drops',
      FLOW_RATE=60.,SPRAY_PATTERN_TABLE='TABLE1', SMOKEVIEW_ID='sprinkler_upright' /

&TABL ID='TABLE1',TABLE_DATA=30,31,0,1,5,0.2/
&TABL ID='TABLE1',TABLE_DATA=30,31,179,180,5,0.8/
\end{verbatim}
\normalsize

The jets are separated by 180 degrees.
The jet in the {\ct -x} direction is given one quarter the flow rate of the jet in the {\ct +x} direction.

Viewing the particles in Smokeview shows two distinct jets of droplets in opposite directions.
Following the post processing instructions above,  you can observe that
the {\ct +x} jet does have four times the flow of the {\ct -x} jet.

\clearpage

\section{General Functionality}

This section contains a variety of simple tests to check the functionality of the code. These examples are good demonstrations of how to
make things happen in FDS.


\subsection{Creating and Removing {\ct HOLE}s and {\ct OBST}ructions ({\bf create\_remove}) }
\label{create_remove}

It is often convenient to create or remove solid obstructions, or conversely, remove or create empty holes. They are essentially the same thing as far as the logic in
FDS is concerned, but the input can be tricky. To avoid confusion, here is an example of holes and obstructions being created and removed.

\vspace{0.2in}
\tiny
\noindent
\begin{minipage}{1.4in}
\includegraphics[height=1.4in]{FIGURES/create_remove}
\end{minipage}
\hfill
\begin{minipage}{5.5in}
\begin{verbatim}
&HOLE XB=0.25,0.45,0.20,0.30,0.20,0.30, COLOR='RED',   DEVC_ID='timer 1' /
&HOLE XB=0.25,0.45,0.70,0.80,0.70,0.80, COLOR='GREEN', DEVC_ID='timer 2' /

&OBST XB=0.70,0.80,0.20,0.30,0.20,0.30, COLOR='BLUE',  DEVC_ID='timer 3' /
&OBST XB=0.70,0.80,0.60,0.70,0.60,0.70, COLOR='PINK',  DEVC_ID='timer 4' /

&DEVC XYZ=0.1,0.1,0.1, ID='timer 1', SETPOINT= 1.0, QUANTITY='TIME', INITIAL_STATE=.FALSE./
&DEVC XYZ=0.2,0.1,0.1, ID='timer 2', SETPOINT= 2.0, QUANTITY='TIME', INITIAL_STATE=.TRUE. /
&DEVC XYZ=0.1,0.1,0.1, ID='timer 3', SETPOINT= 3.0, QUANTITY='TIME', INITIAL_STATE=.FALSE./
&DEVC XYZ=0.2,0.1,0.1, ID='timer 4', SETPOINT= 4.0, QUANTITY='TIME', INITIAL_STATE=.TRUE./
\end{verbatim}
\end{minipage}
\normalsize



\chapter{Sensitivity Analysis}

A sensitivity  analysis considers the  extent to which  uncertainty in
model  inputs influences  model output.  Model parameters  can  be the
physical properties of solids  and gases, boundary conditions, initial
conditions, {\em  etc.} The parameters  can also be  purely numerical,
like the size  of the numerical grid. FDS  typically requires the user
to  provide several  dozen different  types of  input  parameters that
describe the geometry, materials,  combustion phenomena, {\em etc.} By
design,  the user  is  not expected  to  provide numerical  parameters
besides the grid size,  although the optional numerical parameters are
described in both the Technical Reference Guide and the User's Guide.

FDS does not  limit the range of most of  the input parameters because
applications often push beyond the  range for which the model has been
validated.  FDS is still used  for research at NIST and elsewhere, and
the developers do not presume to know in all cases what the acceptable
range  of   any  parameter  is.  Plus,  FDS   solves  the  fundamental
conservation  equations  and  is   much  less  susceptible  to  errors
resulting  from  input parameters  that  stray  beyond  the limits  of
simpler empirical models.  However, the user is warned  that he/she is
responsible for  the prescription of all parameters.   The FDS manuals
can only provide guidance.

The grid size is the  most important numerical parameter in the model,
as it  dictates the spatial  and temporal accuracy of  the discretized
partial  differential equations.  The heat  release rate  is  the most
important physical parameter,  as it is the source  term in the energy
equation. Property data, like  the thermal conductivity, density, heat
of vaporization,  heat capacity, {\em  etc.}, ought to be  assessed in
terms of their influence on  the heat release rate. Validation studies
have shown that FDS predicts well the transport of heat and smoke when
the HRR is prescribed. In  such cases, minor changes in the properties
of  bounding  surfaces  do  not  have  a  significant  impact  on  the
results. However, when the HRR is not prescribed, but rather predicted
by the  model using  the thermophysical properties  of the  fuels, the
model output is sensitive to even minor changes in these properties.

The sensitivity  analyses described in this chapter  are all performed
in basically the same way. For a given scenario, best estimates of all
the  relevant  physical  and  numerical  parameters are  made,  and  a
``baseline'' simulation is performed. Then, one by one, parameters are
varied by a given percentage, and the changes in predicted results are
recorded.  This is  the simplest  form of  sensitivity  analysis. More
sophisticated  techniques that involve  the simultaneous  variation of
several  parameters  are impractical  with  a  CFD  model because  the
computation time is too long and the number of parameters too large to
perform  the  necessary  number  of calculations  to  generate  decent
statistics.



\section{Grid Sensitivity}

\label{gridsen}

The most  important decision made by a  model user is the  size of the
numerical grid. In  general, the finer the numerical  grid, the better
the numerical solution of  the equations. FDS is second-order accurate
in  space and  time,  meaning that  halving  the grid  cell size  will
decrease  the discretization  error in  the governing  equations  by a
factor  of 4.  Because  of  the non-linearity  of  the equations,  the
decrease in discretization error does not necessarily translate into a
comparable decrease  in the error of  a given FDS  output quantity. To
find out  what effect a  finer grid has  on the solution,  model users
usually  perform some  form of  grid  sensitivity study  in which  the
numerical grid  is systematically refined until  the output quantities
do not change  appreciably with each refinement. Of  course, with each
halving of  the grid cell size,  the time required  for the simulation
increases by  a factor of $2^4=16$  (a factor of two  for each spatial
coordinate, plus  time). In  the end, a  compromise is  struck between
model accuracy and computer capacity.

Some   grid    sensitivity   studies   have    been   documented   and
published. Since FDS was  first publicly released in 2000, significant
changes   in  the   combustion  and   radiation  routines   have  been
incorporated into the model. However, the basic transport algorithm is
the  same, as  is  the  critical importance  of  grid sensitivity.  In
compiling   sensitivity  studies,   only  those   that   examined  the
sensitivity of routines no longer used have been excluded.

As part of  a project to evaluate  the use of FDS version  1 for large
scale   mechanically  ventilated   enclosures,  Friday~\cite{Friday:1}
performed a  sensitivity analysis to find  the approximate calculation
time based on varying grid sizes. A propylene fire with a nominal heat
release rate was  modeled in FDS. There was  no mechanical ventilation
and  the fire  was assumed  to grow  as a  function of  the  time from
ignition  squared.  The  compartment  was   a  3~m  by  3~m  by  6.1~m
space. Temperatures  were sampled 12~cm  below the ceiling.  Four grid
sizes   were   chosen  for   the   analysis:   30~cm,  15~cm,   10~cm,
7.5~cm. Temperature  estimates were  not found to  change dramatically
with different grid dimensions.

Using FDS  version 1, Bounagui {\em  et al.}~\cite{Bounagui:1} studied
the effect of grid size on simulation results to determine the nominal
grid size for future work. A propane burner 0.1~m by 0.1~m was modeled
with  a heat  release rate  of  1500~kW. The  grid sizes  used in  the
modeling are  given in Table~\ref{gridsize}. The results  of the model
were         compared         against        Heskestad's         plume
correlation.   Table~\ref{Heskestad}   shows   the  plume   centerline
temperature comparisons.  Obviously, the smaller  grids provide better
agreements among predictive methods.  A similar analysis was performed
using  Alpert's ceiling  jet correlation~\cite{SFPE:Alpert}  that also
showed better  predictions and reasonable agreement  with smaller grid
sizes.  In a  related study,  Bounagui {\em  et al.}~\cite{Bounagui:2}
used  FDS to  evaluate  the emergency  ventilation  strategies in  the
Louis-Hippolyte-La Fontaine Tunnel in Montreal, Canada.

\begin{table}[ht]
\begin{center}
\caption{Grid    Sizes    for    Computational    Domain    used    in
Ref.~\cite{Bounagui:1}} \label{gridsize} \vspace{0.1in}
\begin{tabular}{|c|c|}
\hline Cases&Grid Size (m)\\ \hline \hline Case 1&0.20 x 0.20 x 0.20\\
\hline Case 2&0.14 x 0.14 x  0.14\\ \hline Case 3&0.10 x 0.10 x 0.10\\
\hline Case 4&0.08 x 0.08 x 0.08\\ \hline
\end{tabular}
\end{center}
\end{table}

\begin{table}[ht]
\begin{center}
\label{Heskestad} \caption{Plume Centerline Temperature Comparisons~\cite{Bounagui:1}} \vspace{0.1in}
\begin{tabular}{|c|c|c|c|c|}        \hline
Heskestad & Case 1 & Case 2 & Case  3 & Case 4 \\ \hline 839 C & 479 C
& 593 C & 962 C & 967 C \\ \hline
\end{tabular}
\end{center}
\end{table}

Xin~\cite{Xin:NFPA2004}  used FDS  to  model a  methane fueled  square
burner (1~m  by 1~m) in  the open. Engineering correlations  for plume
centerline temperature and velocity  profiles were compared with model
predictions to assess the influence of the numerical grid and the size
of the computational domain. The  results showed that FDS is sensitive
to grid size effects, especially  in the region near the fuel surface,
and domain size  effects when the domain width is  less than twice the
plume  width.  FDS  uses   a  constant  pressure  assumption  at  open
boundaries.  This assumption  will affect  the plume  behavior  if the
boundary of the computational domain is too close to the plume.

Ierardi  and Barnett~\cite{Ierardi:1} used  FDS version  3 to  model a
0.3~m square methane diffusion burner with heat release rate values in
the range of 14.4~kW to 57.5~kW. The physical domain used was 0.6~m by
0.6~m with uniform grid spacings of  15, 10, 7.5, 5, 3, 1.5~cm for all
three coordinate  directions. For both  fire sizes, a grid  spacing of
1.5~cm  was found  to  provide  the best  agreement  when compared  to
McCaffrey's     centerline    plume    temperature     and    velocity
correlations~\cite{SFPE:Heskestad}.  Two similar  scenarios  that form
the basis for Alpert's ceiling  jet correlation were also modeled with
FDS. The first scenario was a  1~m by 1~m, 670~kW ethanol fire under a
7~m   high  unconfined   ceiling.   The  planar   dimensions  of   the
computational domain were 14~m by  14~m. Four uniform grid spacings of
50, 33.3, 25, and 20~cm were  used in the modeling. The best agreement
for  maximum  ceiling  jet  temperature  was  with  the  33.3~cm  grid
spacing. The best  agreement for maximum ceiling jet  velocity was for
the  50~cm grid  spacing. The  second scenario  was a  0.6~m  by 0.6~m
1000~kW ethanol fire under a 7.2~m high unconfined ceiling. The planar
dimensions of  the computational domain  were 14.4~m by  14.4~m. Three
uniform  grid  spacings  of  60,  30,  and  20~cm  were  used  in  the
modeling. The  results show that  the 60~cm grid spacing  exhibits the
best  agreement with  the correlations  for both  maximum  ceiling jet
temperature and velocity on a qualitative basis.

Petterson~\cite{Petterson:1} also completed work assessing the optimal
grid size for FDS version 2. The FDS model predictions of varying grid
sizes were  compared to two separate fire  experiments: The University
of Canterbury  McLeans Island  Tests and the  US Navy Hangar  Tests in
Hawaii.  The first  set  of  tests utilized  a  room with  approximate
dimensions of  2.4~m by  3.6~m by  2.4~m and fire  sizes of  55~kW and
110~kW. The  Navy Hangar  tests were performed  in a  hangar measuring
98~m by 74~m by 15~m in height and had fires in the range of 5.5~MW to
6.6~MW. The results  of this study indicate that  FDS simulations with
grids of 0.15~m had temperature predictions as accurate as models with
grids as  small as 0.10~m. Each  of these grid  sizes produced results
within   15~\%   of   the   University   of   Canterbury   temperature
measurements. The 0.30~m grid  produced less accurate results. For the
comparison of the Navy Hangar tests, grid sizes ranging from 0.60~m to
1.80~m yielded results of comparable accuracy.

Musser~{\em et  al.}~\cite{Musser:1} investigated  the use of  FDS for
course grid  modeling of non-fire and fire  scenarios. Determining the
appropriate  grid  size was  found  to  be  especially important  with
respect  to heat  transfer  at heated  surfaces.  The convective  heat
transfer  from the  heated surfaces  was most  accurate when  the near
surface grid cells were smaller than the depth of the thermal boundary
layer.  However, a  finer grid  size  produced better  results at  the
expense of computational time. Accurate contaminant dispersal modeling
required a significantly finer grid. The results of her study indicate
that  non-fire simulations  can be  completed more  quickly  than fire
simulations because  the time  step is not  limited by the  large flow
speeds in a fire plume.


\section{Sensitivity of Large Eddy Simulation Parameters}

FDS  uses the  Smagorinsky form  of  the Large  Eddy Simulation  (LES)
technique.  This  means  that   instead  of  using  the  actual  fluid
viscosity, the model uses a viscosity of the form \be \mu_{\hbox{\tiny
LES}} =  \rho \,  (C_s\, \Delta)^2  \, |S|^\ha \ee  where $C_s$  is an
empirical constant, $\Delta$ is a length on the order of the size of a
grid  cell,  and  the  deformation   term  $|S|$  is  related  to  the
Dissipation Function, given by Eq.~(\ref{dissipation}). Related to the
``turbulent  viscosity'' are  comparable expressions  for  the thermal
conductivity  and  material diffusivity:  \be  k_{\hbox{\tiny LES}}  =
\frac{\mu_{\hbox{\tiny  LES}}   \;  c_p}{\PR}  \quad   ;  \quad  (\rho
D)_{\hbox{\tiny  LES}}  =\frac{\mu_{\hbox{\tiny  LES}}}{\SC}  \ee  The
Prandtl  number  $\PR$  and  the  Schmidt number  $\SC$  are  likewise
considered to  be ``turbulent'' values.  Thus, $C_s$, $\PR$  and $\SC$
are  a set  of  empirical constants.  Most  FDS users  simply use  the
default values  of (0.2,0.5,0.5), but some have  explored their effect
on the solution of the equations.

In an effort  to validate FDS with some  simple room temperature data,
Zhang~{\em et al.}~\cite{Zhang:2}  tried different combinations of the
Smagorinsky parameters,  and suggested the current  default values. Of
the  three parameters,  the  Smagorinsky constant  $C_s$  is the  most
sensitive.   Smagorinsky~\cite{Smagorinsky:1}  originally  proposed  a
value of 0.23,  but researchers over the past  three decades have used
values ranging  from 0.1  to 0.23. There  are also refinements  of the
original  Smagorinsky  model~\cite{Deardorff:1,Germano:1,Lilly:1} that
do  not  require the  user  to  prescribe  the constants,  but  rather
generate them automatically as part of the numerical scheme.

\section{Sensitivity of Radiation Parameters}

Radiative heat  transfer is  included in FDS  via the solution  of the
radiation  transport equation for  a non-scattering  gray gas,  and in
some limited  cases using  a wide band  model. The equation  is solved
using  a technique  similar to  finite volume  methods  for convective
transport,  thus the  name given  to it  is the  Finite  Volume Method
(FVM).  There  are  several  limitations  of  the  model.  First,  the
absorption coefficient  for the smoke-laden gas is  a complex function
of  its  composition  and   temperature.  Because  of  the  simplified
combustion  model,  the  chemical  composition of  the  smokey  gases,
especially  the  soot content,  can  effect  both  the absorption  and
emission  of thermal  radiation.  Second, the  radiation transport  is
discretized via  approximately 100 solid angles. For  targets far away
from  a  localized source  of  radiation,  like  a growing  fire,  the
discretization can  lead to a non-uniform distribution  of the radiant
energy. This can be seen in the visualization of surface temperatures,
where  ``hot spots'' show  the effect  of the  finite number  of solid
angles. The  problem can  be lessened by  the inclusion of  more solid
angles, but at  a price of longer computing times.  In most cases, the
radiative flux  to far-field targets is  not as important  as those in
the near-field, where coverage by the default number of angles is much
better.

Hostikka {\em et al.} examined the sensitivity of the radiation solver
to changes in  the assumed soot production, number  of spectral bands,
number  of control  angles, and  flame temperature.  Some of  the more
interesting findings were:
\begin{itemize}
\item  Changing  the  soot  yield  from 1~\%  to  2~\%  increased  the
radiative flux from a simulated methane burner about 15~\%
\item Lowering  the soot  yield to zero  decreased the  radiative flux
about 20~\%.
\item Increasing  the number of  control angles by  a factor of  3 was
necessary  to  ensure  the  accuracy  of the  model  at  the  discrete
measurement locations.
\item Changing the number of spectral  bands from 6 to 10 did not have
a strong effect on the results.
\item Errors of 100~\% in heat  flux were caused by errors of 20~\% in
absolute temperature.
\end{itemize}
The  sensitivity  to  flame   temperature  and  soot  composition  are
consistent with  combustion theory, which states that  the source term
of the  radiative transport equation  is a function of  the absorption
coefficient  multiplied  by the  absolute  temperature  raised to  the
fourth  power. The  number of  control angles  and spectral  bands are
user-controlled numerical  parameters whose sensitivities  ought to be
checked  for  each  new  scenario.  The  default  values  in  FDS  are
appropriate for  most large scale fire  scenarios, but may  need to be
refined for  more detailed simulations  such as a  low-sooting methane
burner.


\section{Sensitivity of Thermophysical Properties of Solid Fuels}

An  extensive amount  of  verification and  validation  work with  FDS
version 4  has been  performed by Hietaniemi,  Hostikka, and  Vaari at
VTT,  Finland~\cite{Hietaniemi:1}. The case  studies are  comprised of
fire  experiments   ranging  in   scale  from  the   cone  calorimeter
(ISO~5660-1) to  full-scale fire  tests such as  the room  corner test
(ISO~9705).  Comparisons are also  made between  FDS results  and data
obtained  in the  SBI (Single  Burning Item)  Euro-classification test
apparatus (EN  13823) as  well as  data obtained in  two {\em  ad hoc}
experimental configurations:  one is similar  to the room  corner test
but has only  partial linings and the other is a  space to study fires
in building cavities.

All of the  case studies involve real materials  whose properties must
be prescribed  so as to conform  to the assumption in  FDS that solids
are of uniform composition backed by a material that is either cold or
totally insulating. Sensitivity of the various physical properties and
the boundary conditions were tested. Some of the findings were:
\begin{itemize}
\item  The measured  burning  rates of  various  materials often  fell
between two FDS  predictions in which cold or  insulated backings were
assumed for the solid surfaces. FDS lacks a multi-layer solid model.
\item  The ignition  time of  upholstery is  sensitive to  the thermal
properties  of the  fabric covering,  but the  steady burning  rate is
sensitive to the properties of the underlying foam.
\item Moisture content of wooden fuels is very important and difficult
to measure.
\item Flame spread  over complicated objects, like cables  laid out in
trays, can be modeled if the  surface area of the simplified object is
comparable to that  of the real object. This  suggests sensitivity not
only to  physical properties,  but also geometry.  It is  difficult to
quantify the extent of the geometrical sensitivity.
\end{itemize}
There is  little quantification of  the observed sensitivities  in the
study. Fire  growth curves can be  linear to exponential  in form, and
small  changes in  fuel  properties  can lead  to  order of  magnitude
changes  in heat  release rate  for unconfined  fires. The  subject is
discussed  in the  FDS  Validation Guide~\cite{FDS_Validation_Guide_5}
where it is  noted in many of the studies  that predicting fire growth
is difficult.

Recently,              Lautenberger,              Rein             and
Fernandez-Pello~\cite{Lautenberger:FSJ} developed a method to automate
the process of  estimating material properties to input  into FDS. The
methodology involves simulating a  bench-scale test with the model and
iterating  via a  "genetic"  algorithm  to obtain  an  optimal set  of
material  properties for  that  particular item.  Such techniques  are
necessary because most bench-scale apparatus do not provide a complete
set of thermal properties.

\section{Summary}

The basis of  large eddy simulation is that  accuracy increases as the
numerical mesh is refined. For fire applications, the grid sensitivity
studies have shown that the accuracy of the model is a function of the
characteristic fire diameter  $D^*$ divided by the grid  cell size. It
is not enough to describe  the resolution of the calculation solely in
terms of the grid cell size, but rather the grid cell size relative to
the heat release rate.  For non-fire applications, there are no simple
means to evaluate ``good resolution.''

As  a  rule  of  thumb,  in  simulations  of  limited  resolution  FDS
predictions are more reliable in the far-field because the substantial
numerical diffusion mimics the  unresolved sub-grid scale mixing. This
is hard to quantify other than through comparisons with experiment. In
some of the sensitivity  studies discussed above, the authors conclude
that the model works best with a cell size of a given value, and often
this cell is not the smallest  one tested. In these cases, the authors
have found a  flow scenario where the unresolved  convective mixing is
almost exactly offset by  numerical diffusion. This is fortuitous, but
the  conclusion does not  necessarily extend  to other  scenarios. The
disadvantage of any turbulence  model, large eddy simulation included,
is  that  good  results  are   not  guaranteed  on  grids  of  limited
resolution. The advantage of LES  over other turbulence models is that
the  solution of  the actual  governing equations,  not a  temporal or
spatial average, is obtained as the mesh is refined.

The same  can be said  for phenomena closer  in to the  fire. However,
grid  resolution is  more  critical for  near-field phenomena  because
numerical diffusion  near the fire on  coarse grids does  not have the
same fortuitous  effect as it  does on far-field results.  In general,
coarse  resolution  will   decrease  temperatures  and  velocities  by
smearing the  values over  the large grid  cells. This can  affect the
radiative flux, convection to surrounding solids, and ultimately flame
spread and fire growth.









\part{Working with the FDS Source Code}


\chapter{Compiling FDS}
\label{info:compilation}

This section describes what you need to know if you want to compile the FDS source code yourself.
It is not a step by step guide, more detailed instructions can be found on the web site (http://fds-sv.sourceforge.net).

If a compiled version of FDS exists for the machine on which the
calculation is to be run and no changes have been made to
the original source code, there is no need to re-compile the code.
For example, the file {\bf fds5.exe} is the
compiled single processor program for a Windows-based PC;
thus PC users do not need a
Fortran compiler and do not need to compile the source code.
For machines for which an executable has not been compiled, you must
compile the code. Fortran 90/95 and C compilers are needed for compilation.

\section{FDS Source Code}

Table~\ref{tab:sourcefiles} lists the files that make up the source code.
The files with suffix ``.f90'' contain free form Fortran 90
instructions conforming to the ANSI and ISO standards, with a few exceptions that are discussed below.
The source files should be compiled in the order in which they are listed
in Table~\ref{tab:sourcefiles} because some routines are dependent on others.
For Unix/Linux users, {\bf Makefiles} for various platforms are available that assist in the
compilation. Compiler options differ from platform to platform.
Note the following:
\begin{itemize}
\item The source code consists mainly of Fortran 90
statements organized into about 25 files, plus an extra file containing
some additional C routines needed for output to Smokeview.
All of the C code is contained within the file called {\bf isob.c}.
\item Be aware that different
compilers handle the names of C subroutines differently. Some compilers
append an underscore to the names of the C routines called by the Fortran
code. If the compiler produces an error involving the names of routines
that are not recognized, invoke the C compiler pre-processing directive {\ct pp\_noappend} to stop
the compiler from appending the underscore to the names of the C routines.
\item There is only one non-standard call in the Fortran code. The non-standard call is {\ct GETARG},
in {\bf func.f90}. This routine reads the name of the input file off of the command line. This call cannot
be simply commented out; a suitable alternative must be found.
The only compiler option necessary, in addition to any needed to
address the above issues, is for full optimization (usually -O or some variant). Some
compilers have a standard optimization level, plus various degrees of
``aggressive'' optimization. Be cautious in using the highest levels of optimization.
\item For the single processor version of FDS, compile with {\bf main.f90}
\item The parallel version of FDS uses {\bf main\_mpi.f90} instead of
{\bf main.f90}, plus additional MPI libraries need to be installed. More details on MPI can be found at the web site, along with links to the
necessary organizations who have developed free MPI libraries.
\end{itemize}

\begin{table}[ht]
\begin{center}
\caption{\bf Source Code Files}
\label{tab:sourcefiles}
\vspace{.1in}
\begin{tabular}{|l|l|}
\hline
File Name  & Description  \\ \hline \hline
isob.c     & C Routine for computing isosurfaces and 3D smoke \\ \hline \hline
prec.f90   & Specification of numerical precision \\ \hline
smvv.f90   & Interfaces for C routines used for Smokeview output \\ \hline
devc.f90   & Derived type definitions and constants for devices' \\ \hline
type.f90   & Derived type definitions \\ \hline
mesh.f90   & Arrays and constants associated with each mesh \\ \hline
cons.f90   & Global arrays and constants \\ \hline
func.f90   & Global functions and subroutines \\ \hline
irad.f90   & Functions needed for radiation solver, including RadCal \\ \hline
ieva.f90   & Support routines for evac.f90 \\ \hline
evac.f90   & Egress computations (future capability) \\ \hline
pois.f90   & Poisson (pressure) solver \\ \hline
radi.f90   & Radiation solver  \\ \hline
part.f90   & Lagrangian particle transport and sprinkler activation \\ \hline
ctrl.f90   & Definitions and routines for control functions \\ \hline
dump.f90   & Output data dumps into files \\ \hline
read.f90   & Read input parameters \\ \hline
mass.f90   & Mass equation(s) and thermal boundary conditions \\ \hline
wall.f90   & Wall boundary conditions \\ \hline
fire.f90   & Combustion routines \\ \hline
pres.f90   & Spatial discretization of pressure (Poisson) equation \\ \hline
divg.f90   & Compute the flow divergence \\ \hline
init.f90   & Initialize variables and Poisson solver \\ \hline
velo.f90   & Momentum equations \\ \hline
main.f90 {\bf or} main\_mpi.f90   & Main programs, serial and parallel versions \\ \hline
\end{tabular}
\end{center}
\end{table}





\chapter{Output File Formats}

The output from the code consists of the file {\bf CHID.out}, plus various
data files that are described below.
Most of these output files are written out by the routine {\bf dump.f},
and can easily be modified to accommodate various plotting packages.

\section{Diagnostic Output}%Kevin

\label{out:file}

The file {\bf CHID.out} consists of a list of the input
parameters, and an accounting of various important quantities, including
CPU usage. Typically, diagnostic information is printed out every
100 time steps

\footnotesize
\begin{verbatim}
                            .
                            .

       Iteration   8300   May 16, 2003  08:37:53
       ----------------------------------------------
       Mesh  1, Cycle   3427
       CPU/step:     2.272 s, Total CPU:      2.15 hr
       Time step:  0.03373 s, Total time:   128.86 s
       Max CFL number: 0.86E+00 at ( 21,  9, 80)
       Max divergence: 0.24E+01 at ( 25, 30, 22)
       Min divergence: -.39E+01 at ( 26, 18, 31)
       Number of Sprinkler Droplets:          615
       Total Heat Release Rate:          7560.777 kW
       Radiation Loss to Boundaries:     6776.244 kW
       Mesh  2, Cycle   2914
       CPU/step:     1.887 s, Total CPU:      1.53 hr
       Time step:  0.03045 s, Total time:   128.87 s
       Max CFL number: 0.96E+00 at ( 21, 29, 42)
       Max divergence: 0.20E+01 at ( 22, 20, 22)
       Min divergence: -.60E+01 at (  7, 26, 48)
       Number of Sprinkler Droplets:          301

                            .
                            .
\end{verbatim}
\normalsize
The Iteration number indicates how many time steps the code has run, whereas the
Cycle number for a given mesh indicates how many time steps have been taken on that
mesh. The date and time (wall clock time) are on the line starting with the word
Iteration. The quantity {\ct CPU/step} is the amount of CPU time required to complete
a time step for that mesh; {\ct Total CPU} is the amount of CPU time elapsed since the
start of the run; {\ct Time step} is the time step size for the given mesh;
{\ct Total time} is the time of the simulation;
{\ct Max/Min divergence} is the max/min value of the
function $\nabla \cdot \bu$ and is used as a diagnostic when the flow
is incompressible ({\em i.e.} no heating); and {\ct Max CFL number} is the
maximum value of the CFL number. The {\ct Radiation Loss to Boundaries} is the
amount of energy that is being radiated to the boundaries. As compartments
heat up, the energy lost to the boundaries can grow to be an appreciable
fraction of the {\ct Total Heat Release Rate}. Finally, {\ct Number of Tracer Particles} indicates
how many passive particles are being tracked at that time.

Following the completion of a successful run, a summary of the CPU
usage per subroutine is listed. This is useful in determining where
most of the computational effort is being placed.

\section{Plot3D Data}
\label{out:PL3D}

Quantities over the entire mesh can be output in a format used by the graphics package {\bf Plot3D}.
The Plot3D data sets are single precision (32 bit reals), whole and
unformatted. Note that there is blanking, that is,
blocked out data points are not plotted.
If the statement {\ct WRITE\_XYZ=.TRUE.} is included on the {\ct DUMP}
line, then the mesh data is written out to a file called {\bf CHID.xyz}

\footnotesize
\begin{verbatim}
      WRITE(LU13) IBAR+1,JBAR+1,KBAR+1
      WRITE(LU13) (((X(I),I=0,IBAR),J=0,JBAR),K=0,KBAR),
     .            (((Y(J),I=0,IBAR),J=0,JBAR),K=0,KBAR),
     .            (((Z(K),I=0,IBAR),J=0,JBAR),K=0,KBAR),
     .     (((IBLK(I,J,K),I=0,IBAR),J=0,JBAR),K=0,KBAR)
\end{verbatim}
\normalsize
where {\ct X, Y} and {\ct Z} are the coordinates of the cell corners,
and {\ct IBLK} is an indicator of whether or not the cell is blocked.
If the point ({\ct X,Y,Z}) is completely embedded within a solid region,
then {\ct IBLK} is 0. Otherwise, {\ct IBLK} is 1. Normally, the mesh
file is not dumped.

The flow variables are written to a file called {\bf CHID\_****\_**.q},
where the stars indicate a time at which the data is output.
The file is written with the lines

\footnotesize
\begin{verbatim}
      WRITE(LU14) IBAR+1,JBAR+1,KBAR+1
      WRITE(LU14) ZERO,ZERO,ZERO,ZERO
      WRITE(LU14) ((((QQ(I,J,K,N),I=0,IBAR),J=0,JBAR),K=0,KBAR),N=1,5)
\end{verbatim}
\normalsize
The five channels {\ct N=1,5} are by default the temperature
($^\circ$C), the $u$, $v$ and
$w$ components of the velocity (m/s), and the heat release rate
per unit volume (kW/m$^3$). Alternate variables can be specified with
the input parameter {\ct PLOT3D\_QUANTITY(1:5)} on the {\ct DUMP} line.
Note that the data is interpolated at
cell corners, thus the dimensions of the Plot3D data sets are
one larger than the dimensions of the computational mesh.

Smokeview can display the Plot3D data. In
addition, the Plot3D data sets can be read into some other graphics
programs that accept the data format.
This particular format is very convenient, and recognized by
a number of graphics packages, including AVS, IRIS Explorer
and Tecplot
\footnote{With the exception of Smokeview,
the graphics packages referred to in this document are
not included with the source code, but are commercially available.}.

\section{Device Output Data}
\label{out:DEVC}

Data associated with particular devices (link temperatures, smoke obscuration, thermocouples, etc.)
specified in the input file under the namelist
group {\ct DEVC} is output in comma delimited format in a file called
{\bf CHID\_devc.csv}. The format of the file is as follows

\footnotesize
\begin{verbatim}
N_DEVC
FDS Time , ID(1)    , ID(2)    , ... , ID(N_DEVC)
TIME , QUANTITY(1) , QUANTITY(2) , ... , QUANTITY(N_DEVC)
s    , UNITS(1)    , UNITS(2)    , ... , UNITS(N_DEVC)
T(1) , VAL(1,1)    , VAL(2,1)    , ... , VAL(N_DEVC,1)
T(2) , VAL(1,2)    , VAL(2,2)    , ... , VAL(N_DEVC,2)
                      .
                      .
                      .
\end{verbatim}
\normalsize
where {\ct N\_DEVC} is the number of devices, {\ct ID(I)} is the user-defined
ID of the {\ct I}th device, {\ct QUANTITY(I)} is the physical quantity represented, {\ct UNITS(I)} the
units, {\ct T(J)} the time of the {\ct J}th dump, and
{\ct VAL(I,J)} the value at the {\ct I}th device at the {\ct J}th time.
The files can be imported into Microsoft Excel or almost any other
spread sheet program. If the number of columns exceeds 256, the file will automatically be split into smaller files.

\section{Control Output Data}
\label{out:CTRL}

Data associated with particular control functions specified in the input file under the
namelist group {\ct CTRL} is output in comma delimited format in a file called
{\bf CHID\_ctrl.csv}. The format of the file is as follows

\footnotesize
\begin{verbatim}
N_CTRL
FDS Time , ID(1)    , ID(2)    , ... , ID(N_CTRL)
TIME ,   ,  , ... ,
s    , status    , status    , ... , status(N_CTRL)
T(1) , VAL(1,1)    , VAL(2,1)    , ... , VAL(N_CTRL,1)
T(2) , VAL(1,2)    , VAL(2,2)    , ... , VAL(N_CTRL,2)
                      .
                      .
                      .
\end{verbatim}
\normalsize
where {\ct N\_CTRL} is the number of control functions, {\ct ID(I)} is the user-defined
ID of the {\ct I}th control function, and
{\ct VAL(I,J)} the state, {\ct -1 = .FALSE. and +1 = .TRUE.}, of the {\ct I}th control function at the {\ct J}th time.
The files can be imported into Microsoft Excel or almost any other
spread sheet program. If the number of columns exceeds 256, the file will automatically be split into smaller files.


\section{Gas Mass Data}

The total mass of the various gas species at any instant in time
is reported in the comma delimited
file {\bf CHID\_mass.csv}. The file consists of several columns,
the first column containing the time in seconds, the second contains the
total mass of all the gas species in the computational domain in units of kg,
the next lines contain the total mass of the individual species.

\section{Mixture Fraction State Relations}

The functional dependence of the mass fraction of the reactants and
products of combustion on the mixture fraction is
reported in the comma delimited
file {\bf CHID\_state\_II.csv}. The file consists of nominally 10 columns,
the first column containing the mixture fraction, the last column the average molecular weight, and
the rest the mass fractions of the various gases.  Where {\ct II} represents the chemical reaction for
which the state relationships represent.  For the two parameter model these are {\ct 01}
for the complete reaction (formation of combustion products) and {\ct 02} for the null reaction
(extinction).  For the three parameter model these are {\ct 01}, {\ct 02}, and {\ct 03} for the
incomplete (CO production) reaction, complete ($CO_2$ production) reaction, and the null
reaction respectively.

\section{Slice Files}
\label{out:SLCF}
The slice files defined under the namelist group {\ct SLCF} are
named {\bf CHID\_$n$.sf} ($n$=01,02...),
and are written out unformatted, unless otherwise directed.
These files are written out from {\bf dump.f} with the following lines:

\footnotesize
\begin{verbatim}
      WRITE(LUSF) QUANTITY
      WRITE(LUSF) SHORT_NAME
      WRITE(LUSF) UNITS
      WRITE(LUSF) I1,I2,J1,J2,K1,K2
      WRITE(LUSF) TIME
      WRITE(LUSF) (((QQ(I,J,K),I=11,I2),J=J1,J2),K=K1,K2)
              .
              .
              .
      WRITE(LUSF) TIME
      WRITE(LUSF) (((QQ(I,J,K),I=11,I2),J=J1,J2),K=K1,K2)
\end{verbatim}
\normalsize
{\ct QUANTITY}, {\ct SHORT\_NAME} and {\ct UNITS} are
character strings of length 30.
The sextuplet ({\ct I1,I2,J1,J2,K1,K2}) denotes the bounding mesh cell
nodes. The sextuplet indices correspond to mesh cell
nodes, or corners, thus the entire mesh would be represented by the
sextuplet ({\ct 0,IBAR,0,JBAR,0,KBAR}).

There is a short Fortran 90 program provided, called
{\bf fds2ascii.f},
that can convert slice files into text files that can be read
into a variety of graphics packages. The program combines multiple
slice files corresponding to the same ``slice'' of the computational
domain, time-averages the data, and writes the values into one file,
consisting of a line of numbers for each node. Each line contains the
physical coordinates of the node, and the time-averaged quantities
corresponding to that node. In particular, the graphics package
Tecplot
reads this file and produces contour, streamline and/or vector plots.
See Section~\ref{info:fds2ascii} for more details about the program
{\bf fds2ascii}.

\section{Boundary Files}%Kevin
\label{out:BNDF}
The boundary files defined under the namelist group {\ct BNDF} are
named {\bf CHID\_$n$.bf} ($n$=01,02...),
and are written out unformatted.
These files are written out from {\bf dump.f} with the following lines:

\footnotesize
\begin{verbatim}
      WRITE(LUBF) QUANTITY
      WRITE(LUBF) SHORT_NAME
      WRITE(LUBF) UNITS
      WRITE(LUBF) NPATCH
      WRITE(LUBF) I1,I2,J1,J2,K1,K2,IOR
      WRITE(LUBF) I1,I2,J1,J2,K1,K2,IOR
              .
              .
              .
      WRITE(LUBF) TIME
      WRITE(LUBF) (((QQ(I,J,K),I=11,I2),J=J1,J2),K=K1,K2)
      WRITE(LUBF) (((QQ(I,J,K),I=11,I2),J=J1,J2),K=K1,K2)
              .
              .
              .
      WRITE(LUBF) TIME
      WRITE(LUBF) (((QQ(I,J,K),I=11,I2),J=J1,J2),K=K1,K2)
      WRITE(LUBF) (((QQ(I,J,K),I=11,I2),J=J1,J2),K=K1,K2)
              .
              .
              .
\end{verbatim}
\normalsize
{\ct QUANTITY}, {\ct SHORT\_NAME} and {\ct UNITS} are
character strings of length 30.
{\ct NPATCH} is the number of planes (or ``patches'') that make up the
solid boundaries plus the external walls.
The sextuplet ({\ct I1,I2,J1,J2,K1,K2}) defines the cell nodes of each
patch. {\ct IOR} is an integer indicating the orientation of the
patch ($\pm 1,\pm 2,\pm 3$).
You do not prescribe these. Note that the data is planar,
thus one pair of cell nodes is the same.

Presently, Smokeview is the only program available to view the
boundary files.

\section{Particle Data}%Kevin
\label{out:PART}
The tracer particles and sprinkler droplets coordinates and related quantities
are stored in a FORTRAN unformatted (binary) file called {\bf CHID.prt5}.
Note that the format of this file has changed from previous versions (4 and below).
The file consists of some header material, followed by particle data output every
{\ct DT\_PART} seconds. The time increment {\ct DT\_PART} is specified on the
{\ct DUMP} line. It is {\ct T\_END/NFRAMES} by default.
The header materials is written by the following FORTRAN code in the file called {\bf dump.f90}.

\footnotesize
\begin{verbatim}
WRITE(LUPF) ONE_INTEGER          ! The number ONE as a 4 byte real
WRITE(LUPF) NINT(VERSION*100.)   ! FDS version number
WRITE(LUPF) N_PART               ! Number of PARTicle classes
DO N=1,N_PART
   PC => PARTICLE_CLASS(N)
   WRITE(LUPF) PC%N_QUANTITIES,ZERO_INTEGER  ! ZERO_INTEGER is a place holder
   DO NN=1,PC%N_QUANTITIES
      WRITE(LUPF) CDATA(PC%QUANTITIES_INDEX(NN))  ! 30 character output quantity
      WRITE(LUPF) UDATA(PC%QUANTITIES_INDEX(NN))  ! 30 character output units
   ENDDO
ENDDO
\end{verbatim}
\normalsize
Every {\ct DT\_PART} seconds the coordinates of the particles and droplets are output as 4 byte reals:

\footnotesize
\begin{verbatim}
WRITE(LUPF) REAL(T,FB)  ! Write out the time T as a 4 byte real
WRITE(LUPF) NPLIM       ! Number of particles to write out for this time step
WRITE(LUPF) (XP(I),I=1,NPLIM),(YP(I),I=1,NPLIM),(ZP(I),I=1,NPLIM)
WRITE(LUPF) (TA(I),I=1,NPLIM)  ! Integer "tag" for each particle
IF (PC%N_QUANTITIES > 0) WRITE(LUPF) ((QP(I,NN),I=1,NPLIM),NN=1,PC%N_QUANTITIES)
\end{verbatim}
\normalsize
The particle ``tag'' is used by Smokeview to keep track of individual particles and droplets for the purpose of drawing
streamlines. It is also useful when parsing the file. The quantity data, {\ct QP(I,NN)}, is used by Smokeview to color
the particles and droplets. Note that it is now possible with the new format to color the particles and droplets with
several different quantities.

\section{Profile Files}%Simo
\label{out:PROF}

The profile files defined under the namelist group {\ct PROF} are
named {\bf CHID\_prof\_$nn$.csv} ($nn$=01,02...),
and are written out formatted. These files are written out from {\bf
dump.f} with the following line:

\footnotesize
\begin{verbatim}
WRITE(LU_PROF) T,NWP+1,(X_S(I),I=0,NWP),(Q(I),I=0,NWP)
\end{verbatim}
\normalsize
After the time {\ct T}, the number of node points is given and then
the node coordinates. These are written out at every time step because
the wall thickness and the local solid phase mesh may change over time
due to the solid phase reactions. Array {\ct Q} contains the values of
the output quantity, which may be wall temperature, density or
component density.


% FDSVVBiB is split into FDS_refs, FDSVVBiBnew and FDS_mathcomp
%    SV docs would typically use FDS_ref, FDS_mathcomp but not FDSVVBiBnew
%
%         FDS_refs:  FDS and SV reference documents (user, tech guides etc.)
%         FDS_mathcomp:  mathematical, computer references
%         FDSVVBiBnew: fire references, what is left over

\bibliography{../Bibliography/FDS_refs,../Bibliography/FDSVVBiBnew,../Bibliography/FDS_mathcomp}

\printindex

\end{document}
