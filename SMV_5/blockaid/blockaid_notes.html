<html>
<head>
<TITLE>Readme file for Blockaid, an FDS blockage converter</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" >
<h2>Blockaid Release Notes - February 12, 2008</h2>

<ul>
<li><a href="#overview">Overview</a>
<li><a href="#software">Software</a>
<li><a href="#examples">Examples</a>
<li><a href="#other">Other Applications</a>
</ul>

<a name="overview"></a>
<h2>Overview</h2>
<p><img src="blockaid0.png" width=320 align="right"/>
<hr size="1">
<font size="-1">
The program <em>Blockaid</em> groups blockages together forming objects such as couches or stairs.
It then can replicate them one or more times while applying a specified rotation and/or translation amount.
</font>
<hr size="1">

<p>Blockaid reads in a file containing regular FDS &keywords plus additional
keywords, &BGRP, &EGRP, &GRP and &INCL, known only to Blockaid.
It uses these keywords
to output an FDS input file where specified
  groups of blockages, holes and vents are replicated, translated and/or rotated.
  
<p><tt>blockaid</tt> is run at a command line and has the following usage:
<pre>
 blockaid [-f] [-h] [-l libpath] casename 
          -f - overwrite output file casename.fds
          -h - display this message
          -l libdir - optional directory path containing &INCL files
</pre>
where <tt>casename</tt> is the name of the input file to be converted.  By convension this file has an extension <tt>.fof</tt>.

<h3>Grouping &OBST and other FDS keywords</h3>
One or more FDS  input lines are grouped together by surrounding them with
  <tt>&BGRP</tt> and <tt>&EGRP</tt> keywords, as in:<br />
  <p><tt>
      &BGRP ID='group label' /<br />
 </tt>
        <p>&nbsp&nbsp&nbsp one or more <tt>&OBST, &VENT, &HOLE</tt> or <tt>&GRP</tt> lines<br />
<tt>          
      <p>&EGRP /<br />
 </tt>
<ul>
<li>The group is given a name specifed with the <tt>ID</tt> keyword.
<li>A library of objects may be stored in a separate file and included 
using <tt>&INCL file='file name' /</tt>
<li>Blockage/hole positions are stored in a group relative to a point defined by the <tt>ORIGIN=x,y,z</tt> parameter found on the <tt>&BGRP</tt> line.
<li>Text substitions may be performed by placing one or more
<tt>#keyword='value'</tt> terms on a <tt>&GRP</tt> 
or a <tt>&BGRP</tt> line.
Default keyword values may be specified on the <tt>&BGRP</tt> line.
These parameters may be over-ridden on the <tt>&GRP</tt> line.
<li>A group may be defined recurseivly in terms of other groups.
</ul>

<p><h3>Expanding Groups</h3>
A group may be expanded with a specified rotation and translation using:
<tt> &GRP ID='group label' XYZ=x,y,z ROTATE=angle /</tt>
where <em>x,y,z</em> and <em>angle</em> are the translation and rotation amount snapped to the 
  nearest 90 degrees respetively. 
   
<h3>Repeating &OBST's</h3>
A blockage may be repeated by adding the keywords <tt>COPIES</tt> and <tt>DXYZ</tt> to an <tt>&OBST</tt> line.  
<tt>COPIES</tt> specifies the number of final <tt>&OBST</tt> lines and <tt>DXYZ</tt> specifies the geometrical offset between each copy.
<p>Example: blockaid converts the following line
<pre>
&OBST XB=0.0,2.0, 0.0,0.4, 0.0,0.1 COPIES=3 DXYZ=0.0,0.0, 0.3, 0.3, 0.1,0.1 /
</pre>
to
<pre>
&OBST XB=0.0,2.0, 0.0,0.4, 0.0,0.1 /
&OBST XB=0.0, 2.0, 0.0, 0.4, 0.0, 0.1 /
&OBST XB=0.0, 2.0, 0.3, 0.7, 0.1, 0.2 /
</pre>
Note that <tt>blockaid</tt> removes the <tt>COPIES</tt> and <tt>DXYZ</tt> keywords.

<h3>Creating Hollow BLockages</h3>
A hollow blockage may be defined using <tt>&SHELL</tt>.
  This keyword
has all the same options and parameters
as <tt>&OBST</tt>.  In addition <tt>DELTA</tt> 
is used to specify the <em>wall</em> thickness
of the hollow blockage.  Blockaid converts the following <tt>&SHELL</tt> line
<pre>
&SHELL XB=xmin,xmax,ymin,ymax,zmin,zmax DELTA=del ..... /
</pre>
into an <tt>&OBST</tt> and <tt>&HOLE</tt> line given by:
<pre>
&OBST XB=xmin,xmax,ymin,ymax,zmin,zmax ..... /
&HOLE XB=xmin+del,xmax-del,ymin+del,ymax-del,zmin+del,zmin-del /
</pre>

<h3>Creating Libraries</h3>
A collection of groups may be defined and stored in a file.  This file
  is referenced using the <tt>&INCL</tt> keyword as in<br />
  <tt>&INCL FILE='file name' /</tt>

<a name="software"></a>
<h2>Software</h2>
Versions of Blockaid built for Windows and Linux systems are available for testing.
The latest versions may be obtained from the <a href="http://code.google.com/p/fds-smv/downloads/list">FDS/Smokeview download site.</a>
<ul>
<li><a href="blockaid.exe">Blockaid - Win32</a>
<li><a href="blockaid_linux">Blockaid - Linux</a>
<li><a href="blockaid_osx">Blockaid - OSX</a>
</ul>
  
<a name="examples"></a>
  <h2>Examples</h2>
  <h3>Arranging Furniture</h3>
<img src="blockaid1.png" width=320 align="right"/>
<hr size="1">
<font size="-1">
Each set of three couches is expanded using <tt>&GRP ID='LIVE1' ... /</tt> with various translation and rotation amounts applied.
The <tt>LIVE1</tt> group is in turn defined in terms of three <tt>COUCH</tt> groups.
</font>
<hr size="1">
 A group of blockages defining a couch:
<pre>
&BGRP ID='COUCH' ORIGIN=3.0,3.0,0.0 /
&OBST   XB= 3.0, 5.0, 3.5, 3.7, 0.5, 0.9  ,   RGB=128, 64, 32 /
&OBST   XB= 3.0, 3.2, 3.0, 3.5, 0.5, 0.6  ,   RGB= 64, 96, 64 /
&OBST   XB= 4.8, 5.0, 3.0, 3.5, 0.5, 0.6  ,   RGB= 32,128, 96 /
&OBST   XB= 3.0, 5.0, 3.0, 3.7, 0.0, 0.5  ,   RGB=  0,196,128 /
&HOLE   XB= 3.2, 4.8, 3.2, 3.5, 0.0, 0.4  /
&HOLE   XB= 3.1, 4.9, 3.5, 3.7, 0.0, 0.1  /
&EGRP /
</pre>
 
<p>A group of three couches defining a living room arrangement
with a default origin of <tt>ORIGIN=0.0,0.0,0.0</tt>:
<pre>
&BGRP ID='LIVE1' ORIGIN=0.0,0.0,0.0 /
&GRP ID='COUCH' XYZ=0.8,  0.0,0.0 ROTATE=180.0 /
&GRP ID='COUCH' XYZ=0.0,  0.8,0.0 ROTATE=90.0 /
&GRP ID='COUCH' XYZ=0.8,  3.0,0.0 ROTATE=0.0 /
&EGRP /
</pre>


<p>The <tt>&OBST</tt> and <tt>&HOLE</tt> keywords used by FDS to define 
couches in 4 living room arrangements
are expanded using:
<pre>
&GRP ID='LIVE1' XYZ=0.0,0.0,0.0 ROTATE=0.0 /
&GRP ID='LIVE1' XYZ=4.5,0.0,0.0 ROTATE=90.0 /
&GRP ID='LIVE1' XYZ=4.5,4.5 0.0 ROTATE=180.0 /
&GRP ID='LIVE1' XYZ=0.0,4.5,0.0 ROTATE=270.0 /
</pre>
<p>This example may be generated by downloading <a href="blockaid1.fof">blockaid1.fof</a> and
typing the following at a command line:
<pre>
blockaid blockaid1
fds5 blockaid1.fds
smokeview blockaid1
</pre>

<h3>Stairs</h3>
<img src="blockaid2.png" width=360 align="right"/>
<hr size="1">
<font size="-1">
A half set of stairs is defined using a <tt>&OBST</tt> line for each step. Two half stairs are combined forming a full set.
The full set is then replicated three times translating by the height of a story.
</font>
<hr size="1">
<p>Group of blockages to define a set of stairs for one half of a building story:</p>
<pre>
&BGRP ID='STAIRS' /
&OBST   XB= 0.0, 1.0, 0.0, 0.4, 0.0, 0.2  ,   COLOR='RED' /  
&OBST   XB= 0.0, 1.0, 0.3, 0.7, 0.2, 0.4  ,   RGB=100,50,25/  
&OBST   XB= 0.0, 1.0, 0.6, 1.0, 0.4, 0.6  ,   RGB=100,50,25/  
&OBST   XB= 0.0, 1.0, 0.9, 1.3, 0.6, 0.8  ,   RGB=100,50,25/  
&OBST   XB= 0.0, 1.0, 1.2, 1.6, 0.8, 1.0  ,   RGB=100,50,25/  
&OBST   XB= 0.0, 1.0, 1.5, 1.9, 1.0, 1.2  ,   RGB=100,50,25/  
&OBST   XB= 0.0, 1.0, 1.8, 2.2, 1.2, 1.4  ,   RGB=100,50,25/  
&OBST   XB= 0.0, 1.0, 2.1, 2.5, 1.4, 1.6  ,   RGB=100,50,25/  
&OBST   XB= 0.0, 1.0, 2.4, 2.8, 1.6, 1.8  ,   RGB=100,50,25/  
&OBST   XB= 0.0, 1.0, 2.7, 3.1, 1.8, 2.0  ,   RGB=100,50,25/  
&OBST   XB= 0.0, 1.0, 3.0, 3.4, 2.0, 2.2  ,   RGB=100,50,25/  
&OBST   XB= 0.0, 1.0, 3.3, 3.7, 2.2, 2.4  ,   RGB=100,50,25/  
&OBST   XB= 0.0, 1.0, 3.6, 4.0, 2.4, 2.6  ,   RGB=100,50,25/  
&OBST   XB= 0.9, 1.1, 0.0, 4.3, 0.0, 2.8  ,   COLOR='MAGENTA' /  
&OBST   XB= 0.0, 1.0, 3.9, 4.3, 2.6, 2.8  ,   COLOR='GREEN' /  
&OBST   XB= 0.0, 2.0, 4.3, 5.3, 2.6, 2.8  ,   COLOR='BLUE' /  
&EGRP /
</pre>

<p>Combine two sets of <em>half</em> stairs to form a full set of stairs:
<pre>
&BGRP ID='FULLSTAIRS' /
&GRP ID='STAIRS' XYZ=0.0,0.0,0.0 /
&GRP ID='STAIRS' XYZ=0.0,-1.0,2.8 ROTATE=180.0 /
&EGRP /
</pre>

<p>The &OBST keywords used by FDS to define the half-set, full-set and
three story set stairs are expanded by Blockaid using:
<pre>
&GRP ID='STAIRS' XYZ=0.0,1.0,0.0 /

&GRP ID='FULLSTAIRS' XYZ=2.2,1.0,0.0 /

&GRP ID='FULLSTAIRS' XYZ=4.4,1.0,0.0 /
&GRP ID='FULLSTAIRS' XYZ=4.4,1.0,5.6 /
&GRP ID='FULLSTAIRS' XYZ=4.4,1.0,11.2 /
</pre>

<p>This example may be generated by downloading <a href="blockaid2.fof">blockaid2.fof</a> and
typing the following at a command line:
<pre>
blockaid blockaid2
fds5 blockaid2.fds
smokeview blockaid2
</pre>

<h3>Keyword Expansion</h3>
<h4>Before Expansion</h4>
<img src="blockaid3.png" width=320 align="right"/>
Default keyword values may be specified on the <tt>&BGRP</tt> line.
Keywords begin with <strong>#</strong>.
Keyword values may be over-ridden on the <tt>&GRP</tt> line.  Define the group:
<pre>
&BGRP ID='COUCH' ORIGIN=3.0,3.0,0.0 #COLOR='196, 0, 0' /
&OBST   XB= 3.0, 5.0, 3.5, 3.7, 0.5, 0.9  ,   RGB=#COLOR /
&OBST   XB= 3.0, 3.2, 3.0, 3.5, 0.5, 0.6  ,   RGB=#COLOR /
&OBST   XB= 4.8, 5.0, 3.0, 3.5, 0.5, 0.6  ,   RGB=#COLOR /
&OBST   XB= 3.0, 5.0, 3.0, 3.7, 0.0, 0.5  ,   RGB=#COLOR /
&HOLE   XB= 3.2, 4.8, 3.2, 3.5, 0.0, 0.4  /
&HOLE   XB= 3.1, 4.9, 3.5, 3.7, 0.0, 0.1  /
&EGRP /
</pre>
<p>Expand the group:
<pre>
&GRP ID='COUCH' XYZ=0.0,  0.0,0.0 /  Use default color given on &BGRP line
&GRP ID='COUCH' XYZ=0.0,  2.0,0.0 #COLOR='0, 196,   0' /  Override default color
&GRP ID='COUCH' XYZ=0.0,  4.0,0.0 #COLOR='0,   0, 196'/   Override default color
</pre>
<h4>After Expansion</h4>

Expand couch group using #COLOR='0, 196, 0'
<pre>
&OBST   XB= 3.0, 5.0, 3.5, 3.7, 0.5, 0.9  ,   RGB=0, 196,   0 /
&OBST   XB= 3.0, 3.2, 3.0, 3.5, 0.5, 0.6  ,   RGB=0, 196,   0 /
&OBST   XB= 4.8, 5.0, 3.0, 3.5, 0.5, 0.6  ,   RGB=0, 196,   0 /
&OBST   XB= 3.0, 5.0, 3.0, 3.7, 0.0, 0.5  ,   RGB=0, 196,   0 /
&HOLE   XB= 3.2, 4.8, 3.2, 3.5, 0.0, 0.4  /
&HOLE   XB= 3.1, 4.9, 3.5, 3.7, 0.0, 0.1  /
</pre>
<p>This example may be generated by downloading <a href="blockaid3.fof">blockaid3.fof</a> and
typing the following at a command line:
<pre>
blockaid blockaid3
fds5 blockaid3.fds
smokeview blockaid3
</pre>
<a name="other"></a>
<h2>Other Applications of Blockaid</h2>
The original intent of Blockaid was to provide an easy means to define a goup of blockages and then duplicate them one or more times
with differing placements and orientations.  However, with the <tt>&INCL</tt> keyword one may create a database of material properties 
by putting <tt>&MATL</tt> and <tt>&SURF</tt> entries into a separate file.  
Since <tt>Blockaid</tt> creates a self contained FDS input file, there is not a problem 
of data later changing after a case has been run.  This was a problem with <tt>FDS4</tt> and earlier.

<p><hr>
<p><address>
<A HREF="http://www.bfrl.nist.gov" >Building and Fire Research Laboratory</A><BR>
<a href="http://www.nist.gov" >National Institute of Standards and Technology</a><br>
Gaithersburg, MD 20899
</address>


</BODY></HTML>
