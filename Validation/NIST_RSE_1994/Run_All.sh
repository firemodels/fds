#!/bin/bash -f

queue=
while getopts 'q:s' OPTION
do
case $OPTION in
  q)
   queue="$OPTARG"
   ;;
  s)
   export STOPFDS=1
   ;;
esac
done
if [ "$queue" != "" ]; then
   queue="-q $queue"
fi

export SVNROOT=`pwd`/../..
export FDSMPI=$SVNROOT/FDS_Compilation/mpi_intel_linux_64/fds_mpi_intel_linux_64
export RUNFDSMPI="$SVNROOT/Utilities/Scripts/runfdsmpi.sh $queue"
export BASEDIR=`pwd`
export INDIR=Current_Results
source ~/.bashrc_fds intel64

# uncomment following line to stop all cases
# export STOPFDS=1

/bin/sh -c "cp $BASEDIR/FDS_Input_Files/*.fds $BASEDIR/$INDIR"

$RUNFDSMPI 2 $INDIR NIST_RSE_1994_100_RI=5
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_150_RI=5
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_200_RI=5 
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_300_RI=5 
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_400_RI=5 
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_500_RI=5 
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_50_RI=5  
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_600_RI=5 
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_75_RI=5  

$RUNFDSMPI 2 $INDIR NIST_RSE_1994_100_RI=10
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_150_RI=10
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_200_RI=10 
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_300_RI=10 
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_400_RI=10 
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_500_RI=10 
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_50_RI=10  
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_600_RI=10 
$RUNFDSMPI 2 $INDIR NIST_RSE_1994_75_RI=10  

$RUNFDSMPI 8 $INDIR NIST_RSE_1994_100_RI=20
$RUNFDSMPI 8 $INDIR NIST_RSE_1994_150_RI=20
$RUNFDSMPI 8 $INDIR NIST_RSE_1994_200_RI=20 
$RUNFDSMPI 8 $INDIR NIST_RSE_1994_300_RI=20 
$RUNFDSMPI 8 $INDIR NIST_RSE_1994_400_RI=20 
$RUNFDSMPI 8 $INDIR NIST_RSE_1994_500_RI=20 
$RUNFDSMPI 8 $INDIR NIST_RSE_1994_50_RI=20  
$RUNFDSMPI 8 $INDIR NIST_RSE_1994_600_RI=20 
$RUNFDSMPI 8 $INDIR NIST_RSE_1994_75_RI=20
 
echo FDS cases submitted
