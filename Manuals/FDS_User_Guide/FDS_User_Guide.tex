\documentclass[11pt]{book}
\usepackage{times,mathptm}
\usepackage[pdftex]{graphicx}
\usepackage[pdftex,
        colorlinks=true,
        urlcolor=linkblue,     % \href{...}{...} external (URL)
        citecolor=linkred,     % citation number colors
        linkcolor=linknavy,    % \ref{...} and \pageref{...}
        pdftitle={Fire Dynamics Simulator User's Guide},
        pdfauthor={Kevin McGrattan, Simo Hostikka, Jason Floyd},
        pdfsubject={User Guide},
        pdfkeywords={FDS, Fire Model, NIST, BFRL},
        pdfproducer={pdflatex},
        pagebackref,
        pdfpagemode=UseNone,
        bookmarksopen=true,
        plainpages=false]{hyperref}
\usepackage{multirow}
\usepackage{pdfsync}
\usepackage{tocloft}
\usepackage{color}
\usepackage{amsmath}
\definecolor{linknavy}{rgb}{0,0,0.50196}
\definecolor{linkred}{rgb}{1,0,0}
\definecolor{linkblue}{rgb}{0,0,1}
\usepackage{caption}
\usepackage{graphpap}
\usepackage{rotating}
\usepackage{epsfig,psfrag}
\usepackage{geometry}
%\usepackage{tabularx}
\usepackage{longtable}
\usepackage{lscape}
\usepackage{amssymb}
\usepackage{makeidx} % Create index at end of document
\usepackage[nottoc,notlof,notlot]{tocbibind} % Put the bibliography and index in the ToC
\usepackage{float}
\usepackage{lastpage} % Automatic last page number reference.
\usepackage[T1]{fontenc}
\usepackage{upquote}
%\usepackage{array,eqnarray}
\newcommand{\nopart}{\expandafter\def\csname Parent-1\endcsname{}} % To fix table of contents in pdf.
\newcommand{\ct}{\tt\small}
%\newfont{\ct}{cmtt10 at 9pt}
%test2


% The Following commented code makes the ``Draft'' watermark on each page.
%\usepackage{eso-pic}
%\usepackage{type1cm}
%\makeatletter
%   \AddToShipoutPicture{
%     \setlength{\@tempdimb}{.5\paperwidth}
%     \setlength{\@tempdimc}{.5\paperheight}
%     \setlength{\unitlength}{1pt}
%     \put(\strip@pt\@tempdimb,\strip@pt\@tempdimc){
%     \makebox(0,0){\rotatebox{45}{\textcolor[gray]{0.75}{\fontsize{8cm}\selectfont{RC6}}}}}
% }
%\makeatother

\setlength{\textwidth}{6.5in}
\setlength{\textheight}{9.0in}
\setlength{\topmargin}{0.in}
\setlength{\headheight}{0.in}
\setlength{\headsep}{0.in}
\setlength{\parindent}{0.25in}
\setlength{\oddsidemargin}{0.0in}
\setlength{\evensidemargin}{0.0in}


% include commands for bios, titles etc used in multiple documents
\input{../Bibliography/commoncommands}
\newcommand{\dod}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\DoD}[2]{\frac{D #1}{D #2}}
\newcommand{\dsods}[2]{\frac{\partial^2 #1}{\partial #2^2}}
\newcommand{\dx}{\delta x}
\newcommand{\dy}{\delta y}
\newcommand{\dz}{\delta z}
\newcommand{\x}{x}
\newcommand{\y}{y}
\newcommand{\z}{z}
\newcommand{\dt}{\delta t}
\newcommand{\dn}{\delta n}
\newcommand{\hu}{u}
\newcommand{\hv}{v}
\newcommand{\hw}{w}
\newcommand{\bo}{{\bf \omega}}
\newcommand{\oW}{\overline{W}}
\newcommand{\om}{\omega}
\newcommand{\omx}{\omega_x}
\newcommand{\omy}{\omega_y}
\newcommand{\omz}{\omega_z}
\newcommand{\bF}{{\bf F}}
\newcommand{\bof}{{\bf f}}
\newcommand{\dS}{{d\bf S}}
\newcommand{\dA}{{dA}}
\newcommand{\bq}{{\bf q}}
\newcommand{\br}{{\bf r}}
\newcommand{\bu}{{\bf u}}
\newcommand{\bx}{{\bf x}}
\newcommand{\bk}{{\bf k}}
\newcommand{\bv}{{\bf v}}
\newcommand{\bg}{{\bf g}}
\newcommand{\bn}{{\bf n}}
\newcommand{\bS}{{\bf S}}
\newcommand{\bs}{{\bf s}}
\newcommand{\bI}{{\bf I}}
\newcommand{\hp}{{\cal H}}
\newcommand{\trho}{\tilde{\rho}}
\newcommand{\tp}{\tilde{p}}
\newcommand{\bp}{\overline{p}}
\newcommand{\dQ}{\dot{Q}}
\newcommand{\dq}{\dot{q}}
\newcommand{\dm}{\dot{m}}
\newcommand{\dW}{\dot{W}}
\newcommand{\ha}{\frac{1}{2}}
\newcommand{\ft}{\frac{4}{3}}
\newcommand{\ot}{\frac{1}{3}}
\newcommand{\twth}{\frac{2}{3}}
\newcommand{\fofi}{\frac{4}{5}}
\newcommand{\of}{\frac{1}{4}}
\newcommand{\R}{{\cal R}}
\newcommand{\be}{\begin{equation}}
\newcommand{\ee}{\end{equation}}
\newcommand{\RE}{\hbox{Re}}
\newcommand{\LE}{\hbox{Le}}
\newcommand{\PR}{\hbox{Pr}}
\newcommand{\PE}{\hbox{Pe}}
\newcommand{\NU}{\hbox{Nu}}
\newcommand{\SC}{\hbox{Sc}}
\newcommand{\WE}{\hbox{We}}
\newcommand{\COTWO}{{\tiny \hbox{CO}_2}}
\newcommand{\HTWOO}{{\tiny \hbox{H}_2\hbox{O}}}
\newcommand{\OTWO}{{\tiny \hbox{O}_2}}
\newcommand{\NTWO}{{\tiny \hbox{N}_2}}
\newcommand{\CO}{{\tiny \hbox{CO}}}
\newcommand{\F}{{\tiny \hbox{F}}}
\newcommand{\C}{{\tiny \hbox{C}}}
\newcommand{\Hy}{{\tiny \hbox{H}}}
\newcommand{\So}{{\tiny \hbox{S}}}
\newcommand{\M}{{\tiny \hbox{M}}}
\newcommand{\xx}{{\tiny \hbox{x}}}
\newcommand{\yy}{{\tiny \hbox{y}}}
\newcommand{\zz}{{\tiny \hbox{z}}}

\newcommand{\dif}{\mathrm{d}}
\newcommand{\Div}{\nabla\cdot}
\newcommand{\mhalf}{\mbox{$\frac{1}{2}$}}
\newcommand{\tripleprime}{{\prime\prime\prime}}

\newcommand{\figheight}{1.5in}
\newcommand{\figwidth}{3.333333in}
\newcommand{\figwidthb}{2.0in}
\newcommand{\Ra}{$\Rightarrow$}
\newcommand{\parma}{.75}
\newcommand{\parmb}{.5}
\newcommand{\parmc}{0.25}
%\newcommand{\bold}[1]{{\bf #1}}
\newcommand{\etc}{{\em etc}}
\newcommand{\ie}{{\em i.e.}}
\newcommand{\eg}{{\em e.g.}}
\newcommand{\via}{{\em via\ }}
\newcommand{\loadmenu}{\fbox{\ct Load/Unload}}
\newcommand{\blist}{
\begin{list}
{}{
\setlength{\leftmargin}{\parma in}
\setlength{\labelwidth}{\parmb in}
\setlength{\labelsep}{\parmc in}
\setlength{\listparindent}{0.3in}
\setlength{\topsep}{.3in}
\setlength{\parsep}{.0in}
}}
\newcommand{\elist}{\end{list}}
\newcommand{\hitem}[1]{\item[{\bf #1} \hfill]}

\definecolor{AQUAMARINE}{rgb}{0.49804,1.00000,0.83137}
\definecolor{ANTIQUE WHITE}{rgb}{0.98039,0.92157,0.84314}
\definecolor{BEIGE}{rgb}{0.96078,0.96078,0.86275}
\definecolor{BLACK}{rgb}{0.00000,0.00000,0.00000}
\definecolor{BLUE}{rgb}{0.00000,0.00000,1.00000}
\definecolor{BLUE VIOLET}{rgb}{0.54118,0.16863,0.88627}
\definecolor{BRICK}{rgb}{0.61176,0.40000,0.12157}
\definecolor{BROWN}{rgb}{0.64706,0.16471,0.16471}
\definecolor{BURNT SIENNA}{rgb}{0.54118,0.21176,0.05882}
\definecolor{BURNT UMBER}{rgb}{0.54118,0.20000,0.14118}
\definecolor{CADET BLUE}{rgb}{0.37255,0.61961,0.62745}
\definecolor{CHOCOLATE}{rgb}{0.82353,0.41176,0.11765}
\definecolor{COBALT}{rgb}{0.23922,0.34902,0.67059}
\definecolor{CORAL}{rgb}{1.00000,0.49804,0.31373}
\definecolor{CYAN}{rgb}{0.00000,1.00000,1.00000}
\definecolor{DIMGRAY }{rgb}{0.41176,0.41176,0.41176}
\definecolor{EMERALD GREEN}{rgb}{0.00000,0.78824,0.34118}
\definecolor{FIREBRICK}{rgb}{0.69804,0.13333,0.13333}
\definecolor{FLESH}{rgb}{1.00000,0.49020,0.25098}
\definecolor{FOREST GREEN}{rgb}{0.13333,0.54510,0.13333}
\definecolor{GOLD }{rgb}{1.00000,0.84314,0.00000}
\definecolor{GOLDENROD}{rgb}{0.85490,0.64706,0.12549}
\definecolor{GRAY}{rgb}{0.50196,0.50196,0.50196}
\definecolor{GREEN}{rgb}{0.00000,1.00000,0.00000}
\definecolor{GREEN YELLOW}{rgb}{0.67843,1.00000,0.18431}
\definecolor{HONEYDEW}{rgb}{0.94118,1.00000,0.94118}
\definecolor{HOT PINK}{rgb}{1.00000,0.41176,0.70588}
\definecolor{INDIAN RED}{rgb}{0.80392,0.36078,0.36078}
\definecolor{INDIGO}{rgb}{0.29412,0.00000,0.50980}
\definecolor{IVORY}{rgb}{1.00000,1.00000,0.94118}
\definecolor{IVORY BLACK}{rgb}{0.16078,0.14118,0.12941}
\definecolor{KELLY GREEN}{rgb}{0.00000,0.50196,0.00000}
\definecolor{KHAKI}{rgb}{0.94118,0.90196,0.54902}
\definecolor{LAVENDER}{rgb}{0.90196,0.90196,0.98039}
\definecolor{LIME GREEN}{rgb}{0.19608,0.80392,0.19608}
\definecolor{MAGENTA}{rgb}{1.00000,0.00000,1.00000}
\definecolor{MAROON}{rgb}{0.50196,0.00000,0.00000}
\definecolor{MELON}{rgb}{0.89020,0.65882,0.41176}
\definecolor{MIDNIGHT BLUE}{rgb}{0.09804,0.09804,0.43922}
\definecolor{MINT}{rgb}{0.74118,0.98824,0.78824}
\definecolor{NAVY}{rgb}{0.00000,0.00000,0.50196}
\definecolor{OLIVE}{rgb}{0.50196,0.50196,0.00000}
\definecolor{OLIVE DRAB}{rgb}{0.41961,0.55686,0.13725}
\definecolor{ORANGE}{rgb}{1.00000,0.50196,0.00000}
\definecolor{ORANGE RED}{rgb}{1.00000,0.27059,0.00000}
\definecolor{ORCHID}{rgb}{0.85490,0.43922,0.83922}
\definecolor{PINK}{rgb}{1.00000,0.75294,0.79608}
\definecolor{POWDER BLUE}{rgb}{0.69020,0.87843,0.90196}
\definecolor{PURPLE}{rgb}{0.50196,0.00000,0.50196}
\definecolor{RASPBERRY}{rgb}{0.52941,0.14902,0.34118}
\definecolor{RED}{rgb}{1.00000,0.00000,0.00000}
\definecolor{ROYAL BLUE}{rgb}{0.25490,0.41176,0.88235}
\definecolor{SALMON}{rgb}{0.98039,0.50196,0.44706}
\definecolor{SANDY BROWN}{rgb}{0.95686,0.64314,0.37647}
\definecolor{SEA GREEN}{rgb}{0.32941,1.00000,0.62353}
\definecolor{SEPIA}{rgb}{0.36863,0.14902,0.07059}
\definecolor{SIENNA}{rgb}{0.62745,0.32157,0.17647}
\definecolor{SILVER}{rgb}{0.75294,0.75294,0.75294}
\definecolor{SKY BLUE}{rgb}{0.52941,0.80784,0.92157}
\definecolor{SLATEBLUE}{rgb}{0.41569,0.35294,0.80392}
\definecolor{SLATE GRAY}{rgb}{0.43922,0.50196,0.56471}
\definecolor{SPRING GREEN}{rgb}{0.00000,1.00000,0.49804}
\definecolor{STEEL BLUE}{rgb}{0.27451,0.50980,0.70588}
\definecolor{TAN}{rgb}{0.82353,0.70588,0.54902}
\definecolor{TEAL}{rgb}{0.00000,0.50196,0.50196}
\definecolor{THISTLE}{rgb}{0.84706,0.74902,0.84706}
\definecolor{TOMATO }{rgb}{1.00000,0.38824,0.27843}
\definecolor{TURQUOISE}{rgb}{0.25098,0.87843,0.81569}
\definecolor{VIOLET}{rgb}{0.93333,0.50980,0.93333}
\definecolor{VIOLET RED}{rgb}{0.81569,0.12549,0.56471}
\definecolor{WHITE}{rgb}{1.00000,1.00000,1.00000}
\definecolor{YELLOW}{rgb}{1.00000,1.00000,0.00000}

\floatstyle{boxed}
\newfloat{notebox}{H}{lon}
\newfloat{warning}{H}{low}

\makeindex

\begin{document}
\bibliographystyle{unsrt}

\setlength{\leftmargini}{\parindent} % Controls the indenting of the "bullets" in a list

\pagestyle{empty}
\pagenumbering{alph}

\begin{minipage}[t][9in][s]{6.25in}

\huge
\flushright{NIST Special Publication 1019}

\vspace{1in}

\Huge \flushright{Fire Dynamics Simulator \\ User's Guide }

\vspace{.5in}

\normalsize

\large
\flushright{
Kevin McGrattan \\
Randall McDermott \\
Simo Hostikka \\
Jason Floyd \\
 }

 \vspace{0.5in}

\flushright{In cooperation with: \\
VTT Technical Research Centre of Finland  }

\vfill

\flushright{\includegraphics[width=2.in]{FIGURES/nistident_flright_vec}}


\end{minipage}

\newpage
\hspace{5in}
\newpage

\begin{minipage}[t][9in][s]{6.25in}

\huge
\flushright{NIST Special Publication 1019}

\vspace{.75in}

\Huge
\flushright{Fire Dynamics Simulator \\ User's Guide}

\vspace{.25in}

\normalsize
\flushright{
Kevin McGrattan \\
Randall McDermott \\
{\em NIST Building and Fire Research Laboratory} \\
{\em Gaithersburg, Maryland, USA}  \\
\hspace{1in} \\
Simo Hostikka \\
{\em VTT Technical Research Centre of Finland} \\
{\em Espoo, Finland} \\
\hspace{1in} \\
Jason Floyd \\
{\em Hughes Associates, Inc.} \\
{\em Baltimore, Maryland, USA}}

\vspace{.25in}

\flushright{\today \\
FDS Version 6.0 \\
$SVN Repository$~$Revision$}

\vfill

\flushright{\includegraphics[width=1in]{FIGURES/doc.pdf} }

\titlesigs

\end{minipage}

\newpage

\begin{minipage}[t][9in][s]{6.25in}

\flushright{Certain commercial entities, equipment, or materials may be identified in this \\
document in order to describe an experimental procedure or concept adequately. Such \\
identification is not intended to imply recommendation or endorsement by the \\
National Institute of Standards and Technology, nor is it intended to imply that the \\
entities, materials, or equipment are necessarily the best available for the purpose.
}

\vspace{3in}

\large
\flushright{\bf National Institute of Standards and Technology Special Publication 1019 \\
Natl.~Inst.~Stand.~Technol.~Spec.~Publ.~1019, \pageref{LastPage} pages (October 2007) \\
CODEN: NSPUE2 }

\vfill

\flushright{U.S. GOVERNMENT PRINTING OFFICE \\
WASHINGTON: 2007 \\
\rule{3.5in}{0.01in} \\
For sale by the Superintendent of Documents, U.S. Government Printing Office \\
Internet: bookstore.gpo.gov -- Phone: (202) 512-1800 -- Fax: (202) 512-2250 \\
Mail: Stop SSOP, Washington, DC 20402-0001 }
\end{minipage}

\clearpage

\frontmatter

\pagestyle{plain}
\pagenumbering{roman}


\chapter{Preface}

This Guide describes how to use the Fire Dynamics Simulator (FDS). Because new features are added periodically, check
the current version number on the inside front jacket of this manual.

Note that this Guide does not provide the background theory for FDS. A four volume set of companion documents, referred to
collectively as the FDS Technical Reference Guide~\cite{FDS_Math_Guide}, contains details about the governing
equations and numerical methods, model verification, experimental validation, and configuration management.
The FDS User's Guide contains limited information on how to operate Smokeview, the companion
visualization program for FDS. Its full capability is described in the Smokeview User's Guide~\cite{Smokeview_Users_Guide}.


\chapter{Disclaimer}

The US Department of Commerce makes no warranty, expressed or implied, to
users of the Fire Dynamics Simulator (FDS), and accepts no responsibility for its
use. Users of FDS assume sole responsibility under Federal law for
determining the appropriateness of its use in any particular application;
for any conclusions drawn from the results of its use; and for any actions
taken or not taken as a result of analyses performed using these tools.

Users are warned that FDS is intended for use only by those competent in
the fields of fluid dynamics, thermodynamics, combustion, and heat transfer,
and is intended only to supplement the
informed judgment of the qualified user. The software package is a
computer model that may or may not have predictive capability when applied
to a specific set of factual circumstances. Lack of accurate predictions by
the model could lead to erroneous conclusions with regard to fire safety.
All results should be evaluated by an informed user.

Throughout this document, the mention of computer hardware or
commercial software does not constitute endorsement by NIST, nor does
it indicate that the products are necessarily those best suited for the
intended purpose.


\chapter{About the Authors}

\begin{description}
\kmcgrattanbio
\rmcdermottbio
\shostikkabio
\jfloydbio
\end{description}


\chapter{Acknowledgments}

The Fire Dynamics Simulator, in various forms, has been under development for almost 25 years. It was
first released to the public in 2000. Since then, continued improvements
have been made to the software based largely on feedback from its users.
Included below are some who made important contributions related to the application of FDS. \\
\\
\noindent At NIST, thanks to Dan Madrzykowski, Doug Walton, Bob Vettori, Dave Stroup, Steve Kerber and Nelson Bryner,
who have used FDS and Smokeview as part of several investigations of fire fighter line of duty deaths.
As part of these studies, they have provided valuable information on the model's usability and accuracy
when compared to large scale measurements made during fire reconstructions.\\
\\
\noindent Bryan Klein of Thunderhead Engineering assisted in adding cross-referencing functionality to this document, making it easier to
view electronically. He also designed the on-line services for revision control, bug reporting, and general discussion of topics related to FDS. \\
\\
\noindent At VTT, several people have contributed to the FDS development. Topi Sikanen has implemented new capabilities for
the droplet computations. Joonas Ryyn\"{a}nen implemented and documented the new FED/FIC routine. Anna Matala has helped with the
material pyrolysis. Jukka Vaari helped to improve the gas-phase extinction calculations.\\
\\
\noindent The US Nuclear Regulatory Commission has provided financial support for the maintenance and development of FDS,
along with valuable insights into how fire models are used as part of probabilistic risk assessments of nuclear
facilities. Special thanks to Mark Salley, Dave Stroup, and Jason Dreisbach of NRC, and Francisco Joglar of SAIC.\\
\\
\noindent The Society of Fire Protection Engineers (SFPE) sponsors a training course on the use of FDS and Smokeview.
Chris Wood of ArupFire, Dave Sheppard of the US Bureau of Alcohol, Tobacco and Firearms (ATF), and
Doug Carpenter of Combustion Science and Engineering developed the materials for the course, along with
Morgan Hurley of the SFPE.\\
\\
\noindent Prof.~David McGill of Seneca College, Ontario, Canada has conducted a remote-learning course
on the use of FDS, and he has also maintained a web site that has provided valuable suggestions from users.\\
\\
\noindent Prof.~Ian Thomas of Victoria University has also presented short courses on the use of FDS in Australia.
His students have also performed some validation work on compartment fires.\\
\\
\noindent Prof.~Charles Fleischmann and his students at the University of Canterbury, New Zealand, have provided valuable assistance
in improving the documentation and usability of the model.\\
\\
\noindent James White Jr.~of the Western Fire Center has provided valuable feedback on how to
improve the functionality of the model in the area of forensic science.\\
\\
\noindent Paul Hart of Swiss Re, GAP Services, and Pravinray Gandhi of Underwriters Laboratories provided useful suggestions about
water droplet transport on solid objects.\\
\\
\noindent Dr.~Chris Lautenberger of University of California, Berkeley, has helped in development and improving the documentation of the pyrolysis models.\\
\\
\noindent Prof.~Ofodike Ezekoye and Craig Weinschenk of the University of Texas, Austin, helped to formulate and test the thermocouple model within FDS. This work was based on an earlier analysis by Stephen Welsh and Philip Rubini.\\
\\
\noindent Fran\c{c}ois Demouge of the Centre Scientifique et Technique du B\^{a}timent (CSTB) in France assisted with implementation of synthetic turbulence inflow boundary conditions.\\
\\
\noindent Elizabeth Marie-France Blanchard, also of CSTB France, has worked on improvements to the droplet evaporation model.\\
\\



\setlength{\cftsecnumwidth}{0.45in}
\setlength{\cftsubsecnumwidth}{0.5in}
\setlength{\cftfignumwidth}{0.45in}
\setlength{\cfttabnumwidth}{0.45in}

\cleardoublepage
\tableofcontents

\cleardoublepage
\listoffigures

\cleardoublepage
\listoftables

\mainmatter



\part{The Basics of FDS}


\chapter{Introduction}

The software described in this document, Fire Dynamics Simulator (FDS), is a computational
fluid dynamics (CFD) model of fire-driven fluid flow. FDS solves numerically a form of the
Navier-Stokes equations appropriate for low-speed, thermally-driven flow
with an emphasis on smoke and heat transport from fires.
The formulation of the equations and the numerical algorithm are contained in the FDS Technical Reference Guide~\cite{FDS_Math_Guide}.
Verification and Validation of the model are discussed in the FDS Verification~\cite{FDS_Verification_Guide} and Validation~\cite{FDS_Validation_Guide} Guides.

Smokeview is a separate visualization program that is used to display the
results of an FDS simulation.
A detailed description of Smokeview is found in
a separate user's guide~\cite{Smokeview_Users_Guide}.


\section{Features of FDS}

The first version of FDS was publicly released in February 2000.
To date, about half of the applications of the model have been for design of smoke
handling systems and sprinkler/detector activation studies. The other half consist of
residential and industrial fire reconstructions. Throughout its development, FDS has
been aimed at solving practical fire problems in fire protection engineering, while
at the same time providing a tool to study fundamental fire dynamics and combustion.

\begin{description}
\item[Hydrodynamic Model]
FDS solves numerically a form of the Navier-Stokes equations appropriate
for low-speed, thermally-driven flow with an emphasis on
smoke and heat transport from fires. The core algorithm is an
explicit predictor-corrector scheme, second order accurate in space
and time. Turbulence is treated by means of the dynamic Smagorinsky form of
Large Eddy Simulation (LES). It is possible to perform a Direct
Numerical Simulation (DNS) if the underlying numerical mesh is fine
enough. LES is the default mode of operation.

\item[Combustion Model]
For most applications, FDS uses a single step, mixing-controlled chemical reaction which uses three lumped species (a species representing a group of species).
These lumped species are air, fuel, and products. By default the last two lumped species are explicitly
computed. Options are available to include multiple reactions and reactions that not necessarily mixing-controlled.

\item[Radiation Transport] Radiative heat transfer is included in the
model via the solution of the radiation transport equation for a
gray gas, and in some limited cases using a wide band
model.  The equation is solved using a technique similar to finite
volume methods for convective transport, thus the name given to it is
the Finite Volume Method (FVM).  Using approximately 100 discrete
angles, the finite volume solver requires about 20~\% of the total CPU
time of a calculation, a modest cost given the complexity of radiation
heat transfer. The absorption coefficients of the gas-soot mixtures
are computed using the RadCal narrow-band model.  Liquid droplets can
absorb and scatter thermal radiation. This is important in cases
involving mist sprinklers, but also plays a role in all sprinkler
cases.  The absorption and scattering coefficients are based on Mie
theory.

\item[Geometry]
FDS approximates the governing equations on a rectilinear mesh.
Rectangular obstructions are forced to conform with the underlying mesh.

\item[Multiple Meshes] This is a term used to describe the use of
more than one rectangular mesh in a calculation. It is possible to prescribe
more than one rectangular mesh to handle cases where the computational
domain is not easily embedded within a single mesh.

\item[Parallel Processing] It is possible to run an FDS calculation on
more than one computer using the Message Passing Interface (MPI). Details
can be found in Section~\ref{info:parallelprocessing}.

\item[Boundary Conditions]
All solid surfaces are assigned thermal boundary conditions, plus
information about the burning behavior of the material.
Heat and mass transfer to and from solid surfaces is
usually handled with empirical correlations, although it is possible
to compute directly the heat and mass transfer when performing a
Direct Numerical Simulation (DNS).

\end{description}





\chapter{Getting Started}
\label{info:gettingstarted}

FDS is a computer program that solves equations that describe the evolution of fire.
It is a Fortran program that reads input parameters from a text file, computes
a numerical solution to the governing equations, and writes user-specified output data to files.
Smokeview is a companion program that reads FDS output files and produces animations on the computer screen.
Smokeview has a simple menu-driven interface. FDS does not. However, there are various third-party programs
that have been developed to generate the text file containing the input parameters needed by FDS.

This guide describes how to obtain FDS and Smokeview and how to use FDS.
A separate document~\cite{Smokeview_Users_Guide} describes how to use Smokeview. Other tools related to
FDS and Smokeview can be found at the web site.

\section{How to Acquire FDS and Smokeview}
\label{info:acquire}
Detailed instructions on how to download executables, manuals, source-code and related utilities,
can be found on the FDS-SMV Website
\href{http://fire.nist.gov/fds}{{\ct http://fire.nist.gov/fds}}.
The typical FDS/Smokeview distribution consists of an installation package or compressed archive,
which is available for MS Windows, Mac~OS~X, and Linux.
For other operating systems, consult the web site.

\begin{warning}
\noindent
If you ever want to keep an older version of FDS and Smokeview, copy the installation directory to some other
place so that it is not overwritten during the updated installation.
\end{warning}

\section{Computer Hardware Requirements}

FDS requires a fast CPU\footnote{Central Processing Unit} and a substantial amount of random-access memory (RAM) to run efficiently.
For minimum specifications, the system should have a 1~GHz CPU, and at least 512~MB RAM.
The CPU speed will determine how long the computation will take to finish, while the amount
of RAM will determine how many mesh cells can be held in memory.
A large hard drive is required to store the output of the calculations. It is not unusual for
the output of a single calculation to consume more than 1~GB of storage space.

Most computers purchased within the past few years are adequate for running Smokeview
with the caveat that additional memory (RAM) should be purchased to bring the
memory size up to at least 512~MB. This is so the computer can display results without
``swapping" to disk. For Smokeview it is also important to obtain a fast graphics card
for the PC used to display the results of the FDS computations.

For Multi-Mesh calculations, the MPI version of FDS will operate over standard 100 Mbps networks.
A Gigabit or 1000 Mbps network will further reduce latency and improve data transfer rates between nodes.


\section{Computer Operating System (OS) and Software Requirements}

The goal of making FDS and Smokeview publicly available has been to enable
practicing fire protection engineers to perform fairly sophisticated
fire simulations at a reasonable cost. Thus, FDS and Smokeview have been
designed for computers running Microsoft Windows, Mac OS X, and various
implementations of Unix/Linux.

\begin{description}
\item[{\bf MS Windows}]
An installation package is available for Windows operating system.
It is not recommended to run FDS/Smokeview under any version of MS Windows
released prior to Windows 2000.

\item[{\bf Mac OS X}]
A zip archive is available for Intel architectures.
Mac OS X 10.4.x or better is recommended, versions of OS X prior to 10.4.x are not
officially supported. Users can always download the latest version of FDS source and
compile FDS for other versions of OS X (See Appendix~\ref{info:compilation} for details).

\item[{\bf Linux}]
Pre-compiled executables are available that can be installed in an appropriate directory. Note that
the installation package is simply an archive and no path variables are set. If the pre-compiled
FDS executable does not work (usually because of library incompatibilities),
the FDS Fortran source code can be downloaded and compiled (See Appendix~\ref{info:compilation} for details). If Smokeview
does not work on the Linux workstation, you can use the Windows version to view FDS output.

\item[{\bf Unix}]
There are no pre-compiled versions of FDS for the various flavors of Unix. However, the advice for Linux applies
equally as well to Unix.

\item[{\bf FDS in Parallel}] For those wishing to use multiple computers to run a single FDS calculation,
MPI (Message Passing Interface) must be installed on each of the
computers within the network that will be used for FDS computations.
\end{description}



\chapter{Running FDS}
\label{info:runningFDS}

This chapter describes the procedure to run an FDS calculation.
The primary requirement for any calculation is an FDS input file. The creation of an
input file is covered in detail in Part~\ref{info:inputfilecreation}.
If you are new to FDS and Smokeview, it is strongly suggested that you start with an existing data file, run it as is,
and then make the appropriate changes to the input file for the
desired scenario. Sample input files are included as part of the standard installation.
By running a sample case, you become familiar with the procedure, learn how to use Smokeview, and
ensure that your computer is up to the task before embarking on
learning how to create new input files.



\section{Starting an FDS Calculation}

FDS can be run from the command prompt, or with a third party Graphical User Interface (GUI).
In the discussion to follow, it is assumed that FDS is being run from the command prompt.
FDS can be run on a single computer, using only one CPU, or it can be run on multiple
computers and use multiple CPUs. For any operating system, there are two FDS executable files.
The single CPU 32 bit Windows executable is called {\bf fds\_win\_32.exe}.
The parallel executable is called {\bf fds\_mpi\_win\_32.exe}. The letters ``mpi'' in the filename denote
Message Passing Interface (MPI), which will be discussed below.

\begin{warning}
\noindent
Note that the input file for both single and parallel versions of FDS are the same.
In fact, it is recommended that before embarking on parallel processing, you should run your input
file in serial mode to ensure that it is properly set up.
\end{warning}


\subsection{Starting an FDS Calculation (Single Processor Version)}

Sample input files are provided with the program for new users who
are encouraged to first run a sample calculation before attempting to
write an input file. Input files are typically given names that help identify the particular case, followed by the
suffix {\ct .fds}. Suppose you want to run an input file called {\bf job\_name.fds}.
You can start FDS from a DOS or Linux/Unix command prompt as follows:


\subsubsection{MS Windows}

Open up a Command Prompt window (click Start, then Run, then type ``cmd''), and change directories (``cd'') to where the
input file for the case is located, then run the code by typing at the command prompt
\begin{verbatim}
fds_win_32 job_name.fds
\end{verbatim}
On a 64 bit machine, substitute 64 for 32.
The character string {\ct job\_name} is usually
designated within the input file as the {\ct CHID}. It is recommended that the
name of the input file and the {\ct CHID} be the same so that all of the
files associated with a given calculation have a consistent name.  The progress of a simulation is indicated by diagnostic output that is written
out onto the screen. Detailed diagnostic information is automatically
written to a file {\bf CHID.out}, where {\ct CHID} is a character
string, usually the same as {\ct job\_name}, designated in the input file..
Screen output can be redirected to a file via the alternative command
\begin{verbatim}
fds_win_32 job_name.fds > job_name.err
\end{verbatim}
Note that it is also possible to associate the extention ``fds'' with the FDS executable directly, thereby making FDS run by
double-clicking on the input file. If you do this, note that error messages will be written to the file called {\ct job\_name.out}. Also, if you
associate the input file with the FDS executable, be careful not to accidently double-click on the input file when trying to edit it.
This action will cause previously generated output files to be over-written.



\subsubsection{Mac OS X, Unix, Linux}

Depending on the type of installation, you may need to set various
path or environment variables in order to invoke FDS without a full
path reference to the executable. The easiest way to do this is via
an ``alias'' in your shell start-up script. For the example below,
it is assumed that {\ct fds} is an alias for the specific executable used.
You may also need to ``chmod + x'' to make the file executable.
Once this is done, run FDS from the command line by typing:
\begin{verbatim}
fds job_name.fds
\end{verbatim}
The input parameters are read from the file {\bf job\_name.fds},
and error statements and other diagnostics are written out to the screen.
To run the job in the background:
\begin{verbatim}
fds job_name.fds >& job_name.err &
\end{verbatim}
Note that in the latter case, the screen output is stored in the file
{\bf job\_name.err} and the detailed diagnostics are saved automatically
in a file {\bf CHID.out}, where {\ct CHID} is a character string, usually
the same as {\ct job\_name}, designated in the input file. It is preferable
to run jobs in the background so as to free the console for other uses.



\subsection{Starting an FDS Calculation (Multiple Processor Version)}
\label{info:parallelprocessing}

Running FDS across a network using multiple processors and multiple
banks of memory (RAM) is more complicated than running the single
processor version.  More is required of the user to make the
connections between the machines as seamless as possible. This
involves creating accounts for a given user on each machine, sharing
directories, increasing the speed of the network, making each machine
aware of the others, {\em etc.}  Some of these details are handled by
the parallel-processing software, others are not. Undoubtedly the
procedure will be simplified in years to come, but for the moment,
parallel-processing is still relatively new and requires more
expertise in terms of understanding both the operating system and the
network connections of a given set of computers.

FDS uses MPI (Message-Passing Interface)~\cite{Gropp:1} to allow
multiple computers to run a single FDS job. The main idea is that you must break up the FDS domain into multiple meshes, and then
the flow field in each mesh is computed as a different {\em process.}
Note the subtle difference between these
terms -- a {\em process} does not have the same meaning as a {\em processor}.
The {\em process} can be thought of as a ``task'' that you would see in
the Windows Task Manager or by executing the ``top'' command on a Linux/Unix machine. The {\em processor} refers to the
computer hardware. A single
{\em processor} may run multiple {\em processes}, for example.
The computation on a given FDS mesh is thought of as an individual {\em process}, and
MPI handles the transfer of information between these {\em processes}.
Usually, each mesh is assigned its own {\em process} in a parallel calculation,
although it is also possible
assign multiple meshes to a single {\em process}.
In this way, large meshes can be computed on dedicated {\em processors}, while
smaller meshes can be clustered together in a single {\em process} running on a single {\em processor},
without the need for MPI message passing between themselves.

Also note that FDS refers to its meshes by the numbers 1, 2, 3, and so on, whereas MPI refers to its processes by the numbers
0, 1, 2, and so on. Thus, Mesh~1 is assigned to Process~0; Mesh~2 to Process~1, and so on.
As a user, you do not explicitly number the meshes or the processes yourself, but
error statements from FDS or from MPI might refer to the meshes or processes by number.
As an example, if a five mesh FDS case is run in parallel, the first printout (usually to the screen unless
otherwise directed) is:

\footnotesize
\begin{verbatim}
Process  4 of  4 is running on fire65
Process  3 of  4 is running on fire64
Process  2 of  4 is running on fire63
Process  0 of  4 is running on fire61
Process  1 of  4 is running on fire62
Mesh   1 is assigned to Process   0
Mesh   2 is assigned to Process   1
Mesh   3 is assigned to Process   2
Mesh   4 is assigned to Process   3
Mesh   5 is assigned to Process   4
\end{verbatim} \normalsize
This means that 5 processes (numbered 0 to 4) have started on the computers named fire61, fire62, {\em etc}., and that each mesh is being computed as an individual process on the
individual computers. Each computer has its own memory (RAM), and MPI is the protocol by which information is passed from process to process during the calculation. Note that these
computers may have multiple processors, and each processor may have multiple ``cores.'' You have control over how many processes get assigned to each computer, but you may or may not
have control over how the processes are handled by a given computer. That depends on the operating system and the particular version of MPI. For example, the computer named fire62 happens to have
two quad-core processors, and all five meshes could have been assigned to run as five individual processes all on fire62. Whether or not this is the best strategy is still a subject of
research and heavily dependent on the technical specifications of the OS and hardware.


There are different implementations of MPI, much like there
are different Fortran and C compilers. Each implementation is
essentially a library of subroutines called from FDS that transfer
data from one process to another across a fast network. The format of
the subroutine calls has been widely accepted in the community,
allowing different vendors and organizations the freedom to develop
better software while working within an open framework.

The way FDS is executed in parallel depends on which implementation of
MPI has been installed.  At NIST, the parallel version of FDS is
presently run on Windows PCs connected by the Local Area Network (LAN,
100~Mbps) or on a cluster of Linux PCs linked together with a
dedicated, fast (1000 Mbps) network.  The Windows computers use
MPICH2, a free implementation of MPI from Argonne National Laboratory,
USA.

\subsubsection{MPICH2}

With MPICH2, a parallel FDS calculation can be invoked either
from the command line or by using a Graphical User Interface
(GUI). After the MPICH2 libraries are installed on each computer and
the necessary directories are shared, FDS is run using the command
issued from one of the computers
\begin{verbatim}
mpiexec -file config.txt
\end{verbatim}
where {\bf config.txt} is a text file containing the name and location
of the FDS executable, name of the FDS input file, the working directory,
and the names of the various computers that are to run the job. For
example, the {\bf config.txt} file might look like this for a job run at NIST with computers named
fire\_1, fire\_2, and fire\_3:
\begin{verbatim}
exe \\fire_1.nist.gov\NIST\FDS\fds_mpi_win_32.exe job_name.fds
dir \\fire_1.nist.gov\Projects\
hosts
fire_1.nist.gov 2
fire_2.nist.gov 1
fire_3.nist.gov 2
\end{verbatim}
The numbers following the ``host'' machines represent the number of threads to run on that particular machine. In this
example, 5 threads are run for an FDS calculation that has 5 meshes. The {\ct exe} and {\ct dir} directories need to be shared, with the
latter having read and write permissions.

\begin{warning}
\noindent
All the computers must be able to access the executable and the working directory on {\ct fire\_1}.
This is achieved under Windows by ``sharing.'' Under Unix/Linux and OS X, the process involves cross-mounting the file
systems of the various machines.
\end{warning}


\subsubsection{Open MPI}

Both at VTT and NIST, we use Open MPI, an open source MPI-2 implementation that is developed and maintained by a consortium of academic,
research, and industry partners.
With Open~MPI, FDS is run using the command
\begin{verbatim}
mpirun -np 5 fds_mpi_linux_64 job_name.fds
\end{verbatim}
where the 5 indicates that 5 processors are to be used. In this case, the executable {\bf fds\_mpi\_linux\_64} is located in the
working directory, but you can invoke it by its full path name. To make the process run in the background
\begin{verbatim}
mpirun -np 5 fds_mpi_linux_32 job_name.fds >& job_name.err &
\end{verbatim}
The file {\bf job\_name.err} contains what is normally printed out to the screen.


\begin{warning}
\noindent
Note that there are several other implementations of MPI, some free, some not.
Support for the software varies, thus FDS has been designed to run under any of the
more popular versions without too much user intervention. However, keep in mind
that parallel processing is a relatively new area of computer science,
and there are bound to be painful growth spurts in the years ahead.
\end{warning}


\section{Monitoring Progress}

Diagnostics for a given calculation are written into a file called {\bf CHID.out}.
The CPU usage and simulation time are written here, so you can see how
far along the program has progressed. At any time during a calculation,
Smokeview can be run and the progress can be checked visually.
To stop a calculation before its scheduled time, either
kill the process, or preferably create a file in the same directory as
the output files called {\bf CHID.stop}. The existence of this
file stops the program gracefully, causing it to dump out the
latest flow variables for viewing in Smokeview.

Since calculations can be hours or days long, there is a restart
feature in FDS. Details of how to use this feature
are given in Section~\ref{info:restart}. Briefly, specify at the
beginning of calculation how often a ``restart'' file should be saved.
Should something happen to disrupt the calculation, like a power
outage, the calculation can be restarted from the time the last restart
file was saved.

It is also possible to control the stop time and the dumping of restart files by using
control functions as described in Section~\ref{info:CTRL}.



\chapter{User Support}

It is not unusual over the course of a
project to run into various problems, some related to FDS, some related to your computer.
FDS is not a typical PC application. It is an intensive calculation that can push your computer's
processor and memory to its limits. In fact, there are no hardwired bounds within FDS that
prevent you from starting a calculation that is too large for your hardware.
Even if your machine has adequate memory (RAM), you can still easily set up calculations that can require
weeks or months to complete. It is difficult to predict at the start of a simulation just how long and
how much memory will be required. Learn how to monitor the resource usage of your computer.
Start with small calculations and build your way up.

Although many features in FDS are fairly mature, there are many that are not. FDS is used for
practical engineering applications, but also for research in fire and combustion. As you become
more familiar with the software, you will inevitably run into areas that are of current research
interest. Indeed, burning a roomful of ordinary furniture is one of the most challenging applications
of the model. So be patient, and learn to dissect a given scenario into its constitutive parts.
For example, do not attempt to simulate a fire spreading through an entire floor of a
building unless you have simulated the burning of the various combustibles with relatively small calculations.

Along with the FDS User's Guide, there are resources available on the Internet.
These include an ``Issue Tracker,'' that allows you to report bugs, request new features, and ask specific clarifying questions,
and ``Group Discussions,'' which support more general topics than just specific problems.
Before using these on-line resources, it is important to first try to solve your own
problems by performing simple test calculations, or debugging your input file. The next few sections
provide a list of error statements and suggestions on how to solve problems.

\section{The Version Number}

If you encounter problems with FDS, it is crucial that you submit, along with a description of the problem, the FDS version number. Each release of
FDS comes with a version number like 5.2.6, where the first number is the {\em major} release, the second is the {\em minor} release, and the
third is the {\em maintenance} release. Major releases occur every few years, and as the name implies significantly change the functionality of the model.
Minor releases occur every few months, and may cause minor changes in functionality. Release notes can help you decide whether the changes should effect the
type of applications that you typically do. Maintenance releases are just bug fixes, and should not affect code functionality. To get the version number, just
type the executable at the command prompt without an input file, and the relevant information will appear,
along with a date of compilation (useful to you) and a so-called SVN number (useful to us).  The SVN number refers to
the Subversion repository number of the source code. It allows us to go back in time and recover the exact source code files
that were used to build that executable.

Get in the habit of checking the version number of your executable, periodically checking for new releases which
might already have addressed your problem, and telling us what version you are using if you report a problem.





\section{Common Error Statements}

An FDS calculation may end before the specified time limit.
Following is a list of common error statements and how to diagnose the problems:
\begin{description}
\item[{\bf Input File Errors}:]
The most common errors in FDS are due to mis-typed input statements.
These errors result in the immediate halting of the program and a statement like, ``ERROR: Problem
with the HEAD line.'' For these errors, check the line in the input file named in the error statement.
Make sure the parameter names are spelled correctly. Make sure that a / (forward slash)
is put at the end of each namelist entry. Make sure that the right type of information is
being provided for each parameter, like whether one real number is expected, or several integers, or
whatever. Make sure there are no non-ASCII characters being used, as can sometimes happen when text is
cut and pasted from other applications or word-processing software. Make sure zeros are zeros and
O's are O's. Make sure 1's are not !'s. Make sure apostrophes are used to designate character strings.
Make sure the text file on a Unix/Linux machine was not created on a DOS machine, and {\em vice versa}.
Make sure that all the parameters listed are still being used -- new versions of FDS often drop or
change parameters to force you to re-examine old input files.

\item [{\bf Numerical Instability Errors}:]
It is possible that during an FDS calculation the flow
velocity at some location in the domain can increase due to numerical error causing the time step
size to decrease to a point where logic in the code decides that the results are unphysical
and stops the calculation with an error message in the file {\bf CHID.out}.
In these cases, FDS ends by dumping out one final
Plot3D file giving the user some means by which to see where the
error is occurring within the computational domain. Usually, a numerical
instability can be identified by fictitiously large velocity vectors emanating from
a small region within the domain. Common causes of such instabilities are
mesh cells that have an aspect ratio larger than 2 to 1, high speed flow through a small
opening, a sudden change in the heat release rate, or any number of sudden changes to the
flow field. There are various ways to solve the problem, depending on the situation.
Try to diagnose and fix the problem before reporting it. It is difficult
for anyone but the originator of the input file to diagnose the problem.

\item[{\bf Inadequate Computer Resources}:]
The calculation might be using more RAM than the machine
has (you will see an error message like ``ERROR: Memory allocation failed for ZZ in the routine INIT'') , or the output files could have used up all the available disk space. In these situations, the
computer may or may not produce an intelligible error message. Sometimes the computer is just
unresponsive. It is your responsibility to ensure that the computer has adequate resources to
do the calculation. Remember, there is no limit to how big or how long FDS calculations can be -- it
depends on the resources of the computer. For any new simulation, try running the case with a modest-sized mesh,
and gradually make refinements until the computer can no longer handle it. Then back off
somewhat on the size of the calculation so that the computer can comfortably run the
case. Trying to run with 90~\% to 100~\% of computer resources is risky.
In fact, for a typical 32~bit Windows PC with 4 GB RAM, only 2 GB will be available to FDS, based on user feedback.
If you want to run bigger cases, consider buying a computer with a 64~bit operating system or break up the
calculation into multiple meshes and use parallel processing. If you are using a Linix/Unix machine, make sure that
the stacksize is unlimited, which will allow FDS to access as much of the RAM as possible. Changing the stacksize
limit differs with each shell type, so it is best to do an on-line search to find out how to ensure that your
stacksize is unlimited.

\item[{\bf Run-Time Errors}:]
An error occurs either within the computer operating system or the
FDS program. An error message is printed out by the operating system of
the computer onto the screen or into the diagnostic output file. This
message is most often unintelligible to most people, including the programmers,
although occasionally one might get a small clue if there is mention of a specific problem,
like ``stack overflow,'' ``divide by zero,'' or ``file write error, unit=...''
Sometimes the error message simply refers to a ``Segmentation Fault.''
These errors may be caused by a bug in FDS, for example if a number is divided by zero,
or an array is used before it is allocated, or any number of other problems.
Before reporting the error to the Issue Tracker, try to systematically simplify the
input file until the error goes away. This process usually brings to light some feature of the
calculation responsible for the problem and helps in the debugging.

\item[{\bf File Writing Errors}:]
Occasionally, especially on Windows machines, FDS fails because it is not permitted to write to a file. A typical error statement reads:
\footnotesize
\begin{verbatim}
forrtl: severe (47): write to READONLY file, unit 8598, file C:\Users\...\
\end{verbatim} \normalsize
The unit, in this case 8598, is just a number that FDS has associated with one of the output files. If this error occurs just after the start of
the calculation, you can try adding the phrase \\ {\ct FLUSH\_FILE\_BUFFERS=.FALSE.} \\ on the {\ct DUMP} line of the input file (see Section~\ref{info:DUMP}).
This will prevent FDS from attempting to flush the contents of the internal buffers, something it does to make it possible to view the FDS output
in Smokeview during the FDS simulation.

\item[{\bf Poisson Initialization}:]
Sometimes at the very start of a calculation, an error
appears stating that there is a problem with the ``Poisson initialization.'' The equation for
pressure in FDS is known as the Poisson equation. The Poisson solver consists of large system
of linear equations that must be initialized at the start of the calculation.
Most often, an error in the initialization step is due to a mesh {\ct IJK} dimension
being less than 4 (except in the case of a two-dimensional calculation). It is also possible that something is
fundamentally wrong with the coordinates of the computational domain. Diagnose the problem by
checking the {\ct MESH} lines in the input file.
\end{description}


\section{Support Requests and Bug Tracking}

Because FDS development is on-going, problems will inevitably occur
with various routines and features. The developers need to know if a certain
feature is not working, and reporting problems is encouraged. However, the
problem must be clearly identified. The best way to do this is to simplify
the input file as much as possible so that the bug can be diagnosed.
Also, limit the bug reports to those features that clearly do not work.
Physical problems such as fires that do not ignite, flames that do not
spread, {\em etc.}, may be related to the mesh resolution or scenario
formulation and need to be investigated first by the user before being
reported. If an error message originates from the operating system as
opposed to FDS, first investigate some of the more obvious possibilities,
such as memory size, disk space, {\em etc.}

If that does not solve the problem, report the problem with as much information about the error message and
circumstances related to the problem. The input file should be simplified
as much as possible so that the bug occurs early in the calculation.
Attach the simplified input file if necessary, following the instructions provided at the web site.
In this way, the developers can quickly run the problem input file and hopefully diagnose the problem.

\begin{warning}
\noindent
NOTE: Reports of specific problems, feature requests and enhancements
should be posted to the Issue Tracker and not the Discussion Group.
\end{warning}


\section{Known Issues}
\label{info:Known_Issues}

As a result of collecting feedback from FDS users over roughly a decade, we have identified a number of features in FDS that can be problematic for a
variety of reasons.
Table~\ref{tbl:Known_Issues} lists these features that are either under development, or that have been cited a number of
times by users who have observed spurious behavior, inconsistent or inaccurate results, fragility, and so on. For those interested in
FDS model development, this list is ripe for further research. For those who use FDS for engineering applications, these may be features to avoid until
they can be made more reliable and robust.

\begin{sidewaystable}[ht]
\caption[FDS features with known issues or problems.]{Parameters or features known to have problems related to accuracy, numerical stability, robustness,
sensitivity, and so on.}
\label{tbl:Known_Issues}
\begin{tabular}{|p{2.in}|p{2.1in}|p{2.1in}|p{2.1in}|}
\hline
Feature & Description & Symptom of Problem & Recommendation \\
\hline \hline
Liquid Fuels    & Pyrolysis model of evaporating liquid fuel  & Inaccuracies found in comparison to experiments; physical and numerical sensitivity  & Research usage only    \\ \hline
Solid Fuels     & Pyrolysis model of solid fuel  & Results in FDS 5.4 and beyond different than previous versions  & Read Section \ref{info:solid_pyrolysis}   \\ \hline
\end{tabular}
\end{sidewaystable}






\part{Writing an FDS Input File}
\label{info:inputfilecreation}



\chapter{The Basic Structure of an Input File}
\label{info:fdsBasic}


\section{Naming the Job}

The operation of FDS is based on a single ASCII\footnote{ASCII -- American Standard Code
for Information Interchange. There are 256 characters that make up the standard ASCII text.} text file containing parameters organized into
{\em namelist}\footnote{A {\em namelist} is a Fortran input record.} groups.
The input file provides FDS  with all of the necessary information to
describe the scenario.
The input file is saved with a name such as {\ct job\_name.fds},
where {\ct job\_name} is any character string that helps to identify
the simulation. If this same string is repeated under the {\ct HEAD} namelist group within the
input file, then all of the output files associated with the calculation will then have this common name.

There should be no blank spaces in the job name. Instead use the underscore
character to represent a space.  Using an underscore characters instead of a space also applies
to the general practice of naming directories on your system.

Be aware that FDS will simply over-write the output files of a given case if its assigned
name is the same. This is convenient when developing an input file because you save on disk space. Just be careful
not to overwrite a calculation that you want to keep.



\section{Namelist Formatting}

\noindent
Parameters are specified within the input file by using {\em namelist} formatted records.
Each namelist record begins with the ampersand character, {\ct \&}, followed
immediately by the name of the namelist group, then a comma-delimited list of the input parameters, and
finally a forward slash, {\ct /}. For example, the line

\footnotesize
\begin{verbatim}
&DUMP NFRAMES=1800, DT_HRR=10., DT_DEVC=10., DT_PROF=30. /
\end{verbatim}

\normalsize \noindent
sets various values of parameters contained in the {\ct DUMP} namelist group. The meanings of these various parameters will
be explained in subsequent chapters. The namelist records can span multiple lines in the input file, but just be sure to
end the record with a / or else the data will not be understood. Do not add anything to a namelist line other than the
parameters and values appropriate for that group. Otherwise, FDS will stop immediately upon execution.

Parameters within a namelist record can be separated by either commas, spaces, or line breaks. It is recommended that you use
commas or line breaks, and never use tab stops. Some machines do not recognize the spaces or the length of the tab stops.
Comments and notes can be written into the file so long as nothing comes
before the {\ct \&} except a space and nothing comes between the ampersand
{\ct \&} and the slash {\ct /} except appropriate parameters corresponding
to that particular namelist group.

The parameters in the input file can be integers ({\ct T\_END=5400}),
real numbers ({\ct CO\_YIELD=0.008}), groups of real numbers or integers
({\ct XYZ=6.04,0.28,3.65}) or ({\ct IJK=90,36,38}),
character strings:

{\ct CHID='WTC\_05\_v5'}

\noindent
groups of character strings:

{\ct SURF\_IDS='burner','STEEL','BRICK'}

\noindent
or logical parameters:

{\ct POROUS\_FLOOR=.FALSE.}

\noindent
A logical parameter is either
{\ct .TRUE.} or {\ct .FALSE.} -- the periods are a
Fortran convention. Character strings that are listed in
this User's Manual must be copied exactly as written -- the code
is case sensitive and underscores {\em do} matter.

Most of the input parameters are simply real or integer scalars, like {\ct DT=0.02}, but sometimes the inputs are
multidimensional arrays. For example, when describing a particular solid surface, you need to express the mass
fractions of multiple materials that are to be found in multiple layers. The input array {\ct MATL\_MASS\_FRACTION(IL,IC)} is
intended to convey to FDS the mass fraction of component {\ct IC} of layer {\ct IL}. For example, if the mass fraction of the
second material of the third layer is 0.5, then write

{\ct MATL\_MASS\_FRACTION(3,2)=0.5}

\noindent
To enter more than one mass fraction, use
this notation:

{\ct MATL\_MASS\_FRACTION(1,1:3)=0.5,0.4,0.1}

\noindent
which means that the first three materials of layer 1 have
mass fractions of 0.5, 0.4, and 0.1, respectively. The notation {\ct 1:3} means array element 1 through 3, inclusive.



\begin{warning}
\noindent
Note that character strings can be enclosed either by apostrophes or quotation marks.
Be careful not to create the input file by pasting text from something other than a
simple text editor, in which case the punctuation marks may not transfer
properly into the text file.
\end{warning}

\begin{warning}
\noindent
Note that depending on compiler and operating system, some text file encodings may not work on all systems.
If file reading errors occur and no typographical errors can be found in the input file, try saving the input file using a different encoding.
It does not appear that current Fortran compilers support the UTF-8 encoding standard for reading Namelist inputs.
\end{warning}



\section{Input File Structure}

In general, the namelist records can be entered in any order in the input file, but it is a good idea to organize them
in some systematic way. Typically, general information is listed near the top of the input file, and detailed information, like
obstructions, devices, and so on, are listed below. FDS scans the entire input file each time it processes a particular namelist group.
With some text editors, it has been noticed that the last line of the file is often not read by FDS because of the presence of an
``end of file'' character.
To ensure that FDS reads the entire input file, add

\footnotesize
\begin{verbatim}
&TAIL /
\end{verbatim}
\normalsize \noindent
as the last line at the end of the input file. This completes the file from {\ct \&HEAD} to {\ct \&TAIL}. FDS does not even look for
this last line. It just forces the ``end of file'' character past relevant input.

Another general rule of thumb when writing input files is to only add to the file parameters that are to change from their
default value. That way, you can more easily distinguish between what you want and what FDS wants.
Add comments liberally to the file, so long as
these comments do not fall within the namelist records.

The general structure of an input file is shown below, with many
lines of the original validation input file\footnote{The actual input file, WTC\_05.fds, is part of the FDS
Validation Suite} removed for clarity.

\footnotesize
\begin{verbatim}
&HEAD CHID='WTC_05', TITLE='WTC Phase 1, Test 5' /
&MESH IJK=90,36,38, XB=-1.0,8.0,-1.8,1.8,0.0,3.82 /
&TIME T_END=5400. /
&MISC TMPA=20. /
&DUMP NFRAMES=1800, DT_HRR=10., DT_DEVC=10., DT_PROF=30. /

&REAC FUEL       = 'HEPTANE'
      FYI        = 'Heptane, C_7 H_16'
      C          = 7.
      H          = 16.
      CO_YIELD   = 0.008
      SOOT_YIELD = 0.015 /

&OBST XB= 3.5, 4.5,-1.0, 1.0, 0.0, 0.0, SURF_ID='STEEL FLANGE' /  Fire Pan
...
&SURF ID        = 'STEEL FLANGE'
      COLOR     = 'BLACK'
      MATL_ID   = 'STEEL'
      BACKING   = 'EXPOSED'
      THICKNESS = 0.0063 /
...
&VENT MB='XMIN', SURF_ID='OPEN' /
...
&SLCF PBY=0.0, QUANTITY='TEMPERATURE', VECTOR=.TRUE. /
...
&BNDF QUANTITY='GAUGE HEAT FLUX' /
...
&DEVC XYZ=6.04,0.28,3.65, QUANTITY='OXYGEN', ID='EO2_FDS' /
...
&TAIL / End of file.
\end{verbatim}
\normalsize

\noindent
It is recommended that when looking at a new scenario,
first select a pre-written input file that resembles the case,
make the necessary changes, then run the case at fairly low
resolution to determine if the geometry is set up correctly.
It is best to start off with a relatively simple file that captures the main
features of the problem without getting tied down with too much detail that
might mask a fundamental flaw in the calculation. Initial calculations ought
to be meshed coarsely so that the run times are less than an hour and
corrections can easily be made without wasting too much time.
As you learn how to write input files, you will continually
run and re-run your case as you add in complexity.

Table~\ref{tbl:namelistgroups} provides a quick reference to all the namelist parameters and
where you can find the reference to where it is introduced in the document and the
table containing all of the keywords for each group.

\vspace{\baselineskip}
\begin{table}[ht]
\begin{center}
\caption{Namelist Group Reference Table}
\label{tbl:namelistgroups}
\begin{tabular}{|c|l|c|c|}
\hline
Group Name  & Namelist Group Description& Reference Section & Parameter Table  \\ \hline
{\ct BNDF}  & Boundary File Output         & \ref{info:BNDF} & \ref{tbl:BNDF}  \\ \hline
{\ct CLIP}  & Min/Max Clipping Parameters  & \ref{info:CLIP} & \ref{tbl:CLIP}  \\ \hline
{\ct CTRL}  & Control Function Parameters  & \ref{info:CTRL} & \ref{tbl:CTRL}  \\ \hline
{\ct DEVC}  & Device Parameters            & \ref{info:DEVC} & \ref{tbl:DEVC}  \\ \hline
{\ct DUMP}  & Output Parameters            & \ref{info:DUMP} & \ref{tbl:DUMP}  \\ \hline
{\ct HEAD}  & Input File Header            & \ref{info:HEAD} & \ref{tbl:HEAD}  \\ \hline
{\ct HOLE}  & Obstruction Cutout           & \ref{info:HOLE} & \ref{tbl:HOLE}  \\ \hline
{\ct HVAC}  & Heating, Vent., Air Cond.    & \ref{info:HVAC} & \ref{tbl:HVAC}  \\ \hline
{\ct INIT}  & Initial Condition            & \ref{info:INIT} & \ref{tbl:INIT}  \\ \hline
{\ct ISOF}  & Isosurface File Output       & \ref{info:ISOF} & \ref{tbl:ISOF}  \\ \hline
{\ct MATL}  & Material Property            & \ref{info:MATL} & \ref{tbl:MATL}  \\ \hline
{\ct MESH}  & Mesh Parameters              & \ref{info:MESH} & \ref{tbl:MESH}  \\ \hline
{\ct MISC}  & Miscellaneous                & \ref{info:MISC} & \ref{tbl:MISC}  \\ \hline
{\ct MULT}  & Multiplier Parameters        & \ref{info:MULT} & \ref{tbl:MULT}  \\ \hline
{\ct OBST}  & Obstruction                  & \ref{info:OBST} & \ref{tbl:OBST}  \\ \hline
{\ct PART}  & Lagrangian Particle          & \ref{info:PART} & \ref{tbl:PART}  \\ \hline
{\ct PRES}  & Pressure Solver Parameters   & \ref{info:PRES} & \ref{tbl:PRES}  \\ \hline
{\ct PROF}  & Profile Output               & \ref{info:PROF} & \ref{tbl:PROF}  \\ \hline
{\ct PROP}  & Device Property              & \ref{info:PROP} & \ref{tbl:PROP}  \\ \hline
{\ct RADI}  & Radiation                    & \ref{info:RADI} & \ref{tbl:RADI}  \\ \hline
{\ct RAMP}  & Ramp Profile                 & \ref{info:RAMP} & \ref{tbl:RAMP}  \\ \hline
{\ct REAC}  & Reactions                    & \ref{info:REAC} & \ref{tbl:REAC}  \\ \hline
{\ct SLCF}  & Slice File Output            & \ref{info:SLCF} & \ref{tbl:SLCF}  \\ \hline
{\ct SMIX}  & Species Mixtures             & \ref{info:SMIX} & \ref{tbl:SMIX}  \\ \hline
{\ct SPEC}  & Species Parameters           & \ref{info:SPEC} & \ref{tbl:SPEC}  \\ \hline
{\ct SURF}  & Surface Properties           & \ref{info:SURF} & \ref{tbl:SURF}  \\ \hline
{\ct TABL}  & Tabulated Particle Data      & \ref{info:TABL} & \ref{tbl:TABL}  \\ \hline
{\ct TIME}  & Simulation Time              & \ref{info:TIME} & \ref{tbl:TIME}  \\ \hline
%{\ct TREE}  & Conical Tree Parameters      & \ref{info:TREE} & \ref{tbl:TREE}  \\ \hline
{\ct TRNX}  & Mesh Stretching              & \ref{info:TRNX} & \ref{tbl:TRNX}  \\ \hline
{\ct VENT}  & Vent Parameters              & \ref{info:VENT} & \ref{tbl:VENT}  \\ \hline
{\ct ZONE}  & Pressure Zone Parameters     & \ref{info:ZONE} & \ref{tbl:ZONE}  \\ \hline
\end{tabular}
\end{center}
\end{table}


\clearpage

\chapter{Setting the Bounds of Time and Space}

This chapter describes global input parameters that affect the general scope of the simulation, like
the simulation time and the size and extent of the computational domain. Essentially, these parameters
establish the spatial and temporal coordinate systems that are used by all other components of the simulation, which is
why these parameters are usually listed at the top of the input file and why they are described here first.


\section{Naming the Job: The \texorpdfstring{{\tt HEAD}}{HEAD} Namelist Group (Table \ref{tbl:HEAD})}
\label{info:HEAD}

The first thing to do when setting up an input file is to give the
job a name.  The name of the job is important because often a project
involves numerous simulations in which case the names of the individual
simulations should be meaningful and help to organize the project.  The namelist group {\ct HEAD} contains
two parameters, as in this example:

\footnotesize
\begin{verbatim}
&HEAD CHID='WTC_05', TITLE='WTC Phase 1, Test 5' /
\end{verbatim}
\normalsize

\begin{description}
\item {\ct CHID} is a string of 30 characters or less used to tag the output files.
If, for example, {\ct CHID='WTC\_05'}, it is convenient to
name the input data file {\ct WTC\_05\_v5.fds} so that the input file
can be associated with the output files. No periods or spaces are allowed in
{\ct CHID} because the output files are tagged with suffixes that
are meaningful to certain computer operating systems.  If {\ct CHID} is not
specified, then it will be set to the name of the input file minus everything at and beyond the first period.
\item {\ct TITLE} is a string of 60 characters or less that describes the
simulation. It is simply descriptive text that is passed to various output files.
\end{description}


\section{Simulation Time: The \texorpdfstring{{\tt TIME}}{TIME} Namelist Group (Table \ref{tbl:TIME})}
\label{info:TIME}

{\ct TIME} is the name of a group of parameters time define the time
duration of the simulation and the initial time step used to advance
the solution of the discretized equations.

\subsection{Basics}
\label{info:TIME_Basics}

Usually, only the
duration of the simulation is required on this line, via the
parameter {\ct T\_END}. The default is 1 s.
For example, the following line will instruct FDS to run the simulation for 5400 seconds.

\footnotesize
\begin{verbatim}
&TIME T_END=5400. /
\end{verbatim}

\normalsize
\noindent If {\ct T\_END} is set to zero, only the set-up work is performed,
allowing you to quickly check the geometry in Smokeview.

If you want the time line to start at a number other than zero, you can use the parameter
{\ct T\_BEGIN} to specify the time written to file for the first time step.
This would be useful for matching time lines of experimental data or video recordings.

\begin{warning}
Time-based {\ct RAMP}s are evaluated using the actual time if the {\ct RAMP} activation time is the same as
{\ct T\_BEGIN}; otherwise, they are evaluated using the time from when the {\ct RAMP} activates.  Therefore, if you are
setting {\ct T\_BEGIN} in order to test a time-based {\ct CTRL} or {\ct DEVC} that is ultimately
linked to a {\ct RAMP}, then you should set {\ct T\_BEGIN} to be slightly less than the time the {\ct RAMP} will activate.
For example if you are testing a {\ct VENT} that is to open at 10~s whose {\ct SURF\_ID} uses a {\ct RAMP},
{\ct T\_BEGIN} should be set slightly less than 10~s.
\end{warning}

\subsection{Special Topic: Controlling the Time Step}
\label{info:TIME_Control}

The initial time step size can be specified with
{\ct DT}. This parameter is normally set automatically by dividing the size of a mesh cell by the
characteristic velocity of the flow.
During the calculation, the time step is adjusted so that the CFL (Courant, Friedrichs, Lewy) condition is
satisfied. The default value of {\ct DT} is $5 \, (\dx \, \dy \, \dz)^\ot/\sqrt{gH}$ s, where
$\dx$, $\dy$, and $\dz$ are the dimensions of the smallest mesh
cell, $H$ is the height of the computational domain, and $g$ is the acceleration of gravity. Note that by default the
time step is never allowed to increase above its initial value. To allow this to happen, set
{\ct RESTRICT\_TIME\_STEP=.FALSE.}

\begin{warning}
If something sudden is to happen right at the start of a simulation,
like a sprinkler activation, it is a good idea to set the initial time step
to avoid a numerical instability caused by too large a time step.
Experiment with different values of {\ct DT} by monitoring the initial time step sizes
recorded in the output file {\bf job\_name.out}.
\end{warning}

\noindent
One additional parameter in the {\ct TIME} group is {\ct SYNCHRONIZE}, a
logical flag ({\ct .TRUE.} or {\ct .FALSE.}) indicating that in a
multi-mesh computation the time step for each mesh should be the same, thus
ensuring that each mesh is processed each iteration. More details can
be found in Section~\ref{info:multimesh}. The default value of {\ct SYNCHRONIZE} is {\ct .TRUE.}

Finally, if you want to prevent FDS from automatically changing the time step, set \\
{\ct LOCK\_TIME\_STEP=.TRUE.} \\
on the {\ct TIME} line, in which case the specified
time step, {\ct DT}, will not be adjusted.
This parameter is intended for diagnostic purposes only, for example, timing program execution. It can lead to
numerical instabilities if the initial time step is set too high.



\subsection{Special Topic: Steady-State Applications}
\label{info:steady_state}

Occasionally, there are applications in which only the steady-state solution (in a time-averaged sense) is desired. However, the time necessary to
heat the walls to steady-state can make the cost of the calculation prohibitive. In these situations, if you specify a
{\ct TIME\_SHRINK\_FACTOR} of, say, 10, the specific heats of the various materials is reduced by a factor of 10, speeding up the heating
of these materials roughly by 10. An example of an application where this parameter is handy is a validation experiment where a steady heat source
warms up a compartment to a nearly equilibrium state at which point time-averaged flow quantities are measured.



\newpage

\section{Computational Meshes: The \texorpdfstring{{\tt MESH}}{MESH} Namelist Group (Table \ref{tbl:MESH})}
\label{info:MESH}

All FDS calculations must be performed within a domain that is made up
of rectilinear volumes called {\em meshes}. Each mesh is divided into rectangular {\em cells},
the number of which depends on the desired resolution of the flow dynamics.
{\ct MESH} is the namelist group that defines the computational domain.

\subsection{Basics}
\label{info:MESH_Basics}

A mesh is a single right parallelepiped, {\em i.e.} a box.
The coordinate system within a mesh conforms to the right hand rule.
The origin point of a mesh is defined by the first, third
and fifth values of the real number sextuplet, {\ct XB}, and the opposite
corner is defined by the second, fourth and sixth values.
For example,

\footnotesize
\begin{verbatim}
&MESH IJK=10,20,30, XB=0.0,1.0,0.0,2.0,0.0,3.0 /
\end{verbatim}

\normalsize
\noindent
defines a mesh that spans the volume starting at the origin and extending 1~m in the positive
$x$ direction, 2~m in the positive $y$ direction, and 3~m in the positive $z$ direction.
The mesh is subdivided into uniform cells via the parameter
{\ct IJK}. In this example, the mesh is divided into 10~cm cubes.
If it is desired that the mesh cells in a particular direction not be uniform in size,
then the namelist groups {\ct TRNX}, {\ct TRNY} and/or {\ct TRNZ} may be used to alter the
uniformity of the mesh (See Section~\ref{info:TRNX}).

Any obstructions or vents that extend beyond the boundary of the mesh
are cut off at the boundary. There is no penalty for defining objects
outside of the mesh, and these objects will not appear in Smokeview.

\begin{warning}
\noindent
Note that it is best if the mesh cells resemble cubes, that is, the
length, width and height of the cells ought to be roughly the same.
\end{warning}

\noindent
Because an important part of the calculation uses a Poisson solver based on
Fast Fourier Transforms (FFTs) in the $y$ and $z$ directions, the second and third dimensions
of the mesh should each be of the form $2^l \, 3^m \, 5^n$, where
$l$, $m$ and $n$ are integers. For example,
$64=2^6$, $72=2^33^2$ and $108=2^23^3$ are good mesh cell divisions, but 37, 99 and 109 are not.
The first number of mesh cell divisions (the {\ct I} in {\ct IJK}) does not use FFTs and need not be given as a
product of small numbers. However, you should experiment with different values of
divisions to ensure that those that are ultimately used do not unduly slow down the calculation.

Here is a list of numbers between 1 and 1024 that can be factored
down to 2's, 3's and 5's:

\footnotesize
\begin{verbatim}
   2     3     4     5     6     8     9    10    12    15    16    18    20    24    25
  27    30    32    36    40    45    48    50    54    60    64    72    75    80    81
  90    96   100   108   120   125   128   135   144   150   160   162   180   192   200
 216   225   240   243   250   256   270   288   300   320   324   360   375   384   400
 405   432   450   480   486   500   512   540   576   600   625   640   648   675   720
 729   750   768   800   810   864   900   960   972  1000  1024
\end{verbatim}
\normalsize


\subsection{Two-Dimensional and Axially-Symmetric Calculations}
\label{info:2D}

The governing equations solved in FDS are written in terms of a
three dimensional Cartesian coordinate system. However,
a two dimensional Cartesian or two dimensional cylindrical
(axially-symmetric) calculation can be performed by setting the {\ct J} in the {\ct IJK} triplet
to 1 on the {\ct MESH} line. For axial symmetry, add {\ct CYLINDRICAL=.TRUE.} to the
{\ct MESH} line, and the coordinate $x$ is then interpreted as the radial coordinate $r$.
No boundary conditions should be set at the planes $y=\hbox{\ct YMIN=XB(3)}$ or
$y=\hbox{\ct YMAX=XB(4)}$, nor at $r=\hbox{\ct XMIN=XB(1)}$ in an axially-symmetric
calculation in which $r=\hbox{\ct XB(1)=0}$. For better visualizations, the difference between
{\ct XB(4)} and {\ct XB(3)} should be small so that the Smokeview rendering appears to be in 2-D.
An example of an axially-symmetric helium plume ({\bf helium\_2d}) is given in Section~\ref{baroclinic_torque}.


\subsection{Multiple Meshes and Parallel Processing}
\label{info:multimesh}


\begin{figure}[ht!]
\includegraphics[width=\textwidth]{FIGURES/hallways.jpg}
\caption{An example of a multiple-mesh geometry.}
\label{fig:domain}
\end{figure}

The term ``multiple meshes'' means that the computational domain consists of
more than one computational mesh, usually connected although this is not
required. If more than one mesh is used, there should be a
{\ct MESH} line for each. The order in which these
lines are entered in the input file matters. In general, the meshes should be entered
from finest to coarsest. FDS assumes that a mesh listed first in the input file has
precedence over a mesh listed second if the two meshes overlap.
Meshes can overlap, abut, or not touch at all. In the last case, essentially two separate
calculations are performed with no communication at all between them. Obstructions and vents are entered
in terms of the overall coordinate system and need not apply to any one particular mesh.
Each mesh checks the coordinates of all the geometric
entities and decides whether or not they are to be included.

To run FDS in parallel using MPI (Message Passing Interface), you {\bf must} break up the computational domain into
multiple meshes so that the workload can be divided among the available processors.
In general, it is better to run multiple mesh cases with the parallel version of FDS if you have the
computers available, but be aware that two computers will not necessarily finish the job in half the time as one. For the
parallel version to work well, there has to be a comparable number of cells in each mesh, or otherwise most of the computers will sit idle
waiting for the one with the largest mesh to finish processing each time step. You can use multiple meshes even when running the serial version of FDS,
in which case one CPU will serially process each mesh, one by one. Why do this?
For one, if you set {\ct SYNCHRONIZE=.FALSE.} on the {\ct TIME} line,
then in each mesh, the governing equations will be solved with a time
step based on the flow speed within that particular mesh. Because each
mesh can have different time steps, this technique can save CPU time by
requiring relatively coarse meshes to be updated only when necessary.
Coarse meshes are best used in regions where temporal and spatial gradients of key
quantities are small or unimportant. Be aware, however, that unsynchronized time steps are more likely to lead to numerical instabilities.

By default, the time steps in each mesh are synchronized.
With this setting, all meshes are active each iteration.
For a single-processor, multiple mesh calculation, this strategy reduces
and may even eliminate any benefit seen by using multiple meshes. However, in a
parallel calculation, if a particular mesh is inactive during an iteration because
it is not ready to be updated, then the processor assigned to that mesh is also
inactive. Forcing the mesh to be updated with a smaller than ideal time step does not
cost anything since that processor would have been idle anyway. The benefit is that
there is a tighter connection between meshes.
It is also possible to synchronize the time step in only a select set of meshes. To do
this, add {\ct SYNCHRONIZE=.TRUE.} to the appropriate {\ct MESH} lines and then add
{\ct SYNCHRONIZE=.FALSE.} to the {\ct TIME} line.

Usually in a multi-mesh calculation, each mesh is assigned its own process, and each process its own processor. However, it is possible to assign more than one
mesh to a single process, and it is possible to assign more than one process to a single processor. Consider a case that involves six meshes:

\footnotesize
\begin{verbatim}
&MESH ID='mesh1', IJK=..., XB=..., MPI_PROCESS=0 /
&MESH ID='mesh2', IJK=..., XB=..., MPI_PROCESS=1 /
&MESH ID='mesh3', IJK=..., XB=..., MPI_PROCESS=1 /
&MESH ID='mesh4', IJK=..., XB=..., MPI_PROCESS=2 /
&MESH ID='mesh5', IJK=..., XB=..., MPI_PROCESS=3 /
&MESH ID='mesh6', IJK=..., XB=..., MPI_PROCESS=3 /
\end{verbatim} \normalsize

\noindent
The parameter {\ct MPI\_PROCESS} instructs FDS to assign that particular mesh to the given process. In this case, only four processes are to be started, numbered
0 through 3. Note that the processes need to be invoked in ascending order, starting with 0. Why would you do this?
Suppose you only have four processors available for this
job. By starting only four processes instead of six, you can save time because `mesh2' and `mesh3'
can communicate directly with each other without having to transmit data
using MPI calls over the network. Same goes for `mesh5' and `mesh6'.
In essence, it is as if these mesh pairs are neighbors and need not send mail to each other via the postal system. The letters can just be
walked next door.

For cases involving many meshes, you might want to assign them colors using either the character string {\ct COLOR} or the integer triplet {\ct RGB}. You may also
want to consider using the multiplying feature to easily create a 3-D array of meshes. See Section~\ref{info:MULT} for details.

Some parallel computing environments do not have a centralized file system, in which case FDS must write the output files for each process to a separate disk. If
your computing cluster does not have a {\ct SHARED\_FILE\_SYSTEM}, then set this parameter to {\ct .FALSE.} on the {\ct MISC} line.


\subsection{Mesh Alignment}

Whether
the calculation is to be run on a single processor, or on multiple processors,
the rules of prescribing multiple meshes are similar, with some issues to keep in mind. The most important rule of mesh alignment is that
abutting cells ought to have the same cross sectional area, or integral ratios, as shown in Fig.~\ref{fig:meshes}.
\begin{figure}[p]
\begin{picture}(325,600)(0,-20)
\setlength{\unitlength}{0.02in}

\newsavebox{\mygraph}
\savebox{\mygraph}{
\begin{picture}(0,0)
\thinlines
\multiput( 0,20)(0,20){3}{\line(1,0){100}}
\multiput(20, 0)(20,0){4}{\line(0,1){80}}
\thicklines
\put(0,0){\framebox(100,80){ }}
\end{picture} }

\newsavebox{\myfinegraph}
\savebox{\myfinegraph}{
\begin{picture}(0,0)
\thinlines
\multiput( 0,10)(0,10){7}{\line(1,0){100}}
\multiput(10, 0)(10,0){9}{\line(0,1){80}}
\thicklines
\put(0,0){\framebox(100,80){ }}
\end{picture} }

\newsavebox{\myotherfinegraph}
\savebox{\myotherfinegraph}{
\begin{picture}(0,0)
\thinlines
\multiput( 0, 8)(0, 8){9}{\line(1,0){100}}
\multiput(10, 0)(10,0){9}{\line(0,1){80}}
\thicklines
\put(0,0){\framebox(100,80){ }}
\end{picture} }

\put(  0,320){\usebox{\mygraph}}
\put(100,320){\usebox{\mygraph}}
\put(230,370){\parbox{1.9in}{This is the ideal kind of mesh to mesh alignment.}}

\put(  0,220){\usebox{\mygraph}}
\put(100,220){\usebox{\myfinegraph}}
\put(230,270){\parbox{1.9in}{This is allowed so long as there are an integral number of fine cells abutting each coarse cell.}}

\put(  0,100){\usebox{\mygraph}}
\put( 80,120){\usebox{\myfinegraph}}
\put(230,170){\parbox{1.9in}{This is allowed, but of questionable value.}}

\put(  0,  0){\usebox{\mygraph}}
\put(100,  0){\usebox{\myotherfinegraph}}
\put(230, 50){\parbox{1.9in}{This is no longer allowed in FDS 5.1 and higher.}}
\end{picture}

\caption{Rules governing the alignment of meshes.}
\label{fig:meshes}
\end{figure}
The following rules of thumb should also be followed when setting up a multiple mesh calculation:
\begin{itemize}
\item Avoid putting mesh boundaries where critical action is expected,
especially fire. Sometimes fire spread from mesh to mesh cannot be
avoided, but if at all possible try to keep mesh interfaces relatively
free of complicated phenomena since the exchange of information across
mesh boundaries is not yet as accurate as cell to cell exchanges within one
mesh.

\item In general, there is little advantage to overlapping meshes because
information is only exchanged at exterior boundaries. This means that a mesh that is completely embedded within
another receives information at its exterior boundary, but the larger
mesh receives no information from the mesh embedded within. Essentially,
the larger, usually coarser, mesh is doing its own simulation of the scenario
and is not affected by the smaller, usually finer, mesh embedded within it.
Details within the fine mesh, especially related to fire growth and spread,
may not be picked up by the coarse mesh. In such cases, it is preferable to
isolate the detailed fire behavior within one mesh, and position coarser
meshes at the exterior boundary of the fine mesh. Then the fine and coarse
meshes mutually exchange information.

\item Be careful when using the shortcut convention of declaring an
entire face of the domain to be an {\ct OPEN} vent. Every mesh
takes on this attribute. See Section~\ref{info:VENT} for more details.

\item If a planar obstruction is close to where two meshes abut, make sure that each
mesh ``sees'' the obstruction. If the obstruction is even a millimeter outside of one
of the meshes, that mesh does not account for it, in which case information is not
transferred properly between meshes.
\end{itemize}


\subsubsection{Accuracy of the Parallel Calculation}

Experiment with different mesh configurations using relatively
coarse mesh cells to ensure that information is being transferred
properly from mesh to mesh. There are two issues of concern. First,
does it appear that the flow is being badly affected by the mesh boundary? If so,
try to move the mesh boundaries away from areas of activity. Second,
is there too much of a jump in cell size from one mesh to another? If so, consider
whether the loss of information moving from a fine to a coarse mesh is tolerable.


\subsubsection{Efficiency of the Parallel Calculation}

When running a case with multiple meshes in parallel, the efficiency of the
calculation can be checked as follows: (1) Set {\ct SYNCHRONIZE=.TRUE.} on the
{\ct TIME} line, (2) Let the program run several hundred time steps, (3) Calculate
the difference in wall clock time between two 100 iteration print outs in
the file {\bf CHID.out} (see Section~\ref{out:file}).
Divide the time difference by 100. This is the average
elapsed wall clock time per time step, (4) Look at the {\ct CPU/step} for each mesh. The
largest value should be less than, but close to, the average elapsed wall clock time.
The efficiency of the parallel calculation is the maximum {\ct CPU/step} divided by
the average wall clock time per step. If this number is between 90~\% and 100~\%, the
parallel code is working well.



\subsection{Mesh Stretching: The \texorpdfstring{{\tt TRNX}}{TRNX}, \texorpdfstring{{\tt TRNY}}{TRNY} and/or \texorpdfstring{{\tt TRNZ}}{TRNZ} Namelist Groups (Table \ref{tbl:TRNX})}
\label{info:TRNX}

By default the mesh cells that fill the computational domain are uniform in size.
However, it is possible to specify that the cells be non-uniform in one or two
\begin{figure}[ht]
\begin{minipage}[t]{3.1in}
\includegraphics[width=3.1in]{FIGURES/piece_wise_linear}
\vspace{-.2in}
\caption{Piecewise-Linear Mesh Transformation.}
\label{fig:grid2}
\end{minipage}
\hfill
\begin{minipage}[t]{3.1in}
\includegraphics[width=3.1in]{FIGURES/polygonal}
\vspace{-.2in}
\caption{Polynomial Mesh Transformation.}
\label{fig:grid1}
\end{minipage}
\end{figure}
of the three coordinate directions.
For a given coordinate direction, $x$, $y$ or $z$, a function can be
prescribed that transforms the uniformly-spaced mesh to a
non-uniformly spaced mesh. {\bf Be careful with mesh transformations!}  If you shrink cells in one
region you must stretch cells somewhere else. When one
or two coordinate directions are transformed, the aspect ratio of the
mesh cells in the 3D mesh will vary. To be on the safe side, transformations
that alter the aspect ratio of cells beyond 2 or 3 should be avoided.
Keep in mind that the large eddy simulation technique is based on the
assumption that the numerical mesh should be fine enough to allow the formation
of eddies that are responsible for the mixing. In general, eddy formation
is limited by the largest dimension of a mesh cell, thus shrinking the
mesh resolution in one or two directions may not necessarily lead to a better
simulation if the third dimension is large.

\begin{warning}
\noindent
Transformations, in general, reduce the efficiency of the computation,
with two coordinate transformations impairing efficiency more
than a transformation in one coordinate direction. Experiment with different meshing
strategies to see how much of a penalty you will pay.
\end{warning}

\noindent
Here is an example of how to do a mesh transformation. Suppose your mesh is defined

\footnotesize
\begin{verbatim}
&MESH IJK=15,10,20, XB=0.0,1.5,1.2,2.2,3.2,5.2 /
\end{verbatim}
\normalsize

\noindent
and you want to alter the uniform spacing in the $x$ direction.
First, refer to the figures above.
You need to define a function $x = f(\xi)$ that maps the uniformly-spaced
{\em Computational Coordinate} ({\ct CC}) $0 \le \xi \le 1.5$
to the {\em Physical Coordinate} ({\ct PC}) $0 \le x \le 1.5$.
The function has three mandatory constraints: it must be monotonic (always increasing),
it must map $\xi=0$ to $x=0$, and it must map $\xi=1.5$ to $x=1.5$.
The default transformation function is $f(\xi) = \xi$ for a uniform mesh, but you need not do
anything in this case.

Two types of transformation functions are allowed. The first, and
simplest, is a piecewise-linear function.
Figure~\ref{fig:grid2} gives an example of a piecewise-linear transformation.
The graph indicates how 15 uniformly spaced mesh cells
along the horizontal axis are transformed into 15 non-uniformly spaced cells along the vertical axis.
In this case, the function is made up of straight line segments
connecting points ({\ct CC},{\ct PC}), in increasing order, as specified by the following lines in the input file:

\footnotesize
\begin{verbatim}
 &TRNX CC=0.30, PC=0.50, MESH_NUMBER=2 /
 &TRNX CC=1.20, PC=1.00, MESH_NUMBER=2 /
\end{verbatim} \normalsize

\noindent
The parameter {\ct CC} refers to the Computational Coordinate, $\xi$, located
on the horizontal axis; {\ct PC} is the Physical Coordinate, $x$, located on
the vertical axis.  The slopes of the
line segments in the plot indicate whether the mesh is being stretched (slopes greater
than 1) or shrunk (slopes less than 1). The tricky part about this
process is that you usually have a desired shrinking/stretching strategy
for the Physical Coordinate on the vertical axis, and must work backwards
to determine what the corresponding points should be for the Computational
Coordinate on the horizontal axis. Note that the above transformation is
applied to the second mesh in a multiple mesh job.

The second type of transformation is
a polynomial function whose constraints are of the form
$$ \frac{d^n f(\hbox{\ct CC})}{d\xi^n} = \hbox{\ct PC}   $$
Figure~\ref{fig:grid1} gives an example of a polynomial transformation, for which
the parameters are specified (assuming that this is the third mesh):

\footnotesize
\begin{verbatim}
&TRNX IDERIV=0, CC=0.75, PC=0.75, MESH_NUMBER=3 /
&TRNX IDERIV=1, CC=0.75, PC=0.50, MESH_NUMBER=3 /
\end{verbatim} \normalsize

\noindent
which correspond to the constraints
$f(0.75)=0.75$ and $\frac{df}{d\xi}(0.75) = 0.5$, or, in words, the
function maps 0.75 into 0.75 and the slope of the function at
$\xi=0.75$ is 0.5~.
The transform function must also pass through the points (0,0) and (1.5,1.5), meaning that
FDS must compute the coefficients for the
cubic polynomial $f(\xi) = c_0 + c_1 \, \xi + c_2 \, \xi^2 + c_3 \, \xi^3$.
More constraints on the function lead to higher order polynomial functions, so be careful about too many constraints which could lead
to non-monotonic functions.
The monotonicity of the function is checked by the
program and an error message is produced if it is not monotonic.

\begin{warning}
\noindent
Do not specify either linear transformation points or {\ct IDERIV=0} points at coordinate values corresponding to
the mesh boundaries.
\end{warning}

\subsection{Mesh Resolution}

A common question asked by new FDS users is, ``What should my grid spacing be?''
The answer is not easy because it depends considerably on what you are trying
to accomplish. In general, you should build an FDS input file using a relatively
coarse mesh, and then gradually refine the mesh until you do not see
appreciable differences in your results. This is referred to as a mesh sensitivity study.

For simulations involving buoyant plumes, a measure of how well the flow field is resolved is given by the
non-dimensional expression $D^*/\dx$, where $D^*$ is a characteristic
fire diameter
\be D^* = \left(
     \frac{\dQ}{\rho_\infty \, c_p \, T_\infty \, \sqrt{g} }
     \right)^\frac{2}{5}  \ee
and $\dx$ is the nominal size of a mesh cell\footnote{The characteristic
fire diameter is related to the characteristic fire size via the
relation $Q^* = (D^*/D)^{5/2}$, where $D$ is the physical diameter of the
fire.}. The quantity, $\dQ$, is the total heat release rate of the fire. If it changes over time, you should consider the
corresponding change in resolution. The quantity $D^*/\dx$ can be thought of as the number of computational cells
spanning the characteristic (not necessarily the physical) diameter of the fire.
The more cells spanning the fire, the better the resolution of the
calculation. It is better to assess the quality of the mesh in terms
of this non-dimensional parameter, rather than an absolute mesh cell size.
For example, a cell size of 10~cm may be ``adequate,'' in some sense,
for evaluating the spread of smoke and heat through a building from a
sizable fire, but may not be appropriate to study a very small, smoldering source\footnote{For the validation study sponsored by the
U.S. Nuclear Regulatory Commission~\cite{NUREG_1824}, the $D^*/\dx$ values ranged from 4 to 16.}.

\begin{warning}
\noindent
There are a number of special output quantities that provide local measures of grid resolution. See Section~\ref{info:meshquality} for details.
\end{warning}



\clearpage
\section{Miscellaneous Parameters: The \texorpdfstring{{\tt MISC}}{MISC} Namelist Group (Table \ref{tbl:MISC})}
\label{info:MISC}

{\ct MISC} is the namelist group of global miscellaneous input parameters. It contains parameters that do not logically fit into any other category.

\subsection{Basics}

\label{info:MISC_Basics}

Only one {\ct MISC} line should be entered in the data file. For example, the input line

\footnotesize
\begin{verbatim}
&MISC TMPA=25. /
\end{verbatim}
\normalsize

\noindent
sets the ambient temperature at 25 $^\circ$C.

The {\ct MISC} parameters vary in scope and degree of importance. Here is a partial list of {\ct MISC}ellaneous parameters. Others are described where necessary throughout this
guide.

\begin{description}
\item[{\ct DNS}] A logical parameter that, if {\ct .TRUE.}, directs FDS to perform a Direct Numerical Simulation,
as opposed to the default Large Eddy Simulation (LES). This feature is appropriate only for simulations that use mesh cells that are
on the order of a millimeter or less in size, or for diagnostic purposes.
\item[{\ct GVEC}] The 3 components of gravity, in m/s$^2$. The default is {\ct GVEC=0,0,-9.81}.
\item[{\ct NOISE}] FDS initializes the flow field with a very small amount of ``noise'' to prevent the
development of a perfectly symmetric flow when the boundary
and initial conditions are perfectly symmetric. To turn this off, set {\ct NOISE=.FALSE.}
\item[{\ct OVERWRITE}] If {\ct .FALSE.} FDS checks for the existence of  {\ct CHID.out} and stops execution if it exists.
\item[{\ct P\_INF}] Background pressure (at the ground) in Pa. The default is 101325 Pa.
\item[{\ct TMPA}] Ambient temperature, the temperature of everything at the start of the simulation. The default is 20~$^\circ$C.
\item[{\ct U0, V0, W0}] Initial values of the gas velocity in each of the coordinate directions. Normally, these are all 0~m/s, but there are a few applications where it is
convenient to start the flow immediately, like in an outdoor simulation involving wind.
\end{description}

\subsection{Special Topic: Mean Forcing and Data Assimilation}
\label{info:mean_forcing}

A situation that occurs often in atmospheric flows is that initial and boundary conditions are not well defined.  Usually, one knows only that the mean wind is 10 m/s in the northeast direction, for example.  More generally, there may be weather stations located at specific locations within the domain which continuously gather wind speed and direction.  The process of steering the solution of the mass, momentum, and energy equations to match the statistics of the data gathered at the weather stations is known as \emph{data assimilation}.  This branch of modeling is early in its development, but very sophisticated (translation: \emph{complicated}) methods already exist \cite{Kalnay:2003} and are employed in operational weather forecasting models.

In FDS, the user may invoke the most rudimentary of data assilimation techniques, a method called \emph{nudging}.  In brief, we add a mean forcing term to the momentum equation to nudge the solution toward a desired result.  Currently, FDS can only affect the mean flow velocities.  To turn on this capability, set the logical {\ct MEAN\_FORCING(1:3)=.TRUE.} on {\ct MISC}.  When this is set, FDS will drive the mean velocity toward the value of {\ct U0}, {\ct V0}, or {\ct W0} (also set on {\ct MISC}).  For example, to set a northeast wind at 10 m/s use

\footnotesize
\begin{verbatim}
&MISC MEAN_FORCING(1:2)=.TRUE.,.TRUE., U0=7.07, V0=7.07 /
\end{verbatim}
\normalsize

\noindent For an outdoor flow, all other boundaries (except the ground ) should be set to {\ct OPEN}.

\subsection{Special Topic: Specified Force Field}
\label{info:force_vector}

Similar to the {\ct MEAN\_FORCING} feature, the user may specify a constant and uniform force per unit volume by setting {\ct FORCE\_VECTOR(1:3)} on {\ct MISC}.  This is useful, for example, in specifying a mean pressure drop in a duct.  In the abscense of other forces, the force vector $F_i$ affects the momentum equation by

\begin{equation}
\frac{\partial u_i}{\partial t} = F_i/\rho
\end{equation}

\subsection{Special Topic: Stopping and Restarting Calculations}
\label{info:restart}

An important {\ct MISC} parameter is called {\ct RESTART}. Normally, a simulation consists of a sequence of events
starting from ambient conditions. However, there are occasions
when you might want to stop a calculation, make a few
limited adjustments, and then
restart the calculation from that point in time. To do this,
first bring the calculation to a halt gracefully by creating a file
called {\bf CHID.stop}
in the directory where the output files are located. Remember that
FDS is case-sensitive. The file name must be exactly the same as
the {\ct CHID} and `stop' should be lower case. FDS checks for the
existence of this file at each time step, and if it finds it, gracefully
shuts down the calculation after first creating a final Plot3D
file and a file (or files in the case of a multiple mesh job)
called {\bf CHID.restart} (or {\bf CHID\_nn.restart}).
To restart a job, the file(s) {\bf CHID.restart} should exist in
the working directory, and
the phrase {\ct RESTART=.TRUE.} needs to be added
to the {\ct MISC} line of the input data file.
For example, suppose that the job
whose {\ct CHID} is ``plume'' is halted by creating a
dummy file called {\bf plume.stop} in the directory where
all the output files are being created. To restart this job from where it
left off, add {\ct RESTART=.TRUE.} to the {\ct MISC} line
of the input file {\bf plume.fds}, or whatever you have chosen to
name the input file. The existence of a restart file with the same
{\ct CHID} as the original job tells FDS
to continue saving the new data in the same files as the old.  If {\ct RESTART\_CHID} is also specified on the
{\ct MISC} line, then FDS will look for old output files tagged with this string instead of using the specified
{\ct CHID} on the {\ct HEAD} line. In this case, the new output files will be tagged with {\ct CHID}, and the
old output files will not be altered.

When running the restarted job, the diagnostic
output of the restarted job is appended to the file {\bf CHID.out} that was created by
the original job.
All of the other output files from the original run are appended as well.

There may be times when you want to save restart files periodically
during a run as insurance against power outages or system crashes.
If this is the case, at the start of the original run
set {\ct DT\_RESTART=50.} on the {\ct DUMP} line to save restart files
every 50~s, for example.
The default for {\ct DT\_RESTART} is 1000000, meaning no restart files are
created unless you gracefully stop a job by
creating a dummy file called {\bf CHID.stop}.

It is also possible to use the new control function feature (see Section~\ref{info:CTRL})
to stop a calculation or dump a restart file when the computation reaches
some measurable condition such as a first sprinkler activation.

Between job stops and restarts, major changes cannot be made in the calculation
like adding or removing vents and obstructions. The changes are limited to those parameters that do
not instantly alter the existing flow field. Since the restart
capability has been used infrequently by the developers, it should be considered
a fragile construct. Examine the output
to ensure that no sudden or unexpected events occur during the stop and
restart.


\subsection{Special Topic: Defying Gravity}
\label{info:GVEC}

Most users of FDS assume that the acceleration of gravity points in the negative $z$ direction, or more simply, downward.
However, to change the direction of gravity to model
a sloping roof or tunnel, for example, specify the gravity
vector on the {\ct MISC} line with a triplet of numbers of the form
{\ct GVEC=0.,0.,-9.81},
with units of m/s$^2$. This is the default, but it
can be changed to be any direction.

There are a few special applications where you might want to vary the gravity vector as a function of time
or as a function of the first spatial coordinate, $x$. For example, on board the Space Shuttle or International Space Station, small motions can
cause temporal changes in the normally zero level of gravity, an effect known as ``g-jitter.'' More commonly, in tunnel
fire simulations, it is sometimes convenient to change the direction of gravity to mimic the change in slope. The slope
of the tunnel might change as you travel through it; thus, you can tell FDS where to redirect gravity.
For either a spatially or temporally varying direction and/or magnitude of gravity, do the following. First, on the
{\ct MISC} line, set the three components of gravity, {\ct GVEC}, to some ``base'' state like {\ct GVEC=1.,1.,1.},
which gives you the flexibility to vary all three components. Next, designate ``ramps'' for the individual components, {\ct RAMP\_GX},
{\ct RAMP\_GY}, and {\ct RAMP\_GZ}, all of which are specified on the {\ct MISC} line. There is more discussion of
{\ct RAMP}s in Section~\ref{info:RAMP}, but for now you can use the following as a simple template to follow:

\footnotesize
\begin{verbatim}
&MISC GVEC=1.,0.,1., RAMP_GX='x-ramp', RAMP_GZ='z-ramp' /

&RAMP ID='x-ramp', X=  0., F=0.0 /
&RAMP ID='x-ramp', X= 50., F=0.0 /
&RAMP ID='x-ramp', X= 51., F=-0.49 /
&RAMP ID='x-ramp', X=100., F=-0.49 /

&RAMP ID='z-ramp', X=  0., F=-9.81 /
&RAMP ID='z-ramp', X= 50., F=-9.81 /
&RAMP ID='z-ramp', X= 51., F=-9.80 /
&RAMP ID='z-ramp', X=100., F=-9.80 /
\end{verbatim} \normalsize

\noindent
Note that both the $x$ and $z$ components of gravity are functions of $x$. FDS has been programmed to only allow variation in the
$x$ coordinate. Note also that {\ct F} is just a multiplier of the ``base'' gravity vector components, given by {\ct GVEC}. This is why
using the number 1 is convenient -- it allows you to specify the gravity components on the {\ct RAMP} lines directly.
The effect of these lines is to model the first 50~m of a tunnel without a slope, but the second 50~m with a 5~\% slope
upwards. Note that the angle from vertical of the gravity vector due to a 5~\% slope is $\tan^{-1} 0.05=2.86^\circ$ and that
0.49 and 9.80 are equal to the magnitude of the gravity vector, 9.81~m/s$^2$, multiplied by the sine and cosine of 2.86$^\circ$,
respectively. To check your math, the sum of the squares of the gravity components ought to equal 9.81.
Notice in this case that the $y$ direction has been left out because there is no $y$ variation in the gravity vector.

To vary the direction and/or magnitude of gravity in time, follow the same procedure but replace the {\ct X} in the {\ct RAMP}
lines with a {\ct T}.










\subsection{Special Topic: The Baroclinic Vorticity}
\label{baroclinic_torque}

The pressure term in the momentum transport equation solved by FDS is decomposed as follows:
\be \frac{1}{\rho} \nabla \tp = \nabla \left( \frac{\tp}{\rho}\right) - \tp \, \nabla \left(\frac{1}{\rho} \right)  \ee
The pressure term is written like this so that a separable elliptic partial differential equation can be solved for the
``total'' pressure, ${\cal H} \equiv |\bu|^2/2 + \tp/\rho$, using a direct solver. The second term is calculated based on
the pressure field from the previous time step, a slight approximation necessary to render the pressure equation separable.
This term is sometimes referred to as the baroclinic torque, and it is responsible for
generating vorticity due to the non-alignment of pressure and density gradients.
In versions of FDS prior to 6, the inclusion of the baroclinic torque term was found to sometimes cause numerical
instabilities. If it is suspected that the term is responsible for numerical problems, it can be removed by setting {\ct BAROCLINIC=.FALSE.} on the {\ct MISC} line.
For example, in the simple helium plume test case below,
neglecting the baroclinic torque changes the puffing behavior noticeably. In other applications, however, its effect is less significant.
For further discussion of its effect, see Ref.~\cite{Xin:JSS2005}.




\subsubsection{Example Case: Flowfields/helium\_2d}

This case demonstrates the use of baroclinic correction for an axially-symmetric helium plume.
Note that the governing equations solved in FDS are written in terms of a
three dimensional Cartesian coordinate system. However,
a two dimensional Cartesian or two dimensional cylindrical
(axially-symmetric) calculation can be performed by setting the number of
cells in the $y$ direction to 1.
An example of an axially-symmetric helium plume is shown in Figure~\ref{helium_plume}.

\begin{figure}[ht]
\scriptsize
\noindent
\begin{minipage}{1.1in}
\includegraphics[height=2in]{SCRIPT_FIGURES/helium_2d}
\end{minipage}
\hfill
\begin{minipage}{5.5in}
\begin{verbatim}
&HEAD CHID='helium_2d',TITLE='Axisymmetric Helium Plume' /
&MESH IJK=72,1,144 XB=0.00,0.08,-0.001,0.001,0.00,0.16, CYLINDRICAL=.TRUE. /
&TIME TWFIN=5.0 /
&MISC DNS=.TRUE. /
&SPEC ID='HELIUM'  /
&SURF ID='HELIUM', VEL=-0.673, MASS_FRACTION(1)=1.0, TAU_MF(1)=0.3 /
&VENT MB='XMAX' ,SURF_ID='OPEN' /
&VENT MB='ZMAX' ,SURF_ID='OPEN' /
&OBST XB= 0.0,0.036,-0.001,0.001,0.00,0.02, SURF_IDS='HELIUM','INERT','INERT' /
&DUMP PLOT3D_QUANTITY(1)='PRESSURE',PLOT3D_QUANTITY(5)='HELIUM' /
&SLCF PBY=0.000,QUANTITY='DENSITY', VECTOR=.TRUE. /
&SLCF PBY=0.000,QUANTITY='HELIUM' /
&TAIL /
\end{verbatim}
\end{minipage}
\normalsize
\caption[Axi-symmetric helium plume]{Simulation of a helium plume.}
\label{helium_plume}
\end{figure}

\subsection{Special Topic: Large Eddy Simulation Parameters}
\label{info:LES}

By default FDS uses the Deardorff \cite{Deardorff:1980,Pope:2000} turbulent viscosity,
\begin{equation}
(\mu_{\hbox{\tiny LES}}/\rho) = C_\nu \Delta \sqrt{k_{sgs}}
\end{equation}
where $C_\nu=0.1$ and the subgrid scale (sgs) kinetic energy is taken from an algebraic relationship based on scale similarity (see the FDS Technical Reference Guide~\cite{FDS_Math_Guide}).
Options for the turbulent viscosity model are (set {\ct TURBULENCE\_MODEL} on {\ct MISC}):
\begin{center}
\begin{tabular}{|lll|}
\hline
{\ct TURBULENCE\_MODEL}         & Description                                                   & Coefficient           \\ \hline
{\ct 'CONSTANT SMAGORINSKY'}    & Constant coefficient Smagorinsky model \cite{Smagorinsky:1}   & {\ct C\_SMAGORINSKY}  \\
{\ct 'DYNAMIC SMAGORINSKY'}     & Dynamic Smagorinsky model \cite{Germano:1991,Moin:1991}       & None                  \\
{\ct 'DEARDORFF'}               & Deardorff model \cite{Deardorff:1980,Pope:2000}               & {\ct C\_DEARDORFF}    \\
{\ct 'VREMAN'}                  & Vreman's eddy viscosity model \cite{Vreman:2004}              & {\ct C\_VREMAN}       \\ \hline
\end{tabular}
\end{center}
The other diffusive parameters, the thermal conductivity and material diffusivity, are related to the turbulent viscosity by
\be k_{\hbox{\tiny LES}} = \frac{\mu_{\hbox{\tiny LES}} \, c_p}{\PR_t}
\quad ; \quad
 (\rho D)_{\hbox{\tiny LES}} =\frac{\mu_{\hbox{\tiny LES}}}{\SC_t} \ee
The turbulent Prandtl number $\PR_t$ and the turbulent Schmidt number $\SC_t$ are assumed to be constant for a given scenario. Although it is not recommended for most calculations, you can modify $\PR_t=0.5$, and $\SC_t=0.5$ via the parameters {\ct PR}, and {\ct SC} on the {\ct MISC} line. A more detailed discussion of these parameters is given in the FDS Technical Reference Guide~\cite{FDS_Math_Guide}.

\begin{warning}
\noindent
To return to the non-dynamic form of LES used in FDS versions 1-5, set {\ct TURBULENCE\_MODEL='CONSTANT SMAGORINSKY'} on the {\ct MISC} line.
\end{warning}


\subsection{Special Topic: Numerical Stability Parameters}
\label{info:CFL}

In FDS (which uses a explicit time advancement schemes), stability criteria may be understood in terms of using the time step to maintain physically realizable conditions.
Below we examine the necessary conditions for stability in the presence of advection, diffusion, and expansion of the velocity and scalar fields.

\subsubsection{The Courant-Friedrichs-Lewy (CFL) Constraint}

The well-known CFL constraint given by
\begin{equation}
\mbox{CFL} = \delta t \frac{\|\mathbf{u}\|}{\delta x} < 1
\end{equation}
places a restriction on the time step due to the advection velocity.  The limits for the CFL are set by {\ct CFL\_MIN} and {\ct CFL\_MAX} on {\ct MISC}.
Physically, the constraint says that a fluid element should not traverse more than one cell within a time step.
For LES, this constraint has the added advantage of keeping the implicit temporal and spatial filters consistent with each other.
In other words, in order to resolve an eddy of size $\delta x$, the time step needs to be in concert with the CFL.
If one were to employ an implicit scheme for purpose of taking time steps say 10 times larger than the CFL limit, the smallest resolvable turbulent motions
would then be roughly 10 times the grid spacing, which would severely limit the benefit of the LES.  In most cases, if one wishes the simulation to run faster,
a better strategy is to coarsen the grid resolution while keeping the CFL close to 1.

The exact CFL needed to maintain stability depends on the order (as well as other properties) of the time integration scheme and the choice of velocity norm.
Three choices for velocity norm are available in FDS (set on {\ct MISC}):
\vskip\baselineskip
\noindent
{\ct CFL\_VELOCITY\_NORM=0} (FDS 5 default, least restrictive, corresponds to $L_\infty$ norm of velocity vector)
    \begin{equation}
    \frac{\|\mathbf{u}\|}{\delta x} = \max \left(\frac{|u|}{\delta x}, \frac{|v|}{\delta y}, \frac{|w|}{\delta z}\right)
    \end{equation}
{\ct CFL\_VELOCITY\_NORM=1} (FDS 6 default, most restrictive, corresponds to $L_1$ norm of velocity vector)
    \begin{equation}
    \frac{\|\mathbf{u}\|}{\delta x} = \frac{|u|}{\delta x}+\frac{|v|}{\delta y}+\frac{|w|}{\delta z}
    \end{equation}
{\ct CFL\_VELOCITY\_NORM=2} ($L_2$ norm of velocity vector)
    \begin{equation}
    \frac{\|\mathbf{u}\|}{\delta x} = \sqrt{ (u/\delta x)^2+(v/\delta y)^2+(w/\delta z)^2 }
    \end{equation}

\subsubsection{The Von Neumann Constraint}

The Von Neumann constraint is given by
\begin{equation}
\mbox{VN} = \delta t \max[(\mu/\rho),D_\alpha] \sum_i \frac{1}{\delta x_i^2} < \frac{1}{2}
\end{equation}
The limits for VN may be adjusted using {\ct VN\_MIN} and {\ct VN\_MAX} on {\ct MISC}. We can understand this constraint in a couple of different ways.  First, we could consider the model for the diffusion velocity of species $\alpha$ in direction $i$, $V_{\alpha,i} = -D_\alpha \partial Y_\alpha/\partial x_i$, and we would then see that VN is simply a CFL constraint due to diffusive transport.

We can also think of VN in terms of a total variation diminishing (TVD) constraint.  That is, if we have variation (curvature) in the scalar field, we do not want to create spurious oscillations that can lead to an instability by overshooting the smoothing step.  Consider the following explicit update of the heat equation for $u$ in 1D. Here subscripts indicate grid indices and $\nu$ is the diffusivity.
\begin{equation}
u_i^{n+1} = u_i^n + \frac{\delta t \, \nu}{\delta x^2} (u_{i-1}^n - 2u_i^n + u_{i+1}^n )
\end{equation}
Very simply, notice that if $\delta t \, \nu/\delta x^2 = 1/2$ then $u_i^{n+1} = (u_{i-1}^n + u_{i+1}^n)/2$.  If the time step is any larger we overshoot the straight line connecting neighboring cell values.  Of course, this restriction is only guaranteed to be TVD if the $u$ field is ``smooth'', else the neighboring cell values may be shifting in the opposite direction.  Unfortunately, in LES there is no such guarantee and so the VN constraint can be particularly devilish in generating instabilities. For this reason, some practitioners like to employ implicit methods for the diffusive terms.

\subsubsection{Realizable Mass Density Constraint}

In an explicit Euler update of the continuity equation, if the time increment is too large the computational cell may be totally drained of mass, which of course is not physical. The constraint $\rho^{n+1}>0$ therefore leads to the following restriction on the time step:
\begin{equation}
\label{eqn_dtmassrestrict}
\delta t < \frac{\rho^n}{\overline{\mathbf{u}}^n\cdot\nabla\rho^n + \rho^n \nabla\cdot\mathbf{u}^n}
\end{equation}
We can argue that the case we are most concerned with is when $\rho^n$ is near zero.  A reasonable approximation to (\ref{eqn_dtmassrestrict}) then becomes (time location suppressed)
\be
\label{eqn_divstability}
\delta t < \frac{\rho}{\overline{u}_i \left(\frac{\rho-0}{\delta x_i}\right) + \rho \nabla\cdot\mathbf{u}}
  = \left[ \frac{\overline{u}_i}{\delta x_i} + \nabla\cdot\mathbf{u} \right]^{-1}
\ee
Eq.~(\ref{eqn_divstability}) basically adds the effect of thermal expansion to the CFL constraint and provides a reason to prefer {\ct CFL\_VELOCITY\_NORM=1}
as the basis for the time step restriction.

\subsubsection{Heat Transfer Constraint}

Note that the heat transfer coefficient, $h$, has units of W/(m$^2$\,K).  Thus, a velocity scale may be formed from $h/(\rho\, c_p)$.
Anytime we have a velocity scale to resolve we have a CFL-type stability restriction.
Therefore, the heat transfer stability check loops over all wall cells to ensure $\delta t \le \delta x \,\rho \,c_p/h$.
This check may be skipped by setting {\ct CHECK\_HT=.FALSE.} on {\ct MISC}.

\subsubsection{Gravitational Constraint}

A time scale restriction based on gravitational acceleration can be formed from $\delta t \le \sqrt{\delta z/g}$, where $\dz$ is the grid size in the
direction of gravity.
This check may be omitted by setting  {\ct CHECK\_GR=.FALSE.} on {\ct MISC}.

\subsection{Adjusting the Time Step}

In the call to {\ct CHECK\_STABILITY} both the CFL and VN numbers are compared with {\ct CFL\_MAX [1.0]}, {\ct CFL\_MIN [0.8]}, {\ct VN\_MAX [0.5]},
and {\ct VN\_MIN [0.4]}, respectively (default values shown in brackets).  To be clear, the CFL constraint is now given by
\begin{equation}
\mbox{CFL} = \delta t \left( \frac{\|\mathbf{u}\|}{\delta x} + |\nabla\cdot\mathbf{u}| \right)
\end{equation}
If either the current CFL (augmented for both heat transfer and gravity) or VN is too large then the new time step is set to 90\% of the allowable value.
If both CFL and VN are below their minimum values then the current time step is increased by 10\%.

\begin{warning}
Resetting the stability parameters is not recommended except in very special circumstances, as they can lead to
simulations failing due to numerical instabilities.
\end{warning}

\noindent
If you want to prevent FDS from automatically changing the time step, set {\ct LOCK\_TIME\_STEP=.TRUE.}
on the {\ct TIME} line, in which case the specified
time step, {\ct DT}, will not be adjusted.
This parameter is intended for diagnostic purposes only, for example, timing program execution. It can lead to
numerical instabilities if the initial time step is set too high.


\clearpage


\section{Special Topic: Unusual Initial Conditions: The \texorpdfstring{{\tt INIT}}{INIT} Namelist Group (Table \ref{tbl:INIT})}
\label{info:INIT}

Usually, an FDS simulation begins at time $t=0$ with ambient conditions. The air temperature is
assumed constant with height, and the density and pressure decrease with height (the $z$ direction). This
decrease is not noticed in most building scale calculations, but it is important in large outdoor
simulations. There are some scenarios for which it is convenient to change the ambient conditions within some
rectangular region of the domain. If so, add lines of the form

\footnotesize
\begin{verbatim}
&INIT XB=0.5,0.8,2.1,3.4,2.5,3.6, TEMPERATURE=30. /
\end{verbatim}

\normalsize
\noindent Here, within the region whose bounds are given by the sextuplet {\ct XB}, the initial temperature shall be 30~$^\circ$C instead of the ambient.
This construct can also be used for {\ct DENSITY} or pairs of {\ct SPEC\_ID(N)} and {\ct MASS\_FRACTION(N)} where {\ct N} is an ordinal index starting from 1. Note that
{\ct N} is not necessarily indicative of the order in which the species are listed in the input file.
Make sure that you specify all species (components of {\ct MASS\_FRACTION(N)}) on the same {\ct INIT} line.

The {\ct INIT} construct may be useful in examining the influence of
stack effect in a building, where the temperature
is different inside and out.

The {\ct INIT} line may also be used to specify a volumetric heat source term. For example,

\footnotesize
\begin{verbatim}
&INIT XB=0.5,0.8,2.1,3.4,2.5,3.6, HRRPUV=1000. /
\end{verbatim}

\normalsize
\noindent indicates that the region bounded by {\ct XB} shall generate 1000~kW/m$^3$. This feature is mainly useful for diagnostics, or to model a fire in a very simple way.

Note that a solid obstruction can be given an initial temperature via the
parameter {\ct TMP\_INNER} on the {\ct SURF} line. An initial velocity
can be prescribed via {\ct U0}, {\ct V0}, and {\ct W0} on the {\ct MISC} line.



\clearpage

\section{Special Topic: The Pressure Solver: The \texorpdfstring{{\tt PRES}}{PRES} Namelist Group (Table \ref{tbl:PRES})}
\label{info:PRES}

FDS uses a low-Mach number formulation of the Navier-Stokes equations. One of the consequences of this is that the speed of sound is
assumed infinite, and that the pressure throughout the computational domain is affected, instantaneously, by local changes in the flow field. A simple example of
this is when air is pushed through a tunnel. If the tunnel has forced flow at one end and an opening at the other, the volume flow at the opening is the same
as that which is forced at the other end. Without any heat addition, the air is assumed incompressible. Information is passed through the tunnel
instantaneously in the model via a solution of a linear system of equations for the pressure. For a single mesh, the solution of this Poisson equation for
the pressure is very accurate. However, for multiple meshes, there is potentially a delay in information passing throughout the domain because the Poisson
equation is solved on each individual mesh, without any influence from the larger computational domain. The details of the numerics can be found in the
FDS Technical Reference Guide.


Another limitation of the pressure solver is that at solid surfaces that are not part of the boundary of the computational domain,
the pressure solver enforces a no-flux boundary condition. However, it is not perfect, and
it is possible to have a non-zero normal velocity at a solid surface. For most applications, this velocity is so small that it has a negligible effect on the solution.

If either the error in the normal component of the velocity at a mesh interface or at a solid boundary is large, you
can reduce it by making more than the default number of calls to the pressure solver at each time step.
To do so, specify {\ct VELOCITY\_TOLERANCE} on the {\ct PRES} line to be the maximum allowable normal velocity component on the solid
boundary or the largest error at a mesh interface. It is in units of m/s.
If you set this, experiment with different values, and monitor the number of pressure iterations required at each time step to achieve your
desired tolerance. A good value to start with is $\dx/10$, where $\dx$ is the characteristic grid cell size.
The number of iterations are written out to the file {\ct CHID.out}. If you use a value that is too small, the CPU time required might be prohibitive.
The maximum number of iterations per time step is given by {\ct MAX\_PRESSURE\_ITERATIONS}, also on the {\ct PRES} line. Its default value is 10000.

There are two parameters on the {\ct PRES} line that control iterative procedures related to the coupling of velocity and pressure. One is
called {\ct RELAXATION\_FACTOR} and its default value is 1. When there is an error in the normal component of velocity at a solid boundary, this
parameter dictates that the correction be applied in 1 time step. If its value were 0.5, the correction would be applied in 2 time steps. A similar
parameter is called {\ct PRESSURE\_RELAX\_FACTOR}. It controls the rate at which the pressures in adjacent compartments are brought into equilibrium following a
breach. Its value is 0.2, meaning that equilibrium is achieved in roughly 5 time steps.

\subsubsection{Example Case: Pressure\_Solver/duct\_flow}

To demonstrate how to improve the accuracy of the pressure solver, consider the flow of air through a square duct that crosses several meshes. In the
case called {\bf duct\_flow}, air is pushed through a 1 m$^2$ duct at 1~m/s. With no thermal expansion, the volume flow into the duct ought to equal the volume flow out of the
duct. Figure~\ref{duct_flow} displays the computed inflow and outflow as a function of time, and the number of pressure iterations required. The outflow does not match
the inflow exactly because of inaccuracies at the solid and mesh boundaries. The {\ct VELOCITY\_TOLERANCE} has been set to 0.01~m/s and the grid cell size is 0.1~m.

\begin{figure}[ht]
\begin{center}
\includegraphics[width=3in]{SCRIPT_FIGURES/duct_flow}
\includegraphics[width=3in]{SCRIPT_FIGURES/duct_flow_iterations}
\end{center}
\caption[Simple example of flow through a duct.]{(Left) Volume flow into and out of a square duct. (Right) The number of pressure iterations as a function of time.}
\label{duct_flow}
\end{figure}


\subsubsection{Example Case: Pressure\_Solver/dancing\_eddies}

In this example, air is pushed through a 300~m long, two-dimensional channel at 5~m/s. A plate obstruction normal to the flow creates a Karman vortex street. The computational
domain is divided into 4 meshes, each 75~m long. Two simulations are performed, one in which the {\ct VELOCITY\_TOLERANCE} is set to 0.1~m/s ({\ct dancing\_eddies\_tol=p1.fds}), and one
in which it is set to 0.01~m/s ({\ct dancing\_eddies.fds}). Figure~\ref{dancing_eddies} shows the downstream pressure histories for these two cases compared to a simulation that uses only one mesh. The case with the tighter tolerance produces a better match to the single mesh solution, but at a higher computational cost.

\begin{figure}[ht]
\begin{center}
\includegraphics[width=3in]{SCRIPT_FIGURES/dancing_eddies_p1}
\includegraphics[width=3in]{SCRIPT_FIGURES/dancing_eddies_p01}
\includegraphics[width=\textwidth]{SCRIPT_FIGURES/dancing_eddies}
\end{center}
\caption[Results of the dancing eddies test case.]{(Top) Comparison of pressure traces 200~m from the left opening of the channel for two different settings
of {\ct VELOCITY\_TOLERANCE}. (Bottom) A contour plot of the pressure after 120~s for the case with the tolerance set to 0.01~m/s.}
\label{dancing_eddies}
\end{figure}



\clearpage

\section{Special Topic: Setting Limits: The \texorpdfstring{{\tt CLIP}}{CLIP} Namelist Group (Table \ref{tbl:CLIP})}
\label{info:CLIP}

The algorithms in FDS are designed to work within a certain range of values for the thermodynamic quantities density, temperature and mass fraction. To prevent unphysical results,
there are bounds placed on these variables to prevent a single spurious value from causing a numerical instability. It also prevents out of range
errors from calls to temperature-dependent look-up tables. By default, FDS determines the lowest and highest values of the variables based on user input, but it is not
possible in all cases to anticipate just how low or high a given value might be. Thus,
on rare occasions you might need to set upper or lower bounds on the density, temperature, or species mass fractions. These parameters are input under the
namelist group called {\ct CLIP}. The parameters are listed in Table~\ref{tbl:CLIP}. You only need to set these values if you notice that one of them appears to be
``cut off'' when examining the results in Smokeview. For typical fire scenarios, you need not set these values, but if you anticipate relatively low or high values in an
unusual case, take a look at the calculation results to determine if a change in the bounds is needed.








\chapter{Building the Model}

A considerable amount of work in setting up a calculation lies in specifying the
geometry of the space to be modeled and applying boundary conditions
to the solid surfaces. The geometry is described in terms
of rectangular obstructions that can heat up, burn, conduct heat, {\em etc.};
and vents from which air or fuel can be
either injected into, or drawn from, the flow domain.
A boundary condition needs to be assigned to each obstruction
and vent describing its thermal properties. A fire is just one type of
boundary condition. This chapter describes how to build the model.


\section{Bounding Surfaces: The \texorpdfstring{{\tt SURF}}{SURF} Namelist Group (Table \ref{tbl:SURF})}
\label{info:SURF}

Before describing how to build up the geometry, it is first necessary to explain how to describe what these bounding surfaces
consist of. {\ct SURF} is the namelist group that defines
the structure of all solid surfaces or openings within or
bounding the flow domain. Boundary conditions for obstructions and vents are
prescribed by referencing the appropriate {\ct SURF} line(s) whose
parameters are described in this section.

The default boundary condition for all solid surfaces is that of a smooth
inert wall with the temperature fixed at {\ct TMPA}, and is referred to as {\ct 'INERT'}. If only this
boundary condition is needed, there is no need to add any {\ct SURF} lines
to the input file. If additional boundary conditions are desired,
they are to be listed one boundary condition at a time.
Each {\ct SURF} line consists of an identification string {\ct ID='...'} to
allow references to it by an obstruction or vent. Thus, on each
{\ct OBST} and {\ct VENT} line that are to be described below, the character string {\ct SURF\_ID='...'}
indicates the {\ct ID} of the {\ct SURF} line containing the desired boundary
condition parameters. If a particular {\ct SURF} line is to be applied
as the default boundary condition,
set {\ct DEFAULT=.TRUE.} on the {\ct SURF} line.




\section{Creating Obstructions: The \texorpdfstring{{\tt OBST}}{OBST} Namelist Group (Table \ref{tbl:OBST})}
\label{info:OBST}

The namelist group {\ct OBST} contains parameters used to define obstructions. The entire geometry of the model is made up entirely
of rectangular solids, each one introduced on a single line in the input file.

\subsection{Basics}
\label{info:OBST_Basics}

Each {\ct OBST} line contains the coordinates of a rectangular
solid within the flow domain. This solid is defined by two points
($x_1$,$y_1$,$z_1$) and ($x_2$,$y_2$,$z_2$) that are entered on the
{\ct OBST} line in terms of the sextuplet \\
{\ct XB = X1, X2, Y1, Y2, Z1, Z2} \\
In addition to the coordinates, the boundary conditions for the obstruction
can be specified with the parameter {\ct SURF\_ID}, which designates which
{\ct SURF} group (Section~\ref{info:SURF}) to apply at the surface of the obstruction.
If the obstruction has different properties for its top,
sides and bottom, do not specify only one {\ct SURF\_ID}. Instead, use {\ct SURF\_IDS}, an array of three character
strings specifying the boundary condition {\ct ID}s for the top,
sides and bottom of the obstruction, respectively.
If the default
boundary condition is desired, then {\ct SURF\_ID(S)} need not be set.
However, if at least one of the surface conditions for an
obstruction is the inert default, it can be referred to as {\ct 'INERT'}, but it does not have to be explicitly defined.
For example:

\footnotesize
\begin{verbatim}
&SURF ID='FIRE', HRRPUA=1000.0 /
&OBST XB=2.3,4.5,1.3,4.8,0.0,9.2, SURF_IDS='FIRE','INERT','INERT' /
\end{verbatim}
\normalsize

\noindent
puts a fire on top of the obstruction. This is a simple way of
prescribing a burner.

\vspace{\baselineskip}
\noindent
Some additional features of obstructions are as follows:
\begin{itemize}
\item In addition to {\ct SURF\_ID} and {\ct SURF\_IDS}, you can also use
the sextuplet {\ct SURF\_ID6} as follows:

\footnotesize
\begin{verbatim}
&OBST XB=2.3,4.5,1.3,4.8,0.0,9.2,
      SURF_ID6='FIRE','INERT','HOT','COLD','BLOW','INERT' /
\end{verbatim}
\normalsize
where the six surface descriptors refer to the planes $x=2.3$, $x=4.5$, $y=1.3$, $y=4.8$,
$z=0.0$, and $z=9.2$, respectively.
Note that {\ct SURF\_ID6} should not be used on the same {\ct OBST}
line as {\ct SURF\_ID} or {\ct SURF\_IDS}.
\item Obstructions can have zero thickness. Often, thin sheets, like a window, form a barrier,
but if the numerical mesh is coarse relative to the thickness of the barrier, the obstruction
might be unnecessarily large if it is assumed to be one layer of mesh cells thick. All faces
of an obstruction are shifted to the closest mesh cell. If the obstruction is very thin, the two
faces may be approximated on the same cell face. FDS and Smokeview render
this obstruction as a thin sheet, but it is allowed to have thermally
thick boundary conditions. This feature is fragile, especially in terms
of burning and blowing gas. A thin sheet obstruction can only have one velocity
vector on its face, thus a gas cannot be injected reliably from a
thin obstruction because whatever is pushed from one side is necessarily pulled from the other.
For full functionality, the obstruction should be specified to
be at least one mesh cell thick. Thin sheet obstructions
work fine as flow barriers, but other features are fragile and should be used with
caution. To prevent FDS from allowing thin sheet obstructions, set {\ct THICKEN\_OBSTRUCTIONS=.TRUE.} on the
{\ct MISC} line, or {\ct THICKEN=.TRUE.} on each {\ct OBST} line for which the thin sheet assumption is not allowed.
\item Obstructions that are
too small relative to the underlying numerical mesh are rejected.
Be careful when testing cases on coarse meshes.
\item Obstructions may be created or removed during a simulation. See
Section~\ref{info:create_remove} for details.
\item If two obstructions overlap at one or more faces, the one listed last in the input file takes precedence over the one
listed first, in the sense that the latter's surface properties will be applied to the overlapping face. Smokeview renders both obstructions
independently of each other, often leading to an unsightly cross-hatching of the two surface colors where there is an overlap. A
simple remedy for this is to ``shrink'' the first obstruction slightly by adjusting its coordinates ({\ct XB}) accordingly. Then, in
Smokeview, toggle the ``q'' key to show the obstructions as you specified them, rather than as FDS rendered them.
\item Obstructions can be protected from the {\ct HOLE} punching feature. Sometimes
it is convenient to create a door or window using a {\ct HOLE}. For example, suppose a
{\ct HOLE} is punched in a wall to represent a door or window. An obstruction can be
defined to fill this hole (presumably to be removed or colored differently or whatever) so
long as the phrase {\ct PERMIT\_HOLE=.FALSE.} is included on the {\ct OBST} line. In general,
any {\ct OBST}ruction can be made impenetrable to a {\ct HOLE} using this phrase. By default,
{\ct PERMIT\_HOLE=.TRUE.}, meaning that an {\ct OBST}ruction is assumed to be penetrable unless otherwise directed. Note that if an penetrable  {\ct OBST}ruction
and an impenetrable  {\ct OBST}ruction overlap, the {\ct OBST}ruction with {\ct PERMIT\_HOLE=.FALSE.} should be listed first.
\item If the obstruction is not to be removed or rejected for any reason, set {\ct REMOVABLE=.FALSE.} This is sometimes needed to stop
FDS from removing the obstruction if it is embedded within another, like a door within a wall.
\item In rare cases, you might not want to allow a {\ct VENT} to be attached to a particular obstruction, in which case set
{\ct ALLOW\_VENT=.FALSE.}
\item Obstructions can be made semi-transparent by assigning a {\ct TRANSPARENCY} on the {\ct OBST} line. This real parameter ranges from
0 to 1, with 0 being fully transparent. The parameter should always be set along with either {\ct COLOR} or an {\ct RGB} triplet. It can
also be specified on the appropriate {\ct SURF} line, along with a color indicator. If you want the obstruction to be invisible, set {\ct COLOR='INVISBLE'}.
\item Obstructions are drawn solid in Smokeview. To draw an outline representation, set {\ct OUTLINE=.TRUE.}
\end{itemize}


\subsection{Repeated Obstructions: The \texorpdfstring{{\tt MULT}}{MULT} Namelist Group (Table \ref{tbl:MULT})}
\label{info:MULT}

Sometimes obstructions are repeated over and over in the input file. This can be tedious to create and make the input file hard to read. However,
if a particular obstruction or set of obstructions repeats itself in a regular pattern, you can use a utility known as a multiplier. If you want to
repeat an obstruction, create a line in the input file as follows:

\footnotesize
\begin{verbatim}
&MULT ID='m1', DX=1.2, DY=2.4, I_LOWER=-2, I_UPPER=3, J_LOWER=0, J_UPPER=5 /

&OBST XB=..., MULT_ID='m1' /
\end{verbatim}
\normalsize

\noindent
This has the effect of making an array of obstructions according to the following formulae:
\begin{eqnarray*}  x_i = x_0 + \dx_0 + i \, \dx  &;& \hbox{\ct I\_LOWER} \le i \le \hbox{\ct I\_UPPER} \\
                   y_j = y_0 + \dy_0 + j \, \dy  &;& \hbox{\ct J\_LOWER} \le j \le \hbox{\ct J\_UPPER}
\end{eqnarray*}
Note that the same rules apply for the $z$ direction as well. In situations where the position of the obstruction needs shifting prior to the multiplication, use the
parameters {\ct DX0}, {\ct DY0}, and {\ct DZ0}.

\begin{figure}[t]
\includegraphics[width=\textwidth]{SCRIPT_FIGURES/pyramid}
\caption{An example of the multiplier function.}
\label{fig:mult}
\end{figure}

A generalization of this idea is to replace the parameters, {\ct DX}, {\ct DY}, and {\ct DZ}, with a sextuplet called {\ct DXB}.
The six entries in {\ct DXB} increment the respective values of the obstruction coordinates given by {\ct XB}. For example,
define the lower $y$ bound of the original obstruction by {\ct XB(3,0)}. The $n$th obstruction would be:

\footnotesize
\begin{verbatim}
XB(3,N) = XB(3,0) + N*DXB(3)
\end{verbatim}
\normalsize

\noindent
Notice that we use {\ct N\_LOWER} and {\ct N\_UPPER} to denote the range of {\ct N}. This more flexible input scheme allows you to create, for example,
a slanted roof in which the individual roof segments shorten as they ascend to the top.
This feature is demonstrated by the following short input file that creates a hollowed out pyramid using the four perimeter obstructions that form the
outline of its base:

\footnotesize
\begin{verbatim}
&HEAD CHID='pyramid', TITLE='Simple demo of multiplier function, SVN $Revision$' /
&MESH IJK=100,100,100, XB=0.0,1.0,0.0,1.0,0.0,1.0 /
&TIME T_END=0. /
&MULT ID='south', DXB=0.01,-.01,0.01,0.01,0.01,0.01, N_LOWER=0, N_UPPER=39 /
&MULT ID='north', DXB=0.01,-.01,-.01,-.01,0.01,0.01, N_LOWER=0, N_UPPER=39 /
&MULT ID='east',  DXB=-.01,-.01,0.01,-.01,0.01,0.01, N_LOWER=0, N_UPPER=39 /
&MULT ID='west',  DXB=0.01,0.01,0.01,-.01,0.01,0.01, N_LOWER=0, N_UPPER=39 /
&OBST XB=0.10,0.90,0.10,0.11,0.10,0.11, MULT_ID='south', COLOR='RED' /
&OBST XB=0.10,0.90,0.89,0.90,0.10,0.11, MULT_ID='north', COLOR='BLUE' /
&OBST XB=0.10,0.11,0.11,0.89,0.10,0.11, MULT_ID='west',  COLOR='GREEN' /
&OBST XB=0.89,0.90,0.11,0.89,0.10,0.11, MULT_ID='east',  COLOR='CYAN' /
&MULT ID='holes', DX=0.15, DZ=0.1, I_UPPER=1, K_UPPER=1 /
&HOLE XB=0.40,0.45,0.00,1.00,0.15,0.20, MULT_ID='holes' /
&TAIL /
\end{verbatim}
\normalsize

\noindent
The end result of this input file is to create a pyramid by repeating long, rectangular obstructions at the base of each
face in a stair-step pattern. Note in this case the use of {\ct N\_LOWER} and {\ct N\_UPPER} which automatically cause FDS to
repeat the obstructions in sequence rather than as an array.

Note that the {\ct MULT}iplication functionality works for {\ct MESH}, {\ct HOLE}, and {\ct INIT} lines. For a {\ct MESH}, it only applies to the
bounds ({\ct XB}) of the mesh, not the number of cells.




\subsection{Non-rectangular Geometry and Sloped Ceilings}
\label{info:SAWTOOTH}

The efficiency of FDS is due to the simplicity of its numerical mesh.
However, there are situations in which certain geometric features do
not conform to the rectangular mesh, such as a sloped ceiling or roof. In these cases,
construct the curved geometry using rectangular obstructions, a process
sometimes called ``stair-stepping''. A concern is that
the stair-stepping changes the flow pattern near the wall. To lessen
the impact of stair-stepping on the flow field near the wall,
prescribe the parameter {\ct SAWTOOTH=.FALSE.}
on each {\ct OBST} line that makes up the stair-stepped obstruction.
The effect of this parameter is to prevent vorticity from being generated
at sharp corners, in effect smoothing out the jagged steps that make up
the obstruction. This is not a complete solution of the problem, but it
does provide a simple way of ensuring that the flow field around a
non-rectangular obstruction is not inhibited by extra drag created at
sharp corners.

\begin{warning}
Do not apply {\ct SAWTOOTH=.FALSE.} to obstructions that have any {\ct SURF\_ID}s with the
attribute {\ct BURN\_AWAY=.TRUE.}
\end{warning}

\subsubsection{Example Case: {\bf sawtooth}}

In this example, we look at the flow field past a diagonally oriented obstruction. If {\ct SAWTOOTH=.FALSE.}, then the velocity boundary conditions will be applied in
such a way as to minimize the impact of the boundaries due to vortices at sharp corners, as shown in the following example:

\scriptsize
\begin{verbatim}
&OBST XB= 0.00, 0.05,-0.01, 0.01, 0.00, 0.05, SAWTOOTH=.FALSE., COLOR='EMERALD GREEN' /
&OBST XB= 0.05, 0.10,-0.01, 0.01, 0.00, 0.10, SAWTOOTH=.FALSE., COLOR='EMERALD GREEN' /
&OBST XB= 0.10, 0.15,-0.01, 0.01, 0.05, 0.15, SAWTOOTH=.FALSE., COLOR='EMERALD GREEN' /
&OBST XB= 0.15, 0.20,-0.01, 0.01, 0.10, 0.20, SAWTOOTH=.FALSE., COLOR='EMERALD GREEN' /
\end{verbatim}\normalsize

\noindent
In Figure~\ref{sawtooth}, the top set of obstructions are using the default {\ct SAWTOOTH=.TRUE.} and the bottom set of
obstructions are using {\ct SAWTOOTH=.FALSE.} The adjacent obstructions that have {\ct SAWTOOTH=.FALSE.} are displayed
in Smokeview as one smooth obstruction, shown in green. Notice that as the air moves across the different sets of obstructions,
the air velocity on the bottom set of obstructions is not affected as much by the vortices.

\begin{figure}[ht]
\begin{center}
\includegraphics[width=5in]{SCRIPT_FIGURES/sawtooth}
\end{center}
\caption[Simple example of {\ct SAWTOOTH=.FALSE.}]{Simple example of {\ct SAWTOOTH=.FALSE.}}
\label{sawtooth}
\end{figure}


\newpage

\section{Creating Voids: The \texorpdfstring{{\tt HOLE}}{HOLE} Namelist Group (Table \ref{tbl:HOLE})}
\label{info:HOLE}

The {\ct HOLE} namelist group is used to define parameters (Table \ref{tbl:HOLE}) to carve a hole
out of an existing obstruction or set of obstructions. To do this, add lines of the form

\footnotesize
\begin{verbatim}
&HOLE XB=2.0,4.5,1.9,4.8,0.0,9.2 /
\end{verbatim}
\normalsize
Any solid mesh cells within the volume $2.0<x<4.5$, $1.9<y<4.8$,
$0.0<z<9.2$ are removed. Obstructions intersecting the volume are
broken up into smaller blocks.

\begin{notebox}
\noindent
If the hole represents a door or window, a good rule of thumb is to punch more than enough to create the hole.
This ensures that the hole is created through the entire obstruction.
\end{notebox}

\noindent
For example, if the {\ct OBST} line denotes a wall 0.1 m thick:

\footnotesize
\begin{verbatim}
&OBST XB=1.0,1.1,0.0,5.0,0.0,3.0 /
\end{verbatim}
\normalsize
and you want to create a door, add this:

\footnotesize
\begin{verbatim}
&HOLE XB=0.99,1.11,2.0,3.0,0.0,2.0 /
\end{verbatim}
\normalsize
The extra centimeter added to the $x$ coordinates of the hole make it clear
that the hole is to punch through the entire obstruction.

When a {\ct HOLE} is created, the affected obstruction(s) are either rejected, or
created or removed at pre-determined times. See Section~\ref{info:create_remove} for details.
To allow a hole to be controlled with either the {\ct CTRL} or {\ct DEVC} namelist groups, you will need to add the {\ct CTRL\_ID} or {\ct DEVC\_ID}
parameter respectively, to the {\ct HOLE} line.

If you want the obstruction that is to be cut out to have a different color
than the original obstruction, set the {\ct COLOR} or integer triplet
{\ct RGB} on the {\ct HOLE} line (see Section~\ref{info:colors}). If you want the obstruction to be invisible, set {\ct COLOR='INVISBLE'}.

When a {\ct HOLE} is in a {\ct .FALSE.} state, an obstruction is placed in the hole.
To make this obstruction transparent, the {\ct TRANSPARENCY} parameter should be specified by
a real number from 0 to 1. Note that if {\ct TRANSPARENCY} is specified, then either a {\ct COLOR} or {\ct RGB} triplet ought to be specified as well.
A {\ct TRANSPARENCY} value near, but not equal to, zero can be used to simulate a window when the {\ct HOLE}'s {\ct INITIAL\_STATE=.FALSE.} When the {\ct DEVC} or {\ct CTRL}
is activated and changes the state of the hole to {\ct .TRUE.}, the {\ct HOLE} is then open and completely transparent.
See Section~\ref{info:create_remove} for an example.

If an obstruction is not to be punctured by a {\ct HOLE}, add
{\ct PERMIT\_HOLE=.FALSE.} to the {\ct OBST} line.

\begin{warning}
\noindent
It is a good idea to inspect the geometry by running either a setup job
({\ct T\_END=0} on the {\ct TIME} line) or a short-time job to test the operation of devices and control functions.
\end{warning}

\begin{warning}
\noindent
Note that a {\ct HOLE} has no effect on a {\ct VENT} or a mesh boundary. It only applies to {\ct OBST}structions.
\end{warning}


\newpage

\section{Applying Surface Properties: The \texorpdfstring{{\tt VENT}}{VENT} Namelist Group (Table \ref{tbl:VENT})}
\label{info:VENT}

Whereas the {\ct OBST} group is used to specify obstructions within the
computational domain, the {\ct VENT} group (Table \ref{tbl:VENT}) is used to prescribe planes
adjacent to obstructions or external walls. Note that the label {\ct VENT} is used for historical reasons -- this group of parameters has
evolved well beyond its initial role as simply allowing for air to be blown into, or sucked out of, the computational domain.

\subsection{Basics}

\label{info:VENT_Basics}

The vents are chosen in a
similar manner to the obstructions, with the sextuplet {\ct XB}
denoting a plane abutting a solid surface. Two of the six coordinates must
be the same, denoting a plane as opposed to a solid.

\begin{warning}
\noindent
Note that only one {\ct VENT} may be specified for any given wall cell.  If additional {\ct VENT} lines are specified for a
given wall cell, FDS will output a warning message and ignore the subsequent lines (i.e. only the first vent
will be applied)
\end{warning}

\noindent The term ``{\ct VENT}'' is somewhat misleading. Taken literally, a
{\ct VENT} can be used to model components of the ventilation system in
a building, like a diffuser or a return.
In these cases, the {\ct VENT} coordinates form a plane on a
solid surface forming the boundary of the duct.
No holes need to be created through the solid; it is
assumed that air is pushed out of or sucked into duct work within the
wall. Less literally, a {\ct VENT} is used simply as a means of applying
a particular boundary condition to a rectangular patch on a solid surface.
A fire, for example, is usually created by first generating a solid
obstruction via an {\ct OBST} line, and then specifying a {\ct VENT}
somewhere on one of the faces of the solid with a {\ct SURF\_ID}
with the characteristics of the thermal and combustion properties of the fuel.
For example, the lines

\footnotesize
\begin{verbatim}
&OBST XB=0.0,5.0,2.0,3.0,0.0,4.0, SURF_ID='big block' /
&VENT XB=1.0,2.0,2.0,2.0,1.0,3.0, SURF_ID='hot patch' /
\end{verbatim} \normalsize

\noindent
specify a large obstruction (with the properties given elsewhere in the file under the name {\ct 'big block'}) with
a ``patch'' applied to one of its faces with alternative properties under the name {\ct 'hot patch'}. This latter
surface property need not actually be a ``vent,'' like a supply or return duct, but rather just a patch with different boundary
conditions than those assumed for the obstruction. Note that the surface properties of a {\ct VENT} over-ride those of the
underlying obstruction.

\begin{warning}
A {\ct VENT} must always be attached to a solid obstruction. See
Section~\ref{info:Velocity_BC} for instructions on specifying different types of fans that allow gases to flow through.
\end{warning}

\noindent
An easy way to specify an entire external wall is to replace {\ct XB} with
{\ct MB} (Mesh Boundary), a character string whose value is one of the following:
{\ct 'XMAX'}, {\ct 'XMIN'}, {\ct 'YMAX'}, {\ct 'YMIN'}, {\ct 'ZMAX'} or
{\ct 'ZMIN'} denoting the planes $x=\hbox{\ct XMAX}$, $x=\hbox{\ct XMIN}$,
$y=\hbox{\ct YMAX}$, $y=\hbox{\ct YMIN}$, $z=\hbox{\ct ZMAX}$
or $z=\hbox{\ct ZMIN}$, respectively.
Like an obstruction, the boundary condition index of a vent is specified
with {\ct SURF\_ID}, indicating which of the listed {\ct SURF} lines to
apply. If the default boundary condition is desired, then {\ct SURF\_ID} need not be set.

Be careful when using the {\ct MB} shortcut when doing a multiple mesh
simulation, that is, when more than one rectangular mesh is used. The
plane designated by the keyword {\ct MB} is applied to all of the
meshes, possibly leading to confusion about whether a plane is a solid
wall or an open boundary. Check the geometry in Smokeview to assure that
the {\ct VENT}s are properly prescribed. Use color as much as
possible to double-check the set-up.  More detail on color in
Section~\ref{info:colors} and Table \ref{tab:colors}. Also, the parameter {\ct OUTLINE=.TRUE.} causes the
{\ct VENT} to be drawn as an outline in Smokeview.


\subsection{Special \texorpdfstring{{\tt VENT}s}{VENTs}}

\label{info:Special_VENTS}

There are two reserved {\ct SURF\_ID}'s that may be applied to a {\ct VENT} -- {\ct 'OPEN'} and {\ct 'MIRROR'}. The term {\em reserved} means that these two
{\ct SURF\_ID}s should not be explicitly defined by you. Their properties are predefined.

\subsubsection{Open Vents}

The first special {\ct VENT} is invoked by the parameter {\ct SURF\_ID='OPEN'}. This is used only if the {\ct VENT} is applied to the exterior boundary of the computational domain, where it denotes a passive opening to the outside. By default, FDS assumes that the exterior boundary of the computational domain (the {\ct XB}s on the {\ct MESH} line) is a solid wall. To change this, use an {\ct OPEN} vent as if it were an open door or window. To create a totally or partially open domain, use {\ct OPEN} vents on the exterior mesh boundaries ({\ct MB}s).

By default, it is assumed that ambient conditions exist beyond the {\ct 'OPEN'} vent. However, in some cases, you may want to alter this assumption, for example, the temperature. If you assume a temperature other than ambient, specify {\ct TMP\_EXTERIOR} along with {\ct SURF\_ID='OPEN'}. Use this option cautiously -- in many situations if you want to describe the exterior of a building, it is better to include the exterior explicitly in your calculation because the flow in and out of the doors and windows will be more naturally captured. See Section~\ref{info:stackeffect} for more details. If you want to specify a non-ambient pressure at the {\ct OPEN} boundary, see Section~\ref{info:pressure_boundary}.

The user should also be aware that the {\ct OPEN} pressure boundary condition is most stable for flows that are predominantly normal  to the vent, either mostly in or mostly out.  This is because the prescribed pressure at an {\ct OPEN} boundary is ill-conditioned (a small perturbation to the input may lead to large change in the output) if the flow is parallel to the vent.  Suppose, for example, that an outdoor flow is 10 m/s in the $x$ direction and $\pm 0.001$ m/s in the $z$ direction with an {\ct OPEN} top boundary.  The kinetic energy of this flow is roughly $k=50$ m$^2$/s$^2$.  When the vertical velocity is positive (+0.001 m/s) then the prescribed boundary condition for the stagnation pressure is set to ${\cal H} = k = 50$ m$^2$/s$^2$.  But when the vertical velocity is negative (-0.001 m/s) then ${\cal H} = 0$ (see \cite{FDS_Tech_Guide}).  For this reason, {\ct OPEN} vents are not recommended for the top or side boundaries in an outdoor flow.  See Section \ref{info:mean_forcing} for a better alternative.

\begin{warning}
Vents to the outside of the computational domain ({\ct OPEN} vents)
{\em  can} be opened or closed during a simulation. It is best done by creating or removing a thin obstruction that covers the {\ct OPEN VENT}.
See Section~\ref{info:activate_deactivate} for details.
\end{warning}

\subsubsection{Mirror Vents}

A {\ct VENT} with {\ct SURF\_ID='MIRROR'} denotes a symmetry plane. Usually, a {\ct MIRROR} spans an entire face of the computational
domain, essentially doubling the size of the domain with the {\ct MIRROR} acting as a plane of symmetry. The flow on the opposite side of the
{\ct MIRROR} is exactly reversed. From a numerical point of view, a {\ct MIRROR} is a no-flux, free-slip boundary. As with {\ct OPEN}, a {\ct MIRROR} can only be prescribed at an exterior boundary of the computational domain. Often, {\ct OPEN} or {\ct MIRROR} {\ct VENT}s are prescribed along an
entire side of the computational domain, in which case the ``{\ct MB}'' notation is handy.

\begin{warning}
\noindent
Note that the mirror image of a scene is {\bf not} shown in Smokeview.
\end{warning}

\noindent
A word of warning about {\ct MIRROR} boundaries in FDS. In conventional RANS (Reynolds-Averaged Navier-Stokes) models, symmetry boundaries are often used as a way of saving on computation time. However, because FDS is an LES (Large Eddy Simulation) model, the use of symmetry boundaries should be considered carefully. The reason for this is that an LES model does not compute a time-averaged solution of the N-S equations. In other words, for a RANS model, a fire plume is represented as an axially-symmetric flow field because that is what you would expect if you time-averaged the actual flow field over a sufficient amount of time. Thus, for a RANS model, a symmetry boundary along the plume centerline is appropriate. In an LES model, however, there is no time-averaging built into the equations, and there is no time-averaged, symmetric solution. Putting a {\ct MIRROR} boundary along the centerline of a fire plume will change its dynamics entirely. It will produce something very much like the flow field of a fire that is adjacent to a vertical wall. For this reason, a {\ct MIRROR} boundary condition is not recommended along the centerline of a turbulent fire plume. If the fire or burner is very small, and the flow is laminar, then the {\ct MIRROR} boundary condition makes sense. In fact, in 2-D calculations, {\ct MIRROR} boundary conditions are employed in the third coordinate direction (this is done automatically, you need not specify it explicitly).



\subsection{\texorpdfstring{{Controlling {\tt VENT}s}}{Controlling VENTs}}

{\ct VENT} functionality can be controlled in some cases using ``devices'' and ``controls,'' specified via a {\ct DEVC\_ID} or a {\ct CTRL\_ID}.
See Section~\ref{info:activate_deactivate} for details.

\subsection{\texorpdfstring{{Trouble-Shooting {\tt VENT}s}}{Trouble-Shooting VENTs}}
\label{info:VENT_Trouble}

Unlike most of the entries in the input file, the order that you specify {\ct VENT}s can be important. There might be
situations where it is convenient to position one {\ct VENT} atop another. For example, suppose you want to designate the
ceiling of a compartment to have a particular set of surface properties, and you designate the entire ceiling to have the
appropriate {\ct SURF\_ID}. Then, you want to designate a smaller patch on the ceiling to have another set of surface
properties, like an air supply. In this case, you must designate the supply {\ct VENT} {\bf first} because for that area
of the ceiling, FDS will ignore the ceiling properties and apply the supply properties. FDS processes the first {\ct VENT}, not
the second as it did in versions prior to FDS 5. Now, the rule for {\ct VENT}s is ``first come, first served.''
Keep in mind, however, that the
second {\ct VENT} is not rejected entirely -- only where there is overlap. FDS will also print out a warning to the screen (or to
standard error) saying which {\ct VENT} has priority.

Smokeview can help identify where two {\ct VENT}s overlap, assuming each has a unique {\ct COLOR}. Because Smokeview draws {\ct VENT}s
on top of each other, areas of overlap will have a grainy, awkward appearance that changes pattern as you move the scene. In situations
where you desire the overlap for the sake of convenience, you might want to slightly adjust the coordinates of the preferred {\ct VENT}
so that it is slightly offset from the solid surface. Make the offset less than about a tenth of a cell dimension so that FDS snaps it
to its desired location. Then, by toggling the ``q'' key in Smokeview, you can eliminate the grainy color overlap by showing the
{\ct VENT} exactly where you specified it, as opposed to where FDS repositioned it. This trick also works where the faces of two
obstructions overlap.

If an error message appears requesting that
the orientation of a vent be specified, first check to make sure that the vent is a plane.
If the vent is a plane, then the orientation can be forced by specifying the parameter {\ct IOR}.
If the normal direction of the {\ct VENT} is in the positive $x$ direction, set {\ct IOR=1}.
If the normal direction is in the negative $x$ direction, set {\ct IOR=-1}. For the $y$ and
$z$ direction, use the number 2 and 3, respectively. Setting {\ct IOR} may sometimes solve
the problem, but it is more likely that if there is an error message about orientation, then
the {\ct VENT} is buried within a solid obstruction, in which case the program cannot determine
the direction in which the {\ct VENT} is facing.

\subsection{Special Topic: Synthetic Turbulence Inflow Boundary Conditions}
\label{info:synthetic_turbulence}

Real flows of low-viscosity fluids like air are rarely perfectly stationary in time or uniform in space---they are turbulent (to some degree).
Of course, the turbulence characteristics of the flow may have a significant impact on mixing and other behaviors so the specification of nominally constant
and uniform boundary conditions may be insufficient.  To address this issue, FDS employs a synthetic eddy method (SEM).  Refer to Jarrin \cite{Jarrin:2008} for a detailed description.
In brief, ``eddies'' are injected into the flow at random positions on the boundary and advect with the mean flow over a short distance near the boundary
equivalent to the maximum eddy length scale.  Once the eddy passes through this region it is recycled at the inlet of the boundary with a new random position and length scale.
The eddies are idealized as velocity perturbations over a spherical region in space with a diameter (eddy length scale) selected from a uniform random distribution.
The selection procedures guarantee that prescribed first and second-order statistics (including Reynolds stresses) are satisfied.

Synthetic turbulence is invoked by setting the number of eddies, {\ct N\_EDDY}, the characteristic eddy length scale, {\ct L\_EDDY}, and either the root mean square (RMS)
velocity fluctuation, {\ct VEL\_RMS}, or the Reynolds stress tensor components, {\ct REYNOLDS\_STRESS(3,3)} on the {\ct VENT} line.
Note that the Reynolds stress is symmetric and only the lower triangular part needs to be specified.  The RMS velocity fluctuation is isotropic (equivalent for each component).
Thus, {\ct VEL\_RMS} $\equiv \sqrt{2k/3}$, where $k\equiv \langle\frac{1}{2}u_i^\prime u_i^\prime\rangle$ is the turbulent kinetic energy per unit mass.
If the fluctuations are not isotropic, then the Reynolds stresses must be specified componentwise.
For example,

\footnotesize
\begin{verbatim}
&SURF ID='inlet', VEL=-10. /
&VENT MB='XMIN', SURF_ID='inlet', N_EDDY=100, L_EDDY=0.5, VEL_RMS=1. /
\end{verbatim} \normalsize

\noindent Note that if {\ct VEL\_RMS} is specified, this is equivelant to

\footnotesize
\begin{verbatim}
REYNOLDS_STRESS(1,1) = VEL_RMS**2
REYNOLDS_STRESS(2,2) = VEL_RMS**2
REYNOLDS_STRESS(3,3) = VEL_RMS**2
\end{verbatim} \normalsize

\noindent and all other components of {\ct REYNOLDS\_STRESS} are zero.

In Chapter 7 of Jarrin's thesis \cite{Jarrin:2008}, he introduces the Modified Synthetic Eddy Method in which the eddy length scales are anisotropic.
This allows more realistic characterization of streamwise vortices in a turbulent boundary layer.
To specify the length scales corresponding to the $\sigma_{ij}$ values in Jarrin's Eq.~(7.1) use {\ct L\_EDDY\_IJ(3,3)}.  For example,

\footnotesize
\begin{verbatim}
&VENT XB=... , SURF_ID='WIND', N_EDDY=500,
      L_EDDY_IJ(1,1)=21.,  L_EDDY_IJ(1,2)=6.22, L_EDDY_IJ(1,3)=4.23
      L_EDDY_IJ(2,1)=2.35, L_EDDY_IJ(2,2)=5.66, L_EDDY_IJ(2,3)=2.50
      L_EDDY_IJ(3,1)=5.42, L_EDDY_IJ(3,2)=0.78, L_EDDY_IJ(3,3)=1.01
      REYNOLDS_STRESS(1,1)=2.16,  REYNOLDS_STRESS(1,2)=0.,   REYNOLDS_STRESS(1,3)=-0.47
      REYNOLDS_STRESS(2,1)=0.,    REYNOLDS_STRESS(2,2)=1.53, REYNOLDS_STRESS(2,3)=0.
      REYNOLDS_STRESS(3,1)=-0.47, REYNOLDS_STRESS(3,2)=0.,   REYNOLDS_STRESS(3,3)=4.259 /
\end{verbatim} \normalsize

\clearpage

\section{Coloring Obstructions, Vents, Surfaces and Meshes}
\label{info:colors}

Colors for many items within FDS can be prescribed in two ways; a triplet of
integers after keyword {\ct RGB} or one of many {\ct COLOR} name character strings.

The three {\ct RGB} integer numbers range from 0 to 255, indicating the amount of Red, Green and Blue
that make up the color. If you define the {\ct COLOR} by name, it is important that you type the name {\bf exactly} as it
is listed in the color tables.

Table~\ref{tab:colors} provides a small sampling of {\ct RGB} values and {\ct COLOR} names
for a variety of colors. A complete listing of all 500+ colors that can be
specified by name after the {\ct COLOR} keyword is available on the FDS website.
If the {\ct COLOR} name is not listed in the table on the website, then that name does not exist to FDS.

It is highly recommended that colors be assigned to surfaces via the {\ct SURF} line because as
the geometries of FDS simulations become more complex, it is very useful
to use color as a spot check to determine if the desired
surface properties have been assigned throughout the room or building under study.

For example, if you desire that all surfaces associated with a
given {\ct SURF} line be colored the same way, prescribe a triplet of
integers called {\ct RGB} on the {\ct SURF} line. The following {\ct SURF} line

\footnotesize
\begin{verbatim}
&SURF ID='UPHOLSTERY', ..., RGB=0,255,0 /
\end{verbatim}
\normalsize

\noindent
will cause the furnishings with a {\ct SURF\_ID} of {\ct 'UPHOLSTERY'} to be colored green in Smokeview.
It is best to avoid using the primary colors because these same colors are
used by Smokeview to draw color contours.

Obstructions and vents may be colored individually (over-riding the
{\ct SURF} line's {\ct RGB}) by specifying {\ct COLOR} value to any of
the listed names in Table~\ref{tab:colors} or {\ct 'INVISIBLE'} on
the respective {\ct OBST} or {\ct VENT} line. Using {\ct 'INVISIBLE'}
causes the vent or obstruction to not be drawn.

Colors may also be specified using the integer triplet {\ct RGB} on an {\ct OBST} or {\ct VENT} line to gain
a wider color palette. See Table~\ref{tab:colors}
for a list of color names and RGB values.


\begin{table}[p]
\begin{center}
\caption{Sample of Color Definitions (A complete list is included on the website) }
\label{tab:colors}
\vspace{0.1in}
\begin{tabular}{|c|c|c|c|c|c||c|c|c|c|}
\hline
Name & &  R  & G & B & Name & & R & G & B   \\ \hline \hline
{\ct AQUAMARINE} & \textcolor{AQUAMARINE} {$\blacksquare$} & 127& 255& 212& {\ct MAROON} &  \textcolor{MAROON} {$\blacksquare$} & 128& 0& 0  \\ \hline
{\ct ANTIQUE WHITE} & \textcolor{ANTIQUE WHITE} {$\blacksquare$} & 250& 235& 215& {\ct MELON} &  \textcolor{MELON} {$\blacksquare$} & 227& 168& 105  \\ \hline
{\ct BEIGE} & \textcolor{BEIGE} {$\blacksquare$} & 245& 245& 220& {\ct MIDNIGHT BLUE} &  \textcolor{MIDNIGHT BLUE} {$\blacksquare$} & 25& 25& 112  \\ \hline
{\ct BLACK} & \textcolor{BLACK} {$\blacksquare$} & 0& 0& 0& {\ct MINT} &  \textcolor{MINT} {$\blacksquare$} & 189& 252& 201  \\ \hline
{\ct BLUE} & \textcolor{BLUE} {$\blacksquare$} & 0& 0& 255& {\ct NAVY} &  \textcolor{NAVY} {$\blacksquare$} & 0& 0& 128  \\ \hline
{\ct BLUE VIOLET} & \textcolor{BLUE VIOLET} {$\blacksquare$} & 138& 43& 226& {\ct OLIVE} &  \textcolor{OLIVE} {$\blacksquare$} & 128& 128& 0  \\ \hline
{\ct BRICK} & \textcolor{BRICK} {$\blacksquare$} & 156& 102& 31& {\ct OLIVE DRAB} &  \textcolor{OLIVE DRAB} {$\blacksquare$} & 107& 142& 35  \\ \hline
{\ct BROWN} & \textcolor{BROWN} {$\blacksquare$} & 165& 42& 42& {\ct ORANGE} &  \textcolor{ORANGE} {$\blacksquare$} & 255& 128& 0  \\ \hline
{\ct BURNT SIENNA} & \textcolor{BURNT SIENNA} {$\blacksquare$} & 138& 54& 15& {\ct ORANGE RED} &  \textcolor{ORANGE RED} {$\blacksquare$} & 255& 69& 0  \\ \hline
{\ct BURNT UMBER} & \textcolor{BURNT UMBER} {$\blacksquare$} & 138& 51& 36& {\ct ORCHID} &  \textcolor{ORCHID} {$\blacksquare$} & 218& 112& 214  \\ \hline
{\ct CADET BLUE} & \textcolor{CADET BLUE} {$\blacksquare$} & 95& 158& 160& {\ct PINK} &  \textcolor{PINK} {$\blacksquare$} & 255& 192& 203  \\ \hline
{\ct CHOCOLATE} & \textcolor{CHOCOLATE} {$\blacksquare$} & 210& 105& 30& {\ct POWDER BLUE} &  \textcolor{POWDER BLUE} {$\blacksquare$} & 176& 224& 230  \\ \hline
{\ct COBALT} & \textcolor{COBALT} {$\blacksquare$} & 61& 89& 171& {\ct PURPLE} &  \textcolor{PURPLE} {$\blacksquare$} & 128& 0& 128  \\ \hline
{\ct CORAL} & \textcolor{CORAL} {$\blacksquare$} & 255& 127& 80& {\ct RASPBERRY} &  \textcolor{RASPBERRY} {$\blacksquare$} & 135& 38& 87  \\ \hline
{\ct CYAN} & \textcolor{CYAN} {$\blacksquare$} & 0& 255& 255& {\ct RED} &  \textcolor{RED} {$\blacksquare$} & 255& 0& 0  \\ \hline
{\ct DIMGRAY } & \textcolor{DIMGRAY } {$\blacksquare$} & 105& 105& 105& {\ct ROYAL BLUE} &  \textcolor{ROYAL BLUE} {$\blacksquare$} & 65& 105& 225  \\ \hline
{\ct EMERALD GREEN} & \textcolor{EMERALD GREEN} {$\blacksquare$} & 0& 201& 87& {\ct SALMON} &  \textcolor{SALMON} {$\blacksquare$} & 250& 128& 114  \\ \hline
{\ct FIREBRICK} & \textcolor{FIREBRICK} {$\blacksquare$} & 178& 34& 34& {\ct SANDY BROWN} &  \textcolor{SANDY BROWN} {$\blacksquare$} & 244& 164& 96  \\ \hline
{\ct FLESH} & \textcolor{FLESH} {$\blacksquare$} & 255& 125& 64& {\ct SEA GREEN} &  \textcolor{SEA GREEN} {$\blacksquare$} & 84& 255& 159  \\ \hline
{\ct FOREST GREEN} & \textcolor{FOREST GREEN} {$\blacksquare$} & 34& 139& 34& {\ct SEPIA} &  \textcolor{SEPIA} {$\blacksquare$} & 94& 38& 18  \\ \hline
{\ct GOLD } & \textcolor{GOLD } {$\blacksquare$} & 255& 215& 0& {\ct SIENNA} &  \textcolor{SIENNA} {$\blacksquare$} & 160& 82& 45  \\ \hline
{\ct GOLDENROD} & \textcolor{GOLDENROD} {$\blacksquare$} & 218& 165& 32& {\ct SILVER} &  \textcolor{SILVER} {$\blacksquare$} & 192& 192& 192  \\ \hline
{\ct GRAY} & \textcolor{GRAY} {$\blacksquare$} & 128& 128& 128& {\ct SKY BLUE} &  \textcolor{SKY BLUE} {$\blacksquare$} & 135& 206& 235  \\ \hline
{\ct GREEN} & \textcolor{GREEN} {$\blacksquare$} & 0& 255& 0& {\ct SLATEBLUE} &  \textcolor{SLATEBLUE} {$\blacksquare$} & 106& 90& 205  \\ \hline
{\ct GREEN YELLOW} & \textcolor{GREEN YELLOW} {$\blacksquare$} & 173& 255& 47& {\ct SLATE GRAY} &  \textcolor{SLATE GRAY} {$\blacksquare$} & 112& 128& 144  \\ \hline
{\ct HONEYDEW} & \textcolor{HONEYDEW} {$\blacksquare$} & 240& 255& 240& {\ct SPRING GREEN} &  \textcolor{SPRING GREEN} {$\blacksquare$} & 0& 255& 127  \\ \hline
{\ct HOT PINK} & \textcolor{HOT PINK} {$\blacksquare$} & 255& 105& 180& {\ct STEEL BLUE} &  \textcolor{STEEL BLUE} {$\blacksquare$} & 70& 130& 180  \\ \hline
{\ct INDIAN RED} & \textcolor{INDIAN RED} {$\blacksquare$} & 205& 92& 92& {\ct TAN} &  \textcolor{TAN} {$\blacksquare$} & 210& 180& 140  \\ \hline
{\ct INDIGO} & \textcolor{INDIGO} {$\blacksquare$} & 75& 0& 130& {\ct TEAL} &  \textcolor{TEAL} {$\blacksquare$} & 0& 128& 128  \\ \hline
{\ct IVORY} & \textcolor{IVORY} {$\blacksquare$} & 255& 255& 240& {\ct THISTLE} &  \textcolor{THISTLE} {$\blacksquare$} & 216& 191& 216  \\ \hline
{\ct IVORY BLACK} & \textcolor{IVORY BLACK} {$\blacksquare$} & 41& 36& 33& {\ct TOMATO } &  \textcolor{TOMATO } {$\blacksquare$} & 255& 99& 71  \\ \hline
{\ct KELLY GREEN} & \textcolor{KELLY GREEN} {$\blacksquare$} & 0& 128& 0& {\ct TURQUOISE} &  \textcolor{TURQUOISE} {$\blacksquare$} & 64& 224& 208  \\ \hline
{\ct KHAKI} & \textcolor{KHAKI} {$\blacksquare$} & 240& 230& 140& {\ct VIOLET} &  \textcolor{VIOLET} {$\blacksquare$} & 238& 130& 238  \\ \hline
{\ct LAVENDER} & \textcolor{LAVENDER} {$\blacksquare$} & 230& 230& 250& {\ct VIOLET RED} &  \textcolor{VIOLET RED} {$\blacksquare$} & 208& 32& 144  \\ \hline
{\ct LIME GREEN} & \textcolor{LIME GREEN} {$\blacksquare$} & 50& 205& 50& {\ct WHITE} &  \textcolor{WHITE} {$\blacksquare$} & 255& 255& 255  \\ \hline
{\ct MAGENTA} & \textcolor{MAGENTA} {$\blacksquare$} & 255& 0& 255& {\ct YELLOW} &  \textcolor{YELLOW} {$\blacksquare$} & 255& 255& 0  \\ \hline
\hline
\end{tabular}
\end{center}
\end{table}


\subsection{Texture Mapping}
\label{info:texture_map}

There are various ways of prescribing the color of various objects
within the computational domain, but there is also a way of pasting
images onto the obstructions for the purpose of making the Smokeview
images more realistic. This technique is known as ``texture mapping.''
For example, to apply a wood paneling image to a wall,
add to the {\ct SURF} line defining the physical properties of the
paneling the text

\footnotesize
\begin{verbatim}
&SURF ID='wood paneling',..., TEXTURE_MAP='paneling.jpg', TEXTURE_WIDTH=1.,
      TEXTURE_HEIGHT=2. /
\end{verbatim}
\normalsize
Assuming that a JPEG file called {\bf paneling.jpg} exists in the
working directory, Smokeview should read it and display the image
wherever the paneling is used.
Note that the image does not appear when Smokeview is first invoked. It is an option controlled by
the {\ct Show/Hide} menu. The parameters {\ct TEXTURE\_WIDTH}
and {\ct TEXTURE\_HEIGHT} are the physical dimensions of the image. In this case,
the JPEG image is of a 1~m wide by 2~m high piece of
paneling. Smokeview replicates the image as often as necessary to
make it appear that the paneling is applied where desired.
Consider carefully how the image repeats itself when
applied in a scene. If the image has no obvious pattern, there is no
problem with the image being repeated. If the image has an obvious
direction, the real triplet {\ct TEXTURE\_ORIGIN} should be added to
the {\ct VENT} or {\ct OBST} line to which a texture map
should be applied. For example,

\footnotesize
\begin{verbatim}
&OBST XB=1.0,2.0,3.0,4.0,5.0,7.0, SURF_ID='wood paneling', TEXTURE_ORIGIN=1.0,3.0,5.0 /
\end{verbatim}
\normalsize
applies paneling to an obstruction whose dimensions are 1 m by
1 m by 2 m, such that the image of the paneling is positioned
at the point (1.0,3.0,5.0). The default value of {\ct TEXTURE\_ORIGIN}
is (0,0,0), and the global default can be changed by added a
{\ct TEXTURE\_ORIGIN} statement to the {\ct MISC} line.






\chapter{Fire and Thermal Boundary Conditions}

This chapter describes how to specify the thermal properties of solid objects. {\bf This is
the most challenging part of setting up the simulation.} Why?  First,
for both real and simulated fires, the growth of the fire is very
sensitive to the thermal properties of the surrounding
materials. Second, even if all the material properties are known to
some degree, the physical phenomena of interest may not be simulated
properly due to limitations in the model algorithms or resolution of
the numerical mesh. It is your responsibility to supply the thermal
properties of the materials, and then assess the performance of the
model to ensure that the phenomena of interest are being captured.


\section{Basics}
\label{info:SURF_MATL_Basics}

By default, the outer boundary of the computational domain is assumed
to be a solid boundary that is maintained at ambient temperature. The
same is true for any obstructions that are added to the scene. To
specify the properties of solids, use the namelist group {\ct SURF}
(Section~\ref{info:SURF}). Solids are assumed to
consist of layers that can be made of different materials.  The
properties of each material required are designated via the {\ct MATL}
namelist group (Section~\ref{info:MATL}).  These properties indicate how
rapidly the materials heat up, and how they burn.  Each {\ct MATL}
entry in the input file must have an {\ct ID}, or name, so that they
may be associated with a particular {\ct SURF} via the parameter {\ct
MATL\_ID}.  For example, the input file entries:

\footnotesize
\begin{verbatim}
&MATL ID             = 'BRICK'
      CONDUCTIVITY   = 0.69
      SPECIFIC_HEAT  = 0.84
      DENSITY        = 1600. /

&SURF ID        = 'BRICK WALL'
      MATL_ID   = 'BRICK'
      COLOR     = 'RED'
      BACKING   = 'EXPOSED'
      THICKNESS = 0.20 /

&OBST XB=0.1, 5.0, 1.0, 1.2, 0.0, 1.0, SURF_ID='BRICK WALL' /
\end{verbatim}
\normalsize

\noindent
define a brick wall that is 4.9~m long, 1~m high, and 20~cm thick.
\begin{warning}
\noindent
The thickness of the wall indicated by the {\ct OBST} line need not
match that indicated by the {\ct SURF} line. The thickness of the material on the surface of the wall
is dictated by the parameter {\ct THICKNESS}.  These two parameters are independent for each other,
the {\ct OBST} line describes the overall geometric structure, the {\ct SURF} line describes the
characteristics of the surfaces of the geometry which includes the thickness of the layers of
materials applied to that surface.
\end{warning}



\clearpage

\section{Surface Temperature and Heat Flux}

This section describes how to specify simple thermal boundary conditions. These are often used when there is little or no
information about the properties of the solid materials. If the properties of the materials are known, it is better to specify these
properties and let the model compute the heat flux to, and temperature of, the walls and other solid surfaces.


\subsection{Specified Solid Surface Temperature}
\label{info:specified_temperature}

Usually, the thermal properties of a solid boundary are specified via the
{\ct MATL} namelist group, which is in turn invoked by the {\ct SURF} entry via
the character string {\ct MATL\_ID}. However, sometimes it is convenient to
specify a fixed temperature boundary condition, in which case set
{\ct TMP\_FRONT} to be the surface temperature in units of $^\circ$C:

\footnotesize
\begin{verbatim}
&SURF ID        = 'HOT WALL'
      COLOR     = 'RED'
      TMP_FRONT = 200. /
\end{verbatim}
\normalsize

\noindent
Note that there is no need to specify a {\ct MATL\_ID} or {\ct THICKNESS}. Because the wall is to be maintained at the given temperature,
there is no need to say anything about its material composition or thickness.



\subsection{Special Topic: Convective Heat Transfer Options}
\label{info:convection}

This section is labeled as a special topic because normally you do not need to modify the convective heat transfer
model in FDS. However, there are special cases for which the default model may not be adequate, and this section
describes some options.

\subsubsection{Default Convective Heat Transfer Model}

By default in an LES calculation, the convective heat flux to the surface is
obtained from a combination of natural and forced
convection correlations
\be \dq_c'' = h \; \Delta T
    \quad \hbox{W/m}^2 \quad ; \quad h =
    \max \; \left[ \; C \, |\Delta T|^\ot \; , \;
            \frac{k}{L} \; \NU
            \right]  \quad
    \hbox{W/m$^2$/K} \ee
where $\Delta T$ is the difference between the wall and the gas temperature,
$C$ is the coefficient for natural convection (1.52 for a horizontal surface
and 1.31 for a vertical surface, by default). The Nusselt number, Nu, depends on the shape of the obstruction~\cite{Holman:1}:
\be \NU = \left\{ \begin{array}{ll} 0.037 \; \RE^\fofi \; \PR^\ot & \hbox{Cartesian} \\
                                    0.664 \; \RE^\ha \; \PR^\ot & \hbox{Cylindrical} \\
                                    2 + 0.6 \; \RE^\ha \; \PR^\ot & \hbox{Spherical} \end{array} \right. \ee
$L$ is a characteristic length related to the size of the physical
obstruction; $k$ is the thermal conductivity of the
gas, and the Reynolds $\RE$ and Prandtl $\PR$ numbers are based on the
gas flowing past the obstruction. Since the Reynolds number is proportional to the
characteristic length, $L$, the heat transfer coefficient is weakly
related to $L$ (for high $\RE$, $h \sim L^{-1/5}$). For this reason, $L$ is taken to be 1~m for most
calculations. You can change the empirical coefficients using {\ct C\_HORIZONTAL} or {\ct C\_VERTICAL} for $C$ and
{\ct C\_FORCED}, {\ct C\_FORCED\_CYLINDER}, or {\ct C\_FORCED\_SPHERE} for the constant in the Nusselt number correlation, all of which are input on the {\ct MISC} line.

\subsubsection{Changing the Convective Heat Transfer Coefficient}

If you want to change the default convective heat transfer coefficient, you can set it to a constant using
{\ct H\_FIXED} on the {\ct SURF} line in units of W/m$^2$/K.

\subsubsection{Specifying the Heat Flux at a Solid Surface}

Instead of altering the convective heat transfer coefficient, you may specify
a fixed heat flux directly.  Two methods are available to do this.  The first is to specify a
{\ct NET\_HEAT\_FLUX} in units of kW/m$^2$.  When this is specified FDS will compute the surface
temperature required to
ensure that the combined radiative and convective heat flux from the surface is equal to the
{\ct NET\_HEAT\_FLUX}.  The second method is to specify separately the {\ct CONVECTIVE\_HEAT\_FLUX},
in units of kW/m$^2$, and the radiative heat flux.  The radiative heat flux is specified  by setting both
{\ct TMP\_FRONT} and {\ct EMISSIVITY} appropriately on the {\ct SURF} line. Note that if you wish there to be only a convective heat flux from a
surface, then the {\ct EMISSIVITY} should be set to zero.  If {\ct NET\_HEAT\_FLUX} or
{\ct CONVECTIVE\_HEAT\_FLUX} is positive, the wall heats up the surrounding gases. If {\ct NET\_HEAT\_FLUX} or
{\ct CONVECTIVE\_HEAT\_FLUX} is negative, the wall cools the surrounding gases.



\subsection{Special Topic: Adiabatic Surfaces}
\label{info:adiabatic}

For some special applications, it is often desired that a solid
surface be adiabatic, that is, there is no net heat transfer
(radiative and convective) from the gas to the solid. For this case,
all that must be prescribed on the {\ct SURF} line is {\ct ADIABATIC=.TRUE.}, and nothing else.  FDS will compute a wall temperature
so that the sum of the net convective and radiative heat flux is zero.  Specifying a surface as {\ct ADIABATIC} will
result in FDS defining {\ct NET\_HEAT\_FLUX=0}.

\begin{warning}
No solid surface is truly adiabatic; thus, the specification of an adiabatic boundary condition should be used for diagnostic purposes only.
\end{warning}



\clearpage


\section{Heat Conduction in Solids}
\label{info:MATL}

Specified temperature or heat flux boundary conditions are
easy to apply, but only of limited usefulness in real fire scenarios.
In most cases, walls, ceilings and floors are made up of several layers
of lining materials. The {\ct MATL} namelist group is used to define the properties of the materials that make
up boundary solid surfaces. A solid boundary can consist of
multiple layers\footnote{The maximum number of material layers is 20. The maximum number of material components is 20.} of different
materials, and each layer can consist of multiple material
components.

\subsection{Structure of Solid Boundaries}

Material layers and components are
specified on the {\ct SURF} line via the array called {\ct MATL\_ID(IL,IC)}.
The argument {\ct IL} is an integer indicating the
layer index, starting at 1, the layer at the exterior boundary. The
argument {\ct IC} is an integer indicating the component index. For
example, {\ct MATL\_ID(2,3)='BRICK'} indicates that the third material
component of the second layer is {\ct BRICK}. In practice, the
materials are often listed as in the following example:

\footnotesize
\begin{verbatim}
&MATL ID             = 'INSULATOR'
      CONDUCTIVITY   = 0.041
      SPECIFIC_HEAT  = 2.09
      DENSITY        = 229. /

&SURF ID        = 'BRICK WALL'
      MATL_ID   = 'BRICK','INSULATOR'
      COLOR     = 'RED'
      BACKING   = 'EXPOSED'
      THICKNESS = 0.20,0.10 /

\end{verbatim}
\normalsize

\noindent
Without arguments, the parameter {\ct MATL\_ID} is assumed to be a list of the materials in multiple layers,
with each layer consisting of only a single
material component.

\begin{warning}
\noindent
When a {\ct SURF} is applied to the face of an {\ct OBST}, the first {\ct MATL\_ID} is at the face of the {\ct OBST}, with the
other {\ct MATL\_ID}s being applied in succession with the final {\ct MATL\_ID} being applied on the opposite face of the {\ct OBST}.
If in the example above, {\ct BRICK WALL} was applied to the entire {\ct OBST} using {\ct SURF\_ID}, then when doing a heat transfer calculation
from the +x face to the -x face, FDS would consider the {\ct OBST} to be {\ct BRICK} followed by {\ct INSULATOR} and the same for a heat transfer
calculation from the -x face to the +x face.  To avoid this, specify a second {\ct SURF} that has the reverse {\ct MATL\_ID}
and use {\ct SURF\_ID6} to apply the two {\ct SURF} definitions to opposite faces of the {\ct OBST}.
\end{warning}


\noindent Mixtures of solid materials within the same layer can be defined using
the {\ct MATL\_MASS\_FRACTION} keyword. This parameter has the same
two indices as the {\ct MATL\_ID} keyword. For example, if the
brick layer contains some additional water, the input could look like this:

\footnotesize
\begin{verbatim}
&MATL ID            = 'WATER'
      CONDUCTIVITY  = 0.60
      SPECIFIC_HEAT = 4.19
      DENSITY       = 1000. /

&SURF ID                        = 'BRICK WALL'
      MATL_ID(1,1:2)            = 'BRICK','WATER'
      MATL_MASS_FRACTION(1,1:2) = 0.95,0.05
      MATL_ID(2,1)              = 'INSULATOR'
      COLOR                     = 'RED'
      BACKING                   = 'EXPOSED'
      THICKNESS                 = 0.20,0.10 /  <--- for layers 1 and 2

\end{verbatim}
\normalsize
\noindent
In this example, the first layer of material, Layer~1, is composed of a mixture of
brick and water. This is given by the {\ct MATL\_ID} array which specifies
Component~1 of Layer~1 to be brick, and Component~2 of
Layer~1 to be water. The mass fraction of each is specified via {\ct MATL\_MASS\_FRACTION}. In this
case, brick is 95~\%, by mass, of Layer 1, and water is 5~\%.

It is important to notice that the components of the solid mixtures
are treated as pure substances with no voids. The density of the
mixture is
\be
\rho = \left(\sum_i\frac{Y_i}{\rho_i}\right)^{-1}
\ee
where $Y_i$ are the material mass fractions and $\rho_i$ are the
material bulk densities defined on the {\ct MATL} lines. In the
example above, the resulting density of the wall would be about
1553~kg/m$^3$. The fact that the wall density is smaller than the
density of pure brick may be confusing, but can be explained easily.
If the wall can contain water, the whole volume of the wall can not be
pure brick. Instead there are voids (pores) that are
filled with water. If the water is taken away, there is only about
1476~kg/m$^3$ of brick left. To have a density of 1600~kg/m$^3$ for a
partially void wall, a higher density should be used for the pure
brick.

\subsection{Thermal Properties}

\label{info:thermal_properties}

For any solid material, specify its thermal
{\ct CONDUCTIVITY} (W/m$\cdot$K), {\ct DENSITY} (kg/m$^3$),
{\ct SPECIFIC\_HEAT} (kJ/kg/K), and {\ct EMISSIVITY} (0.9 by default).
Both {\ct CONDUCTIVITY} and {\ct SPECIFIC\_HEAT} can be functions of
temperature. {\ct DENSITY} and {\ct EMISSIVITY} cannot.
Temperature-dependence is specified using the {\ct RAMP} convention.
As an example, consider marinite, a wall material suitable for high temperature applications:

\footnotesize
\begin{verbatim}
&MATL ID                 = 'MARINITE'
      EMISSIVITY         = 0.8
      DENSITY            = 737.
      SPECIFIC_HEAT_RAMP = 'c_ramp'
      CONDUCTIVITY_RAMP  = 'k_ramp' /
&RAMP ID='k_ramp', T= 24., F=0.13 /
&RAMP ID='k_ramp', T=149., F=0.12 /
&RAMP ID='k_ramp', T=538., F=0.12 /
&RAMP ID='c_ramp', T= 93., F=1.172 /
&RAMP ID='c_ramp', T=205., F=1.255 /
&RAMP ID='c_ramp', T=316., F=1.339 /
&RAMP ID='c_ramp', T=425., F=1.423 /
\end{verbatim}
\normalsize
Notice that with temperature-dependent quantities, the {\ct RAMP} parameter
{\ct T} means Temperature, and {\ct F} is the value of either
the specific heat or conductivity. In this case, neither {\ct CONDUCTIVITY} nor {\ct SPECIFIC\_HEAT} is given on the
{\ct MATL} line, but rather the {\ct RAMP} names.

The solid
material can be given an {\ct ABSORPTION\_COEFFICIENT} (1/m) that allows
the radiation to penetrate and absorb into the solid. Correspondingly,
the emission of the material is based on the internal temperatures,
not just the surface.




\subsection{Back Side Boundary Conditions}
\label{info:BACKING}

The layers of a solid boundary are listed in order from the surface. By default,
this innermost layer is assumed to back up to an air gap at ambient
temperature. This is true even if the obstruction forms a wall in the model that backs up to another
compartment. A good example of the default back side boundary condition is a sheet of gypsum board attached to wood studs.
It is assumed that the back side of the gypsum board is an ambient temperature void space within the wall. It does not
matter if the obstruction on which the boundary condition is applied is thick or thin.

There are other back side boundary conditions that can be applied. One is to assume that the wall
backs up to an insulated material in which case no heat is lost to
the backing material. The expression {\ct BACKING='INSULATED'} on
the {\ct SURF} line prevents any heat loss from the back side of the material. Use of this condition
means that you  do not have to specify properties of the inner insulating material because it is assumed to
be perfectly insulated.

If the wall is assumed to back up to the room on the other side of
the wall and you want FDS to calculate the heat transfer
through the wall into the space behind the wall, the attribute
{\ct BACKING='EXPOSED'} should be listed on the {\ct SURF} line. This feature only works
if the wall is less than or equal to one mesh cell thick, and if there is a non-zero volume
of computational domain on the other side of the wall. Obviously, if
the wall is an external boundary of the domain, the heat is lost to an ambient temperature void. The same happens if the back side
gas cell cannot be found.

The back side emissivity of the surface can be controlled by specifying {\ct EMISSIVITY\_BACK} on the {\ct SURF} line. If not specified, the back side
emissivity will be calculated during the simulations as a mass-weighted sum of the {\ct MATL} emissivities.

\subsection{Initial and Back Side Temperature}

\label{info:TMP_INNER}

By default, the initial temperature of the solid material is set to
ambient ({\ct TMPA} on the {\ct MISC} line). Use {\ct TMP\_INNER} on the {\ct SURF} line to
specify a different initial temperature of the solid. The layers of the surface can have different initial temperatures.
Also, the back side temperature boundary condition of a solid can be
set using the parameter {\ct TMP\_BACK} on the {\ct SURF}
line. {\ct TMP\_BACK} is not the actual back side surface temperature,
but rather the gas temperature to which the back side surface is exposed. This
parameter has no meaning for surfaces with {\ct BACKING='EXPOSED'} or
{\ct BACKING='INSULATED'}.

\begin{warning}
\noindent
Note that the parameters {\ct TMP\_INNER} and {\ct TMP\_BACK} are only meaningful for solids with specified {\ct THICKNESS} and material
properties (via the {\ct MATL\_ID} keyword).
\end{warning}



\subsection{Walls with Different Materials Front and Back}
\label{info:EXPOSED}

If you apply the attribute {\ct BACKING='EXPOSED'} on a {\ct SURF} line that is applied to a zero or one-cell thick
obstruction, FDS calculates the heat conduction through the entire {\ct THICKNESS} and it uses the gas phase temperature
and heat flux on the front and back sides for boundary conditions. A redundant calculation is performed on the opposite side of the obstruction, so be
careful how you specify multiple layers. If the layering is symmetric, the same {\ct SURF} line can be applied to both sides. However,
if the layering is not symmetric, you must create two separate {\ct SURF} lines and apply one to each side. For example, a hollow box column that is
made of steel and covered on the outside by a layer of insulation material and a layer of plastic on top of the insulation material,
would have to be described with two {\ct SURF} lines like the following:

\footnotesize
\begin{verbatim}
&SURF ID                 = 'COLUMN EXTERIOR'
      COLOR              = 'ANTIQUE WHITE'
      BACKING            = 'EXPOSED'
      MATL_ID(1:3,1)     = 'PLASTIC','INSULATION','STEEL'
      THICKNESS(1:3)     = 0.002,0.036,0.0063 /

&SURF ID                 = 'COLUMN INTERIOR'
      COLOR              = 'BLACK'
      BACKING            = 'EXPOSED'
      MATL_ID(1:3,1)     = 'STEEL','INSULATION','PLASTIC'
      THICKNESS(1:3)     = 0.0063,0.036,0.002 /
\end{verbatim} \normalsize

\noindent
If, in addition, the insulation material and plastic are combustible, and their burning properties are specified on the appropriate {\ct MATL} lines,
then you need to indicate which side of the column would generate the fuel vapor. In this case, the steel is impermeable; thus you should add the parameter
{\ct LAYER\_DIVIDE=2.0} to the {\ct SURF} line labeled {\ct 'COLUMN EXTERIOR'} to indicate that fuel vapors formed by the heating of the
two first layers ({\ct 'PLASTIC'} and {\ct 'INSULATION'}) are to be driven out of that surface.
You need to also specify {\ct LAYER\_DIVIDE=0.0} on the {\ct SURF} line labeled {\ct 'COLUMN INTERIOR'} to indicate that no fuel
vapors are to driven into the interior of the column. In fact, values from 0.0 to 1.0 would work equally because the material
{\ct 'STEEL'} would not generate any fuel vapors.

By default, {\ct LAYER\_DIVIDE} is 0.5 times the number of layers for surfaces with {\ct EXPOSED} backing, and equal to the number of
layers for other surfaces.







\subsection{Special Topic: Non-Planar Walls and Targets}

\label{info:GEOMETRY}

All obstructions in FDS are assumed to conform to the rectilinear
mesh, and all bounding surfaces are assumed to be flat
planes. However, many objects, like cables, pipes, and ducts, are not
flat. Even though these objects have to be represented in FDS as
``boxes,'' you can still perform the internal heat transfer
calculation as if the object were really cylindrical or spherical. For
example, the input lines:

\footnotesize
\begin{verbatim}
&OBST XB=0.0,5.0,1.1,1.2,3.4,3.5, SURF_ID='CABLE' /
&SURF ID='CABLE', MATL_ID='PVC', GEOMETRY='CYLINDRICAL', THICKNESS=0.01 /
\end{verbatim} \normalsize

\noindent
can be used to model a power cable that is 5~m long, cylindrical in
cross section, 2~cm in diameter. The heat transfer calculation is
still one-dimensional; that is, it is assumed that there is a uniform
heat flux all about the object. This can be somewhat confusing because
the cable is represented as an obstruction of square cross section,
with a separate heat transfer calculation performed at each face, and
no communication among the four faces. Obviously, this is not an ideal
way to do solid phase heat transfer, but it does provide a reasonable
bounding surface temperature for the gas phase calculation. More
detailed assessment of a cable would require a two or
three-dimensional heat conduction calculation, which is not included
in FDS. Use {\ct GEOMETRY='SPHERICAL'} to describe a spherical object.


\subsection{Special Topic: Solid Phase Numerical Gridding Issues}
\label{info:solid_phase_stability}

To compute the temperature and reactions inside the solids, FDS solves
the one-dimensional heat transfer equation numerically. The size of
the mesh cells on the surface of the solid is automatically chosen
using a rule that makes the cell size smaller than the square root of
the material diffusivity $(k/\rho c)$. By default, the solid mesh
cells increase towards the middle of the material layer and are smallest
on the layer boundaries.

The default parameters are usually appropriate for simple heat transfer calculations but sometimes the use of pyrolysis reactions
makes the temperatures and burning rate fluctuate. Adjustments may also be needed in case of
extremely transient heat transfer situations. The numerical accuracy and stability of the solid phase solution may be improved by
one of the following methods:
\begin{description}
\item[Make the mesh density more uniform ] inside the material by setting {\ct STRETCH\_FACTOR(NL)=1.}
on the {\ct SURF} line. This will generate a perfectly uniform mesh for layer number {\ct NL}. (This happens automatically if the layer
contains one or more reacting materials.) Values between 1 and 2 give different levels of stretching.
Note that {\ct STRETCH\_FACTOR} needs to be specified for all the layers.
\item[Make the mesh cells smaller] by setting {\ct CELL\_SIZE\_FACTOR} less than 1.0. For example, {\ct CELL\_SIZE\_FACTOR=0.5} makes the
mesh cells half the size. The scaling always applies to all layers.
\item[Improve the time resolutions] by setting {\ct WALL\_INCREMENT=1} on the
{\ct TIME} line. This forces the solid phase temperatures to be solved on every time step.
\item[Enforce the re-gridding] of shrinking wall cells by setting {\ct REGRID\_FACTOR} on the {\ct SURF} line to a value that is larger than 0.9 (default)
and smaller than 1.0. For example, {\ct REGRID\_FACTOR=0.99} will cause re-gridding when the any of the cells has changed one percent in size, thus
reducing the amount of interpolation errors. Setting {\ct REGRID\_FACTOR} less than 0.9 can save computing time in some cases.
\end{description}

If all the material components of the surface are reacting, and the pyrolysis reactions have no solid residue, the thickness of
the surface is going to shrink when the surface reacts. Each of the shrinking layers will vanish from the computation when its thickness gets
smaller than a prescribed limiting value. This value can be set on a {\ct SURF} line via {\ct MINIMUM\_LAYER\_THICKNESS} keyword,
defaulting to 1.E-6 m. When all the material of a shrinking surface is consumed but {\ct BURN\_AWAY} is not
prescribed, the surface temperature is set to {\ct TMP\_BACK}, convective heat flux to zero and burning rate to zero.

See Section~\ref{solid_phase_verification} for ways to check and improve the accuracy of the solid phase calculation.


\clearpage

\section{Pyrolysis Models}

FDS has several approaches for describing the pyrolysis of solids and liquids. The approach to take depends largely
on the availability of material properties and the appropriateness of the underlying pyrolysis model.
Note that all pyrolysis models in FDS require the user to explicitly define the gas phase reaction. See Chapter~\ref{chap:combustion} for details.

\subsection{A Gas Burner with a Specified Heat Release Rate}

\label{info:gas_burner}

Solids and liquid fuels can be modeled by specifying their relevant
properties via the {\ct MATL} namelist group. However, if you simply
want to specify a fire of a given heat release rate (HRR),
you need not specify any material properties. A specified fire is
basically modeled as the ejection of gaseous fuel
from a solid surface or vent. This is essentially a burner, with a
specified Heat Release Rate Per Unit Area, {\ct HRRPUA}, in units of
kW/m$^2$. For example

\footnotesize
\begin{verbatim}
&SURF ID='FIRE', HRRPUA=500. /
\end{verbatim}
\normalsize

\noindent
applies 500~kW/m$^2$ to any surface with the attribute
{\ct SURF\_ID='FIRE'}. See the discussion of {\bf Time Dependent Conditions}
in Chapter~\ref{info:RAMP} to learn how to ramp the heat release rate up and down.

An alternative to {\ct HRRPUA} with the exact same functionality is
{\ct MLRPUA}, except this parameter
specifies the Mass Loss Rate of fuel gas Per Unit Area in kg/m$^2$/s. Do not specify both
{\ct HRRPUA} and {\ct MLRPUA} on the same {\ct SURF} line. With either,
the stoichiometry of the gas phase reaction is set by the simple chemistry input
parameters on the {\ct REAC} line.
If an Arrhenius-rate combustion model is desired instead of the default mixing controlled model, see Section~\ref{info:finite}.

\begin{warning}
Specifying {\ct HRRPUA} or {\ct MLRPUA} requires the use of the simple chemistry inputs for {\ct REAC}.
\end{warning}



\subsection{Special Topic: A Radially-Spreading Fire}
\label{info:spread}

Sometimes it is desired that a fire spread radially at some specified
rate. Rather than trying to design material properties
to achieve this, you can alternatively use a {\ct VENT} or a {\ct SURF} line in a special way.
First, you need to add a {\ct SURF} line with
a specified heat release rate, {\ct HRRPUA}, and an optional
time history parameter, {\ct RAMP\_Q} or {\ct TAU\_Q}. Then, you can also specify {\ct XYZ} and {\ct SPREAD\_RATE} on either the {\ct VENT} or {\ct SURF} line.
The fire is directed to start at the point {\ct XYZ} and spread
radially at a rate of {\ct SPREAD\_RATE} (m/s). The optional ramp-up of the HRR begins at
the time when the fire arrives at a given point.
For example, the lines

\footnotesize
\begin{verbatim}
&SURF ID='FIRE', HRRPUA=500.0, RAMP_Q='fireramp' /
&RAMP ID='fireramp', T= 0.0, F=0.0 /
&RAMP ID='fireramp', T= 1.0, F=1.0 /
&RAMP ID='fireramp', T=30.0, F=1.0 /
&RAMP ID='fireramp', T=31.0, F=0.0 /
&VENT XB=0.0,5.0,1.5,9.5,0.0,0.0, SURF_ID='FIRE', XYZ=1.5,4.0,0.0, SPREAD_RATE=0.03 /
\end{verbatim}
\normalsize

\noindent
create a rectangular patch at $z=0$ on which the fire starts at the
point (1.5,4.0,0.0) and spreads outwards at a rate of 0.03~m/s. Each surface cell
burns for 30~s as the fire spreads outward, creating a widening ring of fire. Note that the {\ct RAMP\_Q} is used in this
construct to turn the burning on and off to simulate the consumption of fuel as the fire spreads radially. It should not
be used to mimic the ``$t$-squared'' curve -- the whole point of the exercise is to mimic this curve in a more natural way.
Eventually, the fire goes out as the ring grows past the boundary of the rectangle.
Some trial and error is probably required to find the {\ct SPREAD\_RATE} that
leads to a desired time history of the heat release rate.

\begin{warning}
If the starting time of the simulation, {\ct T\_BEGIN}, is not zero, be aware that the default start time of the radially spreading
fire is {\ct T\_BEGIN}, not zero. This is also true of {\ct TAU\_Q}, but it is not true of {\ct RAMP\_Q}. Because this might be
confusing, if you start the calculation at a time other than zero, do a quick test to ensure that the ramps or fire spread behave as
expected.
\end{warning}




\subsection{Solid Fuels that Burn at a Specified Rate}

\label{info:specified_burning}

Real objects, like furnishings, office equipment, and so on, are
often difficult to describe via the {\ct SURF} and {\ct MATL}
parameters. Sometimes the only information about a given object is its
bulk thermal properties, its ``ignition'' temperature, and its
subsequent burning rate as a function of time from ignition. For
this situation, add lines similar to the following:

\footnotesize
\begin{verbatim}
&MATL ID                   = 'stuff'
      CONDUCTIVITY         = 0.1
      SPECIFIC_HEAT        = 1.0
      DENSITY              = 900.0 /

&SURF ID                   = 'my surface'
      COLOR                = 'GREEN'
      MATL_ID              = 'stuff'
      HRRPUA               = 1000.
      IGNITION_TEMPERATURE = 500.
      RAMP_Q               = 'fire_ramp'
      THICKNESS            = 0.01 /

&RAMP ID='fire_ramp', T=  0.0, F=0.0 /
&RAMP ID='fire_ramp', T= 10.0, F=1.0 /
&RAMP ID='fire_ramp', T=310.0, F=1.0 /
&RAMP ID='fire_ramp', T=320.0, F=0.0 /
\end{verbatim} \normalsize

\noindent
An object with surface properties defined by {\ct 'my surface'} shall
burn at a rate of 1000~kW/m$^2$ after a linear ramp-up of 10 s
following its ``ignition'' when its surface temperature reaches
500~$^\circ$C. Burning shall continue for 5~min, and then ramp-down
in 10~s. Note that the time {\ct T} in the {\ct RAMP} means time from
ignition, not the time from the beginning of the simulation. Note also that now the ``ignition temperature'' is a surface
property, not material property.

After the surface has ignited, the heat transfer into the solid is
still calculated, but there is no coupling between the burning rate
and the surface temperature. As a result, the surface temperature may
increase too much. To account for the energy loss due to the
vaporization of the solid fuel, {\ct HEAT\_OF\_VAPORIZATION} can be
specified for the surface. For example, when using the lines below,
the net heat flux at the material surface is reduced by a factor
1000~kJ/kg times the instantaneous burning rate.

\footnotesize
\begin{verbatim}
&SURF ID                   = 'my surface'
      COLOR                = 'GREEN'
      MATL_ID              = 'stuff'
      HRRPUA               = 1000.
      IGNITION_TEMPERATURE = 500.
      HEAT_OF_VAPORIZATION = 1000.
      RAMP_Q               = 'fire_ramp'
      THICKNESS            = 0.01 /
\end{verbatim} \normalsize

\noindent
The parameters {\ct HRRPUA}, {\ct IGNITION\_TEMPERATURE}, and {\ct HEAT\_OF\_VAPORIZATION} are all telling FDS that you want to control the
burning rate yourself, but you still want to simulate the heating up and ``ignition'' of the fuel. When these parameters appear on the {\ct SURF} line, they
are acting in concert. If {\ct HRRPUA} appears alone, the surface will begin burning at the start of the simulation, like a piloted burner. The addition of
an {\ct IGNITION\_TEMPERATURE} delays burning until your specified temperature is reached. The addition of {\ct HEAT\_OF\_VAPORIZATION}
tells FDS to account for the energy used to vaporize the fuel. For any of these options, if a {\ct MATL} line is invoked by a {\ct SURF} line containing
a specified {\ct HRRPUA}, then that {\ct MATL} ought to have only thermal properties. It should have no reaction parameters, product yields, and so on, like
those described in the previous sections. By specifying {\ct HRRPUA}, you are controlling the burning rate rather than letting the material pyrolyze based on
the conditions of the surrounding environment.






\subsection{Solid Fuels that do NOT Burn at a Specified Rate}
\label{info:solid_pyrolysis}

This section describes the parameters that describe the reactions that occur within solid
materials when they are burning. It is strongly recommended before reading this section that you read some background material on
solid phase pyrolysis, for example ``Thermal Decomposition of Polymers,'' by Hirschler and Morgan, or
``Flaming Ignition of Solid Fuels,'' by Torero, both of which are in the 4th edition of the
{\em SFPE Handbook of Fire Protection Engineering}.

\subsubsection{The Reaction Mechanism}

A solid surface in FDS may consist of multiple layers with multiple material
components per layer. The material components are described via {\ct MATL} lines and are specified on the {\ct SURF}
line that describes the structure of the solid.  Each {\ct MATL} can undergo several reactions that may
occur at different temperatures. It may not undergo any -- it may just heat
up. However, if it is to change form via one or more reactions,
designate the number of reactions with the integer {\ct N\_REACTIONS}. It is very important that you designate {\ct N\_REACTIONS}
or else FDS will ignore all parameters associated with
reactions. Note that experimental evidence of multiple
reactions does not imply that a single material is undergoing multiple reactions, but rather that
multiple material components are undergoing individual reactions at distinct temperatures.  Currently, the maximum number of
reactions for each material is 10 and the chain of consecutive
reactions may contain up to 20 steps.

For a given {\ct MATL}, the $j$th reaction can produce other solid materials whose names are designated with {\ct MATL\_ID(i,j)}, and gas
species whose names are designated with {\ct SPEC\_ID(i,j)}. Note that the index, $i$, runs from 1 to the number of material or gaseous species. This index
does {\em not} correspond to the order in which the {\ct MATL} or {\ct SPEC} lines are listed in the input file.
For a given reaction, the relative amounts of solid or gaseous products are input
to FDS via the {\em yields}: {\ct NU\_MATL(i,j)} and {\ct NU\_SPEC(i,j)}, respectively.
The yields are all zero by default. If {\ct NU\_MATL(i,j)} or {\ct NU\_SPEC(i,j)} is non-zero, then you {\em must} indicate what the
solid residue is via {\ct MATL\_ID(j)}, the {\ct ID} of another {\ct MATL} that is also listed in the input file. Ideally, the sum of the
yields should add to 1, meaning that the mass of the reactant is
conserved. However, there are times when it is convenient to have the
yields sum to something less than one. For example, the spalling or
ablation of concrete can be described as a ``reaction'' that consumes
energy but does not produce any ``product'' because the concrete is
assumed to have either fallen off the surface in chunks or pulverized
powder. The concrete's mass is not conserved {\em in the model}
because it has essentially disappeared from that particular surface.

For consistency, the {\ct HEAT\_OF\_COMBUSTION(j)} can also be specified for each reaction, $j$. These values are
used only if the corresponding heats of combustion for the gaseous species are greater than zero.

In the example below, the pyrolysis of wood is included within a simulation that uses
a finite-rate reaction instead of the default mixing-controlled model. Notice in this case that
all of the gas species (except for the background nitrogen) are explicitly defined, and as a result, FDS
needs to be told explicitly what gaseous species are produced by the solid phase reactions. In this case, 82~\% of the
mass of wood is converted to gaseous {\ct 'PYROLYZATE'} and 18~\% is converted to solid {\ct 'CHAR'}.

\footnotesize
\begin{verbatim}
&SPEC ID = 'PYROLYZATE', MW=53.6 /
&SPEC ID = 'OXYGEN', MASS_FRACTION_0 = 0.23 /
&SPEC ID = 'WATER VAPOR' /
&SPEC ID = 'CARBON DIOXIDE' /

&MATL ID                    = 'WOOD'
      EMISSIVITY            = 0.9
      CONDUCTIVITY          = 0.2
      SPECIFIC_HEAT         = 1.3
      DENSITY               = 570.
      N_REACTIONS           = 1
      A(1)                  = 1.89E10
      E(1)                  = 1.51E5
      N_S(1)                = 1.0
      MATL_ID(1,1)          = 'CHAR'
      NU_MATL(1,1)          = 0.18
      SPEC_ID(1:4,1)        = 'PYROLYZATE','OXYGEN','WATER VAPOR','CARBON DIOXIDE'
      NU_SPEC(1:4,1)        = 0.82,0,0,0
      HEAT_OF_REACTION(1)   = 430.
      HEAT_OF_COMBUSTION(1) = 14500. /
\end{verbatim} \normalsize

\noindent Note that the indices associated with the parameters are not needed {\em in this case}, but they are shown to emphasize that, in general, there can
be multiple reactions with corresponding kinetic parameters and products.

\subsubsection{The Reaction Rates}

For each reaction that each material component undergoes you must specify kinetic parameters of the reaction rate. The general evolution equation for
a material undergoing one or more reactions is:
\be
  \dod{Y_{s,i}}{t} = - \sum_{j=1}^{N_{r,i}} r_{ij} + \sum_{i'=1}^{N_m} \sum_{j=1}^{N_{r,i'}} \nu_{s,i'j} \; r_{i'j} \quad (i' \neq i)  \quad ; \quad
  r_{ij} = A_{ij} \; Y_{s,i}^{n_{s,ij}} \; \exp \left(-\frac{E_{ij}}{R \, T_s} \right) \quad ; \quad Y_{s,i} = \left( \frac{\rho_{s,i}}{\rho_{s0}} \right)
  % \max\left[0,T_s-T_{thr,ij}\right]^{n_{t,ij}}
  \label{rr}
\ee
The term, $r_{ij}$, defines the rate of reaction at the temperature, $T_s$, of the $i$th material undergoing its $j$th reaction.
The second term on the right of the equation represents the contributions of other materials producing the $i$th material as a residue with a yield
of $\nu_{s,i'j}$. This term is denoted by {\ct NU\_MATL(:,j)} on the $i'$-th {\ct MATL} line.
$\rho_{s,i}$ is the density of the $i$th material component of the layer, defined as the mass of the $i$th material component
divided by the volume of the layer.  $\rho_{s0}$ is the initial
density of the layer. Thus, $Y_{s,i}=\rho_{s,i}/\rho_{s0}$ is a quantity that
increases if the $i$th material component is produced as a residue of some other
reaction, or decreases if the $i$th component decomposes.  If the
layer is composed of only one material, then $\rho_{s,i}/\rho_{s0}$ is initially 1.
$n_{s,ij}$ is the reaction order and prescribed under the name {\ct N\_S(j)}, and is 1 by default.
If the value of $n_s$ is not known, it is a good starting point to assume $n_s=1$.

The pre-exponential factor, $A_{ij}$, is prescribed under the name
{\ct A(j)} on the {\ct MATL} line of the $i$th material, with units of s$^{-1}$. $E_{ij}$, the activation energy,
is prescribed via {\ct E(j)} in units of kJ/kmol. Remember that 1~kcal
is 4.184~kJ, and be careful with factors of 1000. For a given reaction, specify both $A$ and $E$, or neither. Do not specify
only one of these two parameters. Typically, these parameters only have meaning when both are derived from a common set of
experiments, like TGA (Thermo-Gravimetric Analysis).

It is very important to keep in mind that $A$ and $E$ are not available for most real materials. If $A$ and $E$ are not known,
there are several parameters that can be used by FDS to derive effective values. The most important parameter to
specify in place of $A$ and $E$ is
the  {\ct REFERENCE\_TEMPERATURE} ($^\circ$C). To understand this parameter, consider the plot shown in Fig.~\ref{pyrolysis}.
These curves represent the results of a hypothetical TGA experiment.
The Mass Fraction (blue curve) is the normalized density of the material ($Y$) which decreases as the sample is slowly heated,
in this case at a rate
of 5~K/min. The Reaction Rate (green curve) is the rate of change of the mass fraction as a function of time ($-dY/dt$).
Where this curve peaks is referred to in FDS
as the {\ct REFERENCE\_TEMPERATURE}.\footnote{The term ``reference temperature'' is used simply to maintain
backward compatibility with earlier versions of
FDS.}  Note that the {\ct REFERENCE\_TEMPERATURE} is {\em not} the same as an ignition temperature, nor is it necessarily
the surface temperature of the burning solid. Rather, it is simply the temperature at which the mass fraction of the material
decreases at its maximum rate within the context of a TGA or similar experimental apparatus. The
kinetic constants for the reaction are found from the formulae\footnote{These formulas have been derived from an analysis that considers a first-order reaction.
When using the proposed method,
do not specify non-unity value for the reaction order {\ct N\_S} on the {\ct MATL} line.}:
\be
   E = \frac{e \, r_p}{Y_0} \, \frac{R \, T_p^2}{\dot{T}} \quad ; \quad
   A = \frac{e \, r_p}{Y_0} \, e^{E/R \, T_p} \label{AandE}
\ee
where $T_p$ and $r_p/Y_0$ are the reference temperature and rate, respectively. The
{\ct REFERENCE\_RATE} is the reaction rate, in units of s$^{-1}$, at the given {\ct REFERENCE\_TEMPERATURE} divided by
the mass fraction, $Y_0$, of material in the original sample undergoing the reaction. For a single component, single
reaction material, $Y_0=1$. The {\ct HEATING\_RATE} ($\dot{T}$) is
the rate at which the temperature of the TGA (or equivalent) test
apparatus was increased. It is input into FDS in units of K/min (in the formula, it is expressed in K/s).
Its default value is 5~K/min. In Fig.~\ref{pyrolysis}, the area under the green curve
(Reaction Rate) is equal to the heating rate (in units of K/s).

\begin{figure}[ht]
\noindent
\begin{minipage}{3.5in}
\includegraphics[width=3.5in]{SCRIPT_FIGURES/pyrolysis_1}
\end{minipage}
\hfill
\begin{minipage}{3.0in}
\begin{equation*}
   \frac{dY}{dt} = -A \, Y \, \exp(-E/RT)   \quad \; \quad    Y(0) =1
\end{equation*}
\begin{align*}
   T_p &= 300 \; ^\circ\mathrm{C}  \\
   r_p &= 0.002   \; \mathrm{s}^{-1}  \\
   \dot{T} &= 5 \; \mathrm{K/min} \\
   \nu_s &= 0 \\
\end{align*}
\end{minipage}
\caption[Simple demonstration of pyrolysis model.]{The blue curve represents the normalized mass, $Y=\rho_s/\rho_{s0}$, of a solid material
undergoing heating at a rate of 5~K/min. The green curve represents the reaction rate, $-dY/dt$. The system of ordinary differential equations that
describe the transformation is shown at right. Note that the parameters $T_p$, $r_p$, and $\nu_s$ represent the ``reference'' temperature,
reaction rate, and residue yield of the single reaction. From these parameters, values of $A$ and $E$ can be estimated using
the formulae in (\ref{AandE}).}
\label{pyrolysis}
\end{figure} \normalsize

There are many cases where it is only possible to estimate the {\ct REFERENCE\_TEMPERATURE} ($T_p$) of a particular
reaction because micro-scale calorimetry data is unavailable. In such cases,
an additional parameter can be specified along with {\ct REFERENCE\_TEMPERATURE} ($T_p$) to help fine tune the shape of the
reaction rate curve, assuming some sort of measurement or estimate has been made to indicate at what temperature, and over what
temperature range, the
reaction takes place. The {\ct PYROLYSIS\_RANGE} ($\Delta T$) is the
approximate width (in degrees Celsius or Kelvin) of the green curve, assuming its shape to be roughly triangular. Its default value is
80~$^\circ$C. Using these input parameters, an estimate is made of the peak reaction rate, $r_p$, with which $E$, then $A$,
are calculated.
\be
   \frac{r_p}{Y_0} = \frac{2 \, \dot{T}} {\Delta T} \, (1-\nu_s) \label{r_p}
\ee
The parameter, $\nu_r$, is the yield of solid residue.

When in doubt about the values of
these parameters, just specify the {\ct REFERENCE\_TEMPERATURE}.
Note that FDS will automatically calculate $A$ and $E$ using the above formulae.
Do not specify $A$ and $E$ if you specify {\ct REFERENCE\_TEMPERATURE}, and do not specify {\ct PYROLYSIS\_RANGE} if you
specify {\ct REFERENCE\_RATE}.
For the material decomposition shown in Fig.~\ref{pyrolysis}, the {\ct MATL} would have the form:

\footnotesize
\begin{verbatim}
&MATL ID                       = 'My Fuel'
      ...
      N_REACTIONS              = 1
      SPEC_ID(1,1)             = '...'
      NU_SPEC(1,1)             = 1.
      REFERENCE_TEMPERATURE(1) = 300.
      REFERENCE_RATE(1)        = 0.002
      HEATING_RATE(1)          = 5.
      HEAT_OF_COMBUSTION(1)    = ...
      HEAT_OF_REACTION(1)      = ... /
\end{verbatim}
\normalsize

\noindent
Note that the indices have been added to the reaction parameters to
emphasize the fact that these parameters are stored in arrays of
length equal to {\ct N\_REACTIONS}. If there is only one reaction, you
need not include the {\ct (1)}, but it is a good habit to get into.
Note also that if the default combustion model is used, you can denote that the reaction
produces fuel gas using the appropriate {\ct SPEC\_ID}.
Note also that the {\ct HEAT\_OF\_COMBUSTION} is the energy released
per unit mass of fuel gas that mixes with oxygen and combusts.  This
has nothing to do with the pyrolysis process, so why is it specified
here? The answer is that there can be only one {\em gas phase}
reaction of fuel and oxygen in FDS, but there can be dozens of
different materials and dozens of {\em solid phase} reactions. To
ensure that the fuel vapors from different materials combust to
produce the proper amount of energy, it is very important to specify a
{\ct HEAT\_OF\_COMBUSTION} for each material. That way, the mass loss
rate of fuel gases is automatically adjusted so that the effective
mass loss rate multiplied by the single, global, gas phase heat of
combustion produces the expected heat release rate.
If, for example, the {\ct HEAT\_OF\_COMBUSTION} specified on the {\ct REAC} line is twice that
specified on the {\ct MATL} line, the mass of contained within wall
cell will be decremented by that determined by the pyrolysis model,
but the mass added to gas phase would be reduced by 50~\%. A different
value of heat of combustion can be specified for each reaction, $j$, via the parameter {\ct HEAT\_OF\_COMBUSTION(j)}.




\subsubsection{Multiple Solid Phase Reactions}

The solid phase reaction represented by Fig.~\ref{pyrolysis} is fairly simple -- a single, homogenous material is
heated and gasified completely.
In general, real materials are not so simple. First, they consist of more than one material component, each of which can
react over a particular
temperature interval, and some of which leave behind a solid residue.
Some material components may even undergo multiple reactions that
form different residues, like woods that form various amounts of tar, char, and ash, depending on the rate of heating.
Figure~\ref{pyrolysis_2} demonstrates a more complicated material than the one previously described.
It is a hypothetical material that
contains 10~\% (by mass) water and 90~\% solid material. The water evaporates in the neighborhood of 100~$^\circ$C and the
solid pyrolyzes in the
neighborhood of 300~$^\circ$C, leaving 20~\% of its mass behind in the form of a solid residue.

\begin{figure}[ht]
\noindent
\begin{minipage}{3.5in}
\includegraphics[width=3.5in]{SCRIPT_FIGURES/pyrolysis_2}
\end{minipage}
\hfill
\begin{minipage}{3.0in}
\footnotesize
\begin{align*}
   \frac{dY_1}{dt} &= -A_{1,1} \, Y_1 \, \exp(-E_{1,1}/RT)                  & Y_1(0) &=0.1 \\
   \frac{dY_2}{dt} &= -A_{2,1} \, Y_2 \, \exp(-E_{2,1}/RT)                  & Y_2(0) &=0.9 \\
   \frac{dY_3}{dt} &= -\nu_{s,2,1} \frac{dY_2}{dt}                          & Y_3(0) &=0.0
\end{align*}
\begin{align*}
   T_{p,1,1} &= 100+273 \; \mathrm{K}        & T_{p,2,1}   &= 300+273 \; \mathrm{K} \\
   r_{p,1,1} &= 0.0016 \; \mathrm{s}^{-1}    & r_{p,2,1}   &= 0.0012 \; \mathrm{s}^{-1} \\
   \nu_{s,1,1} &= 0                          & \nu_{s,2,1} &= 0.2 \\
   \dot{T} &= 5 \; \mathrm{K/min} & &
\end{align*}
\end{minipage} \normalsize
\caption[A more complicated demonstration of the pyrolysis model.]{The blue curve represents the combined mass fraction,
$\sum Y_i$, and the green curve the net reaction rate, $-d/dt(\sum Y_i)$, for a material that contains
10~\% water (by mass) that evaporates at a temperature of 100~$^\circ$C,
and 90~\% solid material that pyrolyzes at 300~$^\circ$C, leaving a 20~\% (by mass) residue behind.
Note that the numbered subscripts refer
to the material component and the reaction, respectively. In this case, there are three material components,
and the first two each undergo a single
reaction. The third material component is formed as a residue of the reaction of the second material.
The system of ordinary differential equations that governs
the transformation of the materials is shown at right.}
\label{pyrolysis_2}
\end{figure}

The key input lines for this reaction are shown in Fig.~\ref{pyrolysis_2_inputs}.
Note that the only parameters shown are those that describe the reaction mechanism, and that each of these parameters
can be found either from visual inspection of the the mass loss (blue) curve or the reaction rate (green) curve.
Even if TGA or similar data were unavailable in this case, you can still model the solid as a combination of water
that evaporates at 100~$^\circ$C and some other material that pyrolyzes in the vicinity of 300~$^\circ$C, leaving
20~\% of its mass as a residue.
The full set of parameters for these cases are listed in {\bf pyrolysis\_1.fds}
and {\bf pyrolysis\_2.fds}.
Those interested in testing potential solid phase reaction mechanisms ought to use these test cases as templates.

\begin{figure}[ht]
\begin{center}
\begin{minipage}{4in}
\footnotesize
\begin{verbatim}
&SURF ID                        = 'SAMPLE'
      ...
      MATL_ID(1,1:2)            = 'stuff','water'
      MATL_MASS_FRACTION(1,1:2) = 0.9,0.1 /

&MATL ID                    = 'water'
      EMISSIVITY            = 1.0
      DENSITY               = 1000.
      CONDUCTIVITY          = 0.20
      SPECIFIC_HEAT         = 4.184
      N_REACTIONS           = 1
      REFERENCE_TEMPERATURE = 100.
      PYROLYSIS_RANGE       = 10.
      HEATING_RATE          = 5.
      SPEC_ID               = 'WATER VAPOR'
      NU_SPEC               = 1.
      HEAT_OF_REACTION      = 2500. /

&MATL ID                    = 'stuff'
      EMISSIVITY            = 1.0
      DENSITY               = 500.
      CONDUCTIVITY          = 0.20
      SPECIFIC_HEAT         = 1.0
      N_REACTIONS           = 1
      REFERENCE_TEMPERATURE = 300.
      PYROLYSIS_RANGE       = 80.
      HEATING_RATE          = 5.
      NU_SPEC               = 0.8
      SPEC_ID               = 'FUEL'
      NU_MATL               = 0.2
      MATL_ID               = 'ash'
      HEAT_OF_REACTION      = 1000. /

&MATL ID                    = 'ash'
      EMISSIVITY            = 1.0
      DENSITY               = 500.
      CONDUCTIVITY          = 0.20
      SPECIFIC_HEAT         = 1.0 /
\end{verbatim} \normalsize
\end{minipage}
\end{center}
\caption[Input parameters for sample case {\bf pyrolysis\_2}.]{Input parameters for sample case {\bf pyrolysis\_2}.}
\label{pyrolysis_2_inputs}

\end{figure}




\subsubsection{The Heat of Reaction}

Equation~(\ref{rr}) describes the rate of the reaction as a function
of temperature.  Most solid phase reactions require energy; that is,
they are {\em endothermic}. The amount of energy consumed, per unit
mass of reactant that is converted into something else, is specified
by the {\ct HEAT\_OF\_REACTION(j)}. Technically, this is the enthalpy
difference between the products and the reactant. A positive value
indicates that the reaction is {\em endothermic}; that is, the
reaction takes energy out of the system. Usually the {\ct
HEAT\_OF\_REACTION} is accurately known only for simple phase change
reactions like the vaporization of water. For other reactions, it must
be determined empirically.


\subsubsection{Special Topic: The ``Threshold'' Temperature}

In FDS, the reaction rate expression in Eq.~(\ref{rr}) includes an optional term:
\be
  r_{ij} = A_{ij} \; Y_{s,i}^{n_{s,ij}} \; \exp \left(-\frac{E_{ij}}{R \, T_s} \right) \;
  \max\left[0,S_{thr,ij}(T_s-T_{thr,ij})\right]^{n_{t,ij}}
  \label{rr2}
\ee
$T_{thr,ij}$ is an optional ``threshold'' temperature that
allows the definition of non-Arrhenius pyrolysis functions and
ignition criteria, and is prescribed by {\ct THRESHOLD\_TEMPERATURE(j)}.
$S_{thr,ij}$ is the ``threshold direction'' that allows the triggering of reaction
when temperature gets ''above '' $T_{thr,ij}$ ($S_{thr,ij}=+1$) or ''below'' $T_{thr,ij}$ ($S_{thr,ij}=-1$).
$n_{t,j}$ is prescribed under the name {\ct N\_T(j)} and $S_{thr,ij}$ under {\ct THRESHOLD\_SIGN}.

By default, $T_{thr,ij}$ is -273.15 degrees Celsius, $n_{t,j}$ is zero and $S_{thr,ij}=+1$;
thus, the last term of Equation~\ref{rr2} does not affect the pyrolysis rate.
The term can be used to describe a threshold temperature for the pyrolysis
reaction by setting $T_{thr,ij}$ and $n_{t,j}$ = 0. Then the term
is equal to 0 at temperatures below $T_{thr,ij}$ and 1 at temperatures above.

The threshold temperature can be used to simulate simple phase change reactions, such as melting and freezing.
To make the reaction rate controlled by available energy, i.e. {\em not} kinetics, another optional term should be included
in the reaction rate formula
\be
  r_{ij} = A_{ij}\frac{1}{H_{r,\alpha\beta}\Delta t} \max\left[0,S_{thr,ij}(T_s-T_{thr,ij})\right]^{n_{t,ij}}
  \label{rr3}
\ee
This form of reaction rate can be implemented by setting a logical parameter {\ct PCR(j)=.TRUE.}. The pre-exponental
factor $A_{ij}$ should then be given a value that is close or slightly smaller than the specific heat (kJ/kgK) of the material mixture at
phase change temperature.

As an example, consider a small amount of liquid water at +10${}^\circ$C, cooled down to -10${}^\circ$C during a 10 min period, and
then heated up again to +10${}^\circ$C. The input lines for implementing the freezing and melting reactions are given in Fig.~\ref{water_ice_water_inputs},
and the complete input file as {\bf water\_ice\_water.fds}.
The mass fraction of the liquid water as a function of temperature is plotted in Fig.~\ref{water_ice_water_plot}. The cooling phase is indicated by
the blue line and heating phase by the red line.
\begin{figure}[ht]
\begin{center}
\begin{minipage}{4in}
\footnotesize
\begin{verbatim}

&SURF ID = 'SAMPLE'
      H_FIXED = 50.
      BACKING = 'INSULATED'
      THICKNESS = 0.00001
      MATL_ID = 'LIQUID_WATER' /

&MATL ID = 'LIQUID_WATER'
      DENSITY = 1000.
      CONDUCTIVITY = 0.60
      SPECIFIC_HEAT = 4.19
      N_REACTIONS = 1
      PCR(1) = .TRUE.
      MATL_ID(1,1) = 'ICE_WATER'
      NU_MATL(1,1) = 1.
      A(1) = 2.0
      E(1) = 0.
      N_S(1) = 0.0
      N_T(1) = 1.0
      THRESHOLD_SIGN = -1
      THRESHOLD_TEMPERATURE(1) = 2.
      HEAT_OF_REACTION(1) = -333. /

&MATL ID = 'ICE_WATER'
      DENSITY = 1000.
      CONDUCTIVITY_RAMP = 'KS_ICE'
      SPECIFIC_HEAT_RAMP = 'CS_ICE'
      N_REACTIONS = 1
      PCR(1) = .TRUE.
      MATL_ID(1,1) = 'LIQUID_WATER'
      NU_MATL(1,1) = 1.
      A(1) = 2.0
      E(1) = 0.
      N_S(1) = 0.0
      N_T(1) = 1.0
      THRESHOLD_TEMPERATURE(1) = -2.
      HEAT_OF_REACTION(1) = 333. /

&RAMP ID = 'KS_ICE' T =  -50. F = 2.76 /
&RAMP ID = 'KS_ICE' T =    0. F = 2.22 /
&RAMP ID = 'CS_ICE' T = -50   F = 1.751 /
&RAMP ID = 'CS_ICE' T = 0     F = 2.050 /
\end{verbatim} \normalsize
\end{minipage}
\end{center}
\caption[Input parameters for sample case {\bf water\_ice\_water}.]{Input parameters for sample case {\bf water\_ice\_water}.}
\label{water_ice_water_inputs}
\end{figure}

\begin{figure}[ht]
\begin{center}
\includegraphics[width=3.2in]{SCRIPT_FIGURES/water_ice_water}
\end{center}
\caption[Freezing and melting of water]{Freezing and melting of water.}
\label{water_ice_water_plot}
\end{figure}









\clearpage


\subsection{Liquid Fuels}

\label{info:liquid_fuels}

For a liquid fuel, the thermal properties are similar to those of a solid
material, with a few exceptions. The evaporation rate of the fuel
is governed by the Clausius-Clapeyron equation (see FDS Technical Reference
Guide for details). The drawback of this approach is that the fuel
mass flux is not an explicit function of temperature, but rather an
iterative result depending on the temperature and flow conditions. To
initiate the evaporation, an initial value of the fuel vapor volume
flux is needed. If the initial value is (relatively) high, the evaporation
starts regardless of any ignition source, and the the fuel begins
burning at once.

Figure~\ref{ethanol_inputs} contains the key input parameters to describe a steel pan filled with a thin layer of ethanol. Note that the material
properties are not all traceable to a measurement.

\begin{figure}[ht]
\begin{minipage}{\textwidth}
\footnotesize
\begin{verbatim}
&MATL ID                     = 'ETHANOL LIQUID'
      EMISSIVITY             = 1.0
      SPEC_ID                = 'FUEL'
      NU_SPEC                = 0.97
      HEAT_OF_REACTION       = 880.
      CONDUCTIVITY           = 0.17
      SPECIFIC_HEAT          = 2.45
      DENSITY                = 787.
      ABSORPTION_COEFFICIENT = 40.
      BOILING_TEMPERATURE    = 76. /

&MATL ID            = 'STEEL'
      EMISSIVITY    = 1.0
      DENSITY       = 7850.
      CONDUCTIVITY  = 45.8
      SPECIFIC_HEAT = 0.46 /

&MATL ID            = 'CONCRETE'
      DENSITY       = 2200.
      CONDUCTIVITY  = 1.2
      SPECIFIC_HEAT = 0.88 /

&SURF ID        = 'ETHANOL POOL'
      FYI       = '4 kg of ethanol in a 0.7 m x 0.8 m pan'
      COLOR     = 'YELLOW'
      MATL_ID   = 'ETHANOL LIQUID','STEEL','CONCRETE'
      THICKNESS = 0.0091,0.001,0.05
      TMP_INNER = 18.,18.,15. /
\end{verbatim} \normalsize
\end{minipage}
\caption[Input parameters for sample case {\bf ethanol\_pan}.]{Input parameters for sample case {\bf ethanol\_pan}.}
\label{ethanol_inputs}
\end{figure}

\noindent
The inclusion of {\ct BOILING\_TEMPERATURE} on the {\ct MATL} line tells FDS to use its liquid
pyrolysis model. It also automatically sets {\ct N\_REACTIONS=1}, that is, the only ``reaction'' is the
phase change from liquid to gaseous fuel. Thus, {\ct HEAT\_OF\_REACTION} in this case is the latent
heat of vaporization. The gaseous fuel yield, {\ct NU\_SPEC}, is 0.97 instead of 1 to account for
impurities in the liquid that do not take part in the combustion process.

The thermal conductivity, density and specific heat are used to
compute the loss of heat into the liquid via conduction using the
same one-dimensional heat transfer equation that is used for solids. Obviously,
the convection of the liquid is important, but is not considered in
the model.

The initial value of the fuel vapor volume flux can be specified using
the parameter {\ct INITIAL\_VAPOR\_FLUX}. Its default value is $5 \times 10^{-4}$~m/s.

Note also the {\ct ABSORPTION\_COEFFICIENT} for the liquid. This
denotes the absorption in depth of thermal radiation. Liquids do not
just absorb radiation at the surface, but rather over a thin layer
near the surface. Its effect on the burning rate is significant.

\begin{warning}
\noindent
In the current implementation of the liquid fuel model, the
evaporation rate is strongly grid dependent. Thus, it should be used
with caution.
\end{warning}




\subsection{Fuel Burnout}

The thermal properties of a solid or liquid fuel determine the length of time for which it can burn. In general, the
burnout time is a function of the mass loss rate, $\dot{m}''$, the density, $\rho_s$, and the
layer thickness, $\delta_s$:
\be t_b = \frac{\rho_s \, \delta_s}{\dm''} \ee
However, each type of pyrolysis model handles fuel burnout in a slightly different way. These differences will be
highlighted in the individual sections below.

\subsubsection{Solid Fuel Burnout}

If a heat release rate {\ct RAMP} function is not included for a solid fuel that burns at a specified rate, the surface will continue to
burn at the specified rate indefinitely with no fuel burnout.  If detailed heat release rate versus time data is not available, you
can estimate the burnout time for a surface using the heat of combustion, $\Delta H$,
material density, $\rho_s$, material thickness, $\delta_s$, and {\ct HRRPUA}, $\dq_f''$:
\be t_{b} = \frac{\rho_s \, \delta_s \, \Delta H}{\dq''_f} \ee
Use the {\ct RAMP} function to stop the burning once the calculated burnout time is reached.


The burnout time of a reacting solid fuel is calculated automatically by FDS based on the
layer {\ct THICKNESS}, component {\ct DENSITY}, and the calculated burning rate.


\subsubsection{Liquid Fuel Burnout}

The burnout time of a liquid fuel is calculated automatically based on the liquid layer {\ct THICKNESS}, liquid {\ct DENSITY}, and the calculated burning rate.


\subsubsection{Special topic: Making Fuels Disappear (BURN\_AWAY)}
\label{info:BURN_AWAY}

If a burning object is to disappear from the calculation once it is consumed, set {\ct BURN\_AWAY=.TRUE.} on the corresponding
{\ct SURF} line. The solid object disappears from the calculation cell by cell, as the mass contained by each mesh cells is consumed
either by the pyrolysis reactions or by the prescribed HRR.  The mass of each mesh cell is the cell face area multiplied by the
surface density of the {\ct SURF} type.
The following issues should be kept in mind when using {\ct BURN\_AWAY}:
\begin{itemize}
\item  For reacting surfaces, the surface density is computed as a sum of the layer densities multiplied by the layer thicknesses.
This value can be over-ridden by setting {\ct SURFACE\_DENSITY} on the {\ct SURF} line. For surfaces with prescribed HRR
({\ct HRRPUA}), {\ct SURFACE\_DENSITY} parameter is the only way of defining the mass of the object.
\item For surfaces with prescribed HRR ({\ct HRRPUA}) or prescribed mass loss rate ({\ct MLRPUA}) AND thermally thick heat conduction,
the mass flux is affected by the heats of combustion defined for the gas phase reaction and the first listed material ({\ct MATL}) component.
\item Use {\ct BURN\_AWAY} parameter cautiously. If an object has the potential of burning away, a significant
amount of extra memory has to be set aside to store additional surface information as the rectangular block is
eaten away.
\item If {\ct BURN\_AWAY} is prescribed, the {\ct SURF} should be applied to the entire object, not just a face of the object
because it is unclear how to handle edges of solid obstructions that have different {\ct SURF\_ID}s on different faces.
\item If the volume of the obstruction changes because it has to conform to the uniform mesh,
FDS does {\bf not} adjust the burning rate to account for this as it does with various quantities associated with areas,
like {\ct HRRPUA}.
\item A parameter called {\ct BULK\_DENSITY} (kg/m$^3$) can be applied to the {\ct OBST} rather than the {\ct SURF} line. This parameter is used
to determine the combustible mass of the solid object. The calculation uses the user-specified object dimensions, not those of the mesh-adjusted
object. This parameter over-rides all other parameters from which a combustible mass would be calculated.
\item The mass of the object is based on the densities of the all material components ({\ct MATL}), but it is only consumed by mass fluxes of
the {\bf known} species. If the sum of the gaseous yields is less than one, it will take longer to consume the mass.
\end{itemize}

\subsubsection{Example Case: Fires/box\_burn\_away}

These are examples of a solid block of ``foam'' that is pyrolyzed
until it is completely consumed. The heat flux is generated by placing
hot surfaces around the box. There is no combustion.  In the first
example, {\ct box\_burn\_away1}, the released gas is ({\ct 'METHANE'}),
and in the second example, {\ct box\_burn\_away2}, it is an additional
species called {\ct 'GAS'}. In the third and fourth examples
{\ct box\_burn\_away3} and {\ct box\_burn\_away4}, the
released gas is fuel but the pyrolysis rate is specified.
In the fourth case, the heat of combustion for the foam material is set
different from that of the gas, with ratio 0.75.
The properties of the block of foam were chosen
simply to assure a quick calculation. The objective of the test is to
check that the released mass and the integrated burning rate is
consistent with the material properties of the block. The block is
0.4~m on a side, with a density of 20~kg/m$^3$.  The integrated
densities of the pyrolysis product gases (written to
{\ct box\_burn\_away\#\_devc.csv}), as well as
the integrated burning rate (written to {\ct box\_burn\_away\#\_hrr.csv}) at
the end of the 30~s calculation ought to be:
\be
(0.4)^3 \; \hbox{m}^3 \times 20 \; \hbox{kg/m}^3 = 1.28 \; \hbox{kg}
\ee
except for the fourth case, where the amount of released gas is affected by
the ratio of heats of combustion
\be
0.75\times 1.28 \hbox{kg}\; = 0.96\; \hbox{kg}
\ee
\begin{figure}[ht]
\begin{tabular*}{\textwidth}{lr}
\includegraphics[width=3.2in]{SCRIPT_FIGURES/box_burn_away1} &
\includegraphics[width=3.2in]{SCRIPT_FIGURES/box_burn_away2} \\
\includegraphics[width=3.2in]{SCRIPT_FIGURES/box_burn_away3} &
\includegraphics[width=3.2in]{SCRIPT_FIGURES/box_burn_away4}
\end{tabular*}
\caption[Output of {\ct box\_burn\_away} test cases.]{Output of {\ct box\_burn\_away} test cases.}
\label{box_burn_away}
\end{figure}






\clearpage

\section{Testing Your Pyrolysis Model}
\label{solid_phase_verification}

Real materials that can burn can be very complicated. Undoubtedly, the {\ct SURF} and {\ct MATL} lines in the
input file will consist of a combination of empirical and fundamental properties, often originating from different sources. How do you know
that the various property values and the associated thermo-physical model in FDS
constitute an appropriate description of the solid? For a full-scale simulation, it is hard to untangle the uncertainties associated with the gas and solid
phase routines. However, it is easy to perform a simple check of any set of surface properties by essentially turning off the gas phase -- no combustion and
no convective heat transfer. There are several parameters that allow you do this, spread out over the various namelist groups.

\begin{enumerate}
\item Create a trivially small mesh, just to let FDS run. Since the
gas phase calculation is essentially being shut off, you just need 4
cells in each direction ({\ct IJK=4,4,4}) for the pressure solver to
function properly.
\item On the {\ct TIME} line, set {\ct WALL\_INCREMENT=1} to force FDS
to update the solid phase every time step (normally it does this every
other time step), and set {\ct DT} to whatever value appropriate for
the solid phase calculation. Since there is no gas phase calculation
that will limit the time step, it is best to control this yourself.
\item Put {\ct H\_FIXED=0.} on the {\ct SURF} line. This turns off the
convective heat flux from gas to surface and vis verse. The heat flux
to the solid is specified via {\ct EXTERNAL\_FLUX}\footnote{You can control {\ct EXTERNAL\_FLUX} using
either {\ct TAU\_EF} or {\ct RAMP\_EF}. See Section~\ref{info:RAMP} for more details.} (kW/m$^2$) on the
{\ct SURF} line that is assigned to the solid surface. If you want to specify a particular
convective heat flux to the solid surface, you can set {\ct ASSUMED\_GAS\_TEMPERATURE} on the
{\ct MISC} line, along with a non-zero value of {\ct H\_FIXED} on {\ct SURF} in units of W/m$^2$/K.
\item Turn off all the gas phase computations by setting {\ct SOLID\_PHASE\_ONLY=.TRUE.}
on the {\ct MISC} line. This will also speed
up the computations significantly. If the gas phase computations are
needed, you may turn off combustion by creating a {\ct REAC} line with only
{\ct Y\_O2\_INFTY=0.01}. This sets the background oxygen mass fraction
to 0.01, too low to support any burning.
\item Generate {\ct MATL} lines, plus a single {\ct SURF} line, as you
normally would, except add {\ct EXTERNAL\_FLUX} to the {\ct SURF}
line. This is simply a ``virtual'' source that heats the solid. Think
of this as a perfect radiant panel or cone calorimeter.
\item Assign the {\ct SURF\_ID} to a {\ct VENT} that spans the bottom
of the computational domain. Create {\ct OPEN} vents on all other
faces.
\item Finally, add solid phase output devices to the solid surface,
like {\ct 'WALL TEMPERATURE'}, {\ct 'NET HEAT FLUX'}, {\ct 'BURNING RATE'},
{\ct 'GAUGE HEAT FLUX'}, and {\ct 'WALL THICKNESS'} (assuming the solid
is to burn away). Use these to track the condition of the solid as a
function of time. In particular, make sure that the {\ct 'BURNING RATE'} is appropriate for the particular external heat flux
applied. Make sure that the {\ct 'WALL TEMPERATURE'} is
appropriate. Compare your results to measurements made in a
bench-scale device, like the cone calorimeter. Keep in mind, however,
that the calculation and the experiment are not necessarily perfectly
matched. The calculation is designed to eliminate uncertainties
related to convection, combustion, and apparatus-specific phenomena.
\end{enumerate}


\noindent Below is a short FDS input file that demonstrates how you can test a candidate pyrolysis model by running very short calculations. The simulation only
involves the solid phase model. Essentially, the gas phase calculation is
shut off except for the imposition of a 52~kW/m$^2$ ``external'' heat flux. The solid in this example is a 8.5~mm thick slab of PMMA. For more
details, see the FDS Validation Guide under the heading ``FAA Polymers.''


\scriptsize
\begin{verbatim}
&HEAD CHID='FAA_Polymers_PMMA', TITLE='Black PMMA at 50 kW/m2, No Gas Phase Reaction' /

&MESH IJK=3,3,4, XB=-0.15,0.15,-0.15,0.15,0.0,0.4 /

&TIME T_END=600., WALL_INCREMENT=1, DT=0.01 /

&REAC FUEL='METHANE', Y_O2_INFTY=0.01 /

&MATL ID='BLACKPMMA'
      ABSORPTION_COEFFICIENT=2700.
      N_REACTIONS=1
      A(1) = 8.5E12
      E(1) = 188000
      EMISSIVITY=0.85
      DENSITY=1100.
      SPEC_ID='METHANE'
      NU_SPEC=1.
      HEAT_OF_REACTION=870.
      HEAT_OF_COMBUSTION=25200.
      CONDUCTIVITY = 0.20
      SPECIFIC_HEAT = 2.2

&SURF ID='PMMA SLAB'
      COLOR='BLACK'
      BACKING='INSULATED'
      MATL_ID='BLACKPMMA'
      THICKNESS=0.0085
      H_FIXED=0.
      EXTERNAL_FLUX=52 /  External Flux is ONLY for this simple demo exercise

&VENT XB=-0.05,0.05,-0.05,0.05,0.0,0.0, SURF_ID = 'PMMA SLAB' /

&DUMP DT_DEVC=5. /

&DEVC XYZ=0.0,0.0,0.0, IOR=3, QUANTITY='WALL TEMPERATURE',     ID='temp' /
&DEVC XYZ=0.0,0.0,0.0, IOR=3, QUANTITY='BURNING RATE',         ID='MLR' /
&DEVC XYZ=0.0,0.0,0.0, IOR=3, QUANTITY='WALL THICKNESS',       ID='thick' /

&TAIL /
\end{verbatim} \normalsize


\clearpage

\section{Full-Scale Examples: Furniture}

The example input files called {\ct Fires/couch.fds} and {\ct Fires/room\_fire.fds} demonstrate how to model furniture.
In residential fires, upholstered furniture makes up a significant
fraction of the combustible load. A single couch can generate several
megawatts of energy and sometimes lead to compartment flashover. Modeling
a couch fire requires a simplification of its structure and materials.
At the very least, we want the upholstery to be described as fabric covering foam:

\footnotesize
\begin{verbatim}
&MATL ID                    = 'FABRIC'
      FYI                   = 'Properties completely fabricated'
      SPECIFIC_HEAT         = 1.0
      CONDUCTIVITY          = 0.1
      DENSITY               = 100.0
      N_REACTIONS           = 1
      SPEC_ID               = 'FUEL'
      NU_SPEC               = 1.
      REFERENCE_TEMPERATURE = 350.
      HEAT_OF_REACTION      = 3000.
      HEAT_OF_COMBUSTION    = 15000. /

&MATL ID                    = 'FOAM'
      FYI                   = 'Properties completely fabricated'
      SPECIFIC_HEAT         = 1.0
      CONDUCTIVITY          = 0.05
      DENSITY               = 40.0
      N_REACTIONS           = 1
      SPEC_ID               = 'FUEL'
      NU_SPEC               = 1.
      REFERENCE_TEMPERATURE = 350.
      HEAT_OF_REACTION      = 1500.
      HEAT_OF_COMBUSTION    = 30000. /

&SURF ID             = 'UPHOLSTERY'
      FYI            = 'Properties completely fabricated'
      COLOR          = 'PURPLE'
      BURN_AWAY      = .TRUE.
      MATL_ID(1:2,1) = 'FABRIC','FOAM'
      THICKNESS(1:2) = 0.002,0.1
      PART_ID        = 'smoke' /
\end{verbatim} \normalsize

\noindent
Both the fabric and the foam decompose into fuel gases via
single-step reactions. The fuel gases from each have different
composition and heats of combustion. FDS automatically adjusts
the mass loss rate of each so that the ``effective'' fuel gas
is that specified by the user on the {\ct REAC} line. The attribute
{\ct BURN\_AWAY} forces FDS to break up the couch into
individual cell-sized blocks that will disappear from the calculation
as soon as the fuel is exhausted. The surface is specified
as consisting of two layers, with a thickness of 2~mm for the {\ct FABRIC}
and 10~cm for the {\ct FOAM}. The 10~cm is chosen to be the
same as the mesh cell size.

The same couch model is included in a room-scale fire simulation, known as the
{\bf room\_fire} test case. Figure~\ref{room_fire} shows the fire after 5 and 10~minutes, respectively.
Note that after 5 minutes, the couch is fully-involved, and after 10~minutes the room has flashed over.
Only the reaction zone of the fire is shown; the smoke is hidden so that you can see the fire progressing
from the couch to the doorway at the right of the scene. This door is the only opening to the compartment,
and after 10~minutes, the flames can be seen flowing out.

\begin{figure}[p]
\includegraphics[width=\textwidth]{SCRIPT_FIGURES/room_fire_300}
\includegraphics[width=\textwidth]{SCRIPT_FIGURES/room_fire_600}
\caption[Output of {\bf room\_fire} test case.]{Output of {\bf room\_fire} test case showing fire after
5 and 10 minutes, respectively.}
\label{room_fire}
\end{figure}

\newpage




\chapter{Ventilation}

This chapter explains how to model a ventilation system. There are two ways to do this. First, if you only want to specify air flow rates into and out of
compartments, read Section~\ref{info:Velocity_BC} for a description of simple velocity boundary conditions. However, if you want to
model the entire HVAC system, read Section~\ref{info:HVAC}.


\section{Simple Vents, Fans and Heaters}
\label{info:Velocity_BC}

The ventilation system of individual compartments within a building is described using
velocity {\em boundary conditions}. For example, fresh air can be blown into, and smoke can
be drawn from, a compartment by specifying a velocity in the {\em normal} direction to a solid
surface. However, there are various other facets of velocity boundary conditions that are described below.

\subsection{Simple Supply and Exhaust Vents}

The easiest way to describe a supply or exhaust fan is to specify a {\ct VENT} on a solid surface, and designate
a {\ct SURF\_ID} with some form of specified velocity or volume flow rate.
The normal component of velocity is usually specified directly via the parameter
{\ct VEL}. If {\ct VEL} is negative, the flow is directed {\em into} the
computational domain, {\em i.e.}, a supply vent. If {\ct VEL} is positive, the flow is drawn {\em out of} the
domain, {\em i.e.}, an exhaust vent. For example, the lines

\footnotesize
\begin{verbatim}
&SURF ID='SUPPLY', VEL=-1.2, COLOR='BLUE' /
&VENT XB=5.0,5.0,1.0,1.4,2.0,2.4, SURF_ID='SUPPLY' /
\end{verbatim}
\normalsize

\noindent
create a {\ct VENT} that {\em supplies} air at a velocity of 1.2~m/s through an area of nominally 0.16~m$^2$, depending on the
realignment of the {\ct VENT} onto the FDS mesh. Regardless of the
orientation of the plane $x=5$, the flow will be directed {\em into} the room because of the sign of {\ct VEL}.
In this example the {\ct VENT} may not be exactly
0.16~m$^2$ in area because it may not align exactly with the computational mesh. If this is the case then
{\ct VOLUME\_FLUX} can be prescribed instead of {\ct VEL}. The units
are m$^3$/s. If the flow is entering the computational domain, {\ct VOLUME\_FLUX}
should be a negative number, the same convention as for {\ct VEL}. Note that a {\ct SURF}
with a {\ct VOLUME\_FLUX} prescribed can be invoked by either a
{\ct VENT} or an {\ct OBST}, but be aware that in the latter case, the resulting
velocity on the face or faces of the obstruction will be given by the specified
{\ct VOLUME\_FLUX} divided by the area of that particular face. For example:

\footnotesize
\begin{verbatim}
&SURF ID='SUPPLY', VOLUME_FLUX=-5.0, COLOR='GREEN' /
&OBST XB=..., SURF_ID6='BRICK','SUPPLY','BRICK','BRICK','BRICK','BRICK' /
\end{verbatim}
\normalsize

\noindent
dictates that the forward $x$-facing surface of the obstruction is to have a velocity
equal to 5~m$^3$/s divided by the area of the face (as approximated within FDS) flowing into the
computational domain.

\begin{warning}
\noindent
Note that either {\ct VEL} or {\ct VOLUME\_FLUX} should be prescribed,
not both.  The choice depends on whether an exact velocity is desired at a
given vent, or whether the given volume flux is desired.
\end{warning}

\subsection{Total Mass Flux}

\label{info:MASS_FLUX_TOTAL}

Most often, you specify a simple supply or exhaust vent by setting either a normal velocity or volume flux at
a solid surface. However, you may wish to control the mass flow rate (kg/s), as opposed to the volume flow
rate (m$^3$/s), via the parameter {\ct MASS\_FLUX\_TOTAL}. This parameter uses the same sign convention as {\ct VEL} above.  In fact, the value entered for
{\ct MASS\_FLUX\_TOTAL} is converted internally into a velocity boundary condition whose value
for an outflow is adjusted based on the local density.


\subsection{Heaters}

You can create a simple heating vent by changing the temperature of the incoming air

\footnotesize
\begin{verbatim}
&SURF ID='BLOWER', VEL=-1.2, TMP_FRONT=50. /
\end{verbatim}
\normalsize

\noindent
The {\ct VENT} with {\ct SURF\_ID='BLOWER'} would blow 50~$^\circ$C
air at 1.2 m/s into the flow domain. Making {\ct VEL} positive would
suck air out, in which case {\ct TMP\_FRONT} would not be necessary.

Note that if {\ct HRRPUA} or solid phase reaction parameters are
specified, no velocity should be prescribed. The combustible gases
are ejected at a velocity computed by FDS.



\subsection{Louvered Vents}

\label{info:louvers}

Most real supply vents are covered with some sort of grill or louvers which act to redirect, or {\em diffuse}, the
incoming air stream.
It is possible to mimic this effect, to some extent, by prescribing both a normal and the tangential components of the flow.
The normal component is specified with {\ct VEL} as described above. The tangential is prescribed
via a pair of real numbers {\ct VEL\_T} representing the desired tangential
velocity components in the other two coordinate directions ($x$ or $y$ should precede $y$ or $z$). For example, the line

\footnotesize
\begin{verbatim}
&SURF ID='LOUVER', VEL=-1.2, VEL_T=0.5,-0.3 /
\end{verbatim}
\normalsize

\noindent
is a boundary condition for a louvered vent that pushes air into the
space with a normal velocity of 1.2~m/s and a tangential velocity
of 0.5~m/s in either the $x$ or $y$ direction and -0.3~m/s in either
the $y$ or $z$ direction, depending on what the normal direction is.

In cases of limited mesh resolution, it may not be possible to describe a louvered vent or
slot diffuser using {\ct VEL\_T} because there may not be enough mesh cells spanning the
opening. In these cases, you might consider simply specifying a flat plate obstruction in front of the
{\ct VENT} with an offset of one mesh cell. The plate will simply redirect the air flow in all lateral
directions.

If the louvered vent is part of an HVAC system, see \ref{info:HVAClouvers} for details on how to specify the louver.

\subsection{Special Topic: Tangential Velocity Boundary Conditions at Solid Surfaces}
\label{info:WALL_MODEL}

The no-slip condition implies that the continuum tangential gas velocity at a surface is zero.
In turbulent flow the velocity increases rapidly through a boundary layer that is only a few millimeters thick to its ``free-stream'' value.
In most practical simulations, it is not possible to resolve this boundary layer directly; thus, an empirical model is used to represent its effect on the overall flow field.
For a DNS (Direct Numerical Simulation), the velocity gradient at the wall is computed directly from the resolved velocity near the wall ({\ct NO\_SLIP=.TRUE.} by default).
For an LES (Large Eddy Simulation), the Werner-Wengle wall model is applied for smooth walls and a log law is applied for rough walls.
The surface roughness (in meters) is set by {\ct ROUGHNESS} on {\ct SURF}. See the FDS Technical Reference Guide~\cite{FDS_Math_Guide} for wall model details.
To force a solid boundary to have a free-slip condition, set {\ct FREE\_SLIP=.TRUE.} on the {\ct SURF} line.
In LES, to override the wall model and force a no-slip boundary condition, set {\ct NO\_SLIP=.TRUE.} on the {\ct SURF} line.


\subsection{Species and Species Mass Flux Boundary Conditions}

\label{info:MASS_FLUX}

There are two species boundary conditions that can be specified
(see Section~\ref{info:SPEC} for details on inputting and using species).
These boundary conditions are {\ct MASS\_FLUX(:)} and {\ct MASS\_FRACTION(:)}
If a simple no-flux condition is desired at a solid wall, do not set
anything. If the mass fraction of the species is to be some
value at a forced flow boundary ({\ct VEL} or {\ct MASS\_FLUX\_TOTAL}) set
{\ct MASS\_FRACTION(:)} equal to the desired mass fraction on the appropriate
{\ct SURF} line.
If the mass flux of the species is desired, set
{\ct MASS\_FLUX(:)} instead of {\ct MASS\_FRACTION(:)}.
If {\ct MASS\_FLUX(:)}
is set, no {\ct VEL} should be set. It is automatically
calculated based on the mass flux.
The inputs {\ct MASS\_FLUX(:)} (and typically {\ct MASS\_FRACTION(:)}) should only be used
for inflow boundary conditions.  {\ct MASS\_FLUX(:)} should be positive with
units of kg/m$^2$/s.

\begin{warning}
\noindent
Note that specifying {\ct MASS\_FRACTION(:)}, sets the ``ghost'' cell values for the species
mass fractions.  Since the mass conservation equation is an advection-diffusion equation,
if the specified velocity is small, then the diffusion term can dominate resulting in an unintended
mass flux of species.  To obtain a guaranteed mass flux of a species, you should use {\ct MASS\_FLUX(:)}
\end{warning}








\clearpage

\section{HVAC Systems: The \texorpdfstring{{\tt HVAC}}{HVAC} Namelist Group (Table \ref{tbl:HVAC})}
\label{info:HVAC}

There are occasions where simply defining fixed flow and fixed species boundary conditions is not sufficient to model the behavior of an HVAC (Heating, Ventilation,
Air Conditioning) system.
If the ability to transport heat and combustion products through a duct network or the ability to fully account for the pressurization of a compartment
due to a fire on the flows in a duct network is important, you can make use of a coupled HVAC network solver.  The solver computes the flows through a
duct network described as a mapping of duct segments and nodes where a node is either the joining of two or more ducts (a tee for example) or where a duct segment connects to the FDS computational domain.
The current HVAC solver does not allow for mass storage in the duct network ({\em i.e.} what goes in during a time step, goes out during a time step).
HVAC components such as fans and binary dampers (fully open or fully closed) can be included in the HVAC network and are coupled to the FDS control function capability.  You can select from three fan models.

The HVAC solver is invoked if there is an {\ct HVAC} namelist group present in the input file.
An HVAC network is defined by providing inputs for the ducts; duct nodes; and any fans, dampers, filters, or heating and coiling coils present in the system.
Additionally you must define the locations where the HVAC network joins the computational domain.  The basic syntax for an {\ct HVAC} component is:

\footnotesize
\begin{verbatim}
&HVAC TYPE_ID='componenttype', ID='componentname', ... /
\end{verbatim}\normalsize


\begin{description}
\item[{\ct TYPE\_ID}] is a character string that indicates the type of component that the namelist group is defining.   {\ct TYPE\_ID} can be {\ct 'DUCT'}, {\ct 'NODE'}, {\ct 'FAN'}, {\ct 'FILTER'}, or {\ct 'AIRCOIL'}.
\item[{\ct ID}] is a character string giving a name to the component.  The name must be unique amongst all other components of that type; however, the same name can be given to components of different types ({\em i.e.} a duct and a node can have the same name but two ducts cannot).
\end{description}
A number of examples of simple HVAC systems are given in the HVAC folder of the sample cases and are discussed in the FDS Verification Guide.

Note: It is recommended that for anything but the most simple HVAC systems (where a constant flow is explicitly specified), that you keep {\ct STRATIFICATION=.TRUE.}.

\subsection{HVAC Duct Parameters}
\label{info:HVACduct}

A typical input line specifying a duct is as follows:

\footnotesize
\begin{verbatim}
&HVAC TYPE_ID='DUCT', ID='ductname', NODE_ID='node 1','node 2', AREA=3.14,
      LOSS=1.,1., ROUGHNESS=0.001, FAN_ID='fan 1', DEVC_ID='device 1' /
\end{verbatim}\normalsize

All possible duct inputs are  given below:

\begin{description}
\item[{\ct AIRCOIL\_ID}] is the {\ct ID} of an aircoil located in the duct.  The operation of the aircoil can be controlled by either a device or a control function.
\item[{\ct AREA}] is the cross sectional area of the duct in m$^2$. {\ct DIAMETER} (m) can be used instead.
\item[{\ct CTRL\_ID}] is the {\ct ID} for a {\ct CTRL} for a damper, fan, or aircoil in the duct.
\item[{\ct DAMPER}] is a logical parameter indicating the presence of a damper in the duct.   The state of the damper is controlled by either a device or a control function.
\item[{\ct DEVC\_ID}]  is the {\ct ID} of a {\ct DEVC} for a damper, fan, or aircoil in the duct.
\item[{\ct FAN\_ID}] is the {\ct ID} of a fan located in the duct. Instead of
specifying a {\ct FAN\_ID}, you could specify the {\ct VOLUME\_FLOW} rate (m$^3$/s) through the duct. If you specify {\ct VOLUME\_FLOW}, you can change its value in time either using the characteristic time, {\ct TAU\_VF},  to define a tanh ({\ct TAU\_VF} > 0) or t$^2$ ramp ({\ct TAU\_VF} < 0); or you can specify a {\ct RAMP\_ID}.  The operation of the fan can be controlled by either a device or a control function.
\item[{\ct LOSS}] is a pair of real numbers giving the forward and reverse flow loss in the duct.  Forward is flow from the first node listed in {\ct NODE\_ID} to the second node listed in {\ct NODE\_ID}.
\item[{\ct NODE\_ID}] gives the {\ct ID}s of the nodes on either end of the duct segment.  Positive velocity in a duct is defined as flow from the first node to second node.
{\ct REVERSE}  is a logical parameter that when {\ct .TRUE.} indicates that the specified {\ct FAN\_ID} or {\ct VOLUME\_FLOW} blows from the second node to the first.
\item[{\ct ROUGHNESS}] is the absolute roughness in m of the duct that is used to compute the friction factor for the duct.
\end{description}

\noindent
Note that only one of {\ct AIRCOIL\_ID}, {\ct DAMPER\_ID}, or {\ct FAN\_ID} should be specified for a duct.

To reduce the computational cost of the HVAC solver, a duct should be considered as any length of duct that connects two items that must be defined as nodes ({\em i.e.} a connection to the FDS domain, a filter, or a location where more than two ducts join).  That is a duct should be considered as any portion of the HVAC system where flow can only be in one direction.  For example the top of Figure~\ref{fig:HVAC_Simplify} shows a segment of an HVAC system where flow from a tee goes through an expansion fitting, two elbows, an expansion fitting, and a straight length of duct before it terminates as a connection to the FDS domain.  This could be input as each individual fitting or duct with its associated area and loss as shown in the middle of the figure; however, this would result in five duct segments (one for each component) with six node connections resulting in eleven parameters (five velocities and six pressures) which must be solved for.  This is not needed since whatever the flow rate is in any one segment of the duct, that same flow rate exists in all other segments and, thus, the velocities in any segment can be found by taking the area ratios, $v_1/v_2=A_2/A_1$.  Since flow losses are proportional to the square of the velocity, an equivalent duct can be constructed using the total length of the duct, a representative area or diameter.  The pressure losses associated with all the segments of the duct can be collapsed in to in single loss by summing all of the fitting, $K$, losses through the duct as follows:
\be K_{eff} = \sum_i {K_i \frac {A_{eff}}{A_i}} \ee
where $i$ is a fitting, $j$ is a duct segment, and $A$ is the area of the duct or fitting.

\begin{figure}[ht]
\includegraphics[width=5in]{FIGURES/hvac-simplify.png}
\caption{An example simplifying a complex duct.}
\label{fig:HVAC_Simplify}
\end{figure}


\subsection{HVAC Node Parameters}
\label{info:HVACnode}

Below are three example duct node inputs representing a typical tee-type connection (mutiple ducts being joined), a connection to the FDS domain, and a connection to the ambeint outside the FDS domain.
\footnotesize

\begin{verbatim}
&HVAC TYPE_ID='NODE', ID='tee', DUCT_ID='duct 1','duct 2',..'duct n',
      LOSS_ARRAY=lossarray, XYZ=x,y,z /
&HVAC TYPE_ID='NODE', ID='FDS connection', DUCT_ID='duct 1', VENT_ID='vent',
      LOSS_ARRAY=enter,exit /
&HVAC TYPE_ID='NODE', ID='ambient', DUCT_ID='duct 1', LOSS_ARRAY=enter,exit,
      XYZ=x,y,z /
\end{verbatim}\normalsize

All possible duct node inputs are given below.

\begin{description}
\item[{\ct AMBIENT}] is a logical value.  If {\ct .TRUE.}, then the node is connected to the ambient ({\em i.e.} it is equivalent to the {\ct OPEN} boundary condition on a {\ct SURF} line).
\item[{\ct DUCT\_ID}] gives the {\ct ID}s of the ducts connected to the node.  Up to 10 ducts can be connected to a node.
\item[{\ct FILTER\_ID}] gives the {\ct ID} a filter located at the node.  A node with a filter can only have two connected ducts.
\item[{\ct LOSS}] is an $n$ by $n$ array of real numbers giving the flow losses for the node.  {\ct LOSS(I,J)} is the loss for flow from from duct {\ct I} to duct {\ct J} expressed in terms of the downstream duct area (see discussion in ~\ref{info:HVACduct} on how to adjust losses for area changes).  For a terminal node ({\em e.g.} a node connected to the ambient or to a {\ct VENT}) the {\ct LOSS} is entered as a pair of numbers representing loss for flow entering the HVAC system and for flow exiting the HVAC system.
\item[{\ct VENT\_ID}] is the name of the {\ct VENT} where the node connects to the FDS computational domain.
\item[{\ct XYZ}] is a triplet of real numbers giving the coordinates of the node.  This location is used to compute buoyancy heads.
If the node is connected to the FDS domain, then do not specify {\ct XYZ}.  FDS will compute it as the centroid of the {\ct VENT}.
\end{description}

\noindent
A duct node must either have two or more ducts attached to it or it must have either {\ct AMBIENT = .TRUE.} or a {\ct VENT\_ID} specified.  When defining a {\ct VENT} as a component of an HVAC system you must set {\ct SURF\_ID = 'HVAC'} and you must set the {\ct ID} for the {\ct VENT}.  Note that you cannot give more than one  {\ct VENT} the same {\ct ID}.

\subsection{HVAC Fan Parameters}
\label{info:HVACfan}

Below are given sample inputs for the three types of fans supported by FDS.

\footnotesize
\begin{verbatim}
&HVAC TYPE='FAN', ID='constant volume', DEVC_ID='device 1', VOLUME_FLOW=1.0, LOSS=2./
&HVAC TYPE='FAN', ID='quadratic', DEVC_ID='device 1',
      MAX_FLOW=1., MAX_PRESSURE=1000., LOSS=2. /
&HVAC TYPE='FAN', ID='user fan curve', RAMP_ID='fan curve',  DEVC_ID='device 1', LOSS=2. /
\end{verbatim}\normalsize

All fan inputs are described below.

\begin{description}
\item[{\ct CTRL\_ID}] Name of a control function controlling the operation of the fan.
\item[{\ct DEVC\_ID}] Name of a device controlling the operation of the fan.
\item[{\ct LOSS}] is the flow loss through the fan when it is not operational.
\item[{\ct MAX\_FLOW}] is the maximum volumetric flow of the fan in m$^3$/s.  This input activates a quadratic fan model.
\item[{\ct MAX\_PRESSURE}] is the stall pressure of the fan in Pa.  This input activates a quadratic fan model.
\item[{\ct RAMP\_ID}] identifies the {\ct RAMP} that contains a table of pressure drop across the fan (Pa) versus the volumetric flow rates (m$^3$/s) for a user defined fan curve or is an
optional table of time versus volumetric flow rates (m$^3$/s) for a constant volume fan.
\item[{\ct TAU\_FAN}]  defines a tanh ({\ct TAU\_FAN} > 0) or t$^2$ ramp ({\ct TAU\_FAN} < 0) for the fan.  This is applied to the flowrate computed by any of the three types (constant flow, quadratic, or user defined ramp) of fans.
\item[{\ct VOLUME\_FLOW}] is the fixed volumetric flow of the fan (m$^3$/s).
\end{description}

\noindent
Note that only one set of fan model inputs ({\ct VOLUME\_FLOW}, {\ct RAMP\_ID}, or {\ct MAX\_FLOW + MAX\_PRESSURE}) should be specified.
Also note that {\ct FAN} defines a class of fans rather than one specific fan. Therefore, more than one duct can reference a single {\ct FAN}.

\subsubsection{Fan Curves}
\label{info:Fan_Curves}

In Section~\ref{info:Velocity_BC} there is a discussion of velocity boundary conditions,
in which a fan is modeled simply as a solid boundary that blows or
sucks air, regardless of the surrounding pressure field. In the HVAC model, this approach to modeling a fan occurs when the fan is specified with a {\ct VOLUME\_FLOW}.
In reality, fans operate based on
the pressure drop across the duct or manifold in which they are
installed. A very simple ``fan curve'' is given by:
\be \dot{V}_{\hbox{\footnotesize fan}} = \dot{V}_{\hbox{\footnotesize max}} \;
   \hbox{sign} (\Delta p_{\hbox{\footnotesize max}}-\Delta p)
   \sqrt{ \frac{ |\Delta p - \Delta p_{\hbox{\footnotesize max}}|}{\Delta p_{\hbox{\footnotesize max}} } }  \ee

This simple ''fan curve'' is the ''quadratic'' fan model as the pressure is proportional to the square of the volume flow rate.

The volume flow in the absence of a pressure difference, {\ct MAX\_FLOW}, is given $\dot{V}_{\hbox{\footnotesize max}}$.  The pressure difference, $\Delta p=p_1-p_2$, indicates the difference in
pressure between the downstream compartment, or ``zone,'' and the upstream. The subscript 1 indicates downstream and 2 indicates upstream.
The term, $\Delta p_{\hbox{\footnotesize max}}$, is the maximum
pressure difference, {\ct MAX\_PRESSURE}, the fan can operate upon, and it is assumed to be a positive number.
The flow through a fan will decrease from $\dot{V}_{\hbox{\footnotesize max}}$ at zero pressure difference to 0 $m^3$/s at $\Delta p_{\hbox{\footnotesize max}}$.
If the pressure difference increases beyond this, air will be forced backwards through the fan.  Figure~\ref{fig:Fan_Curve} displays a typical fan curve.

\begin{figure}[ht!]
\begin{center}
\includegraphics[width=3.5in]{FIGURES/Fan_Curve}
\caption[Example of a fan curve.]{Fan curve corresponding to {\ct VOLUME\_FLUX=10} and {\ct MAX\_PRESSURE=500}.
Note that a volume flux greater than
10 is brought about by a negative pressure difference; that is, when the downstream pressure is less than the upstream. Note also that when
the pressure difference is greater than 500~Pa, the volume flow becomes negative; that is, the flow reverses.}
\label{fig:Fan_Curve}
\end{center}
\end{figure}

More complicated fan curves can be specified by defining a {\ct RAMP}.

\subsubsection{Example Case: {\bf fan\_test}}

Here is an example how fans can be specified.  In it, two simple
compartments share a common wall. Both compartments are considered as
separate ``pressure zones.'' Two HVAC ducts are defined.  One is a quadratic fan with a maximum volumetric flow of 0.16 m$^3$/s and a stall pressure of 10~Pa.
The second is open duct with a flow loss of 10. The relevant input lines are:

\footnotesize
\begin{verbatim}
&OBST XB= -0.15, 0.15,-1.0, 1.0, 0.0, 2.0 / Partition Wall


&VENT XB=-0.15,-0.15,-0.2, 0.2, 0.4, 0.6, COLOR='RED', ID='BLOW LEFT 1',
      SURF_ID='HVAC',IOR=-1/
&VENT XB= 0.15, 0.15,-0.2, 0.2, 0.4, 0.6, COLOR='GREEN', ID='BLOW LEFT 2',
      SURF_ID='HVAC',IOR=1/
&VENT XB=-0.15,-0.15,-0.2, 0.2, 1.4, 1.6, COLOR='BLUE', ID='BLOW RIGHT 1',
      SURF_ID='HVAC',IOR=-1/
&VENT XB= 0.15, 0.15,-0.2, 0.2, 1.4, 1.6, COLOR='YELLOW', ID='BLOW RIGHT 2',
      SURF_ID='HVAC',IOR=1/

&HVAC ID='LEFT 1',  TYPE_ID='NODE', DUCT_ID='LEFT',  VENT_ID='BLOW LEFT 1' /
&HVAC ID='LEFT 2',  TYPE_ID='NODE', DUCT_ID='LEFT',  VENT_ID='BLOW LEFT 2' /
&HVAC ID='RIGHT 1', TYPE_ID='NODE', DUCT_ID='RIGHT', VENT_ID='BLOW RIGHT 1' /
&HVAC ID='RIGHT 2', TYPE_ID='NODE', DUCT_ID='RIGHT', VENT_ID='BLOW RIGHT 2' /

&HVAC ID='LEFT',  TYPE_ID='DUCT', NODE_ID='LEFT 1','LEFT 2',
      LENGTH=1, AREA=0.04, FAN_ID='LEFT', REVERSE=.TRUE., LOSS=0,0 /
&HVAC ID='RIGHT', TYPE_ID='DUCT', NODE_ID='RIGHT 1','RIGHT 2',
      LENGTH=1, AREA=0.04, LOSS=10,10 /

&HVAC ID='LEFT',TYPE_ID='FAN',MAX_FLOW=0.16,MAX_PRESSURE=10./
\end{verbatim}
\normalsize

\noindent
The volume flow through the fans is given by the expression:
\be \dot{V}_{\hbox{\footnotesize fan}} = \dot{V}_{\hbox{\footnotesize max}} \;
   \hbox{sign} (\Delta p_{\hbox{\footnotesize max}}-\Delta p)
   \sqrt{ \frac{ |\Delta p - \Delta p_{\hbox{\footnotesize max}}|}{\Delta p_{\hbox{\footnotesize max}} } }  \ee
where $\dot{V}_{\hbox{\footnotesize max}}$ is the maximum output of the fan ~(0.16~$m^3$/s from
Zone~1 to Zone~2 and 0.2~m/s from Zone~2 to Zone~1), and $\Delta p_{\hbox{\footnotesize max}}$ is the maximum pressure difference the fan can operate
upon (in this case 10~Pa).

In steady state, the volume flow from compartment to compartment (or Zone to Zone) should be equal and opposite in sign.
This occurs when the positive pressure added by the fan equals the pressure drop due to the flow loss through the return duct.

 \be  \sqrt{\frac {2 |p_2-p_1|}{ (1.2 \; \hbox{kg/m$^3$}) 10}} (0.4 \; \hbox{m/s}) =
   (0.16 \; \hbox{m$^3$/s})  \;
   \sqrt{ \frac{ |p_1-p_2-10 \; \hbox{Pa}|}{10 \; \hbox{Pa}}  } \ee
The solution is $p_2=4.5$~Pa and $p_1=-4.5$~Pa (see Fig.~\ref{fan_test}).
Note that the sign of the Volume Flow of a duct in FDS has to do with whether the flow is moving from the first node to the second (positive) or the second node to the first (negative).
This convention can make these types of calculations a bit tricky.

\begin{figure}[ht]
\begin{tabular*}{\textwidth}{lr}
\includegraphics[width=3.1in]{SCRIPT_FIGURES/fan_test_Pressure} &
\includegraphics[width=3.1in]{SCRIPT_FIGURES/fan_test_Volume_Flow}
\end{tabular*}
\caption[Output of the {\bf fan\_test} example.]{Pressure and volume flow for the {\bf fan\_test}.}
\label{fan_test}
\end{figure}

\subsubsection{Jet Fans}

Fans do not have to be mounted on a solid wall, like a supply or an exhaust fan.
If you just want to blow gases in a particular direction, create an
{\ct OBST}struction and apply to it {\ct VENT} lines that are
associated with a simple HVAC system.
This allows hot, smokey gases to pass through the
obstruction, much like a free-standing fan.  See the example case {\ct jet\_fan.fds}.

You may also want to construct a {\em shroud} around the fan using four flat plates arranged to form
a short passageway that draws gases in one side and expels them out the other. The plate representing the
fan itself can be positioned about halfway along the passage.

\clearpage

\subsection{HVAC Filter Parameters {\bf HVAC\_filter}}
\label{info:HVACfilter}

A sample input for a filter is given below.

\footnotesize
\begin{verbatim}
&HVAC TYPE='FILTER', ID='filter 1', LOADING=0., SPEC_ID='SOOT',
      EFFICIENCY=0.99, LOADING_MULTIPLIER=1,CLEAN_LOSS=2., LOSS=100./
\end{verbatim}\normalsize

All possible filter inputs are discussed below.

\begin{description}
\item[{\ct CLEAN\_LOSS}] is the flow loss through the filter when it is new (zero loading).
\item[{\ct EFFICIENCY}] is an array of the species removal efficiency from 0 to 1 where 0 is no removal of that species and 1 is complete filtration of the species.  The species are identified using {\ct SPEC\_ID}
\item[{\ct LOADING}] An array of the initial loading (kg) of the filter for each species being filtered.
\item[{\ct LOADING\_MULTIPLIER}] is an array of the species multiplier, M$_i$, used in computing the total filter loading when computing loss.
\item[{\ct LOSS}] Invokes a linear flow loss model where the flow loss is given as a linear function of the total loading, $K_{filter}=K_{CLEAN\_LOSS}+K_{LOSS} \sum \left( L_i M_i \right)$, where L$_i$ is the species loading and M$_i$ is a multiplier.  Only one of {\ct LOSS} or {\ct RAMP\_ID} should be specified.
\item[{\ct RAMP\_ID}] identifies the {\ct RAMP} that contains a table of pressure drop across the filter as a function of total loading (see summation in {\ct LOSS}.   Only one of {\ct LOSS} or {\ct RAMP\_ID} should be specified.
\item[{\ct SPEC\_ID}] identifies the tracked species for the inputs of {\ct LOADING\_MULTIPLIER} and {\ct LOADING}.
\end{description}

\noindent
Note that a filter input refers to a class of filters and that multiple ducts can reference the same filter definition.

The sample case {\bf HVAC\_filter} demonstrates the use of the filter input.  A 1~m$^3$ compartment is initialized with a particulate species with a mass fraction of 0.001.  A 100 \% efficient filter with a clean loss of 1 and a loading loss of 7732.446~/kg (gives a total loss of 10 when all the soot in the compartment is filtered).  A quadratic fan in a 0.01 m$^2$ duct with a maximimum pressure of 20~Pa and a maximum flow of 0.2~m$^3$/s takes suction from one side of the compartment and discharges into the other.  Over time, the filter removes the particulate from the compartment.  However, since the filter loss increases with the mass of particulate filtered, the rate of removal will decrease over time.  Applying the conservation of energy to the compartment and the steady state duct momentum equation to the duct, we can solve for the compartment temperature and pressure and the duct velocity.  These results along with the loading of the filter and the mass of particulate in the compartment are shown in Figure~\ref{fig_filter}.

\begin{figure}[t]
   \begin{tabular*}{\textwidth}{l@{\extracolsep{\fill}}r}
      \scalebox{1.0}{ \includegraphics[width=3.2in]{SCRIPT_FIGURES/HVAC_filter_p} } &
      \scalebox{1.0}{ \includegraphics[width=3.2in]{SCRIPT_FIGURES/HVAC_filter_t} } \\
      \scalebox{1.0}{ \includegraphics[width=3.2in]{SCRIPT_FIGURES/HVAC_filter_v} } &
      \scalebox{1.0}{ \includegraphics[width=3.2in]{SCRIPT_FIGURES/HVAC_filter_kg} }
   \end{tabular*}
   \caption[Results for the HVAC\_filter sample case]{Compartment pressure (upper left), compartment temperature (upper right), duct velocity (lower left), and particulate mass in the compartment and on the filter (lower right)}
   \label{fig_filter}
\end{figure}

\subsection{HVAC Aircoil Parameters: {\bf HVAC\_aircoil}}
\label{info:HVACaircoil}
\footnotesize

An aircoil refers to a device that either adds or removes heat from air flowing through a duct.  In a typical HVAC system this is done by blowing the air over a heat exchanger (hence the term aircoil) containing a working fluid such as chilled water or a refrigerant.  A sample input is provided below.

\begin{verbatim}
&HVAC TYPE='AIRCOIL', ID='aircoil 1', DEVC_ID='device 1', EFFICIENCY=0.5,
      COOLANT_CP=4.186, COOLANT_TEMPERATURE= 10., COOLANT_MDOT= 1./
\end{verbatim}\normalsize

All possible aircoil inputs are shown below.

\begin{description}
\item[{\ct COOLANT\_CP}] The specific heat (kJ/kg/K) of the working fluid.
\item[{\ct COOLANT\_MDOT}] The flow rate of the working fluid (kg/s).
\item[{\ct COOLANT\_TEMPERATURE}] The inlet temperature of the working fluid ($^\circ$C).
\item[{\ct CTRL\_ID}] Name of a control function controlling the operation of the aircoil.
\item[{\ct DEVC\_ID}] Name of a device controlling the operation of the aircoil.
\item[{\ct EFFICIENCY}] The heat exchagner efficiency, $\eta$, from 0 to 1.  1 indicates the exit temperatures on both sides of the heat exchanger will be equal.
\item[{\ct FIXED\_Q}] Constant heat exchange rate.  Negative is heat removal from the duct.
\end{description}

\noindent
Note that either {\ct FIXED\_Q} or the set {\ct COOLANT\_CP}, {\ct COOLANT\_MDOT}, {\ct COOLANT\_TEMPERATURE}, and {\ct EFFICIENCY} should be specified.  In the later case the heat exchange is computed as:

\be T_{fluid,out}=\frac{c_{p,gas} u_{duct} A_{duct} \rho_{duct} T_{duct,in} + c_{p,fluid} \dm_{fluid} T_{fluid,in}}{c_{p,gas} u_{duct} A_{duct} \rho_{duct} + c_{p,fluid} \dm_{fluid}}
\ee

\be \dq_{coil}=\eta  c_{p,fluid} \dm_{fluid} \left( T_{fluid,in} - T_{fluid,out} \right)
\ee

\noindent
Note that an aircoil input refers to a class of aircoils and that multiple ducts can reference the same aircoil definition.

The sample case {\bf HVAC\_aircoil} demonstrates the use of the aircoil inputs.  A constant flow duct removes air (defined as 28 g/mol with a specific heat of 1 kJ/kg/K) from the floor and injects in through the ceiling at a volume flow rate of 1~$m^3/s$.  An aircoil is defined with a working fluid flowsing at 10~kg/s and 100~\textcelsius with a specific heat of 4 kJ/kg/K.  The aircoil has an efficiency of 50~\%.  Using the above equations the aircoil will add 45.2 kW of heat to the gas flowing through the duct resulting in a duct exit temperature of 332~K. These results are shown in  Figure~\ref{fig_aircoil}.

\begin{figure}[t]
   \begin{tabular*}{\textwidth}{l@{\extracolsep{\fill}}r}
      \scalebox{1}{ \includegraphics[width=3.2in]{SCRIPT_FIGURES/HVAC_aircoil_Q.pdf} } &
      \scalebox{1}{ \includegraphics[width=3.2in]{SCRIPT_FIGURES/HVAC_aircoil_T.pdf} }
   \end{tabular*}
   \caption[Duct Aircoil]{(Left) Heat addition and (Right) duct exit temperature for the HVAC\_aircoil case.}
   \label{fig_aircoil}
\end{figure}

\subsection{Louvered HVAC Vents}
\label{info:HVAClouvers}

The HVAC system being modeled may either have louvers that redirect the flow leaving a vent or the orientation of the real vent may not lie along one of the axes in FDS.  To define the flow direction for an HVAC outlet, you can use the keyword {\ct UVW} on {\ct VENT}.  {\ct UWV} is the vector indicating the direction of flow from the {\ct VENT}.  For example:

\footnotesize
\begin{verbatim}
&OBST XB=1.0,2.0,0.0,1.0,0.0,1.0/
&VENT XB=1.0,1.0,0.0,1.0,0.0,1.0, SURF_ID='HVAC', ID='HVAC OUTLET', UVW = -1,0,1/
\end{verbatim}\normalsize

The above input defines a vent lying in the y-z plane facing in the -x direction.  The flow vector indicates that the flow from this vent is in the -x direction with a 45 degree up angle (the x and z components are equal in size).  FDS will set the tangential velocity of the vent to obtain the specified direction indicated by {\ct UVW}.  This will only be done if the vent is inputting gas into the domain.

\section{Pressure-Related Effects: The \texorpdfstring{{\tt ZONE}}{ZONE} Namelist Group (Table \ref{tbl:VENT})}
\label{info:ZONE}

FDS assumes pressure to be composed of a ``background'' component, $\bp(z,t)$, plus a perturbation pressure, $\tp(\bx,t)$. Most
often, $\bp$ is just the hydrostatic pressure, and $\tp$ is the flow-induced spatially-resolved perturbation.
You can specify any number of sealed compartments within the computational
domain that can have their own ``background'' pressures, and these compartments, or ``pressure zones,'' can be connected via leakage and duct paths whose
flow rates are tied to the pressure of the adjacent zones.



\subsection{Specifying Pressure Zones}
\label{info:ZONE_Basics}

A pressure zone can by any region within the computational domain that is separated from the rest of the domain, or the exterior,
by solid obstructions. There is currently no algorithm within FDS to identify these zones based solely on your specified obstructions. Consequently, it is
necessary that you identify these zones explicitly in the input file. The basic syntax for a pressure {\ct ZONE} is:

\footnotesize
\begin{verbatim}
&ZONE XB=0.3,1.2,0.4,2.9,0.3,4.5 /
\end{verbatim}
\normalsize

\noindent
This means that the rectangular region, $0.3<x<1.2$, $0.4<y<2.9$, $0.3<z<4.5$, is assumed to be within a sealed compartment. There can be multiple {\ct ZONE}s
declared. The indices of the zones, which are required for the specification of leaks and fans, are determined simply by the order in which they are specified in the input file.
By default, the exterior of the computational
domain is Zone~0. If there are no {\ct OPEN} boundaries, the entire computational domain will be assumed to be Zone~1.

There are several restrictions to assigning pressure zones. First, the declared pressure zones must be completely within a region of the
domain that is bordered by solid obstructions. If the sealed region is not rectangular, FDS will extend the specified {\ct ZONE} boundaries to
conform to the non-rectangular region. It is possible to ``break'' pressure zones by removing
obstructions between them. An example of how to break pressure zones is given below.
Second, pressure zones {\bf can} span multiple meshes, but it is recommended that you check the pressure in each mesh to ensure consistency. Also, if the {\ct ZONE} does span multiple
meshes, make sure that the specified rectangular coordinates do so as well. This allows FDS to determine the actual extent of the {\ct ZONE} independently for each
mesh.

Note that if you plan to have one zone open up to another via the removal of an obstruction, make sure that the coordinates of the two
zones abut (i.e. touch) even if one of the zones includes the solid obstruction that separates them. FDS recognizes that a zone boundary has been removed when
two adjacent cells belonging to two different zones have no solid obstruction between them. It is recommended that you extend at least one
of the zone boundaries {\em into} the solid obstruction separating the two zones. That way, when the obstruction is removed, the newly created
gas phase cells will be assigned to one or the other zone and it will become obvious that two adjacent gas phase cells are of two different zones, at
which point the zones will merge and no longer have distinct background pressures.


\subsubsection{Example Case: {\bf pressure\_rise}}

This example tests several basic features of FDS. A narrow channel, 3~m long, 0.002~m wide, and 1~m tall, has air injected at a rate of
0.1~kg/m$^2$/s over an area of 0.2~m by 0.002~m for 60 s, with a linear ramp-up and ramp-down over 1 s. The total mass of air in the channel at the
start is 0.00718~kg. The total mass of air injected is 0.00244~kg. The domain is assumed two-dimensional, the walls are adiabatic, and {\ct
STRATIFICATION} is set to {\ct .FALSE.} simply to remove the slight change in pressure and density with height.
The domain is divided into three meshes, each 1~m long and each with identical gridding.  We expect the pressure,
temperature and density to rise during the 60~s injection period. Afterwards, the
temperature, density, and pressure should remain constant, according to the equation of state.
The figures below show the results of this calculation.  The density matches exactly showing
that FDS is injecting the appropriate amount of mass. The steady state values of the pressure, density and temperature are consistent with
the ideal values.

\begin{figure}[ht]
\begin{tabular*}{\textwidth}{lr}
\includegraphics[height=2.2in]{SCRIPT_FIGURES/pressure_rise_T} &
\includegraphics[height=2.2in]{SCRIPT_FIGURES/pressure_rise_P} \\
\includegraphics[height=2.2in]{SCRIPT_FIGURES/pressure_rise_R} &
\end{tabular*}
\caption[Output of {\bf pressure\_rise} test case.]{Output of {\bf pressure\_rise} test case.}
\label{pressure_rise}
\end{figure}


\subsubsection{Example Case: {\bf zone\_break}}

\label{zone_break_example}

In this example, three simple compartments are initially isolated from each other and from the ambient environment outside. Each compartment is a separate pressure zone. Air
is blown into Zone~1 at a constant rate of 0.1~kg/s, increasing its pressure approximately 1970~Pa by 10~s, at which time Zone~1 is opened to Zone~2, decreasing the
overall pressure in the two zones to roughly one-third the original value because the volume of the combined pressure zone has been roughly tripled.
At 15~s, the pressure is further decreased by opening a door to Zone~3, and, finally, at 20~s the pressure returns to ambient following the opening
of a door to the outside. Figure~\ref{zone_break} displays the pressure within each compartment.

\begin{figure}[ht]
\includegraphics[width=3.1in]{SCRIPT_FIGURES/zone_break_p2}
\includegraphics[width=3.1in]{SCRIPT_FIGURES/zone_break_p5}
\caption[Output of {\bf zone\_break} test cases.]{Output of {\bf zone\_break} test cases. The figure on the left results from using a pressure relaxation factor of 0.2. The
figure on the right uses 0.5, which tends to bring the pressure into equilibrium more quickly.}
\label{zone_break}
\end{figure}

\noindent
Notice that the pressure within each compartment does not come to equilibrium instantaneously. Rather, a relaxation factor ({\ct PRESSURE\_RELAX\_FACTOR} on the {\ct PRES} line)
is applied to bring the zones
into equilibrium over several seconds. This is done for several reasons. First, in reality doors and windows do not magically disappear as they do in FDS. It takes
a finite amount of time to fully open them, and the slowing of the pressure increase/decrease is a simple way to simulate the effect.
Second, relatively large pressure differences between zones wreak havoc with flow solvers, especially ones like FDS that
use a low Mach number approximation. To maintain numerical stability, FDS gradually brings the pressures into equilibrium. This second point ought to be seen as a warning:

\begin{warning}
\noindent Do not use FDS to study the sudden rupture of pressure vessels! Its low Mach number formulation does not allow for high speed, compressible effects that
are very important in such analyses. The zone breaking functionality described in this example is only intended to be used for relatively small pressure differences (<0.1~atm)
between compartments. Real buildings cannot withstand substantially larger pressures anyway.
\end{warning}

\subsection{Leaks}
\label{info:Leaks}

With a few notable exceptions, like containment buildings for nuclear power plants, real world construction is not air tight.  Small gaps occur along windows and doors and where walls abutt each other and the floors and ceilings.  As a comparment is pressurized by a fire, air will escape through these small gaps.  This is referred to as leakage.

Leakage is inherently a subgrid-scale phenomenon because the leakage area is usually very small. In other words, it is not possible to define a leak directly on the
numerical mesh. It is sometimes possible to ``lump'' the leaks into a single mesh-resolvable hole, but this is problematic
for two reasons. First, the leakage area rarely corresponds neatly to the area of a single mesh cell-sized hole. Second, the
flow speeds through the hole can be large and cause numerical instabilities.

A better way to handle leakage is by exploiting pressure zones. A pressure zone is a user-specified volume within the computational domain that is
entirely surrounded by solid obstructions. For example, the interior of a closed room can be, and should be, declared a pressure zone. Leakage from one
compartment to another is then designated on the input lines defining the individual pressure {\ct ZONE}s:

\footnotesize
\begin{verbatim}
&ZONE XB=0.3,1.2,0.4,2.9,0.3,4.5, LEAK_AREA(0)=0.0001 /
&ZONE XB=2.3,5.8,1.4,2.9,6.8,9.7, LEAK_AREA(1)=0.0002, LEAK_AREA(0)=0.0003 /
\end{verbatim}
\normalsize

\noindent
The first line designates a region of the computational domain to be Pressure Zone~1. Note that the order of the {\ct ZONE} lines is important; that is, the order
implicitly defines Zone~1, Zone~2, {\em etc.}
Zone 0 is by default the ambient pressure exterior.


In this example, a leak exists between Zone 1 and the exterior Zone 0, and the area of the leak
is 0.0001~m$^2$ (1 cm by 1 cm hole, for example). Zone 2 leaks to Zone 1 (and vis verse)
with a leak area of 0.0002~m$^2$. Zone~2 also leaks to the outside with an area of 0.0003~m$^2$. Note that zones need not be physically connected for a leak to occur.

The volume flow, $\dot{V}$, through a leak of area $A_L$ is given by
\be  \dot{V}_{\hbox{\footnotesize leak}} = A_L \; \hbox{sign} (\Delta p) \; \sqrt{2 \frac{ | \Delta p |}{\rho_\infty}} \ee
where $\Delta p$ is the pressure difference between the adjacent compartments (in units of Pa) and
$\rho_\infty$ is the ambient density (in units of kg/m$^3$). The discharge coefficient normally seen in this type of formula is assumed
to be 1.

Within FDS, leakage flows are handled by the HVAC solver.  A leak between two zones is considered to be a pair of HVAC {\ct VENT}s connected by a duct with a loss coefficient of 1.  To specify a leak between two zones, a solid surface in each of the zones must be given the attribute {\ct LEAK\_PATH}.  Leakage is uniformly distributed over all of the solid surfaces assigned the {\ct LEAK\_PATH}.  In the above example, the leakage from Zone 1 to Zone o requires the attribute
{\ct LEAK\_PATH=1,0}, meaning that the leak between Zones 1 and 0 is uniformly distributed
over solids defined with:

\footnotesize
\begin{verbatim}
&SURF ID='whatever',..., LEAK_PATH=1,0 /
\end{verbatim}
\normalsize

\noindent
Likewise, the boundaries of Zone 1 and Zone 2 must include solids whose {\ct SURF} properties include the parameter {\ct LEAK\_PATH=1,2}, but these solids need not form a boundary between the
two zones. The {\ct SURF}aces with the {\ct LEAK\_PATH} attribute lump all of the
leakage over these areas. The order of the two pressure zones designated by {\ct LEAK\_PATH} is unimportant.

The HVAC output quantities can be used to determine the leakage flows.  FDS give the duct connecting Zone A with Zone B the name {\ct 'LEAK A B'} and the duct nodes will be named {\ct 'LEAK A B'} for the Zone A side of the leak and {\ct 'LEAK B A'} for the Zone B side of the leak.  Note that for the duct names, FDS will use the lower numbered zone as Zone A.

\clearpage

\subsection{Special Topic: Stack Effect}
\label{info:stackeffect}

Tall buildings often experience buoyancy-induced air movement due to temperature differences
between inside and outside, known as {\em stack effect}. The different temperatures result in different densities and hence different pressure gradients inside the building comparted to outside the building.  This can result in inducing flow in vertical shafts (stairwells, atriums, elevator shafts, etc.) through leakage paths or openings at the top and bottom of the building.  To simulate this phenomenon in FDS, you must
include the entire building, or a substantial fraction of it, both inside and out, in the computational domain. It
is important to capture the pressure and density decrease in the atmosphere based on the specified
temperature {\ct LAPSE\_RATE} ($^\circ$C/m) that is entered on the {\ct MISC} line.

For the case where the stack flow is through small leakage paths, it is recommended to define the building using a pressure {\ct ZONE}.  The leakage paths can then be defined as individual HVAC systems.  Note that the leakage model would aggregate all leaky surfaces over the entire height of the building and as a result average out the pressure gradients.  For doing stack effect calculations individual leakage paths should be defined. In the section that follows is a simple example.

\subsubsection{Example Case: Atmospheric\_Effects/stack\_effect}

This subsection contains a simple example demonstrating the stack effect.  A detailed discussion of the stack effect can be found in \cite{Klote_Milke}.

The {\bf stack\_effect} test case is a two-dimensional simulation of a building with an interior hotter than the exterior and two leakage paths at the top and the bottom of the building.  Since the inside is hotter, it will have a smaller pressure gradient than the outside resulting in higher pressure inside the top of the buiding than the outside.  This will cause flow out the upper leakage path and in the bottom leakage path.

The building 100~m tall building with an interior temperature, $T_b$, initially set to 20~$^\circ$C, and an exterior temperature, $T_\infty$, set to
10~$^\circ$C. The {\ct LAPSE\_RATE} is set to 0~$^\circ$C/m; thus, $T_0(z)=T_\infty$ outside the building and $T_0(z)=T_b$ inside the building. Two small leakage openings are defined 2.5~m above the ground floor and 2.5~m below the roof using the HVAC solver.  Each opening is given an area of 0.01~m$^2$ and a flow loss of 2 (e.g. an entrance loss into the leak path of 1 and and exit loss out of the leak path of 1 both of which represent a sharp edge opening).

The initial density stratification inside and outside the building can be calculated using the relation:
\be
   \frac{\rho_0(z)}{\rho_\infty} = \exp \left(- \frac{g \overline{W}}{{\cal R} T_0} z \right)
\ee

where $\cal R$ is the universal gas constant, $g$ is the acceleration of gravity, and $\overline{W}$ is the average molecular weight of the air, $z$ is the height above the {\ct GROUND\_LEVEL}, and $T_0$ is the ambient temperature.
Applying this formula to the external and internal locations at the lower and upper vents results in densities of 1.2412, 1.1989, 1.2272, and
1.1858~kg/m$^3$, respectively.

Since the openings in the building are equally spaced over its height, the neutral plane should be close to its midpoint. By making some simple assumptions including using only the ground level ambient pressure for the equation of state and that the densities are constant with height, a hand calculation can be done to determine the flows through the leakage paths.  Note that in actuality both pressure and desnsity will change with height; however, as seen in the above densities, this changes are small.

The pressure difference across the building's wall can be computed as
\be
   \Delta p = \frac{\overline{W} \, p_0(z) \, g \, h} {\cal R} \left( \frac{1}{T_\infty} - \frac{1}{T_b} \right)
\ee
where $h$ is the distance from the neutral plane.  The pressure gradient will cause flow in and out of the leaks and the neutral plane is located where the mass flows in and out are balanced.  This can be computed using:

\be \frac{H}{H_n} = 1 + \frac{T_\infty}{T_b} \ee
where $H_n$ is the neutral plane height above the bottom of the shaft and $H$ is the height between the vents.  This gives a neutral plane of 46.79~m and pressure differences of 44.3 Pa and 50.7 Pa at the top and bottom of the vent.  Using the loss of 2 and the pressure difference in the HVAC momentum equation results in an steady-state velocity of inflow velocity at the bottom is 3.85~m/s and an outflow velocity at the top is~4.21 m/s.

Results for velocity and density are shown in Figure~\ref{fig_stack_effect}.

\begin{figure}[t]
   \begin{tabular*}{\textwidth}{l@{\extracolsep{\fill}}r}
      \scalebox{1}{ \includegraphics[width=3.2in]{SCRIPT_FIGURES/stack_effect_v.pdf} } &
      \scalebox{1}{ \includegraphics[width=3.2in]{SCRIPT_FIGURES/stack_effect_rho.pdf} }
   \end{tabular*}
   \caption[Stack effect]{(Left) Velocity at the upper and lower vents for the stack\_effect case.  (Right) Upper and lower exterior and interior densities for the stack\_effect case.}
   \label{fig_stack_effect}
\end{figure}

\section{Special Topic: Pressure Boundary Conditions}
\label{info:pressure_boundary}

In some situations, it is more convenient to specify a pressure, rather than a velocity, at a boundary. Suppose, for example, that you are modeling the
interior of a tunnel, and a wind is blowing at one of the portals that affects the overall flow within the tunnel. If (and only if) the portal is defined using an
{\ct OPEN} vent, then the {\em dynamic pressure} at the boundary can be specified like this:

\footnotesize
\begin{verbatim}
&VENT XB=..., SURF_ID='OPEN', DYNAMIC_PRESSURE=2.4, PRESSURE_RAMP='wind' /
&RAMP ID='wind', T= 0.0, F=1.0 /
&RAMP ID='wind', T=30.0, F=0.5 /
            .
            .
\end{verbatim}
\normalsize

\noindent
The use of a {\em dynamic pressure} boundary affects the FDS algorithm as follows.  At {\ct OPEN} boundaries, the hydrodynamic pressure (head) $\cal H$ is specified as
\begin{eqnarray}
{\cal H} &=& \mbox{\ct DYNAMIC\_PRESSURE}/\rho_\infty + {|\mathbf{u}|^2}/2 \quad  \mbox{(outgoing)}  \nonumber \\
{\cal H} &=& \mbox{\ct DYNAMIC\_PRESSURE}/\rho_\infty \quad                       \mbox{(incoming)}
\end{eqnarray}
where $\rho_\infty$ is the ambient density and $\mathbf{u}$ is the most recent value of the velocity on the boundary.
The {\ct PRESSURE\_RAMP} allows you to alter the pressure as a function of time. Note that you do not
need to ramp the pressure up or down starting at zero, like you do for various other ramps.
The net effect of a positive dynamic pressure at an otherwise quiescent boundary is to
drive a flow into the domain. However, a fire-driven flow of sufficient strength can push back against this incoming flow.

\subsubsection{Example Case: {\bf pressure\_boundary}}

The following lines, taken from the sample case, {\bf pressure\_boundary}, demonstrates how to do
a time-dependent pressure boundary at the end of a tunnel. The tunnel is 10~m long, 1~m wide, 1~m tall
with a fire in the middle and a pressure boundary imposed on the right side. The left side ({\ct XMIN}) is
just an {\ct OPEN} boundary with no pressure specified. It is assumed to be at ambient pressure.

\footnotesize
\begin{verbatim}
&VENT MB = 'XMIN' SURF_ID = 'OPEN' /
&VENT MB = 'XMAX' SURF_ID = 'OPEN', DYNAMIC_PRESSURE=2.4, PRESSURE_RAMP='wind_ramp' /
&RAMP ID='wind_ramp', T= 0., F= 1. /
&RAMP ID='wind_ramp', T=15., F= 1. /
&RAMP ID='wind_ramp', T=16., F=-1. /
\end{verbatim}\normalsize

\noindent
Figure~\ref{pressure_boundary} shows two snapshots from Smokeview taken before and after the time when the positive pressure is
imposed at the right portal of a tunnel. The fire leans to the
left because of the preferential flow in that direction. It leans back to the right when the positive pressure
is directed to become negative.

\begin{figure}[ht]
\includegraphics[width=\textwidth]{SCRIPT_FIGURES/pressure_boundary_left}
\includegraphics[width=\textwidth]{SCRIPT_FIGURES/pressure_boundary_right}
\caption[Example of positive pressure at a tunnel entrance.]{Snapshots from the sample case {\bf pressure\_boundary}
showing a fire in a tunnel leaning left, then right, due to a positive, then negative, pressure imposed at
the right portal.}
\label{pressure_boundary}
\end{figure}


\clearpage

\section{Special Topic: Fires and Flows in the Outdoors}
\label{info:stratification}

Simulating a fire in the outdoors is not much different than a fire
indoors, but there are a few issues that need to be addressed.
First, the velocity of the wind profile at any exterior boundary will be a top hat (constant) by default,
but the parameter {\ct PROFILE} on the {\ct SURF} line
can yield other profiles.
For example, {\ct PROFILE='PARABOLIC'} produces a parabolic profile with
{\ct VEL} being the maximum velocity,
and {\ct 'ATMOSPHERIC'} produces a typical atmospheric wind
profile of the form $u=u_0 (z/z_0)^p$. If an atmospheric profile is
prescribed, also prescribe {\ct Z0} for $z_0$  and {\ct PLE} for $p$.
{\ct VEL} specifies the reference velocity $u_0$. Note that $z_0$ is not the ground, but rather some
height where the wind speed is measured, like an elevated weather station. It is assumed that
the ground is located at $z=0$. To change this assumption, set {\ct GROUND\_LEVEL} on the {\ct MISC} line to be
the appropriate value of $z$. Be careful not to apply an atmospheric velocity profile below {\ct GROUND\_LEVEL} or
FDS will stop with an error.

Another useful parameter for outdoor simulations is the temperature
lapse rate of the atmosphere. Typically, in the first few hundred meters
of the atmosphere, the temperature decreases several degrees Celsius
per kilometer. These few degrees are important when considering the rise
of smoke since the temperature of the smoke decreases rapidly as it
rises. The {\ct LAPSE\_RATE} of the atmosphere can be specified on the
{\ct MISC} line in units of $^\circ$C/m. A negative sign indicates that the
temperature {\em decreases} with height.
This need only be set for outdoor calculations where the height of the
domain is tens or hundreds of meters.
The default value of the {\ct LAPSE\_RATE} is 0~$^\circ$C/m.

By default, FDS assumes that the density and pressure decrease with height, regardless of the
application or domain size. For most simulations, this effect is negligible, but it can be
turned off completely by setting {\ct STRATIFICATION=.FALSE.} on the {\ct MISC} line.






\chapter{User-Specified Functions, Ramps and Tables}
\label{info:RAMP}


Many of the parameters specified in the FDS input file are fixed constants. However, there are several parameters that may vary in
time, temperature, or space. These functions can be complex, thus you have to have some way to convey them. The namelist groups,
{\ct RAMP} and {\ct TABL}, allow you to control the behavior of selected parameters.  {\ct RAMP} allows you
to specify a function with one independent variable (such as time) and one dependent variable (such as velocity).
{\ct TABL} allows you to specify a function of multiple independent variables (such as a solid angle) and multiple
dependent variables (such as a sprinkler flow rate and droplet speed).



\section{Time-Dependent Functions}

\label{info:RAMP_Time}

At the start of any calculation, the temperature is ambient
everywhere, the flow velocity is zero everywhere, nothing is burning,
and the mass fractions of all species are uniform.  When the
calculation starts temperatures, velocities, burning rates, {\em
etc.}, are ramped-up from their starting values because nothing can
happen instantaneously. By default, everything is ramped-up to their
prescribed values in roughly 1~s. However, control the rate at which
things turn on, or turn off, by specifying time histories for the
boundary conditions that are listed on a given {\ct SURF} line.  The
above boundary conditions can be made time-dependent using either
prescribed functions or user-defined functions.  The parameters {\ct
TAU\_Q}, {\ct TAU\_T}, and {\ct TAU\_V} indicate that the heat release
rate ({\ct HRRPUA}); surface temperature ({\ct TMP\_FRONT}); and/or
normal velocity ({\ct VEL}, {\ct VOLUME\_FLUX}), or {\ct
MASS\_FLUX\_TOTAL} are to ramp up to their prescribed values in {\ct
TAU} seconds and remain there.  If {\ct TAU\_Q} is positive, then the
heat release rate ramps up like tanh$(t/\tau)$. If negative, then the
HRR ramps up like $(t/\tau)^2$. If the fire ramps up following a $t^2$
curve, it remains constant after {\ct TAU\_Q} seconds.  These rules
apply to {\ct TAU\_T} and {\ct TAU\_V} as well.  The default value for
all {\ct TAU}s is 1~s.  If something other than a tanh or $t^2$ ramp
up is desired, then a user-defined function must be input. To
do this, set {\ct RAMP\_Q}, {\ct RAMP\_T} or {\ct RAMP\_V} equal to a
character string designating the ramp function to use for that
particular surface type, then somewhere in the input file generate
lines of the form:

\footnotesize
\begin{verbatim}
 &RAMP ID='rampname1', T= 0.0, F=0.0 /
 &RAMP ID='rampname1', T= 5.0, F=0.5 /
 &RAMP ID='rampname1', T=10.0, F=0.7 /
                    .
                    .
                    .
 &RAMP ID='rampname2', T= 0.0, F=0.0 /
 &RAMP ID='rampname2', T=10.0, F=0.3 /
 &RAMP ID='rampname2', T=20.0, F=0.8 /
                    .
                    .
                    .
\end{verbatim}
\normalsize

\noindent
Here, {\ct T} is the time, and {\ct F} indicates the fraction of the heat
release rate, wall temperature, velocity, mass fraction, {\em etc.}, to apply.
Linear interpolation\footnote{By default, FDS uses a linear interpolation routine to find time or temperature-dependent values between user-specified points.
The default number of interpolation points is 5000, more than enough for most applications. However, you can change this value
by specifying {\ct NUMBER\_INTERPOLATION\_POINTS} on any {\ct RAMP} line.} is used to fill in intermediate time points.
Note that each set of {\ct RAMP} lines must have a unique {\ct ID} and that the lines must
be listed with monotonically increasing {\ct T}.
Note also that the {\ct TAU}s and the {\ct RAMP}s are mutually exclusive. For a given
surface quantity, both cannot be prescribed.
As an example, the simple blowing vent from above can be controlled via the lines:

\footnotesize
\begin{verbatim}
&SURF ID='BLOWER', VEL=-1.2, TMP_FRONT=50., RAMP_V='BLOWER RAMP', RAMP_T='HEATER RAMP' /
&RAMP ID='BLOWER RAMP', T= 0.0, F=0.0 /
&RAMP ID='BLOWER RAMP', T=10.0, F=1.0 /
&RAMP ID='BLOWER RAMP', T=80.0, F=1.0 /
&RAMP ID='BLOWER RAMP', T=90.0, F=0.0 /
&RAMP ID='HEATER RAMP', T= 0.0, F=0.0 /
&RAMP ID='HEATER RAMP', T=20.0, F=1.0 /
&RAMP ID='HEATER RAMP', T=30.0, F=1.0 /
&RAMP ID='HEATER RAMP', T=40.0, F=0.0 /
\end{verbatim}
\normalsize

\noindent
Note that the temperature and
velocity can be independently controlled by assigning different
{\ct RAMP}s via {\ct RAMP\_T} and {\ct RAMP\_V}, respectively.

Use {\ct TAU\_T} or {\ct RAMP\_T}
to control the ramp-ups for surface temperature.
The surface temperature will be computed as
\be
   T(t) = T_0 + f(t) \left( T_f - T_0 \right)
\ee
where $T(t)$ is the desired surface temperature, $f(t)$ is the result of evaluating the
{\ct RAMP\_T} at time $t$, $T_0$ is the ambient temperature, and $T_f$ is {\ct TMP\_FRONT}, specified on the same {\ct SURF} line as {\ct RAMP\_T}.

Use {\ct TAU\_MF(N)} or {\ct RAMP\_MF(N)}
to control the ramp-ups for either the mass
fraction or mass flux of species {\ct N}. Here, the $N$ refers to the $N$th species listed on the {\ct SURF} line. For example:

\footnotesize
\begin{verbatim}
&SURF ID='...', MASS_FLUX(1:2)=0.1,0.3, SPEC_ID(1:2)='ARGON','NITROGEN', TAU_MF(1:2)=5.,10. /
\end{verbatim}
\normalsize

\noindent
indicates that argon and nitrogen are to be injected at rates of 0.1~kg/m$^2$/s and 0.3~kg/m$^2$/s over time periods of approximately 5~s and 10~s, respectively. It does not
matter in what order the {\ct SPEC} lines are listed in the input file.


\begin{table}[ht]
\label{tau_table}
\caption[Parameters used to control time-dependence.]{Parameters for controlling the time-dependence of given quantities.}
\begin{tabular}{|l|l|l|l|l|}
\hline
Quantity            & Group             & Input Parameter(s)                                            & {\ct TAU}                         & {\ct RAMP ID}              \\ \hline \hline
Heat Release Rate   & {\ct SURF}        & {\ct HRRPUA}                                                  & {\ct TAU\_Q}                      & {\ct RAMP\_Q}              \\ \hline
Temperature         & {\ct SURF}        & {\ct TMP\_FRONT}                                              & {\ct TAU\_T}                      & {\ct RAMP\_T}              \\ \hline
Velocity            & {\ct SURF}        & {\ct VEL}, {\ct VOLUME\_FLUX}, {\ct MASS\_FLUX\_TOTAL}        & {\ct TAU\_V}                      & {\ct RAMP\_V}              \\ \hline
Mass Fraction/Flux  & {\ct SURF}        & {\ct MASS\_FRACTION(N)}, {\ct MASS\_FLUX(N)}                  & {\ct TAU\_MF(N)}                  & {\ct RAMP\_MF(N)}          \\ \hline
Particle Mass Flux  & {\ct SURF}        & {\ct PARTICLE\_MASS\_FLUX}                                    & {\ct TAU\_PART}                   & {\ct RAMP\_PART}           \\ \hline
External Heat Flux  & {\ct SURF}        & {\ct EXTERNAL\_FLUX}                                          & {\ct TAU\_EF}                     & {\ct RAMP\_EF}             \\ \hline
Pressure            & {\ct VENT}        & {\ct DYNAMIC\_PRESSURE}                                       &                                   & {\ct PRESSURE\_RAMP}       \\ \hline
Flow                & {\ct PROP}        & {\ct FLOW\_RATE}                                              & {\ct FLOW\_TAU}                   & {\ct FLOW\_RAMP}           \\ \hline
Gravity             & {\ct MISC}        & {\ct GVEC(1)}                                                 &                                   & {\ct RAMP\_GX}             \\ \hline
Gravity             & {\ct MISC}        & {\ct GVEC(2)}                                                 &                                   & {\ct RAMP\_GY}             \\ \hline
Gravity             & {\ct MISC}        & {\ct GVEC(3)}                                                 &                                   & {\ct RAMP\_GZ}             \\ \hline
\end{tabular}
\end{table}

\newpage

\section{Temperature-Dependent Functions}

\label{info:RAMP_Temperature}

Thermal properties like conductivity and specific heat can vary significantly with temperature. In such cases, use
the {\ct RAMP} function like this:

\footnotesize
\begin{verbatim}
&MATL ID                 = 'STEEL'
      FYI                = 'A242 Steel'
      SPECIFIC_HEAT_RAMP = 'c_steel'
      CONDUCTIVITY_RAMP  = 'k_steel'
      DENSITY            = 7850. /

&RAMP ID='c_steel', T= 20., F=0.45   /
&RAMP ID='c_steel', T=377., F=0.60   /
&RAMP ID='c_steel', T=677., F=0.85   /

&RAMP ID='k_steel', T= 20., F=48.    /
&RAMP ID='k_steel', T=677., F=30.    /
\end{verbatim}
\normalsize

\noindent
Note that here (as opposed to time ramps) the parameter {\ct F} is the actual physical quantity, not just
a fraction of some other quantity. Thus, if {\ct CONDUCTIVITY\_RAMP} is used, there should be no
value of {\ct CONDUCTIVITY} given. Note also that for values of temperature, {\ct T}, below and above the
given range, FDS will assume a constant value equal to the first or last {\ct F} specified.



\section{Tabular Functions}

\label{info:TABL}

Some input quantities, such as a sprinkler spray pattern, vary multi-dimensionally. In such cases, use
the {\ct TABL} namelist group. The format of the {\ct TABL} lines is application-specific, but in general look like this:

\footnotesize
\begin{verbatim}
&TABL ID='TABLE1', TABLE_DATA=40,50, 85, 95,10,0.5 /
&TABL ID='TABLE1', TABLE_DATA=40,50,185,195,10,0.5 /
\end{verbatim}
\normalsize

\noindent
A detailed description of the various table entries is given in the sections that describe quantities that use such
tables. Currently, only sprinklers and nozzles use this group of parameters to define a complex spray pattern.

\begin{warning}
\noindent
Note that each set of {\ct TABL} lines must have a unique {\ct ID}.  Specific requirements on ordering the lines
will depend upon the type of TABL and those requirements are provided in the appropriate section in this guide.
\end{warning}





\chapter{Chemistry}
\label{info:Chemistry}

FDS was designed primarily to study fire phenomena, and much of the basic chemistry of combustion is handled with a minimum of user inputs. However, there
are many applications in which you might want to simulate the movement of gases in the absence of fire, or additional chemical species might be added to a simulation that
involves fire.

There are two namelist groups that describe gas species. The first is {\ct SPEC}, which describes each gas species that is included in the simulation. There are
different roles that a gas species might play in a simulation. A gas
species might be explicitly tracked. In other words, a transport equation is solved for it. Or a gas species might just serve as the ``background'' species; that is, it is
the gas that is present at the start of the simulation. Or, a gas species might be one component of a mixture of
gases that are transported together. FDS exploits the idea that the products of combustion from a fire mix and travel together; you only need to solve
one transport equation for this ``lumped species.'' The default combustion model in FDS assumes that the reaction is mixing-controlled, and
transport equations for only the lumped species -- air, fuel, and products -- are solved.  There is no reason to solve individual (and costly) transport equations
for the major reactants and products of combustion -- fuel, O$_2$, CO$_2$,
H$_2$O, N$_2$, CO and soot -- because they are all pre-tabulated functions of
the three lumped species. More detail on combustion is given in Chapter~\ref{chap:combustion}. For the moment, just realize that you need not, {\em and should not},
explicitly list the reactants and products of combustion using {\ct SPEC} lines if all you want is to model a fire involving a hydrocarbon fuel.



\section{Specifying Gas Species: The \texorpdfstring{{\tt SPEC}}{SPEC} Namelist Group}
\label{info:SPEC}

There are three ways in which a species can be used in FDS: it can be tracked as a separate species,
it can be the background species, or it can only exist as part of a lumped species defined with {\ct SMIX}.
If a species only exists as part of one or more lumped species, the parameter {\ct SMIX\_COMPONENT\_ONLY=.TRUE.} should be set.
This tells FDS not to allocate space for the species in the array of tracked gases.
If a species is to be used as the background species, the parameter {\ct BACKGROUND=.TRUE.} should be set.
This also tells FDS not to allocate space for the species in the array of tracked gases. A species with {\ct SMIX\_COMPONENT\_ONLY=.TRUE.}
cannot be used as an individual species and it cannot be used as the background species; however, the background species and an individual species
can also be used as part of one or more lumped species.


Suppose that gases are introduced into the simulation
that are neither reactants nor products of combustion.
These gases can be tracked separately via additional scalar transport equation\footnote{
Often an extra gas introduced into a calculation is the same as a
product of combustion, like water vapor from a sprinkler or carbon
dioxide from an extinguisher. These gases are tracked separately,
thus water vapor generated by the combustion is tracked via the
products lumped species variable and water vapor generated by evaporating
sprinkler droplets is tracked via its own transport equation.}
In fact, there does not need to be any fire
at all -- FDS can be used to transport a mixture of non-reacting
ideal gases.

\subsection{Basics}

\label{info:SPEC_Basics}

The namelist group {\ct SPEC} is used to specify an individual gas species. Each {\ct SPEC} line should include at the very least
the name of the species via a character string, {\ct ID}.
Next, if the ambient (initial) mass fraction\footnote{{\ct HUMIDITY} can be specified for {\ct WATER VAPOR} in place of mass fraction.
{\ct HUMIDITY} is the relative humidity of water vapor in units of \%. It is 40 \% by default.} of the gas is something
other than 0, then the parameter {\ct MASS\_FRACTION\_0} is used to
specify it. Several gases that can be included in a calculation are listed in
Table~\ref{tab:gasspecies}. Here is an example:

\footnotesize
\begin{verbatim}
&SPEC ID='ARGON', MASS_FRACTION_0=0.1, MW=40. /
\end{verbatim}
\normalsize

\noindent
Once the extra species has been declared, you introduce it at surfaces via the
parameters {\ct MASS\_FRACTION(:)} or {\ct MASS\_FLUX(:)} along with the character array {\ct SPEC\_ID(:)}.
Following is a very simple example of how a gas can be introduced into the simulation.


\subsubsection{Sample Case: Flowfields/gas\_filling}

Consider the short input file:

\footnotesize
\begin{verbatim}
&HEAD CHID='gas_filling', TITLE='Fill an Empty Room with Hydrogen' /
&MESH IJK=32,32,15, XB=-3.2,3.2,-3.2,3.2,0.0,3.0 /
&TIME T_END=300.0 /
&SPEC ID='HYDROGEN' /
&SURF ID='LEAK', SPEC_ID(1)='HYDROGEN', MASS_FLUX(1)=0.01667, RAMP_MF(1)='leak_ramp' /
&RAMP ID='leak_ramp', T=  0., F=0.0 /
&RAMP ID='leak_ramp', T=  1., F=1.0 /
&RAMP ID='leak_ramp', T=180., F=1.0 /
&RAMP ID='leak_ramp', T=181., F=0.0 /
&VENT XB=-0.6,0.4,-0.6,0.4,0.0,0.0, SURF_ID='LEAK', COLOR='RED' /
&DUMP MASS_FILE=.TRUE. /
&SLCF PBY=0.0, QUANTITY='HYDROGEN' /
&TAIL /
\end{verbatim}
\normalsize

\noindent
The case is nothing more than hydrogen gas filling a box. The gas is injected through a 1~m by 1~m vent
at a rate of 0.01667~kg/m$^2$/s and shut off after 3~min. The total mass of hydrogen at that point ought to be
3~kg (see Fig.~\ref{gas_filling}). Notice that no properties were needed for the {\ct HYDROGEN} because it is
a species whose properties are included in FDS. The background species in this case is
assumed to be air. The mass flow rate of the hydrogen is controlled via the ramping parameter {\ct RAMP\_MF(1)}, and
the index 1 refers to the first, and only, gas species that is specified in the input file. The parameter
{\ct MASS\_FILE=.TRUE.} instructs FDS to produce an output file that contains a time history of the hydrogen mass.
\begin{figure}[h!]
\begin{center}
\includegraphics[width=3.1in]{SCRIPT_FIGURES/gas_filling_mass}
\end{center}
\caption[Example of gas filling.]{Hydrogen mass vs.~time for {\bf gas\_filling} test case.}
\label{gas_filling}
\end{figure}


\subsection{Special Topic: Gas and Liquid Properties}

\label{gas_species_props}

There are several option for specifying the properties of gas and liquid species.

\subsubsection{Option 1: JANAF Tables}

Gases and liquids whose properties are tabulated within FDS are listed in
Table~\ref{tab:gasspecies}. The physical properties
of these species are known and do not need to be specified.

\subsubsection{Option 2: Lennard-Jones Potential Parameters}

If the gas species is not included in Table~\ref{tab:gasspecies}, its
molecular weight, {\ct MW}, must be specified on the {\ct SPEC} line in units of g/mol.
In addition, if known, the Lennard-Jones potential parameters $\sigma$ ({\ct SIGMALJ}) and
$\epsilon/k$ ({\ct EPSILONKLJ}) should be specified.

\subsubsection{Option 3: User-Specified Properties}

If the gas species is not included in Table~\ref{tab:gasspecies}, and the Lennard-Jones potential parameters are not known, you must specify
its molecular weight, {\ct MW} (g/mol),
its {\ct VISCOSITY} (kg/m/s), its (thermal) {\ct CONDUCTIVITY} (W/m/K), and its
{\ct DIFFUSIVITY} (m$^2$/s). The diffusivity is assumed to be the binary diffusion coefficient between the given species
and the background species. If any of these properties are omitted, FDS will assume the properties of air.
The specific heat of the gas will be calculated from its molecular weight using the relation:
\be c_{p,\alpha} = \frac{\gamma}{\gamma-1} \frac{\cal R}{W_\alpha} \ee
The ratio of specific heats, {\ct GAMMA}, is 1.4 by default and can be changed on the {\ct MISC} line. If you want all the gas specific heats to
follow this relation,
set {\ct CONSTANT\_SPECIFIC\_HEAT=.TRUE.} on the {\ct MISC} line.

\subsubsection{Additional Parameters}

It is assumed that the enthalpy of the gas species is given by the following formula:
\be
   h(T) = h(T_{ref}) + \int_{T_{ref}}^T c_p(T) \, dT
\ee
The (optional) {\ct REFERENCE\_TEMPERATURE}, $T_{ref}$, is the temperature that corresponds to
the {\ct REFERENCE\_ENTHALPY}.  If {\ct SPECIFIC\_HEAT} is specified and the {\ct REFERENCE\_ENTHALPY} is not, the {\ct REFERENCE\_ENTHALPY} will be set to $h(T_{ref})=c_p T_{ref}$.

If a liquid droplet is to be evaporating into a gas species and properties are being provided, then the following relationship should hold:
\be h_{gas}(T_{boil}) = h_{liquid}(T_{boil}) + h_v \ee

Recognized species that are emissive will been defined as {\ct ABSORBING} and radiative absorption for those species
will be computed.  The keyword {\ct ABSORBING} can be specified on the {\ct SPEC} line as well.  If {\ct .TRUE.} and the
species is not in the recognized list, then it will be assumed to be a fuel when invoking RadCal to compute its
absorptivity.


\subsubsection{Liquids}

If the species listed in Table~\ref{tab:gasspecies} includes liquid properties, it can be applied to liquid droplets. More detail is included in Chapter~\ref{info:PART}.



\begin{table}[ht]
\begin{center}
\caption[Optional Gas Species]{\bf Optional Gas Species~\cite{Reid:1}}
\label{tab:gasspecies}
\vspace{0.1in}
\begin{tabular}{|l|c|c|c|c|c|}
\hline
Species &   Mol.~Wgt.           & Formula          & $\sigma$ & $\epsilon/k$   & Liquid \\
        &   (g/mol)             &                  & (\AA)    & (K)            &        \\ \hline
\hline
{\ct ACETYLENE}          & 26.037280 & C$_2$H$_2$       & 4.033    & 231.8           &        \\ \hline
{\ct ACROLEIN}           & 56.063260 & C$_3$H$_4$O      & 4.549    & 576.7           &    Y   \\ \hline
{\ct AIR}                & 28.848523 &                  & 3.711    & 78.6            &    Y   \\ \hline
{\ct ARGON}              & 39.948000 & Ar               & 3.42     & 124.0           &    Y   \\ \hline
{\ct BUTANE}             & 58.122200 & C$_4$H$_{10}$    & 4.687    & 531.4           &    Y   \\ \hline
{\ct CARBON DIOXIDE}     & 44.009500 & CO$_2$           & 3.941    & 195.2           &        \\ \hline
{\ct CARBON MONOXIDE}    & 28.010100 & CO               & 3.690    & 91.7            &    Y   \\ \hline
{\ct ETHANE}             & 30.069040 & C$_2$H$_6$       & 4.443    & 215.7           &    Y   \\ \hline
{\ct ETHANOL}            & 46.068440 & C$_2$H$_5$OH     & 4.530    & 362.6           &    Y   \\ \hline
{\ct ETHYLENE}           & 28.053160 & C$_2$H$_4$       & 4.163    & 224.7           &    Y   \\ \hline
{\ct FORMALDEHYDE}       & 30.025980 & CH$_2$O          & 3.626    & 481.8           &    Y   \\ \hline
{\ct HELIUM}             & 4.002602  & He               & 2.551    & 10.22           &    Y   \\ \hline
{\ct HYDROGEN}           & 2.015880  & H$_2$            & 2.827    & 59.7            &    Y   \\ \hline
{\ct HYDROGEN BROMIDE}   & 80.911940 & HBr              & 3.353    & 449.0           &    Y   \\ \hline
{\ct HYDROGEN CHLORIDE}  & 36.460940 & HCl              & 3.339    & 344.7           &    Y   \\ \hline
{\ct HYDROGEN CYANIDE}   & 27.025340 & HCN              & 3.63     & 569.1           &    Y   \\ \hline
{\ct HYDROGEN FLUORIDE}  & 20.006343 & HF               & 3.148    & 330.0           &    Y   \\ \hline
{\ct ISOPROPANOL}        & 60.095020 & C$_3$H$_7$OH     & 4.549    & 576.7           &    Y   \\ \hline
{\ct METHANE}            & 16.042460 & CH$_4$           & 3.758    & 148.6           &    Y   \\ \hline
{\ct METHANOL}           & 32.041860 & CH$_2$OH         & 3.626    & 481.8           &    Y   \\ \hline
{\ct N-DECANE}           & 142.281680 & C$_{10}$H$_{22}$ & 5.233    & 226.46          &        \\ \hline
{\ct N-HEPTANE}          & 100.201940 & C$_7$H$_{16}$    & 4.701    & 205.75          &    Y   \\ \hline
{\ct N-HEXANE}           & 86.175360 & C$_6$H$_{12}$    & 5.949    & 399.3           &    Y   \\ \hline
{\ct N-OCTANE}           & 114.228520 & C$_8$H$_{18}$    & 4.892    & 231.16          &    Y   \\ \hline
{\ct NITRIC OXIDE}       & 30.006100 & NO               & 3.492    & 116.7           &    Y   \\ \hline
{\ct NITROGEN}           & 28.013400 & N$_2$            & 3.798    & 71.4            &    Y   \\ \hline
{\ct NITROGEN DIOXIDE}   & 46.05500 & NO$_2$           & 3.992    & 204.88          &    Y   \\ \hline
{\ct NITROUS OXIDE}      & 44.012800 & N$_2$O           & 3.828    & 232.4           &    Y   \\ \hline
{\ct OXYGEN}             & 31.998800 & O$_2$            & 3.467    & 106.7           &    Y   \\ \hline
{\ct PROPANE}            & 44.095620 & C$_3$H$_8$       & 5.118    & 237.1           &    Y   \\ \hline
{\ct PROPYLENE}          & 42.079740 & C$_3$H$_6$       & 4.678    & 298.9           &    Y   \\ \hline
{\ct SOOT}               & 12.010700 & C                & 3.798    & 71.4            &        \\ \hline
{\ct SULFUR DIOXIDE}     & 64.063800 & SO$_2$           & 4.112    & 335.4           &    Y   \\ \hline
{\ct SULFUR HEXAFLUORIDE}& 146.055419 & SF$_6$           & 5.128    & 146.0           &        \\ \hline
{\ct TOLUENE}            & 92.138420 & C$_6$H$_5$CH$_3$ & 5.698    & 480.0           &    Y   \\ \hline
{\ct WATER VAPOR}        & 18.015280 & H$_2$O           & 2.641    & 809.1           &    Y   \\ \hline
\end{tabular}
\end{center}
\end{table}


\subsubsection{Specifying a Chemical Formula}

If you want to FDS to compute the molecular weight of the gas species, you can input a {\ct FORMULA} rather than the molecular weight, {\ct MW}.
This will also be used as the label for the gas species by Smokeview.  {\ct FORMULA} is a character string consisting of elements followed by their atom count.
Subgroups bracketed by parentheses can also be given.  The element name is given by its standard, case-sensitive, IUPAC\footnote{International Union of Pure
and Applied Chemistry} abbreviation ({\em e.g.} C for carbon, He for helium).
The following are all equivalent:

\footnotesize
\begin{verbatim}
&SPEC ID='ETHYLENE GLYCOL', FORMULA='C2H6O2' /
&SPEC ID='ETHYLENE GLYCOL', FORMULA='OHC2H4OH' /
&SPEC ID='ETHYLENE GLYCOL', FORMULA='C2H4(OH)2' /
\end{verbatim} \normalsize


\clearpage

\section{Specifying Gas Mixtures: The \texorpdfstring{{\tt SMIX}}{SMIX} Namelist Group}
\label{info:SMIX}

In typical fire simulations, there are mixtures of gas species that are created and transported together.
Solving transport equations for each species wastes computational resources.
For example, you can define air as a combination of nitrogen, oxygen, water vapor, and carbon dioxide.
However, this would require solving four separate transport equations.
Alternatively, you can define a ``lumped species'' that represents this mixture and save on CPU time.
The {\ct SMIX} namelist group allows you to define species mixtures.

The following inputs:

\footnotesize
\begin{verbatim}
&SPEC ID='NITROGEN', BACKGROUND=.TRUE./
&SPEC ID='OXYGEN', MASS_FRACTION_0 = 0.23054 /
&SPEC ID='WATER VAPOR', MASS_FRACTION_0 = 0.00626 /
&SPEC ID='CARBON DIOXIDE', MASS_FRACTION_0 = 0.00046 /
\end{verbatim} \normalsize

\noindent
are equivalent to these inputs using {\ct SMIX}

\footnotesize
\begin{verbatim}
&SPEC ID='NITROGEN', SMIX_COMPONENT_ONLY=.TRUE. /
&SPEC ID='OXYGEN', SMIX_COMPONENT_ONLY=.TRUE./
&SPEC ID='WATER VAPOR', SMIX_COMPONENT_ONLY=.TRUE. /
&SPEC ID='CARBON DIOXIDE', SMIX_COMPONENT_ONLY=.TRUE. /

&SMIX ID='AIR', BACKGROUND=.TRUE.,
      SPEC_ID='NITROGEN','OXYGEN','WATER VAPOR','CARBON DIOXIDE'
      MASS_FRACTION=0.76274,0.23054,0.00626,0.00046 /
\end{verbatim} \normalsize

\noindent
The keyword {\ct SMIX\_COMPONENT\_ONLY} denotes that the species is only present as part of a lumped species.
When this flag is set, FDS will not allocate space to track that species individually.

The available inputs for {\ct SMIX} are:

\begin{description}
\item[{\ct BACKGROUND}] Denotes that this lumped species is to be used as the background species.  The {\ct BACKGROUND} lumped species must be defined first.
\item[{\ct ID}] Character string identifying the name of the species. You must provide this.
\item[{\ct SPEC\_ID}] Character array containing the names of the species that make up the lumped species.
\item[{\ct MASS\_FRACTION}] The mass fractions of the species making up the lumped species in the order listed by {\ct SPEC\_ID}.  FDS will normalize the values to 1.
Specify only one of {\ct MASS\_FRACTION} or {\ct VOLUME\_FRACTION}.
\item[{\ct VOLUME\_FRACTION}]  The volume fractions of the species making up the lumped species in the order listed by {\ct SPEC\_ID}.  FDS will normalize the values to 1.
Specify only one of {\ct MASS\_FRACTION} or {\ct VOLUME\_FRACTION}.
\end{description}

\noindent Any FDS input that requires a {\ct SPEC\_ID} can also use the {\ct ID} of an {\ct SMIX}.

\subsection{Background Species}

If the simulation does not involve the simple chemistry model -- either because no combustion is
desired or if a finite rate reaction(s) is being specified (see Section~\ref{info:finite}) -- you can
specify that the background gas species be something other than air. For a gas mixture comprised of
$n$ species, FDS only solves transport equations for $n-1$ because it also solves an equation for
total mass conservation. To set the properties of the background species, use the
{\ct SPEC} or {\ct SMIX} line with {\ct BACKGROUND=.TRUE.} specified.




\chapter{Combustion}

\label{chap:combustion}
\label{info:REAC}

A common source of confusion in FDS is the distinction between gas phase {\em combustion} and solid phase {\em pyrolysis}. The former
refers to the reaction of fuel vapor and oxygen; the latter the generation of fuel vapor at a solid or liquid surface. Whereas there
can be many types of combustibles in an FDS fire simulation, in the simple chemistry, mixing-controlled combustion model there can only be one gaseous fuel. The reason is cost.
It is expensive to
solve transport equations for multiple gaseous fuels. Consequently, the burning rates of solids and liquids are automatically adjusted by
FDS to account for the difference in the heats of combustion of the various combustibles. In effect, you specify a single gas phase
reaction as a surrogate for all the potential fuel sources.

Combustion can be modeled in two ways. By default, the reaction of fuel and oxygen is infinitely fast and controlled only by mixing, hence
the label {\em mixing-controlled}. The alternative is that the reaction is {\em finite-rate}. The latter approach usually requires very fine grid resolution is not
practical for large-scale fire applications. This chapter describes both methods, with an emphasis on the more
commonly used mixing-controlled model. The {\ct REAC} namelist group contains the parameters for both modes of combustion.


\section{Mixing-Controlled Combustion}


This approach to combustion considers a single fuel species that is composed primarily of C,H,O, and N that reacts with
oxygen in one or more mixing-controlled steps to form H$_2$O, CO$_2$, soot, and CO.
For the default simple chemistry model, only a single {\ct REAC} line is needed.

\begin{warning}
\noindent
Note that starting with FDS~version 6,
you {\em must} specify a {\ct REAC} line to model a fire.
You are responsible for defining the basic fuel chemistry and the post-combustion yields of CO and soot.
\end{warning}

\subsection{Simple Chemistry Inputs}
\label{info:simple_chemistry}

For the simple chemistry model, each reaction is assumed to be of the form:
\be \mathrm{C_xH_yO_zN_v + \nu_{O_2} \; O_2 \rightarrow
    \nu_{CO_2} \; CO_2 + \nu_{H_2O} \; H_2O +
    \nu_{CO}   \; CO   + \nu_s \; Soot + \nu_{N_2} \; N_2} \ee
You need only specify the chemical formula of the fuel along with
the yields of CO and soot, and the volume fraction of hydrogen in the soot, $X_\Hy$.
FDS will use that information internally to determine the amount of combustion products that are formed:
\begin{eqnarray*}
\nu_{\OTWO}    &=& \nu_{\COTWO} + \frac{\nu_{\CO}}{2} + \frac{\nu_{\HTWOO}}{2} - \frac{\hbox{z}}{2}   \\
\nu_{\COTWO}   &=& \hbox{x} - \nu_{\CO} - (1-X_\Hy) \, \nu_s \\
\nu_{\HTWOO}   &=& \frac{\hbox{y}}{2} - \frac{X_\Hy}{2} \, \nu_s \\
\nu_{\CO}      &=& \frac{W_f}{W_{\CO}} \, y_{\CO}  \\
\nu_s          &=& \frac{W_f}{W_s} \, y_s  \\
\nu_{\NTWO}    &=& \frac{\hbox{v}}{2}  \\
W_s            &=& X_\Hy \, W_\Hy + (1-X_\Hy) \, W_\C
\end{eqnarray*}

\noindent The following parameters may be prescribed on the {\ct REAC} line when using the simple chemistry model.
Note that the various {\ct YIELD}s are for well-ventilated, post-flame conditions. There are options to
predict various species yields in under-ventilated fire scenarios, but these special models still require
the post-flame yields for CO, soot and any other species listed below.
\begin{description}
\item[{\ct FUEL}] (Required) A character string that identifies fuel species for the reaction. When using simple chemistry, specifying {\ct FUEL} will
cause FDS to use the built-in thermophysical properties for that species when computing quantities such as specific heat or viscosity.
This parameter is independent of the inputs for the fuel chemistry, i.e. {\ct C, H, O, N}. Table~\ref{tab:gasspecies} provides a listing of the available species.
If the {\ct FUEL} is in the table, then FDS will use the built-in formula to obtain the values of C,H,O, and N.
By default, FDS uses the gas thermophysical properties of {\ct ETHYLENE} for the fuel.
\item[{\ct FORMULA}] A character string that identities the chemical formula of the fuel species for the reaction.
This input only has meaning when simple chemistry is being used and the formula can only contain C, H, O, or N.
Specifying a formula means the individual inputs of C, H, O, and N do not need to be specified. See ~\ref{gas_species_props} for a description on how to input a {\ct FORMULA}.
\item[{\ct ID}] A character string that identifies the reaction. Normally, this label is not used by FDS, but it is useful to
label the {\ct REAC} line if more than one reactions are specified.
\item[{\ct C, H, O, N}] The fuel chemical formula. All numbers are positive.  One of either C or H must be specified.
This input is not needed if {\ct FORMULA} is specified or if the {\ct FUEL} is in Table~\ref{tab:gasspecies}.
\item[{\ct Y\_O2\_INFTY}] Ambient mass fraction of oxygen (Default 0.232428)
\item[{\ct Y\_CO2\_INFTY}] Ambient mass fraction of carbon dioxide (Default 0.0058)
\item[{\ct HUMIDITY}] Relative humidity of the background air species, in units of \%. (Default 40~\%).
\item[{\ct CO\_YIELD}] The fraction of fuel mass converted into carbon monoxide, $y_{\CO}$. Note that this parameter is only appropriate when the
simple chemistry model is applied. (Default 0.)
\item[{\ct SOOT\_YIELD}] The fraction of fuel mass converted into smoke particulate, $y_s$.
Note that this parameter is only appropriate when the simple chemistry model is applied.  (Default 0.)
\item[{\ct SOOT\_H\_FRACTION}] The fraction of the atoms in the soot that are hydrogen.
For all other types of {\ct REAC} inputs the species {\ct SOOT} is assumed to be pure carbon unless a {\ct FORMULA} is provided.
Note that this parameter is only appropriate when the simple chemistry model is applied.
(Default 0.1 - equivalent to the input {\ct FORMULA='C0.9H0.1'} for other {\ct REAC} types)
\end{description}

\noindent
A few sample {\ct REAC} lines are given here.

\footnotesize
\begin{verbatim}
&REAC FUEL = 'METHANE' /
\end{verbatim}
\normalsize
\noindent Here, there is no need for a {\ct FORMULA} or atom count because the {\ct FUEL} is listed in Table~\ref{tab:gasspecies}. It is also assumed that the soot and CO
yields are zero.

\footnotesize
\begin{verbatim}
&REAC FUEL               = 'PROPANE'
      SOOT_YIELD         = 0.01
      CO_YIELD           = 0.02
      HEAT_OF_COMBUSTION = 46460. /
\end{verbatim}
\normalsize
\noindent Here, the {\ct FORMULA} is known, but the product yields are not. The heat of combustion is specified explicitly rather than calculated. See
Section~\ref{info:heat_of_combustion} for more details on the heat of combustion.

\footnotesize
\begin{verbatim}
&REAC FUEL               = 'MY FUEL'
      SOOT_YIELD         = 0.05
      FORMULA            = 'C3H8O3N4'
      HEAT_OF_COMBUSTION = 46124. /
\end{verbatim}
\normalsize
\noindent Here, nothing is known or assumed.




\subsection{Heat of Combustion}
\label{info:heat_of_combustion}

The {\ct HEAT\_OF\_COMBUSTION} (kJ/kg) is the amount of
energy released per unit mass of fuel consumed. Note that if the heat of combustion is not
specified, it is assumed to be
\be \Delta H \approx \frac{\nu_{\OTWO} \; W_{\OTWO} } { W_{f} } \; \; \hbox{\ct EPUMO2}  \quad \quad \hbox{kJ/kg}  \label{EPUMO2} \ee
The quantity {\ct EPUMO2} (kJ/kg) is the amount of energy released per unit mass of oxygen consumed.
Its default is 13,100~kJ/kg.  Note that if both {\ct EPUMO2} and {\ct HEAT\_OF\_COMBUSTION} are
specified that FDS will ignore the value for {\ct EPUMO2}.

If heats of reaction have been specified on the
{\ct MATL} lines and
the heats of combustion of the materials differ from that specified by
the governing gas phase reaction, then add a
{\ct HEAT\_OF\_COMBUSTION} (kJ/kg) to the {\ct MATL} line.
With the simple chemistry combustion
model, it is assumed that there is only one fuel. However, in a realistic
fire scenario, there may be many fuel gases generated by the various
burning objects in the building. Specify
the stoichiometry of the predominant reaction via the {\ct REAC}
namelist group. If the stoichiometry of the burning material
differs from the global reaction, the {\ct HEAT\_OF\_COMBUSTION} is
used to ensure that an equivalent amount of fuel is injected into the
flow domain from the burning object.

The heat of combustion can be determined in a couple of ways.
One approach is to take the difference in the heats of formation for the products (assuming complete combustion) and the reactants.
This is typically how values are tabulated for pure fuels (e.g. one species) in handbooks.
This ideal heat of combustion does not account for the  {\ct SOOT\_YIELD} or  {\ct CO\_YIELD} that occurs in a real fire.
Carbon and hydrogen that go to soot and CO rather than CO$_2$ and H$_2$O result in a lower effective heat of combustion.
Setting {\ct IDEAL=.TRUE.} will reduce the {\ct HEAT\_OF\_COMBUSTION} based upon the inputs for {\ct SOOT\_YIELD} and {\ct CO\_YIELD}.
If {\ct EPUMO2} is specified instead of {\ct HEAT\_OF\_COMBUSTION}, then the {\ct EPUMO2} will not be changed.
The second approach to determining the heat of combustion is to burn a known mass of the material in a calorimeter and divide the heat release
rate by the mass loss rate (known as the effective heat of combustion).  In this approach, represented by {\ct IDEAL=.FALSE.},
the measured value of the heat release rate includes the effects of any CO or soot that is produced and no adjustment is needed.  The default value is {\ct IDEAL=.FALSE.}

\subsection{Special Topic: Turbulent Combustion}

\label{info:turbulent_combustion}

Unless you are performing a Direct Numerical Simulation (DNS), the reaction rate of fuel and oxygen is not based on the diffusion of
fuel and oxygen at a well-resolved flame sheet. Instead, semi-empirical rules are invoked by FDS to determine the rate of mixing of fuel and oxygen within
a given mesh cell at a given time step. This section provides a brief explanation of these rules and the parameters that control them.

In an LES simulation, the consumption rate of gaseous fuel is given by the expression:
\be \dm_f''' = -\rho \min \left( Y_\F , \frac{Y_\OTWO}{s}, \beta \frac{Y_{\hbox{\tiny P}}}{1+s} \right) \; \left( 1 - e^{-\dt/\tau} \right)   \quad ; \quad
   s=\frac{W_\F}{\nu_{\OTWO} W_{\OTWO} }  \ee
Here, $\tau$ is a mixing time scale and $\beta$ is an empirical parameter. You can change the value of $\beta$ by specifying {\ct BETA\_EDC}. Its default value
is 2. There is a minimum value of $Y_{\hbox{\tiny P}}$ required to allow for a reaction to occur before any products have accumulated. It is specified with
{\ct Y\_P\_MIN\_EDC}, and its default value is 0.01.




\subsection{Special Topic: Flame Extinction}

\label{info:extinction}

Modeling suppression of a fire due to the introduction of a suppression
agent like CO$_2$ or water mist, or due to the exhaustion of oxygen
within a compartment is challenging because
the relevant physical mechanisms occur at length scales smaller than a
single mesh cell. Flames are extinguished due to lowered
temperatures and dilution of the oxygen supply. A simple
suppression algorithm has been implemented in FDS that attempts to
gauge whether or not combustion is viable. The Technical Reference Guide~\cite{FDS_Math_Guide}
contains more details about how the mechanism works. The only
parameter you can control is the {\ct CRITICAL\_FLAME\_TEMPERATURE} set on the {\ct REAC} line.
The default value is 1427~$^\circ$C.
To eliminate any gas phase suppression, set  {\ct CRITICAL\_FLAME\_TEMPERATURE} to -273.15 ~$^\circ$C, or turn off suppression completely
by setting {\ct SUPPRESSION=.FALSE.} on the {\ct REAC} line. This latter approach saves on computing time because it
prevents FDS from entering the suppression algorithm altogether.

If the mixing-controlled combustion model is used and flame extinction occurs, the unburned fuel gas will re-ignite when it mixes with oxygen somewhere
else in the domain. To prevent this from happening, you can set the {\ct AUTO\_IGNITION\_TEMPERATURE} ($^\circ$C) below which combustion will not occur.
Note that if this parameter is used, then some form of heat/ignition source must be present in order for combustion to begin.

\subsubsection{Example Case: door\_crack}

This example uses a compartment surrounded by the ambient that contains a fan in one wall and a closed door with leakage at its bottom in the opposite wall.
A small (160~kW) fire is added to the compartment. Initially, the pressure rises due to the heat from the fire and the fan blowing air into the compartment.
Eventually the the pressure rise inside the compartment exceeds the maximum pressure of the fan, at which point the compartment begins to exhaust from both the fan and the leakage.
Pressure will continue to rise due to the fire until the pressure relief due to leakage and back flow through the fan equals the pressure increase from the fire.
As heat is lost to the walls, and as pressure is relieved, the pressure rise slows, and eventually the pressure decreases which allows the fan to push air back into the compartment.
Eventually, the fire at the burner is self-extinguished due to lack of oxygen; however, the fuel-rich gases in the compartment will continue to burn where the
fan is blowing fresh air into the compartment and at the leak where fuel rich gases exit the compartment.

\begin{figure}[ht]
\noindent
\begin{tabular*}{\textwidth}{l@{\extracolsep{\fill}}r}
\includegraphics[width=3.2in]{SCRIPT_FIGURES/door_crack_Pressure} &
\includegraphics[width=3.2in]{SCRIPT_FIGURES/door_crack_HRR}
\end{tabular*}
\caption[Output of {\bf door\_crack} test case.]{Output of {\bf door\_crack} test case.}
\end{figure}

While this case has a number of interesting physical effects, and it {\em verifies} several features of FDS, it is important to note that although
there is smoke seen flowing backwards out the fan duct, in reality there would have been much more. Most conventionally built structures will not withstand over-pressures
of 0.25~atm without some sort of relief. The fan and the crack under the door obey simple formulae based on pressure differences, but these assumptions have limits.
Also, it is likely that the fire in this scenario would indeed extinguish itself as the oxygen volume fraction decreased below about 15~\%. {\bf But,} its re-ignition at the door crack
and fan grill would depend on the presence of a spark or hot spot of some sort. FDS continues to flow fuel into the compartment past the point of local extinction, but the compartment
cools. The default combustion algorithm in FDS assumes that in every grid cell there is a ``virtual spark plug'' that initiates combustion if fuel and oxygen are
present.


\subsection{More Complicated Stoichiometry}


The ``simple chemistry''  inputs described above can only be used when there is a single mixing-controlled reaction and the fuel molecule contains only C, O, H, and N.
For any other situation, you must specify the reaction stoichiometry in greater detail. This means that you must explicitly specify the gas species, or species mixtures, along with
the stoichiometry of the reaction. The easiest way to explain this is by way of example. Consider a single reaction involving methane. As seen above, the {\ct REAC} line could be
specified simply by:

\footnotesize
\begin{verbatim}
&REAC FUEL = 'METHANE' /
\end{verbatim} \normalsize

\noindent But, you could also explicitly list the individual gas species (and track them in the calculation as well):

\footnotesize
\begin{verbatim}
&SPEC ID='NITROGEN', BACKGROUND=.TRUE./
&SPEC ID='OXYGEN', MASS_FRACTION_0 = 0.23121 /
&SPEC ID='WATER VAPOR', MASS_FRACTION_0 = 0.00577 /
&SPEC ID='CARBON DIOXIDE', MASS_FRACTION_0 = 0.00524 /
&SPEC_ID='METHANE'/
&REAC FUEL='METHANE', SMIX_ID='METHANE','OXYGEN','CARBON DIOXIDE','WATER VAPOR',
      NU=-1,-2,1,2, HEAT_OF_COMBUSTION=50000. /
\end{verbatim} \normalsize

\noindent If you do not want to waste CPU time tracking all those gas species, you can lump them together as follows:

\footnotesize
\begin{verbatim}
&SPEC ID='NITROGEN',       SMIX_COMPONENT_ONLY=.TRUE. /
&SPEC ID='OXYGEN',         SMIX_COMPONENT_ONLY=.TRUE. /
&SPEC ID='WATER VAPOR',    SMIX_COMPONENT_ONLY=.TRUE. /
&SPEC ID='CARBON DIOXIDE', SMIX_COMPONENT_ONLY=.TRUE. /
&SPEC ID='METHANE' /
&SMIX ID='AIR', SPEC_ID='NITROGEN','OXYGEN','CARBON DIOXIDE','WATER VAPOR',
      MASS_FRACTION=0.75778,0.23121,0.00577,0.00524, BACKGROUND=.TRUE. /
&SMIX ID='PRODUCTS', SPEC_ID='NITROGEN','CARBON DIOXIDE','WATER VAPOR',
      MASS_FRACTION=0.71637,0.15572,0.12791 /
&REAC FUEL='METHANE', SPEC_ID='METHANE','AIR','PRODUCTS',
      NU=-1,-9.60825,10.60825, HEAT_OF_COMBUSTION=50000. /
\end{verbatim} \normalsize

\noindent
Note the stoichiometry for the last case.  It is based upon moles of the lumped species and not moles of the primitive species.
Since the lumped species for {\ct AIR} is 21 \% oxygen, taking 21 \% of the 9.60825 moles of {\ct AIR} results in 2 moles of oxygen.

Obviously, for this example, the first {\ct REAC} line above is preferable. However, there are many situations where you cannot use the simple chemistry model and
must resort to either of the alternatives. For a mixing-controlled reaction(s), the lumped species approach is preferable. For a finite-rate reaction(s), the primitive
species approach is preferable because the reaction rates are typically tabulated in terms of individual species, not mixtures.


\subsubsection{Example: A Single-Step, Mixing-Controlled Reaction Involving a Complex Fuel Molecule}

It is often the case that fires involve fuels that do not just consist of C, H, N, and O. For example, chlorine is commonly found in building and household materials, and because
of its propensity to form the acid gas HCl, we may want to account for it in the basic reaction scheme. Suppose the predominant fuel in the fire is polyvinyl chloride (PVC). Regardless
of its detailed polymeric structure, it can be regarded as C$_2$H$_3$Cl for the purpose of modeling. To use PVC as the fuel molecule on the {\ct REAC} line, and assuming
that all of the Cl in the fuel is converted into HCl, do the following:
Define the governing chemical reaction in terms of the primitive (or individual) species in the reaction. As a user, you need to determine the appropriate soot and CO yields for the specified fuel. In this example, the SFPE Handbook \cite{SFPE:Tewarson} was used to find soot and CO yields for PVC which are 0.172 and 0.063 respectively. For simple chemistry, the stoichiometric coefficient of species $i$ can be found from its yield following:
\begin{equation}\label{eq:stoic_yield}
\nu_{i}=\frac{W_{f}}{W_{i}}y_{i}
\end{equation}
Since it is assumed that all of the Cl goes to HCL, the remainder of the stoichiometric coefficients come from an atom balance. An equation can now be written to include the appropriate numerical values for the stoichiometric coefficients.
\begin{eqnarray}\label{eq:PVC_reac2}
1\,\underbrace{\mathrm{(C_2H_3Cl)}}_\text{Fuel} + 1\,\underbrace{\mathrm{(1.53 \, O_2+1.53 \,(^{.79}/_{.21}) \, N_2})}_\text{Oxidizer} \rightarrow \\
\nonumber 1\,\underbrace{\mathrm{(HCl +  H_2O + 0.14\, CO + 0.96\, CO_2 + 0.90\, C + 1.53\,(^{.79}/_{.21}) \, N_2)}}_\text{Products}
\end{eqnarray}
The choice of fuel in this example, PVC, is not defined in Table \ref{tab:gasspecies}, therefore its properties must be defined on a {\ct SPEC} line. In this example, we use the species' chemical formula. The example will also use the lumped species formulation to minimize the number of scalar transport equations that need to be solved. Therefore, each species that does not transport by itself will have an {\ct SMIX\_COMPONENT\_ONLY = .TRUE.} designation.
\footnotesize
\begin{verbatim}
&SPEC ID = 'PVC', FORMULA = 'C2H3Cl' /
&SPEC ID = 'OXYGEN',            SMIX_COMPONENT_ONLY = .TRUE. /
&SPEC ID = 'NITROGEN',          SMIX_COMPONENT_ONLY = .TRUE. /
&SPEC ID = 'HYDROGEN CHLORIDE', SMIX_COMPONENT_ONLY = .TRUE. /
&SPEC ID = 'WATER VAPOR',       SMIX_COMPONENT_ONLY = .TRUE. /
&SPEC ID = 'CARBON MONOXIDE',   SMIX_COMPONENT_ONLY = .TRUE. /
&SPEC ID = 'CARBON DIOXIDE',    SMIX_COMPONENT_ONLY = .TRUE. /
&SPEC ID = 'SOOT',              SMIX_COMPONENT_ONLY = .TRUE. /
\end{verbatim} \normalsize

For the oxidizer and products, which are both composed of multiple primitive species, {\ct SMIX} lines are needed to define the composition of the lumped species. As the user, you can define the {\ct SMIX} by either the {\ct MASS\_FRACTIONS} of the component gases or the {\ct VOLUME\_FRACTIONS}. For this case, volume fractions will be used. If Equation \ref{eq:PVC_reac2} is properly balanced, you can directly use the stoichiometric coefficients of the primitive species to define the lumped species.
\footnotesize
\begin{verbatim}
&SMIX ID = 'AIR', SPEC_ID = 'OXYGEN','NITROGEN', VOLUME_FRACTION =1.53,5.76,
           BACKGROUND=.TRUE. /
&SMIX ID = 'PRODUCTS', SPEC_ID ='HYDROGEN CHLORIDE','WATER VAPOR','CARBON MONOXIDE',
           'CARBON DIOXIDE','SOOT','NITROGEN',
           VOLUME_FRACTION = 1.0,1.0,0.14,0.96,0.90,5.76 /
\end{verbatim} \normalsize
Note: the order of which the {\ct SPEC\_ID}s are defined must be the same order as which you defined your volume fractions or mass fractions. To set the initial concentration of fuel, an {\ct INIT} line is used:
\footnotesize
\begin{verbatim}
&INIT MASS_FRACTION(1)=0.229,SPEC_ID(1)='PVC' /
\end{verbatim} \normalsize

In this mixing-controlled example, the user is responsible for defining the fuel, heat of combustion of that fuel, species participating the reaction, and the stoichiometric coefficients that describe the reaction. The heat of combustion for PVC was found from the SFPE Handbook \cite{SFPE:Tewarson}. In the lumped species approach, the stoichiometric coefficients for the {\ct SMIX}s are the coefficients of the lumped species themselves.
\footnotesize
\begin{verbatim}
&REAC FUEL = 'PVC', HEAT_OF_COMBUSTION=16400,
      SMIX_ID = 'PVC','AIR','PRODUCTS', NU=-1,-1,1
      FIXED_MIX_TIME=0.1,
      ODE_SOLVER= 'SINGLE EXACT' /
\end{verbatim} \normalsize
Note: The sign on NU corresponds to whether that species is consumed (-) or produced (+). The results, Figure \ref{pvc_combustion}, from this example problem are compared to expected results with both cases using a fixed turbulent mixing time of 0.1s.


\begin{figure}[ht]
\centering \includegraphics[width=3.2in]{SCRIPT_FIGURES/PVC_Combustion_Spec}
\caption{Product species mass fractions for model PVC example.}
\label{pvc_combustion}
\end{figure}

\subsubsection{Example: A Two-Step, Reaction Involving the Formation of CO}
For a more complicated example, consider Equation \ref{eq:2step_methane_rev}, which is a simplified two-step methane oxidation reaction developed by Westbrook and Dryer \cite{Westbrook:1}.

\begin{eqnarray}\label{eq:2step_methane_rev}
\mathrm{CH_4+1.5 \, O_2}&\rightarrow&  \mathrm{CO+2 \, H_2O} \\
\nonumber \mathrm{CO + 0.5 \, O_2} &\leftrightharpoons& \mathrm{CO_2}
\end{eqnarray}
Typically air is the oxidizer for fires, not pure oxygen. In this case, if we use all primitive species and select nitrogen as the background species, Equation \ref{eq:2step_methane_rev} can be used without modification. Each of the species in the reactions, plus the background species must be defined on the {\ct SPEC} line.
\footnotesize
\begin{verbatim}
&SPEC ID='NITROGEN',        BACKGROUND=.TRUE./
&SPEC ID='METHANE',         MASS_FRACTION_0 = 0.0 /
&SPEC ID='OXYGEN',          MASS_FRACTION_0 = 0.23 /
&SPEC ID='CARBON MONOXIDE', MASS_FRACTION_0 = 0.0 /
&SPEC ID='WATER VAPOR',     MASS_FRACTION_0 = 0.0 /
&SPEC ID='CARBON DIOXIDE',  MASS_FRACTION_0 = 0.0 /
\end{verbatim} \normalsize
The ambient gas in this example is defined as air by setting the initial mass fraction of oxygen to 0.23 with the remainder being the background, nitrogen. To define the reactions from Equation \ref{eq:2step_methane_rev}, we must have a {\ct REAC} line for each reaction, including the reversible reaction.
\footnotesize
\begin{verbatim}
&REAC ID = 'FWD_METHANE'
      FUEL='METHANE'
      SMIX_ID='METHANE','OXYGEN','CARBON MONOXIDE','WATER VAPOR'
      NU=-1,-1.5,1,2
      HEAT_OF_COMBUSTION=32370.7
      ODE_SOLVER= 'RK2 RICHARDSON' /

&REAC ID = 'FWD_CO'
      FUEL = 'CARBON MONOXIDE'
      SMIX_ID='CARBON MONOXIDE','OXYGEN','CARBON DIOXIDE'
      NU= -1,-0.5,1
      HEAT_OF_COMBUSTION=10102.6
      ODE_SOLVER= 'RK2 RICHARDSON' /

&REAC ID = 'REV_CO2'
      FUEL = 'CARBON DIOXIDE'
      SMIX_ID= 'CARBON DIOXIDE','OXYGEN','CARBON MONOXIDE'
      NU= -1,0.5,1
      HEAT_OF_COMBUSTION=0
      FWD_ID = 'FWD_CO'
      REVERSIBLE=.TRUE.
      ODE_SOLVER= 'RK2 RICHARDSON' /
\end{verbatim} \normalsize
When using primitive species, the primitive species are the {\ct SMIXs} therefore the {\ct SMIX\_IDs} correspond directly to the the {\ct SPEC} lines. The stoichiometric coefficients (NU) can be taken directly from reactions (see Equation \ref{eq:2step_methane_rev} coefficients). A heat of combustion must be specified for each reaction. The heat of combustion is found by using the enthalpy of formation of each species: (http://kinetics.nist.gov/janaf/)

\begin{eqnarray}
\overline{\Delta h_c} &=& \overline{h}_{products} - \overline{h}_{reactants} \\
\nonumber &=& (\overline{h_f^{\circ}}+\overline{\Delta h})_{products} - (\overline{h_f^{\circ}}+\overline{\Delta h})_{reactants}
\end{eqnarray}
If the reference temperature is set as the ambient temperature, $\overline{\Delta h}$ drops out of the equation. As an example, the heat of combustion for the {\ct FWD\_METHANE} reaction can be calculated by:

\begin{eqnarray}
\overline{\Delta h_c} &=& \nu_{CO}\overline{h_f^{\circ}}_{CO}+\nu_{H_2O}\overline{h_f^{\circ}}_{H_2O} - \nu_{CH_4}\overline{h_f^{\circ}}_{CH_4}-\nu_{O_2}\overline{h_f^{\circ}}_{O_2} \\
\nonumber &=& (-110.527 \,[\mathrm{kJ/mol}])+2\,(-241.826 \,[\mathrm{kJ/mol}])-(-74.873 \,[\mathrm{kJ/mol}])-(0.0 \,[\mathrm{kJ/mol}]) \\
\nonumber &=& -519.306 \,[\mathrm{kJ/mol}]
\end{eqnarray}
To comply with input file needs, we change the units to [{kJ}/{kg}] by dividing by the molecular weight of the fuel. The heat of combustion becomes 32,370.7 [{kJ}/{kg}].

Note: In the third (reversible) reaction, the {\ct HEAT\_OF\_COMBUSTION} is set to 0.0. The actual value is not 0.0, but is set to 0.0 for purposes of this example. Below {\ct HEAT\_OF\_COMBUSTION}, you will notice two inputs unique to reversible reactions: {\ct FWD\_ID} and {\ct REVERSIBLE=.TRUE.}. These parameters tell FDS that the reaction is reversible and what its forward counterpart is. FDS the calculates the heat of combustion for the reverse reaction (determined from the product of the ratio of the molecular weights of the fuels and the heat of combustion of the forward reaction), applies the appropriate sign, and over writes the value from the input file. As a user, you can also directly specify the heat of combustion on the reversible line and the third {\ct REAC} line will instead look like this:

\footnotesize
\begin{verbatim}
&REAC ID = 'REV_CO2'
      FUEL = 'CARBON DIOXIDE'
      SMIX_ID= 'CARBON DIOXIDE','OXYGEN','CARBON MONOXIDE'
      NU= -1,0.5,1
      HEAT_OF_COMBUSTION=-6429.85802
      ODE_SOLVER= 'RK2 RICHARDSON' /
\end{verbatim} \normalsize

\newpage


\section{Finite Rate Combustion}
\label{info:finite}

Usually, FDS uses a mixing-controlled combustion model. However, FDS can also employ finite-rate reactions using an Arrhenius model. This section describes how to do this.

\begin{enumerate}
\item It is strongly recommended that finite-rate reactions be invoked only
when FDS is running in DNS mode. Set {\ct DNS=.TRUE.} on the {\ct MISC} line.
You may use the finite-rate reaction model in an
LES calculation, but because the temperature in a large scale calculation
is smeared out over a mesh cell, some of the reaction parameters may need
to be modified to account for the lower temperatures.
\item The background species, if unspecified on a {\ct SPEC} or {\ct SMIX} line, is normally set to be {\ct 'AIR'}.
\item Read Sections~\ref{info:SPEC} and \ref{info:SMIX} for a description of the boundary
conditions for the gas species.
\item The {\ct REAC} namelist group is used to designate the fuel and the reaction rate
parameters.  For a finite-rate reaction you can specify multiple {\ct REAC} lines.  Note that FDS will evaluate the reactions simultaneously.
\end{enumerate}

\noindent The inputs to use the finite-rate model are given below:

\begin{description}
\item[{\ct FUEL}] Character string indicating which of the listed gas species is the fuel.
\item[{\ct A}] Pre-exponential factor in units of cm$^3$/mole/s.
\item[{\ct E}] Activation energy in units of kJ/kmol.
\item[{\ct EQUATION}] (Optional) Character string defining the reaction stoichiometry.  Can be used instead of specifying {\ct SMIX\_ID} and {\ct NU}.  See~\ref{info:EQUATION}.
\item[{\ct NU}] Array containing the stoichiometric coefficients where negative values indicate reactants and positive values indicate products.
\item[{\ct N\_S}] Array containing the exponents for the finite rate equation for each species.
\item[{\ct N\_T}] The temperature exponent for the rate (Default is 0 or no temperature dependence).
\item[{\ct SPEC\_ID}] Array containing the names of the species in the rate equation for the reaction. Note that it is possible that a given {\ct SPEC} can
contribute to the rate but not be a reactant or product. In other words,
the rate equation can be dependent on a species that does not participate directly in the reaction. These entries correspond to the inputs on {\ct N\_S}.
\item[{\ct HEAT\_OF\_COMBUSTION}] The effective heat of combustion of the {\ct FUEL} in chemical reaction in units of kJ/kg. (No default)
\end{description}



\subsection{Special Topic: Mixed-Mode Combustion}
\label{info:mixedmode}

In a typical simulation, flame temperatures are not likely to be resolved well enough to allow for a finite rate reaction to be computed.
However, the temperatures in a layer environment are likely to support a finite rate reaction for slow reactions ({\em e.g.} carbon monoxide oxidation in a hot layer).
A mixed-mode combustion model can be used for this situation.  To enable this model, specify the finite-rate reaction inputs described in the previous section
as well as the input parameter {\ct THRESHOLD\_TEMPERATURE}.  During a simulation, if there is heat release from other reactions,
then a mixed-mode reaction will be evaluated as a mixing-controlled reaction.  If there is no heat release from other reactions and the local
temperature exceeds the {\ct THRESHOLD\_TEMPERATURE}, then the mixed-mode reaction will be evaluated as a finite-rate reaction.



\newpage

\section{Other Reaction Parameters}


\subsection{Special Topic: Using the {\ct EQUATION} input parameter}
\label{info:EQUATION}

The input parameter {\ct EQUATION} allow the specification of the chemical reaction by specifying a text equation.  The rules for the use of this input are:

\begin{itemize}
\item Species can be given as either their chemical formula (which must match the formula defined on {\ct SPEC} or by the {\ct ID} of the species.  Only tracked species can be listed.
\item The stoichiometry is given before each species and is separated by a *.  Real numbers are allowed but not exponential notation (i.e. {\ct 201.1} but not {\ct 2.011E2}).
\item The reactants and products are separated by an =.
\end{itemize}

For example if the reaction defines the complete combustion of methane using primitive species the following would be equivalent:

\footnotesize
\begin{verbatim}
&REAC FUEL='METHANE', EQUATION ='METHANE+2*OXYGEN=CARBON DIOXIDE+2*WATER VAPOR',
      HEAT_OF_COMBUSTION=50000. /

&REAC FUEL='METHANE', EQUATION ='CH4+2*O2=CO2+2*H2O',
      HEAT_OF_COMBUSTION=50000. /

&REAC FUEL='METHANE', EQUATION ='METHANE+2*O2=CO2+2*H2O',
      HEAT_OF_COMBUSTION=50000. /
\end{verbatim} \normalsize


\subsection{Special Topic: Reaction Rate Limiters}
\label{info:REAC_Limiters}

At certain critical points in a calculation, like the moment of ignition, the local reaction rate can be very large due to limitations in the models, long time
steps, or both. To prevent fictitiously high values of the reaction rate that can lead to numerical instabilities, a limiting value of the heat release rate
per unit volume is used:
\be \dq'''_{\hbox{\tiny max}} = \frac{ \hbox{\ct HRRPUA\_SHEET} }{\dx} + \hbox{\ct HRRPUV\_AVERAGE} \ee
where {\ct HRRPUA\_SHEET} is given in units of kW/m$^2$ and {\ct HRRPUV\_AVERAGE} is given in units of kW/m$^3$.


\subsection{Special Topic: Diagnostic Parameters}
\label{info:REAC_Diagnostics}

\begin{description}
\item[{\ct CHECK\_ATOM\_BALANCE}] If chemical formulas are provided for all species that participate in a reaction, then FDS will
check the stoichiometry to ensure that atoms are conserved.  Setting this flag to {\ct .FALSE.} will bypass this check.  (Default {\ct .TRUE.})
\item{\ct REAC\_ATOM\_ERROR} Error tolerance in units of atoms for the reaction stoichiometry check.  (Default 1.E-5)
\item{\ct REAC\_MASS\_ERROR} Relative error tolerance computed as (mass of products - mass of reactants)/(mass of products)
for the reaction stoichiometry mass balance check.  (Default 1.E-4)
\end{description}





\chapter{Radiation}

For most FDS simulations, thermal radiation transport is computed by default and you need not set any
parameters to make this happen. However, there are situations where it is important to be aware of
issues related to the radiative transport solver.

\section{Radiation Parameters: The \texorpdfstring{{\tt RADI}}{RADI} Namelist Group}
\label{info:RADI}

{\ct RADI} is the namelist group that contains all of the parameters related to the radiation solver. There can be only one
{\ct RADI} line in the input file. It is possible to turn off the radiation transport
solver (saving roughly 20 \% in CPU time) by adding the statement
{\ct RADIATION=.FALSE.} to the {\ct RADI} line.  If burning
is taking place and radiation is turned off, then the total heat
release rate is reduced by the {\ct RADIATIVE\_FRACTION}, which is
also input on the {\ct RADI} line. This radiated energy completely
disappears from the calculation. For fire scenarios it is not recommended that you turn off the
radiation transport. This feature is used mainly for diagnostic purposes or when the changes in
temperature are relatively small.

\subsection{Radiative Fraction}

The most important radiation parameter is the fraction of energy released from the
fire as thermal radiation, commonly referred to as the {\em radiative fraction}. It is a function of both the flame temperature
and chemical composition, neither of which are reliably calculated in a large
scale fire calculation because the flame sheet is not well-resolved.
In calculations in which the mesh cells are on the order of a centimeter or
larger, the temperature near the flame surface cannot be relied upon when
computing the source term in the radiation transport equation, especially
because of the $T^4$ dependence.
As a practical alternative, the parameter {\ct RADIATIVE\_FRACTION} on the {\ct RADI} line allows you to specify explicitly the
fraction of the total combustion energy that is released in the form of thermal radiation.
Some of that energy may be reabsorbed elsewhere, yielding a net radiative
loss from the fire or compartment that is less than the {\ct RADIATIVE\_FRACTION}, depending mainly on the size of
the fire and the soot loading. If it is desired to use the radiation transport
equation as is, then {\ct RADIATIVE\_FRACTION} ought to be set to zero,
and the source term in the radiative transport equation is then based solely
on the gas temperature and the chemical composition. By default, the {\ct RADIATIVE\_FRACTION} is
0.35 for an LES calculation, and zero for DNS.


\subsection{Spatial and Temporal Resolution of the Radiation Transport Equation}

\label{info:RADI_Resolution}

There are several ways to improve the spatial and temporal accuracy of the Finite Volume
Method in solving the radiation transport equation (RTE), but these will
increase the computation time. You can increase the number
of angles from the default 100 with the integer parameter
{\ct NUMBER\_RADIATION\_ANGLES}. The frequency of calls to the radiation
solver can be changed from every 3 time steps with an integer called
{\ct TIME\_STEP\_INCREMENT}. The increment over which the angles are
updated can be reduced from 5 with the integer called {\ct ANGLE\_INCREMENT}.
If {\ct TIME\_STEP\_INCREMENT} and {\ct ANGLE\_INCREMENT} are
both set to 1, the radiation field is completely updated in a single
time step, but the cost of the calculation increases significantly. By default,
the radiation transport equation is fully updated every 15 time steps.

\subsection{Radiative Absorption and Scattering by Particles}

\label{info:RADI_Absorption}

The absorption and scattering of thermal radiation by Lagrangian particles is included in the radiation transport equation. The radiative properties of
the water and fuel particles (droplets) are determined automatically. For fuel, the properties of heptane are assumed. For other types of particles, the
radiative properties can be given by specifying the components of the material refractive index on the corresponding {\ct PART} line, using keywords
{\ct REAL\_REFRACTIVE\_INDEX} and {\ct COMPLEX\_REFRACTIVE\_INDEX}. Alternatively, wavelength dependent values of these two
quantities can be tabulated in a {\ct TABLE} and called using the {\ct RADIATIVE\_PROPERTY\_TABLE}. More details can be found in Section~\ref{radiative_part_props}.

Other parameters affecting the computations of particle-radiation interaction are listed here. {\ct RADTMP} is the assumed radiative source temperature.
It is used in the spectral weighting during the computation of the mean scattering and absorption cross sections. The default is 900~$^\circ$C.
{\ct NMIEANG} is the number of angles in the numerical integration of the Mie-phase function.
Increasing {\ct NMIEANG} improves the accuracy of the radiative properties of water droplets. The cost
of the better accuracy is seen in the initialization phase, not during the actual simulation. The default value for {\ct NMIEANG}
is 15.

The radiation properties of most common gases involved in combustion processes (water vapor, carbon dioxide, carbon monoxide, fuel) and
soot particles are automatically taken into account if the simulation involves combustion. In simulations with no combustion nor radiating species, it is
possible to use a constant absorption coefficient by specifying {\ct KAPPA0} on the {\ct RADI} line.


\subsection{Wide Band Model}

\label{info:RADI_Wide_Band}

The radiation solver has two modes of
operation -- a gray gas model (default) and a wide band model~\cite{FDS_Math_Guide}.
If the optional six band model is desired,
set {\ct WIDE\_BAND\_MODEL=.TRUE.} It is recommended that this option
only be used when the fuel is relatively non-sooting because it
adds significantly to the cost of the calculation. To add three
additional fuel bands, set {\ct CH4\_BANDS=.TRUE.}. See FDS Technical
Reference Guide for more details. Note also that when
{\ct WIDE\_BAND\_MODEL=.TRUE.}, the {\ct ABSORPTION\_COEFFICIENT}
output quantity becomes practically useless, because it then
corresponds to one individual band of the spectrum.

Note that by default FDS employs a gray gas model for the absorption coefficient, which are
tabulated in a look-up table using the routines found in RadCal. The effective absorption coefficient, a function
of gas composition and temperature, also requires an effective {\ct PATH\_LENGTH}. Its default value is
5 times the width of a single grid cell.







\clearpage

\chapter{Particles and Droplets}
\label{info:PART}

Lagrangian particles\footnote{Throughout this section, the terms ``droplets'' and ``particles'' are used interchangeably. From the point of view of
FDS, they are all Lagrangian particles; that is, point elements that are not bound by the structure of the underlying grid.} are used in FDS to represent
water or liquid fuel
droplets, flow tracers, and various other objects that are not defined or confined by the numerical mesh. Sometimes the
particles have mass, sometimes they do not. Some evaporate,
absorb radiation, {\em etc.}
{\ct PART} is the namelist group that is used to prescribe
parameters associated with Lagrangian particles.



\section{Basics}

\label{info:PART_Basics}

Properties of different types of
Lagrangian particles are designated via the {\ct PART} namelist group.
Once a particular type of particle or droplet has been described using
a {\ct PART} line, then the name of that particle or droplet type is invoked
elsewhere in the input file via the parameter {\ct PART\_ID}. There are no reserved {\ct PART\_ID}s -- all must be defined.
For example, an input file may have several {\ct PART} lines that include the
properties of different types of Lagrangian particles:

\footnotesize
\begin{verbatim}
&PART ID='my smoke',... /
&PART ID='my water',... /
\end{verbatim}
\normalsize
These Lagrangian particles can be introduced at a solid surface via the {\ct SURF} line
that defines the properties of the material, for example

\footnotesize
\begin{verbatim}
&SURF ...,PART_ID='my smoke' /
\end{verbatim}
\normalsize
or the {\ct PART\_ID} can be invoked from a {\ct PROP} line to change
the properties of the droplets ejected by a sprinkler or nozzle, for example

\footnotesize
\begin{verbatim}
&PROP ID='Acme 123', QUANTITY='SPRINKLER LINK TEMPERATURE', PART_ID='my water', ... /
\end{verbatim}
\normalsize



\clearpage

\section{Particle and Droplet Insertion}
\label{info:controlling_droplets}

There are three ways of introducing droplets or particles into a simulation. The first way is to define a sprinkler or
nozzle using a {\ct PROP} line that includes a {\ct PART\_ID} that specifies the droplet parameters. The second way is to
add a {\ct PART\_ID} to a {\ct SURF} line, in which case particles or droplets will be ejected from that surface. Note that
this only works if the surface has a normal velocity pointing into the flow domain. The third way to introduce particles or
droplets is via an {\ct INIT} line that defines a volume within the computational domain in which the particles/droplets are
to be introduced initially and/or periodically in time.


\subsection{Particles Introduced at a Solid Surface}
\label{info:particle_flux}

If the particles have mass and are introduced from a solid surface, specify {\ct PARTICLE\_MASS\_FLUX} on the {\ct SURF} line.
The number of particles inserted at each solid cell every
{\ct DT\_INSERT} seconds is specified by {\ct NPPC} on the {\ct SURF} line defining the solid surface. The default
value of {\ct DT\_INSERT} is 0.01~s and {\ct NPPC} is 1. As an example, the following set of input lines:

\footnotesize
\begin{verbatim}
&PART ID='particles', ... /
&SURF ID='SLOT', PART_ID='particles', VEL=-5., PARTICLE_MASS_FLUX=0.1 /
&OBST XB=-0.2,0.2,-0.2,0.2,4.0,4.4, SURF_IDS='INERT','SLOT','INERT' /
\end{verbatim} \normalsize

\noindent
creates an obstruction that ejects particles out of its sides at a rate
of 0.1~kg/m$^2$/s and a velocity of 5~m/s (the minus sign indicates the particles are ejected from the surface).
FDS will adjust the mass flux if the obstruction or vent dimensions are changed to conform to the numerical grid. The
{\ct ID}s have no meaning other than as identifiers. The surface on which particles are specified must have a non-zero normal velocity directed into the
computational domain. This happens automatically if the surface is burning, but must be specified
if it is not. There is a simple test case called {\bf particle\_flux.fds} that demonstrates how the above input lines can produce a stream of
particles from a block. The total mass flux from the block is the product of the {\ct PARTICLE\_MASS\_FLUX} times the total area of the sides of the block,
0.4~m $\times$ 0.4~m $\times$ 4. The expected accumulated mass of particles on the ground after 10~s is expected to be 0.64~kg, as shown in Fig.~\ref{particle_flux}.

\begin{figure}[ht]
\begin{center}
\includegraphics[height=2.2in]{SCRIPT_FIGURES/particle_flux}
\end{center}
\caption[Simple test of particle mass flux.]{Simple test case to demonstrate mass conservation of particles ejected from an obstruction.}
\label{particle_flux}
\end{figure}

Note also that you can independently control particles that emanate from a solid surface. For example, a device might control the
activation of a fan, but you can over-ride the device and control the particles separately. To do this, specify either
a device or controller via a {\ct DEVC\_ID} or {\ct CTRL\_ID} on the {\ct PART} line that defines the particles. For more
information on devices and controls, see Sections~\ref{info:basic_control}~and~\ref{info:CTRL}.



\subsection{Droplets Introduced at a Sprinkler or Nozzle}

\label{info:sprinkler_droplets}

A sprinkler or nozzle is added to the simulation using a {\ct PROP} line to describe the features of the device and a {\ct DEVC} line to position and orient the
device within the computational domain.
{\ct PARTICLES\_PER\_SECOND} is the  number of droplets inserted every
second per active sprinkler or nozzle (Default 5000). It is listed on the {\ct PROP} line that includes other properties of
the sprinkler or nozzle. Note that this parameter only affects sprinklers and nozzles.
Changing this parameter does {\em not} change the flow rate, but rather the number
of droplets used to represent the flow.

\begin{warning}
Note that {\ct PARTICLES\_PER\_SECOND} can be a very important parameter. In some simulations, it is a good idea to increase this number so that the
liquid mass is distributed more uniformly over the droplets. If this parameter is too small, it can lead to a non-physical evaporation pattern, sometimes even to the
point of causing a numerical instability. If you encounter a numerical instability shortly after the activation of a sprinkler or nozzle, consider increasing
{\ct PARTICLES\_PER\_SECOND} to produce a smoother evaporation pattern that is more realistic. Keep in mind that for a real sprinkler or nozzle, there are many more
droplets created per second than the number that can be simulated.
\end{warning}

\subsection{Particles or Droplets Introduced within a Volume}

\label{info:initial_droplets}


Sometimes it is convenient to introduce droplets or particles at the start of the simulation. For this purpose, use an {\ct INIT} line with the parameter
{\ct N\_PARTICLES} to indicate the number of particles within the computational domain at the start of the simulation.
Its default value is 0, meaning that initially there are no particles present. If non-zero, you may also specify {\ct MASS\_PER\_VOLUME} (kg/m$^3$) if the
particles have mass. Do not confuse this parameter with {\ct DENSITY}, explained in the next section.
For example, water has a {\ct DENSITY} of 1000~kg/m$^3$, whereas a liter of water broken up into droplets and spread over a cubic meter has a {\ct MASS\_PER\_VOLUME} of 1~kg/m$^3$.
Also, to limit the particles to a certain region of the domain, add the real sextuplet {\ct XB} to designate the coordinates of a rectangular volume.
The format for {\ct XB} is the same as that used on the {\ct OBST} line. You can only introduce a cloud of particles within a rectangular block,
and the volume of the block is calculated according to the dimensions {\ct XB}, regardless of whether there are solid obstructions within this volume. If you introduce
only a single particle, which is often a handy way of creating a target, you may use the real triplet {\ct XYZ} rather than {\ct XB} to designate the particle's position.

\footnotesize
\begin{verbatim}
&PART ID='droplets', DIAMETER=750., SPEC_ID='WATER VAPOR' /
&PART ID='target', SURF_ID='...' /
&INIT PART_ID='droplets', XB=..., N_PARTICLES=1000, MASS_PER_VOLUME=3.5 /
&INIT PART_ID='target',  XYZ=..., N_PARTICLES=1 /
\end{verbatim} \normalsize

\noindent
If you use {\ct XYZ} to position the particle at a specific point, you can also add {\ct DX}, {\ct DY}, and/or {\ct DZ} to create a line of particles that are offset from {\ct XYZ} by these increments in units of meters. For example,

\footnotesize
\begin{verbatim}
&INIT PART_ID='target',  XYZ=1.2,3.4,5.6, N_PARTICLES=10, DX=0.1 /
\end{verbatim} \normalsize

\noindent
creates a line of 10 particles starting at the point (1.2,3.4,5.6) separated by 0.1~m. This is handy for creating arrays of devices, like heat flux gauges. See Section~\ref{info:heat_flux} for more details.

If you want to introduce particles within a given volume periodically in time and not just initially, set {\ct DT\_INSERT} on
the {\ct INIT} line to a positive value indicating the time increment (s) for insertion. The parameter {\ct N\_PARTICLES} now indicates the
number of droplets/particles inserted every {\ct DT\_INSERT} seconds. If the droplets/particles have mass, use {\ct MASS\_PER\_TIME} (kg/s) instead of {\ct MASS\_PER\_VOLUME} to
indicate how much mass is to be introduced per second.

If you want to delay the insertion of droplets, you can use either a {\ct DEVC\_ID} or a {\ct CTRL\_ID} on the {\ct INIT} line to name the controlling device.
See Section~\ref{info:basic_control} for more information on controlling devices.


\subsection{Controlling the Number of Particles and Droplets}
\label{info:particle_number}

Regardless of how the particles or droplets are introduced into the computational domain, the following are important
parameters for controlling their number:
\begin{description}
\item[{\ct DT\_INSERT}] Time increment in seconds between the introduction of a ``batch'' of particles or droplets from {\ct SURF}
or {\ct INIT}. The number per ``batch'' depends on how they are introduced. The default value is 0.01~s. Note that this
parameter should be specified on the {\ct SURF} or {\ct INIT} line, depending on whether the particles
originate at a surface or a volume. Note that if you introduce particles via an {\ct INIT} line,
you must specify a value for {\ct DT\_INSERT}. Otherwise, particles or droplets will only be introduced initially.
\item[{\ct SAMPLING\_FACTOR}]     Sampling factor for the output
file {\ct CHID.prt5}. This parameter can be used to reduce the size
of the particle output file used to animate the simulation. The default value is 1 for {\ct MASSLESS} particles, meaning that every particle or droplet will be shown in Smokeview.
The default is 10 for all other types of particles. {\ct MASSLESS} particles are discussed in Section~\ref{part_type}.
\item[{\ct AGE}]  Number of seconds the particle or droplet exists, after which time it is removed from the calculation. This is a useful parameter to use when
trying to reduce the number of droplets or particles in a simulation.
\end{description}


\clearpage

\section{Particle and Droplet Properties}

Lagrangian particles are used to represent a wide variety of objects that cannot be explicitly resolved on the numerical
mesh. As a result, there are a considerable number of parameters that define them, many of which may not be applicable to
a particular type of particle or droplet.


\subsection{Thermal Properties}

\label{thermal_part_props}

To simulate liquid droplets, you must include a {\ct SPEC\_ID} on the {\ct PART} line to indicate the gas species formed as the droplets evaporate. The following parameters should be
included on the {\ct SPEC} line to control the evaporation. If the liquid properties of the {\ct SPEC\_ID} are included in Table~\ref{tab:gasspecies},
then no further inputs are required. Otherwise, you must provide all of the following properties of the liquid:
\begin{description}
\item[{\ct DENSITY\_LIQUID}] The density of the liquid or solid droplet/particle (kg/m$^3$).
\item[{\ct SPECIFIC\_HEAT\_LIQUID}] Specific heat of liquid or solid droplet/particle (kJ/kg/K).
\item[{\ct VAPORIZATION\_TEMPERATURE}] Boiling temperature of liquid droplet ($^\circ$C).
\item[{\ct MELTING\_TEMPERATURE}] Melting (solidification) temperature of liquid droplet ($^\circ$C).
\item[{\ct INITIAL\_TEMPERATURE}] Initial temperature of liquid droplet; assumed ambient, {\ct TMPA} ($^\circ$C).
\item[{\ct HEAT\_OF\_VAPORIZATION}] Latent heat of vaporization of liquid droplet (kJ/kg).
\item[{\ct H\_V\_REFERENCE\_TEMPERATURE}] The temperature corresponding to the provided {\ct HEAT\_OF\_VAPORIZATION} ($^\circ$C).
\end{description}

\subsection{Radiative properties}

\label{radiative_part_props}

The radiative properties of water and fuel droplets are determined automatically.
For fuel, the properties of heptane are assumed. For other types of particles, the
radiative properties can be given by specifying the components of the material refractive index on the corresponding {\ct PART} line, using keywords
{\ct REAL\_REFRACTIVE\_INDEX} and {\ct COMPLEX\_REFRACTIVE\_INDEX}. Alternatively, wavelength dependent values of these two quantities can be specified using
a spectral property {\ct TABLE} and specifying the {\ct ID} of that table is {\ct RADIATIVE\_PROPERTY\_TABLE} property on the {\ct PART} line.
Each row of a spectral property table contains three real numbers: wavelength ($\mu$m), real and complex components of the refractive index.
The real part of the refractive index should be a positive number. If it is greater than 10.0, the particles are treated as perfectly reflecting spheres.
The complex part should be a non-negative number. Values less than $10^{-6}$ are treated as non-absorbing.
Below is an example of the use of spectral property table, listing the properties at wavelengths 1, 5 and 10 $\mu$m.

\footnotesize
\begin{verbatim}
&PART ID='particles',..., RADIATIVE_PROPERTY_TABLE='table' /
&TABL ID='table', TABLE_DATA= 1.0,1.33,0.0001 /
&TABL ID='table', TABLE_DATA= 5.0,1.33,0.002  /
&TABL ID='table', TABLE_DATA=10.0,1.33,0.001  /
\end{verbatim} \normalsize
\normalsize


\subsection{Size Distribution}
\label{info:particle_size}

For liquid droplets, the specified {\ct DIAMETER} (in units of $\mu$m) on the {\ct PART} line is the median volumetric diameter of the droplets or particles, with the
distribution assumed to be a combination of Rosin-Rammler and log-normal (Default 500~$\mu$m). The
width of the distribution is controlled by the parameter {\ct GAMMA\_D} (default 2.4)
The Rosin-Rammler/log-normal distribution is given by
\be F(d) = \left\{ \begin{array}{ll}
   \frac{1}{\sqrt{2\pi}} {\displaystyle \int_0^d} \, \frac{1}{\sigma\, d'} \,
   e^{-\frac{[\ln(d'/d_m)]^2}{2\sigma^2}} \; dd'       & (d \le d_m) \\
   1 - e^{-0.693 \left(\frac{d}{d_m}\right)^\gamma }  & (d_m < d)
   \end{array} \right.
\ee
Note that the parameter $\sigma$ is given the value
$\sigma=2/(\sqrt{2\pi} \, (\ln\,2) \; \gamma)=1.15/\gamma$
which ensures that the two functions are smoothly joined at $d=d_m$. You can also add a value for {\ct SIGMA\_D} to the {\ct PART} line if you want to
over-ride this feature.
The larger the value of $\gamma$, the narrower the droplet size is
distributed about the median value. Note that you can prevent droplets or particles from
exceeding {\ct MAXIMUM\_DIAMETER}, which is infinitely large by default. Also note that
droplets less than {\ct MINIMUM\_DIAMETER} are assumed to evaporate in a single time step. The default {\ct MINIMUM\_DIAMETER} is set to 0.005 the value of {\ct DIAMETER}.
The droplet distribution is divided into a series of bins for picking particle size.  To avoid very small particle weights, the distribution is clipped at the cumulative
fractions of {\ct CDF\_CUTOFF} and (1 - {\ct CDF\_CUTOFF}).
To prevent FDS from generating a distribution of droplets/particles altogether, set
{\ct MONODISPERSE=.TRUE.} on the {\ct PART} line, in which case every droplet or particle will be assigned the
same {\ct DIAMETER}.

\subsection{Secondary breakup}
\label{info:secondary_breakup}
If {\ct BREAKUP=.TRUE.} is set on the {\ct PART} line, particles may undergo secondary breakup.
In this case the user should also specify {\ct SURFACE\_TENSION} of the liquid and breakup distribution parameters \\
{\ct BREAKUP\_CHILD\_DIAMETER} and {\ct BREAKUP\_CHILD\_GAMMA\_D}.


\subsection{Drag}
\label{info:particle_drag}

For massive particles the default drag law (i.e., the drag coefficient correlation as a function of Reynolds number [based on particle diameter]) is that of a sphere.
To invoke the cylinder drag law set {\ct DRAG\_LAW} to {\ct 'CYLINDER'} on the {\ct PART} line.  If neither of these options is applicable,
the user may specify a constant value of the drag coefficient for a particle class (a specific {\ct PART\_ID}) by setting a {\ct USER\_DRAG\_COEFFICIENT} on {\ct PART}.
The {\ct USER\_DRAG\_COEFFICIENT} trumps the {\ct DRAG\_LAW}.

\subsection{Velocity on Solid Surfaces}
\label{info:surface_droplets}

When a droplet strikes a solid surface, it sticks and is reassigned a new speed and direction. If the surface is
horizontal, the direction is randomly chosen. If vertical, the direction is downwards.
The rate at which the droplets move over the horizontal and vertical surfaces is difficult to
quantify. The parameters {\ct HORIZONTAL\_VELOCITY} and {\ct VERTICAL\_VELOCITY} on the {\ct PART} line
allow you to control the rate at which droplets move horizontally or vertically (downward). The defaults are
0.2~m/s and 0.5~m/s, respectively.

There are some applications, like the suppression of racked storage commodities, where it is useful to allow water droplets to move horizontally
along the underside of a solid object. It is difficult to model this phenomenon precisely because it involves surface tension, surface porosity and
absorption, and complicated geometry. However, a way to capture some of the effect is to set {\ct ALLOW\_UNDERSIDE\_PARTICLES=.TRUE.} on the
{\ct MISC} line. It is normally false.

\begin{warning}
Be aware that when droplets hit obstructions, the vertical direction is assumed to coincide with the $z$ axis, regardless of any change to the gravity vector, {\ct GVEC}.
\end{warning}

\noindent
A useful sample case to demonstrate various features of droplet motion on solid obstructions is the test case called {\ct cascade.fds}. Figure~\ref{cascade} shows a stream
of water droplets impinging on the top of a box followed by the cascading of water droplets over the top edge.

\begin{figure}[ht]
\begin{center}
\begin{tabular}{lcr}
\includegraphics[height=2.2in]{SCRIPT_FIGURES/cascade_1} &
\includegraphics[height=2.2in]{SCRIPT_FIGURES/cascade_2} &
\includegraphics[height=2.2in]{SCRIPT_FIGURES/cascade_3}
\end{tabular}
\end{center}
\caption[Example of water cascading over solid obstructions.]{Smokeview rendering of the {\bf cascade} test case.}
\label{cascade}
\end{figure}

\begin{warning}
\noindent If you do not want droplets to accumulate on solid surfaces, set {\ct ALLOW\_UNDERSIDE\_PARTICLES=.FALSE.} on the
{\ct MISC} line. It is normally true.
\end{warning}



\subsection{Color}
\label{info:particle_quantities}

The parameter {\ct QUANTITIES} is an array of character strings indicating which
scalar quantities should be used to color the particles or droplets when viewed as an
animation. The choices are \\
{\ct 'PARTICLE TEMPERATURE'} ($^\circ$C) \\
{\ct 'PARTICLE DIAMETER'} ($\mu$m) \\
{\ct 'PARTICLE VELOCITY'} (m/s) \\
{\ct 'PARTICLE MASS'} (kg) \\
{\ct 'PARTICLE AGE'} (s) \\
As a default, if no {\ct QUANTITIES} are specified and none are selected in Smokeview, then
Smokeview will display particles with a single color.  To select this color specify either {\ct RGB} or
{\ct COLOR}. By default, water droplets are colored blue and fuel droplets yellow. All others are colored black.



\clearpage

\section{Special Types of Particles and Droplets}
\label{part_type}

There are several useful attributes that you can assign to particles or droplets, usually via a simple logical parameter. Be aware with each of these parameters that
specifying it as {\ct .TRUE.} may cause other parameters to be functionally useless, or may cause conflicts that FDS may or may not detect. A good rule of thumb is always to
ask yourself what is the basic information that {\em must} be conveyed to the program, and stick to that. For example, if the particles are to be {\ct MASSLESS}, there is no
point in declaring thermal properties because they are only to be used a flow tracers in Smokeview.

\subsection{Massless Particles}
\label{info:MASSLESS}

The simplest use of Lagrangian particles is for visualization, in which case the
particles are considered massless tracers. In this case, the particles are
defined via the line

\footnotesize
\begin{verbatim}
&PART ID='tracers', MASSLESS=.TRUE., ... /
\end{verbatim}
\normalsize

\noindent
Note that if the particles are {\ct MASSLESS}, it is not appropriate to color them according to any particular property.
Particles are not colored by gas phase quantities, but rather by properties of the particle itself. For example,
{\ct 'PARTICLE TEMPERATURE'} for a non-massless particle refers to the temperature of the particle itself
rather than the local gas temperature.

Also note that if {\ct MASSLESS=.TRUE.}, the {\ct SAMPLING\_FACTOR} is set to 1 unless you say otherwise, which would be pointless
since {\ct MASSLESS} particles are for visualization only.


\subsection{Static Particles or Droplets}
\label{info:STATIC}

{\ct STATIC} is a logical parameter indicating whether particles move or just serve
as obstructions or clutter. Setting {\ct STATIC=.TRUE.} only makes sense in conjunction with a non-zero value of
{\ct N\_PARTICLES} on the {\ct INIT} line. The default value of {\ct STATIC} is {\ct .FALSE.}


\subsection{Water Droplets}

If the droplets are defined with {\ct SPEC\_ID='WATER VAPOR'}, then the particles will be assigned the thermo-physical properties of water,
the radiation absorption properties of water, and will be colored blue in Smokeview.

If the liquid droplets are to evaporate into some other gaseous species, you must explicitly define the species via the {\ct SPEC} namelist group (see Section~\ref{info:SPEC}), and then
designate the appropriate {\ct SPEC\_ID} on the {\ct PART} line.

\subsection{Fuel Droplets}
\label{info:fuel_droplets}

If the droplets evaporate into the {\ct FUEL} identified on the {\ct REAC} line, they will be colored yellow by default in Smokeview and any resulting
fuel vapor will burn according to the combustion model specified on the {\ct REAC} line.
The droplets evaporate into an equivalent amount of fuel vapor such that the resulting heat release rate
(assuming complete combustion) is equal to the evaporation rate multiplied by the {\ct HEAT\_OF\_COMBUSTION}, also specified on the {\ct PART} line. Note that the
burning rate will be adjusted to account for the difference between the heats of combustion of the droplets and the other fuels in the model.

If a spray nozzle is used to generate the fuel droplets, its characteristics are specified
in the same way as those for a sprinkler.  If the fuel species is present in the liquid properties table as a fuel, then the droplets will be given fuel radiation absorption properties.

\subsubsection{Example Case: spray\_burner}

Controlled fire experiments are often conducted using a spray burner,
where a liquid fuel is sprayed out of a nozzle and ignited. In this
example ({\ct spray\_burner.fds}), heptane from two nozzles is
sprayed downwards into a steel pan.  The flow rate is increased
linearly so that the fire grows to 2~MW in 20 s, burns steadily for
another 20 s, and then ramps down linearly in 20 s. The key input
parameters are given here:

\footnotesize
\begin{verbatim}
&REAC FUEL='N-HEPTANE',C=7,H=16,SOOT_YIELD=0.01,HEAT_OF_COMBUSTION=44500./

&DEVC ID='nozzle_1', XYZ=4.0,-.3,0.5, PROP_ID='nozzle', QUANTITY='TIME', SETPOINT=0. /
&DEVC ID='nozzle_2', XYZ=4.0,0.3,0.5, PROP_ID='nozzle', QUANTITY='TIME', SETPOINT=0. /

&PART ID='heptane droplets', SPEC_ID='N-HEPTANE',
      QUANTITIES(1:2)='PARTICLE DIAMETER','PARTICLE TEMPERATURE',
      DIAMETER=1000., HEAT_OF_COMBUSTION=44500., SAMPLING_FACTOR=1 /

&PROP ID='nozzle', CLASS='NOZZLE', PART_ID='heptane droplets',
      FLOW_RATE=1.96, FLOW_RAMP='fuel', PARTICLE_VELOCITY=10.,
      SPRAY_ANGLE=0.,30.   /
&RAMP ID='fuel', T= 0.0, F=0.0  /
&RAMP ID='fuel', T=20.0, F=1.0  /
&RAMP ID='fuel', T=40.0, F=1.0  /
&RAMP ID='fuel', T=60.0, F=0.0  /
\end{verbatim}
\normalsize

\noindent
Many of these parameters are self-explanatory. Note that a 2~MW fire is achieved via 2 nozzles flowing heptane at 1.96~L/min each:
\be 2 \times 1.96 \; \frac{\hbox{L}}{\hbox{min}} \times \frac{1}{60} \; \frac{\hbox{min}}{\hbox{s}} \times 688 \;
\frac{\hbox{kg}}{\hbox{m}^3} \times \frac{1}{1000} \; \frac{\hbox{m}^3}{\hbox{L}} \times 44500 \;
\frac{\hbox{kJ}}{\hbox{kg}} = 2000 \; \hbox{kW} \ee
The parameter {\ct HEAT\_OF\_COMBUSTION} over-rides that for the overall
reaction scheme. Thus, if other droplets or solid objects have different
heats of combustion, the effective burning rates are adjusted so that the
total heat release rate is that which the user expects. However, exercises
like this ought to be conducted just to ensure that this is the case.
The HRR curve for this example is given in Fig.~\ref{spray_burner}.

\begin{figure}[ht]
\begin{center}
\includegraphics[width=4.5in]{SCRIPT_FIGURES/spray_burner_HRR}
\end{center}
\caption[HRR of spray burner.]{Heat Release Rate (HRR) of spray burner test.}
\label{spray_burner}
\end{figure}

Note also that this feature is subject to mesh
dependence. If the mesh cells are too coarse, the
evaporating fuel can be diluted to such a degree that it
may not burn. Proper resolution depends on the type of
fuel and the amount of fuel being ejected from the
nozzle. Always test your burner at the resolution of your overall simulation.


\subsection{Assigning Complex Properties to Particles}
\label{info:PART_SURF}

Unless you declare {\ct MASSLESS=.TRUE.} on the {\ct PART} line, it is assumed that the particle has mass and thermal properties that govern its
heating and evaporation. If you specify a {\ct SPEC\_ID}, then FDS automatically assumes that you want relatively small, thermally-thin evaporating liquid droplets.
However, it is possible to assign arbitrary surface properties to
``particles'' that represent subgrid-scale objects, like office clutter or vegetation. To do this, you add a {\ct SURF\_ID} to the {\ct PART} line. The
{\ct SURF} properties then over-ride the default properties assigned to particles and droplets. For example, the following input lines create a collection
of hot spheres:

\footnotesize
\begin{verbatim}
&SURF ID='HOT', TMP_FRONT=500., RADIUS=0.005, GEOMETRY='SPHERICAL' /
&PART ID='spheres', SURF_ID='HOT', QUANTITIES='PARTICLE TEMPERATURE', PROP_ID='ball' /
&PROP ID='ball', SMOKEVIEW_ID='SPHERE', SMOKEVIEW_PARAMETERS(1)='D=0.01' /
&INIT PART_ID='spheres', XB=0.25,0.75,0.25,0.75,0.25,0.75, N_PARTICLES=10 /
\end{verbatim}
\normalsize

\noindent
The {\ct SURF} line establishes that the particles are hot spheres with a radius of 0.005~m and constant temperature of 500~$^\circ$C. The {\ct PART}
line establishes a class of particles with the properties of given by the {\ct SURF} line whose {\ct ID='HOT'}. The {\ct PROP} line is used just
to tell Smokeview that the particles are to be drawn as the appropriate sized spheres. The {\ct INIT} line randomly fills the given volume with
10 of these hot spheres.

The {\ct SURF} line establishes the particle {\ct GEOMETRY}. Options are {\ct 'SPHERICAL'}, {\ct 'CYLINDRICAL'}, or {\ct 'CARTESIAN'}. If
{\ct 'SPHERICAL'}, provide the {\ct RADIUS}. If {\ct 'CYLINDRICAL'}, provide the {\ct RADIUS} and the {\ct LENGTH}. If {\ct 'CARTESIAN'}, provide
the {\ct LENGTH}, {\ct WIDTH}, and {\ct THICKNESS} of the plate. Note that the heat conduction calculation will be done in the appropriate coordinate
system.

The output quantities associated with complex particles are the same as those for solid walls. For example, to record the temperature of a given
particle, use lines like the following:

\footnotesize
\begin{verbatim}
&INIT ID='my particle', PART_ID='...', XB=..., N_PARTICLES=1 /
&DEVC ID='...', INIT_ID='my particle', QUANTITY='WALL TEMPERATURE' /
\end{verbatim}
\normalsize




%\begin{warning}
%Note that the absorption of thermal radiation by water or fuel droplets is
%handled in FDS with fairly well-established physical sub-models, the details
%of which are contained in the FDS Technical Reference Guide~\cite{FDS_Math_Guide}.
%However, for arbitrary particles or droplets, there is no assumed radiative absorption.
%\end{warning}



\clearpage

\section{Special Topic: Suppression by Water}
\label{info:suppression}

Modeling suppression of a fire by a water spray is challenging because
the relevant physical mechanisms occur at length scales smaller than a
single mesh cell. In the gas phase, flames are extinguished due to lowered
temperatures and dilution of the oxygen supply.

For the solid phase,
water reduces the fuel pyrolysis rate by cooling the fuel surface and also
changing the chemical reactions that liberate fuel gases from the solid.
If the solid or liquid fuel has been given reaction parameters via the {\ct MATL} line, there is no
need to set any additional suppression parameters. It is assumed that
water impinging on the fuel surface takes energy away from the
pyrolysis process and thereby reduces the burning rate of the fuel.
If the surface has been assigned a {\ct HRRPUA} (Heat Release Rate Per Unit Area),
a parameter needs to be specified that governs the suppression of the fire by water because this type of simulated
fire essentially acts like a gas burner whose flow rate is explicitly specified.
An empirical way to account for fire suppression by water
is to characterize the reduction of the pyrolysis rate in terms
of an exponential function. The local mass loss rate of the
fuel is expressed in the form
\be \dm_f''(t) = \dm_{f,0}''(t) \; e^{-\int k(t) \; dt} \label{nistexting} \ee
Here $\dm_{f,0}''(t)$ is the user-specified burning rate per unit
area when no water is applied and $k$ is a function of the local water
mass per unit area, $m_w''$, expressed in units of kg/m$^2$.
\be
k(t) = \hbox{\ct E\_COEFFICIENT} \; m_w''(t) \quad          \hbox{s}^{-1}
\ee
The parameter {\ct E\_COEFFICIENT} must be obtained experimentally, and
it is expressed in units of m$^2$/kg/s. Usually, this type of suppression
algorithm is invoked when the fuel is complicated, like a cartoned commodity.






\chapter{Devices and Control Logic}

Sprinklers, smoke detectors, heat flux gauges, and thermocouples
may seem to be completely unrelated, but from the point of view
of FDS, they are simply devices that operate in specific ways depending
on the properties assigned to them. They can be used to record some
quantity of the simulated environment, like a thermocouple, or they can represent a mathematical model
of a complex sensor, like a smoke detector,
and in some cases they can trigger events to happen, like a timer.

Versions of FDS prior to FDS~5 used device-specific namelist groups, like {\ct SPRK},
{\ct HEAT}, {\ct SMOD}, and {\ct THCP}, but the number and variety
of fire-specific sensing and measurement devices continues to expand, and
the data structures in FDS could not easily accommodate all possibilities.
In addition, the logic associated with sensor activation and
subsequent actions, like a vent opening, had become too complicated and prone to bugs.
Starting in FDS~5, all devices, in the broadest sense of the word,
are designated via the namelist group {\ct DEVC}.
In addition, advanced functionality and properties are accommodated
via additional namelists groups called {\ct CTRL} (Control) and
{\ct PROP} (Properties).




\section{Device Location and Orientation: The \texorpdfstring{{\tt DEVC}}{DEVC} Namelist Group (Table \ref{tbl:DEVC})}
\label{info:DEVC}

Regardless of the specific properties, each device needs to be sited either at a point within the computational domain, or
over a span of the domain, like a beam smoke detector. For example, a sprinkler is sited within the domain with a line like:

\footnotesize
\begin{verbatim}
&DEVC XYZ=3.0,5.6,2.3, PROP_ID='Acme Sprinkler 123', ID='Spk_39' /
\end{verbatim}
\normalsize

\noindent
The physical coordinates of the
device are given by a triplet of real numbers, {\ct XYZ}.
The properties of the device are contained on the {\ct PROP} line
designated by {\ct PROP\_ID}, which will be explained below for each of the
special devices included in FDS.
The character string {\ct ID} is merely a descriptor to identify the
device in the output files, and if any action is tied to its activation.

Not all devices need to be associated with a particular set of properties via the {\ct PROP\_ID}. For example, pointwise
output quantities are specified with a single {\ct DEVC} line, like

\footnotesize
\begin{verbatim}
&DEVC ID='TC-23', XYZ=3.0,5.6,2.3, QUANTITY='TEMPERATURE'  /
\end{verbatim}
\normalsize

\noindent
which tells FDS to record the temperature at the given point as a function of time. The {\ct ID} is a label in the output file whose name
is {\bf CHID\_devc.csv}.

Some devices have a particular orientation which can be specified
with various parameters; {\ct IOR}, {\ct ORIENTATION}, {\ct ROTATION}.
{\ct IOR} or the Index of Orientation, is necessary for any device that is
placed on the surface of a solid. The values $\pm$1 or $\pm$2 or $\pm$3 indicate the direction
that the device ``points'', where 1 is parallel to the $x$-axis, 2 is parallel to the $y$-axis
and 3 is parallel to the $z$-axis.

{\ct ORIENTATION} is used for devices that are not on a surface
and require a directional specification, like a sprinkler. {\ct ORIENTATION} is specified with a
triplet of real number values that indicate the components of the direction vector.
The default value of {\ct ORIENTATION} is (0,0,-1).
For example, a default downward-directed sprinkler spray can be redirected in other direction.
If you were to specify

\footnotesize
\begin{verbatim}
&DEVC XYZ=3.0,5.6,2.3, PROP_ID='...', ID='...', ORIENTATION=1,0,0 /
\end{verbatim}
\normalsize

\noindent
the sprinkler would point in the positive $x$ direction.
For other devices, the {\ct ORIENTATION} would only change the way the device is drawn by Smokeview.

The delivered density to the floor from a sprinkler depends upon where the sprinkler arms are located.  Rather than redefining the spray pattern for every possible direction that the sprinkler can be attached to the pipe, the {\ct DEVC} can be given the parameter {\ct ROTATION}.  The default {\ct ROTATION} is 0 degrees, which for a downwards pointing sprinkler is the positive x-axis.  Positive {\ct ROTATION} will rotate the 0 degree point towards the positive y-axis.

\section{Device Output}
\label{info:out:DEVC}

Each device has a {\ct QUANTITY} associated with it.
The time history of each {\ct DEVC} quantity is output to a comma-delimited
ASCII file called {\bf CHID\_devc.csv}
(See Section~\ref{out:DEVC} for output file format).
This file can be imported into most spread sheet software packages.
If the number of {\ct DEVC} lines exceeds 256, the limit of some spreadsheet
applications, the output file will be split into appropriately sized smaller
files. To prevent the file splitting, specify {\ct COLUMN\_DUMP\_LIMIT=.FALSE.} on the {\ct DUMP} line.
Use {\ct DEVC\_COLUMN\_LIMIT} and {\ct CTRL\_COLUMN\_LIMIT} to indicate the limit of columns in the
device and control output files. Their default values are 254.

By default, the {\ct DEVC} output is written to a file every {\ct DT\_DEVC} seconds.
This time increment is specified on the {\ct DUMP} line. Also, by default,
a time-averaged value is written out for each quantity of interest. To prevent FDS from time-averaging the {\ct DEVC} output, add
{\ct TIME\_AVERAGED=.FALSE.} to the {\ct DEVC} line.

A useful option for the {\ct DEVC} line is to add {\ct RELATIVE=.TRUE.}, which will indicate that only the change in
the initial value of the {\ct QUANTITY} is to be output. This can be useful for verification and validation studies.

You can change the values of the output by multiplying by {\ct CONVERSION\_FACTOR} and changing the character string {\ct UNITS}.

If you do not want the {\ct DEVC} {\ct QUANTITY} to be included in the output file, set {\ct OUTPUT=.FALSE.} on the {\ct DEVC} line. Sometimes, devices are just used as clocks or control devices. In these cases, you might want to prevent its output from cluttering the output file. If the {\ct DEVC} {\ct QUANTITY='TIME'}, then {\ct OUTPUT} is set to {\ct .FALSE.} automatically.


\begin{warning}
All devices must have a specified {\ct QUANTITY}.  Some special devices (Section~\ref{info:PROP}) have their {\ct QUANTITY}
specified on a {\ct PROP} line.
A {\ct QUANTITY} specified on a {\ct PROP} line associated with a {\ct DEVC} line will override a {\ct QUANTITY}
specified on the {\ct DEVC} line.
\end{warning}


\newpage

\section{Special Device Properties: The \texorpdfstring{{\tt PROP}}{PROP} Namelist Group (Table \ref{tbl:PROP})}
\label{info:PROP}

Many devices are fairly easy to describe, like a point measurement, with only a few parameters which can be included on the
{\ct DEVC} line. However, for more complicated devices, it is inconvenient to list all of the properties on each and every
{\ct DEVC} line. For example, a simulation might include hundreds of sprinklers, but it is tedious to list the properties of the
sprinkler each time the sprinkler is sited. For these devices, use a separate namelist group called {\ct PROP} to store the relevant parameters.
Each {\ct PROP} line is identified by a unique {\ct ID}, and invoked by a {\ct DEVC} line by the string {\ct PROP\_ID}.
The {\ct ID} might be the manufacturer's
name, like {\ct 'ACME Sprinkler 123'}, for example.

The best way to describe the {\ct PROP} group is to list the various special devices and their properties.


\subsection{Sprinklers}
\label{info:sprinklers}

Here is a very simple example of sprinkler:

\footnotesize
\begin{verbatim}
&PROP ID='K-11', QUANTITY='SPRINKLER LINK TEMPERATURE', RTI=148., C_FACTOR=0.7,
      ACTIVATION_TEMPERATURE=74., OFFSET=0.10,PART_ID='water drops', FLOW_RATE=189.3,
      PARTICLE_VELOCITY=10., SPRAY_ANGLE=30.,80.   /

&DEVC ID='Spr_60', XYZ=22.88,19.76,7.46, PROP_ID='K-11' /
&DEVC ID='Spr_61', XYZ=22.88,21.76,7.46, PROP_ID='K-11' /
\end{verbatim} \normalsize

\noindent
A sprinkler, known as {\ct 'Spr\_60'}, is located at a point in space given by {\ct XYZ}. It is a {\ct 'K-11'} type sprinkler, whose properties
are given on the {\ct PROP} line. Note that the various names ({\ct ID}s) mean nothing to FDS, except as a means of associating one thing with
another, so try to use {\ct ID}s that are as meaningful to you as possible.  The parameter {\ct QUANTITY='SPRINKLER LINK TEMPERATURE'} {\em does}
have a specific meaning to FDS, directing it to compute the activation of
the device using the standard RTI algorithm. The various sprinkler properties will be discussed below.
\footnote{Prior to FDS~5, a separate file was used to store
properties of a given sprinkler. This file is no longer used.}

Properties associated with sprinklers included in the {\ct PROP} group are:
\begin{description}
\item[{\ct RTI}] Response Time Index in units of $\sqrt{\hbox{m}\cdot \hbox{s}}$. (Default 100.)
\item[{\ct C\_FACTOR}] in units of $\sqrt{\hbox{m/s}}$. (Default 0.)
\item[{\ct ACTIVATION\_TEMPERATURE}] in units of $^\circ$C. (Default 74~$^\circ$C)
\item[{\ct INITIAL\_TEMPERATURE}] of the link in units of $^\circ$C. (Default {\ct TMPA})
\item[{\ct FLOW\_RATE}] in units of L/min.
An alternative is to provide the {\ct K\_FACTOR} in units of L/min/bar$^\ha$ and the
{\ct OPERATING\_PRESSURE} in units of bar.
The flow rate is then given by $ \dm_w = K \sqrt{p}$. Note that 1 bar is equivalent to
14.5~psi, 1 gpm is equivalent to 3.785~L/min, 1~gpm/psi$^\ha$ is
equivalent to 14.41~L/min/bar$^\ha$.
\item[{\ct OFFSET}] Radius of a sphere (m) surrounding the
sprinkler where the water droplets are initially placed in the simulation. It is assumed that
at and beyond the {\ct OFFSET} the droplets have completely broken
up and are transported independently of each other. (Default 0.05~m)
\item[{\ct PARTICLE\_VELOCITY}]  Initial droplet velocity. (Default 0~m/s)
\item[{\ct ORIFICE\_DIAMETER}] Diameter of the nozzle orifice in m (default 0~m). This input provides an alternative way to set droplet velocity
by giving values for {\ct FLOW\_RATE} and {\ct ORIFICE\_DIAMETER}, in which case the the droplet velocity is computed by dividing the
flow rate by the orifice area. Use this method if you do not have any information about droplet velocity. However, quite often
the user must fine-tune {\ct PARTICLE\_VELOCITY} in order to reproduce certain spray profile.
The {\ct ORIFICE\_DIAMETER} input is not used if either {\ct PARTICLE\_VELOCITY} or {\ct SPRAY\_PATTERN\_TABLE} is specified.
\item[{\ct SPRAY\_ANGLE}] A pair of angles (in degrees) through which the droplets are sprayed.
The angles outline a conical spray pattern relative to the
south pole of the sphere centered at the sprinkler with radius {\ct OFFSET}.
For example, {\ct SPRAY\_ANGLE=30.,80.} directs the water droplets to leave
the sprinkler through a band between 60$^\circ$ and 10$^\circ$ south latitude, assuming the orientation of
the sprinkler is (0,0,-1), the default.
\item[{\ct SPRAY\_PATTERN\_SHAPE}] determines how the droplets are distributed within this band.
Choices are {\ct 'UNIFORM'} for uniform distribution and {\ct 'GAUSSIAN'}. Parameter {\ct SPRAY\_PATTERN\_MU} controls the latitude of
maximum density of droplets for the {\ct 'GAUSSIAN'} distribution. Width of the distribution is controlled by parameter {\ct SPRAY\_PATTERN\_BETA}.
\item[{\ct SPRAY\_PATTERN\_TABLE}] Name of a set of {\ct TABL} lines containing the description of the spray pattern.
\item[{\ct PART\_ID}] The name of the {\ct PART} line containing properties of the droplets.
See Chapter~\ref{info:PART} for additional details.
\item[{\ct PRESSURE\_RAMP}] The name of the {\ct RAMP} lines specifying the dependence of pipe pressure on the
number of active sprinklers and nozzles.
\end{description}

\noindent
Be aware that sprinklers produce many droplets that need to be
tracked in the calculation. To limit the computational cost, sprinkler droplets disappear when they hit the
lower boundary of the computational domain, regardless of whether it is solid
or not. To stop FDS from removing sprinkler droplets from the lower boundary of the computational domain,
add the phrase {\ct POROUS\_FLOOR=.FALSE.} to the {\ct MISC} (Section~\ref{info:MISC}) line. Be aware, however, that
droplets that land on the floor continue to move horizontally in randomly selected
directions; bouncing off obstructions, and consuming CPU time.

For more information about sprinklers, their activation and spray dynamics, read the FDS
Technical Reference Guide~\cite{FDS_Math_Guide}.


\subsubsection{Special Topic: Specifying Complex Spray Patterns}
\label{info:spraypattern}

If a more complex spray pattern is desired than can be achieved by using {\ct SPRAY\_ANGLE}, {\ct PARTICLE\_VELOCITY},
and {\ct FLOW\_RATE}, then a {\ct SPRAY\_PATTERN\_TABLE} can be specified using the {\ct TABL} (Section~\ref{info:TABL})
namelist group.  For a spray pattern, specify the total flow using {\ct FLOW\_RATE} of the {\ct PROP} line, the name of the spray pattern using
{\ct SPRAY\_PARTTERN\_TABLE} and then one or more {\ct TABL} lines of the format:

\footnotesize
\begin{verbatim}
&TABL ID='table_id', TABLE_DATA=LAT1,LAT2,LON1,LON2,VELO,FRAC /
\end{verbatim} \normalsize

\noindent
where each {\ct TABL} line for a given {\ct 'table\_id'} provides information about the spherical distribution of the spray pattern
for a specified solid angle. {\ct LAT1} and {\ct LAT2} are the bounds of the solid angle measured in degrees from
the south pole (0 is the south pole and 90 is the equator, 180 is the north pole).  Note that this is not the conventional way of
specifying a latitude, but rather a convenient system based on the fact that a typical sprinkler sprays water downwards, which is
why 0 degrees is assigned to the ``south pole,'' or the $-z$ direction. The parameters {\ct LON1} and {\ct LON2} are the
bounds of the solid angle (also in degrees),
where 0 (or 360) is aligned with the $-x$ axis and 90 is aligned with the $-y$ axis.  {\ct VELO} is the velocity (m/s) of the droplets at their
point of insertion.
{\ct FRAC} the fraction of the total flow rate of liquid that should emerge from that particular solid angle.

In the test case called {\bf bucket\_test\_2}, the spray pattern is defined as two jets, each with a velocity of 10~m/s and a flow rate
of 60~L/min. The first jet contains 0.2 of the total flow, the second, 0.8 of the total.
The jets are centered at points 30$^\circ$ below the ``equator,'' and are separated by 180$^\circ$.

\footnotesize
\begin{verbatim}
&PROP ID='K-11', QUANTITY='SPRINKLER LINK TEMPERATURE', OFFSET=0.10, PART_ID='water_drops',
      FLOW_RATE=60.,SPRAY_PATTERN_TABLE='TABLE1', SMOKEVIEW_ID='sprinkler_upright',
      PARTICLE_VELOCITY=10. /

&TABL ID='TABLE1',TABLE_DATA=30,31,0,1,5,0.2/
&TABL ID='TABLE1',TABLE_DATA=30,31,179,180,5,0.8/
\end{verbatim}
\normalsize


\begin{warning}
\noindent
Note that each set of {\ct TABL} lines must have a unique {\ct ID}.  Also note that
the {\ct TABL} lines can be specified in any order.
\end{warning}




\subsubsection{Special Topic: Varying Pipe Pressure}
\label{info:pressureramp}

In real sprinkler systems, the pipe pressure is affected by the number of actuated sprinklers. Typically,
the pressure is higher than the design value when the first sprinkler activates, and decreases towards the design
value and below that when more and more sprinklers are activated. The pipe pressure has an effect on flow rate,
droplet velocity and droplet size distribution.

In FDS, the varying pipe pressure can be specified on a {\ct PROP} line using {\ct PRESSURE\_RAMP}. On each {\ct RAMP} line,
the number of open sprinklers or nozzles is associated with certain pipe pressure (bar). For example:

\footnotesize
\begin{verbatim}
&PROP ID='My nozzle'
      OFFSET=0.1
      PART_ID='water drops'
      FLOW_RATE=0.9
      OPERATING_PRESSURE = 10.0
      PARTICLE_VELOCITY=15.0
      SPRAY_ANGLE=0.0,80.0
      PRESSURE_RAMP = 'PR1' /

&RAMP ID = 'PR1' T = 1, F = 16.0 /
&RAMP ID = 'PR1' T = 2, F = 10.0 /
&RAMP ID = 'PR1' T = 3, F = 8.0 /
\end{verbatim}
\normalsize
\noindent
These lines would indicate that the pressure is 16.0 bar when the first sprinkler having properties of {\ct My nozzle}
activates, 10.0 bar when two sprinklers are active, and 8.0 bar when three or more sprinklers are active. When counting the
number of active sprinklers, FDS accounts for all active sprinklers or nozzles with {\ct PART\_ID} associated with them.

When pressure ramps are used, both {\ct FLOW\_RATE} and {\ct PARTICLE\_VELOCITY} are associated with the
{\ct OPERATING\_PRESSURE}. Specify either the {\ct FLOW\_RATE}, or the
{\ct K\_FACTOR} and {\ct OPERATING\_PRESSURE}. In the latter case, the flow rate is given by $ \dm_w = K \sqrt{p}$ and droplet velocity
by $v = C \sqrt{p}$.  If spray pattern table is used, the coefficient $C$ is determined separately for each line of the
table. The median diameter of the particle size distribution is scaled as
$d_m(p) = d_m(p_o)(p_o/p)^{1/3}$, where $p_o$ is the {\ct OPERATING\_PRESSURE}
and $d_m(p_o)$ is specified by parameter {\ct DIAMETER} on the corresponding {\ct PART} line.

For some simulations there may be groups of independent sprinklers or nozzles.  For example one might have one set of nozzles for a fuel spray and a second set for water spray.  In this case the flow of water would not be impacted by how many fuel spray nozzles are open.  To have the {\ct PRESSURE\_RAMP} only count a subset of sprinklers or nozzles, the keyword {\ct PIPE\_INDEX} can be used on the {\ct DEVC} line. For example:

\footnotesize
\begin{verbatim}
&DEVC ID='Spr_1', XYZ=2.00,2.00,8.00, PROP_ID='My nozzle',PIPE_INDEX=1/
&DEVC ID='Spr_2', XYZ=1.00,1.00,8.00, PROP_ID='My nozzle',PIPE_INDEX=1 /
&DEVC ID='Fuel_1', XYZ=2.00,2.00,1.00, PROP_ID='Fuel Spray',PIPE_INDEX=2 /
&DEVC ID='Fuel_2', XYZ=1.00,1.00,1.00, PROP_ID='Fuel Spray',PIPE_INDEX=2 /
\end{verbatim}
\normalsize

\noindent

These lines indicate that the fuel spray nozzles are a seperate pipe network from the water sprinklers.  With these inputs, the {\ct PRESSURE\_RAMP} for the water sprinklers would not count any active fuel spray nozzles.

\subsection{Nozzles}
\label{info:nozzles}

Nozzles are very much like sprinklers, only they do not activate based on the standard RTI model.
To simulate a nozzle that activates at a given time,
specify a {\ct QUANTITY} and {\ct SETPOINT} directly on the {\ct DEVC} line.
The following lines:

\footnotesize
\begin{verbatim}
&DEVC XYZ=23.91,21.28,0.50, PROP_ID='nozzle', ORIENTATION=0,0,1, QUANTITY='TIME',
      SETPOINT=0., ID='noz_1' /
&DEVC XYZ=26.91,21.28,0.50, PROP_ID='nozzle', ORIENTATION=0,0,1, QUANTITY='TIME',
      SETPOINT=5., ID='noz_2' /
&PROP ID='nozzle', PART_ID='heptane drops', FLOW_RATE=2.132,
      FLOW_TAU=-50., PARTICLE_VELOCITY=5., SPRAY_ANGLE=0.,45.    /
\end{verbatim}
\normalsize

\noindent
designate two nozzles of the same type, one which activates at time zero, the other at 5~s. Note that nozzles must have a designated
{\ct PROP\_ID}, and the {\ct PROP} line must have a designated {\ct PART\_ID} to describe the liquid droplets.

\subsubsection{Example Case: {\bf flow\_rate}}

This example demonstrates the use of pressure ramps and control logic for opening and closing nozzles. It also serves as a verification test for
the water flow rate. There are four nozzles that open at designated times: 0 s, 15 s, 30 s and 45 s. At time 60 s, all the nozzles are closed.
The number of open nozzles is measured using a device with quantity {\ct 'OPEN NOZZLES'}. A comparison of the FDS result and the exact, intended values
is shown in left part of Figure~\ref{flow_rate}.  Note that {\ct 'OPEN NOZZLES'} counts only nozzles belonging to the specified {\ct PIPE\_INDEX}.

The pressure ramp has been designed to deliver a total flow rate of 10 l/min at all values of open nozzles. Mathematically this means that
\be
N_n K \sqrt{p} = 10 \;\hbox{l/min} \Rightarrow
p = \left( \frac{10 \;\hbox{l/min}}{N_n K}\right)^2
\ee

\noindent
where $N_n$ is the number of open nozzles. The corresponding nozzle and pressure ramp definitions are
\footnotesize
\begin{verbatim}
&PROP ID='Head',
      OFFSET=0.10,
      PART_ID='water drops',
      K_FACTOR = 2.5
      OPERATING_PRESSURE = 1
      PRESSURE_RAMP = 'PR'
      PARTICLE_VELOCITY=2.,
      SPRAY_ANGLE= 0.,60.,
      SMOKEVIEW_ID='sprinkler_upright' /

&RAMP ID='PR',   T= 1., F=16. /
&RAMP ID='PR',   T= 2., F=4. /
&RAMP ID='PR',   T= 3., F=1.778 /
&RAMP ID='PR',   T= 4., F=1. /
\end{verbatim}
\normalsize

The accumulated water is tracked using a device measuring the accumulated mass per unit area, integrated over the total floor area. The total mass of accumulated water should increase from zero to 10 kg in 60 s. A comparison of the FDS prediction and this analytical result is shown in the right side of Figure~\ref{flow_rate}. The small delay of the FDS result is caused by the time it takes from the droplets to fall down on the floor.

\begin{figure}[ht]
\begin{tabular*}{\textwidth}{lr}
\includegraphics[width=3.2in]{SCRIPT_FIGURES/flow_rate_open_nozzles} &
\includegraphics[width=3.2in]{SCRIPT_FIGURES/flow_rate_water_mass}
\end{tabular*}
\caption[Output of the flow rate test case.]{Output of the {\bf flow\_rate} test case.}
\label{flow_rate}
\end{figure}

\subsection{Specified Entrainment (Velocity Patch)}
\label{info:velocity_patch}

The details of the sprinkler head geometry and spray atomization are practically impossible to resolve in a fire calculation.  As a result, the local gas phase entrainment by the sprinkler is difficult to predict.  As an alternative, it is possible to specify the local gas velocity in the vicinity of the sprinkler nozzle.  The {\ct PROP} line may be used to specify a polynomial function for a specific velocity component and this function may be ``patched'' into the flow field using a device.  This device is given the quantity {\ct 'VELOCITY PATCH'} and is initially inactive.  The velocity patch must be actived with a separate control device, as discussed in Section \ref{info:basic_control}.  The user specifies the local region for the velocity patch using {\ct XB} for the device.  The polynomial is defined as a second-order Taylor expansion about the point {\ct XYZ} (the default value of {\ct XYZ} is the center of {\ct XB}).  FDS then uses an immersed boundary method to force the local velocity component to satisfy the polynomial.  The polynomial is specified by the coefficients {\ct P0}, {\ct PX(1\!:\!3)}, and {\ct PXX(1\!:\!3,1\!:\!3)}, which represent, respectively, the value of the $k$th velocity component, the first derivatives, and the second derivatives at point {\ct XYZ}.  Note that the first derivatives are represented by a three component array and the second derivatives are represented by a symmetric $3 \times 3$ array---only the upper triangular part needs to be specified.  The polynomial is given by (note that summation of repeated indices is implied):
\begin{equation}
u_k(\mathbf{r}) = \underbrace{(u_k)_0}_{\mbox{\ct P0}} \,\,+\,\, r_i \underbrace{\left( \frac{\partial u_k}{\partial x_i} \right)_{\!\!\!0}}_{\mbox{\ct PX(1\!:\!3)}} \,\,+\,\,\frac{ r_i r_j}{2} \underbrace{\left(\frac{\partial^2 u_k}{\partial x_i \partial x_j}\right)_{\!\!\!0}}_{\mbox{\ct PXX(1\!:\!3,1\!:\!3)}}
\end{equation}
The vector ${\bf r}$ is the position of the velocity storage location relative to the point {\ct XYZ}.  The specific velocity component is specified on {\ct PROP} by the integer {\ct VELOCITY\_COMPONENT}.  Below we provide an example set of {\ct PROP} and {\ct DEVC} lines to specify a parabolic profile for the vertical component of velocity.

\footnotesize
\begin{verbatim}
&PROP ID='p1', VELOCITY_COMPONENT=3, P0=-1,PXX(1,1)=5,PXX(2,2)=5 /
&DEVC XB=-.1,.1,-.1,.1,.9,.95, QUANTITY='VELOCITY PATCH',PROP_ID='p1', DEVC_ID='t1'/
&DEVC ID='t1', XYZ=0,0,.9, QUANTITY='TIME', SETPOINT=10/
\end{verbatim}

\normalsize
\noindent
In this example, a velocity patch is activated at 10 s in the simulation.  Any $w$ components of velocity with staggered storage locations within the box {\ct XB=-.1,.1,-.1,.1,.9,.95} will be driven toward the value specified by the polynomial profile {\ct 'p1'}.  It is up to the user to ensure that the device box encompasses the staggered storage locations (see the theory manual \cite{FDS_Math_Guide} for a discussion on the face-centered velocity storage locations).

\subsection{Heat Detectors}
\label{info:heat_detectors}

{\ct QUANTITY='LINK TEMPERATURE'} defines a heat detector, which uses essentially the same activation algorithm as a sprinkler, without the water spray.

\footnotesize
\begin{verbatim}
&DEVC ID='HD_66', PROP_ID='Acme Heat', XYZ=2.3,4.6,3.4 /
&PROP ID='Acme Heat', QUANTITY='LINK TEMPERATURE', RTI=132., ACTIVATION_TEMPERATURE=74. /
\end{verbatim}

\normalsize
\noindent
Like a sprinkler, {\ct RTI} is the Response Time Index in units of
$\sqrt{\hbox{m}\cdot \hbox{s}}$.
{\ct ACTIVATION\_TEMPERATURE} is the link activation temperature in degrees C (Default 74~$^\circ$C).
{\ct INITIAL\_TEMPERATURE} is the initial temperature of the link in units of $^\circ$C (Default {\ct TMPA}).



\subsection{Smoke Detectors}
\label{info:smoke_detector}

A smoke detector is defined in the input file with an entry similar to:

\footnotesize
\begin{verbatim}
&DEVC ID='SD_29', PROP_ID='Acme Smoke Detector', XYZ=2.3,4.6,3.4 /
&PROP ID='Acme Smoke Detector', QUANTITY='CHAMBER OBSCURATION', LENGTH=1.8,
      ACTIVATION_OBSCURATION=3.28 /
\end{verbatim}

\normalsize
\noindent
for the single parameter Heskestad model. Note that a {\ct PROP} line is mandatory for a smoke detector, in which case the
{\ct DEVC QUANTITY} can be specified on the {\ct PROP} line. For the four parameter Cleary model, use a {\ct PROP} line like:

\footnotesize
\begin{verbatim}
&PROP ID='Acme Smoke Detector I2',QUANTITY='CHAMBER OBSCURATION',
      ALPHA_E=1.8,BETA_E=-1.1,ALPHA_C=1.0,BETA_C=-0.8,ACTIVATION_OBSCURATION=3.28 /
\end{verbatim}

\normalsize
\noindent
where the two characteristic filling or ``lag'' times are of the form:
\be \delta t_e = \alpha_e u^{\beta_e} \quad ; \quad \delta t_c = \alpha_c u^{\beta_c} \ee
The default detector parameters are for the Heskestad model with a characteristic {\ct LENGTH} of
1.8~m. For the Cleary model, the {\ct ALPHA}s and {\ct BETA}s must all be listed explicitly.
Suggested constants for unidentified ionization and photoelectric detectors
presented in Table~\ref{tab:sdvalues}.
{\ct ACTIVATION\_OBSCURATION} is the threshold value in units of \%/m.
The threshold can be set according to the setting commonly provided by the manufacturer.
The default setting is 3.28~\%/m (1~\%/ft).

\begin{table}[ht]
\caption[Suggested Values for Smoke Detector Model.]{Suggested Values for Smoke Detector Model. See Ref.~\cite{SFPE} for others.}
\vspace{0.1in}
\label{tab:sdvalues}
\begin{center}
\begin{tabular}{|l||c|c|c|c|}
\hline
Detector                      & $\alpha_e$  &  $\beta_e$   &  $\alpha_c, \; L$   &  $\beta_c$  \\ \hline \hline
Cleary Ionization    I1       & 2.5         & -0.7         &  0.8                &  -0.9      \\ \hline
Cleary Ionization    I2       & 1.8         & -1.1         &  1.0                &  -0.8      \\ \hline
Cleary Photoelectric P1       & 1.8         & -1.0         &  1.0                &  -0.8      \\ \hline
Cleary Photoelectric P2       & 1.8         & -0.8         &  0.8                &  -0.8      \\ \hline
Heskestad Ionization          & ---         & ---          &  1.8                &  ---       \\ \hline\end{tabular}
\end{center}
\end{table}

\subsubsection{Defining Smoke}
\label{info:alternative_smoke}

By default, FDS assumes that the smoke from a fire is generated in direct proportion to the heat release rate. A value
of {\ct SOOT\_YIELD=0.01} on the {\ct REAC} line means that the smoke generation rate is 0.01 of the fuel burning rate. The
``smoke'' in this case is not explicitly tracked by FDS, but rather is assumed to be a function of the combustion products lumped species.

Suppose, however, that you want to define your own ``smoke'' and that you want to specify its production rate independently of
the HRR (or even in lieu of an actual fire, like a smouldering source). You might also want to define a mass extinction coefficient for the
smoke and an assumed molecular weight (as it will be tracked like a gas species). Finally, you also want to visualize the smoke using
the {\ct SMOKE3D} feature in Smokeview. Use the following lines:

\footnotesize
\begin{verbatim}
&SPEC ID='MY SMOKE', MW=29., MASS_EXTINCTION_COEFFICIENT=8700. /
&SURF ID='SMOULDER', TMP_FRONT=1000., MASS_FLUX(1)=0.0001, COLOR='RED' /
&VENT XB=0.6,1.0,0.3,0.7,0.0,0.0, SURF_ID='SMOULDER' /

&PROP ID='Acme Smoke', QUANTITY='CHAMBER OBSCURATION', SPEC_ID='MY SMOKE' /
&DEVC XYZ=1.00,0.50,0.95, PROP_ID='Acme Smoke', ID='smoke_1' /

&DUMP SMOKE3D_QUANTITY='MY SMOKE', DT_PL3D=30. /
\end{verbatim}

\normalsize
\noindent
The same smoke detector model is used that was described above. Only now, the mass fraction of your species {\ct 'MY SMOKE'} is used in the
algorithm, rather than that associated with the lumped species. Note that your species will not participate in the radiation calculation. It
will merely serve as a surrogate for smoke. Note also that if you specify explicitly a smoke surrogate, you should set {\ct SOOT\_YIELD=0} on the
{\ct REAC} line to prevent FDS from including smoke as a component of the combustion product lumped species.



\subsection{Beam Detection Systems}
\label{info:beam_detector}

A beam detector can be defined by specifying the endpoints, {\ct (x1,y1,z1) and (x2,y2,z2)}, of the beam and the
total percent obscuration at which the detector activates.  The two endpoints must lie in the same mesh.  FDS determines which mesh
cells lie along the linear path defined by the two endpoints.  The beam detector response is evaluated as
\be
  \hbox{Obscuration}  = \left(1 - \exp \left( -K_m \sum_{i=1}^N {\rho_{soot,i}\; \Delta x_i} \right)  \right) \times 100  \; \; \hbox{\%}
\ee
where $i$ is a mesh cell along the path of the beam, $\rho_{soot,i}$ is the soot density of the mesh cell, $ \Delta x_i$
is the distance within the mesh cell that is traversed by the beam, and $K_m$ is the mass extinction coefficient. The line in the input file has the form:

\footnotesize
\begin{verbatim}
&DEVC XB=x1,x2,y1,y2,z1,z2, QUANTITY='PATH OBSCURATION', ID='beam1', SETPOINT=0.33 /
\end{verbatim}
\normalsize

\noindent
Since a single linear path cannot span more than one mesh, having a beam detector that crosses multiple meshes will require post processing.
Break the beam detector path into multiple {\ct DEVC} lines, one for each mesh that the beam crosses.  The total obscuration is given by
\be
  \hbox{Obscuration}  = \left[ 1 -  \prod_{i=1}^N \left( 1-output_i/100 \right)  \right] \times 100  \hbox{\%}
\ee
where $output_i$ is the FDS output for the beam detector of the $i$th path (note that the bracketed term contains a product rather than a sum).

\subsubsection{Example Case: {\bf beam\_detector}}

A 10~m by 10~m by 4~m compartment is filled with smoke, represented as 0.006~kg/kg of
the lumped species variable, {\ct LUMPEDS SPECIES 1} footnote{In its default mode, the mixing controlled combustion
model requires transport equations for two gas species -- {\ct LUMPED SPECIES 1} and {\ct LUMPED SPECIES 2}. The first
is just the fuel gas, the second is a combination of the products of combustion.}. The default soot yield is
0.01~kg/kg, resulting in a uniform soot density of 71.9~mg/m$^3$.
Using the default mass extinction coefficient of
8700~m$^2$/kg, the optical depth is calculated to be 0.626~m$^{-1}$.  The
compartment has a series of obstructions located at increasing distance from the front in increments of
1~m.  The correlation for the output quantity
{\ct VISIBILITY}, Eq.~(\ref{vis}), produces a visibility distance of 4.8~m.
When viewing the smoke levels with Smokeview, you should just barely see
the fifth obstacle which is at a distance of 5~m from the front of the compartment.
If this is the case, Smokeview is properly displaying the obscuration of the
smoke.  Three beam detectors are also
placed in the compartment.  These all have a path length of 10~m,
but are at different orientations within the compartment.
Using the optical depth of 0.626~m$^{-1}$ and the path length of
10~m, the expected total obscuration is 99.81~\%, which is the
result computed by FDS for each of the three detectors.

\begin{figure}[ht]
\begin{tabular*}{\textwidth}{lr}
\includegraphics[width=3.2in]{SCRIPT_FIGURES/beam_detector_nosmoke} &
\includegraphics[width=3.2in]{SCRIPT_FIGURES/beam_detector_smoke}
\end{tabular*}
\caption[Example of a beam detector.]{Output of the {\bf beam\_detector} test case.}
\label{beam_detector}
\end{figure}




\subsection{Aspiration Detection Systems}
\label{info:aspiration_detector}

An aspiration detection system groups together a series of soot measurement devices.
An aspiration system consists of a sampling pipe network that draws air from a series of locations to a central point
where an obscuration measurement is made.  To define such a system in FDS, you must provide the sampling locations,
sampling flow rates, the transport time from each sampling location, and if an alarm output is desired, the overall obscuration
``setpoint.''  One or more {\ct DEVC} inputs are used to specify details of the sampling locations, and one additional input is
used to specify the central detector:

\footnotesize
\begin{verbatim}
&DEVC XYZ=..., QUANTITY='DENSITY', SPEC_ID='SOOT', ID='soot1', DEVC_ID='asp1',
      FLOWRATE=0.1, DELAY=20 /
&DEVC XYZ=..., QUANTITY='DENSITY', SPEC_ID='SOOT', ID='soot2', DEVC_ID='asp1',
      FLOWRATE=0.2, DELAY=10 /
 ...
&DEVC XYZ=..., QUANTITY='DENSITY', SPEC_ID='SOOT', ID='sootN', DEVC_ID='asp1',
      FLOWRATE=0.3, DELAY=30 /

&DEVC XYZ=..., QUANTITY='ASPIRATION', ID='asp1', BYPASS_FLOWRATE=0.4, SETPOINT=0.02 /
\end{verbatim}
\normalsize

\noindent
where the {\ct DEVC\_ID} is used at each sampling point to reference the central detector, {\ct FLOWRATE} is the gas
flow rate in kg/s, {\ct DELAY} is the transport time (in seconds) from the sampling location to the central detector,
{\ct BYPASS\_FLOWRATE} is the flow rate in kg/s of any air drawn into the system from outside the computational
domain (accounts for portions of the sampling network lying outside the domain defined by the {\ct MESH}
inputs), and {\ct SETPOINT} is the alarm threshold obscuration in units of \%/m. The output of the aspiration system is
computed as
\be
  \hbox{Obscuration}  = \left(1 - \exp \left( -K_m \frac {\sum_{i=1}^N {\rho_{soot,i}( t-t_{d,i}) \; \dm_i}} {\sum_{i=1}^N{ \dm_i} } \right)  \right) \times 100  \; \; \hbox{\%/m}
\ee
where $\dm_i$ is the mass {\ct FLOWRATE} of the $i$th sampling location, $\rho_{soot,i}( t-t_{d,i})$ is the soot density at
the $i$th sampling location $t_{d,i}$ s prior ({\ct DELAY}) to the current time $t$, and $K_m$ is the {\ct MASS\_EXTINCTION\_COEFFICIENT} associated with visible light.

\subsubsection{Example Case: aspiration\_detector}

A cubical compartment, 2~m on a side has a three
sampling location aspiration system.  The three locations
have equal flow rates of 0.3~kg/s, and
transport times of 50, 100, and 150~s, respectively.  No bypass flow rate is
specified for the aspiration detector.  Combustion products are forced into the bottom of the compartment at a rate of 1~kg/s. The {\ct SOOT\_YIELD=0.001}.
Mass is removed from the top of the compartment at a rate of 1~kg/s.
The aspiration detector shows an increasing obscuration over time.  There is a delay of slightly over 50~s in
the initial increase which results from the 50~s transport time for the first sampling location plus a short
period of time to transport the combustion products to the sampling location.  The detector response has three plateaus
that result from the delay times of the sampling locations.  The sampling points are co-located, so each plateau represents
an additional one third of the soot being transported to the detector.  The soot density at the sampling point is
$7.1 \times 10^{-5}$~kg/m$^3$.  Using this value the plateaus are computed as 18~\%, 33.2~\%, and 45.7~\%, as seen
in Fig.~\ref{aspiration_detector}.

\begin{figure}[ht]
\begin{center}
\includegraphics[width=4.in]{SCRIPT_FIGURES/aspiration_detector}
\end{center}
\caption[Output of {\bf aspiration\_detector} test case.]{Output of {\bf aspiration\_detector} test case.}
\label{aspiration_detector}
\end{figure}



\subsection{Electrical Cable Failure}
\label{info:THIEF}

Petra Andersson and Patrick Van Hees of the Swedish National Testing and Research Institute
(SP) have proposed that the thermally-induced electrical failure (THIEF) of a cable can be predicted
via a simple one-dimensional heat transfer calculation, under the assumption that the cable can
be treated as a homogenous cylinder~\cite{Andersson:2005}. Their results for PVC
cables were encouraging and suggested that the simplification of the analysis is reasonable and
that it should extend to other types of cables. The assumptions underlying the THIEF model are as follows:
\begin{enumerate}
\item The heat penetration into a cable of circular cross section is largely in the radial direction.
This greatly simplifies the analysis, and it is also conservative because it is assumed that
the cable is completely surrounded by the heat source.
\item The cable is homogenous in composition. In reality, a cable is constructed of several
different types of polymeric materials, cellulosic fillers, and a conducting metal, most
often copper.
\item The thermal properties -- conductivity, specific heat, and density -- of the assumed
homogenous cable are independent of temperature. In reality, both the thermal
conductivity and specific heat of polymers are temperature-dependent, but this
information is very difficult to obtain from manufacturers.
\item It is assumed that no decomposition reactions occur within the cable during its heating,
and ignition and burning are not considered in the model. In fact, thermoplastic cables
melt, thermosets form a char layer, and both off-gas volatiles up to and beyond the point
of electrical failure.
\item Electrical failure occurs when the temperature just inside the cable jacket reaches an
experimentally determined value.
\end{enumerate}
Obviously, there are considerable assumptions inherent in the Andersson and Van Hees THIEF
model, but their results for various polyvinyl chloride (PVC) cables suggested that it may be
sufficient for engineering analyses of a wider variety of cables. The U.S. Nuclear Regulatory
Commission sponsored a study of cable failure known as CAROLFIRE~\cite{CAROLFIRE}. The primary project objective of CAROLFIRE was to
characterize the various modes of electrical
failure ({\em e.g.} hot shorts, shorts to ground) within bundles of power, control and instrument cables.
A secondary objective of the project was to develop a simple model to predict thermally-induced
electrical failure when a given interior region of the cable reaches an empirically
determined threshold temperature. The measurements used for these purposes are described in
Volume II of the CAROLFIRE test report. Volume III describes the modeling.

The THIEF model can only predict the temperature profile within the cable as a function of time,
given a time-dependent exposing temperature or heat flux. The model does not predict at what
temperature the cable fails electrically. This information is gathered from experiment. The
CAROLFIRE experimental program included bench-scale, single cable experiments in which
temperature measurements were made on the surface of, and at various points within, cables
subjected to a uniform heat flux. These experiments provided the link between internal cable
temperature and electrical failure. The model can only predict the interior temperature and infer
electrical failure when a given temperature is reached. It is presumed that the
temperature of the centermost point in the cable is not necessarily the indicator of electrical
failure. This analysis method uses the temperature just inside the cable jacket rather than the
centermost temperature, as that is where electrical shorts in a multi-conductor cable are most
likely to occur first.

To use the THIEF model in FDS, add lines similar to the following to the input file:

\footnotesize
\begin{verbatim}
&MATL ID='plastic', DENSITY=2535., CONDUCTIVITY=0.2, SPECIFIC_HEAT=1.5 /
&SURF ID='cylinder', THICKNESS=0.00815, LENGTH=0.1, MATL_ID='plastic', GEOMETRY='CYLINDRICAL' /
&PART ID='Cable Segment', SURF_ID='cylinder', ORIENTATION(1,1:3)=0.,0.,1., STATIC=.TRUE. /
&INIT ID='Cable', XB=0.01,0.01,0.,0.,0.,0., N_PARTICLES=1, PART_ID='Cable Segment' /
&DEVC XYZ=0.01,0.00,0.000, ID='Cable Temp', INIT_ID='Cable', QUANTITY='INSIDE WALL TEMPERATURE', DEPTH=0.00152 /
\end{verbatim}
\normalsize

\noindent
The THIEF model assumes that the cable plastic material has a thermal conductivity of 0.2~W/m/K and a specific heat of 1.5~kJ/kg/K. If you change these
values, you are no longer using the THIEF model. The density is the mass per unit length of the cable divided by its cross sectional area.
The {\ct THICKNESS} is the radius of the cylindrical cable in units of m. The {\ct LENGTH}, in m, is needed
by FDS because it assumes that the cable is a cylindrical segment of a certain length. It has no impact on the simulation, and its value it typically the size of a grid cell.
The {\ct ORIENTATION} tells FDS the direction of the prevailing radiative source. The first argument indicates that there can be more than one {\ct ORIENTATION}.
{\ct STATIC=.TRUE.} prevents the cable from moving. The {\ct INIT} line is used to position the cable within the computational domain.
The {\ct DEVC} line records the cables inner temperature, in this case 1.52~mm below the surface. This is typically the jacket thickness.


\clearpage

\section{Basic Control Logic}
\label{info:basic_control}

Devices can be used to control various actions, like creating and removing obstructions, or activating and deactivating
fans and vents. Every device has an associated {\ct QUANTITY}, whether it is included directly on the {\ct DEVC} line or
indirectly on the optional {\ct PROP} line. Using the {\ct DEVC} parameter {\ct SETPOINT}, you can trigger an action to
occur when the {\ct QUANTITY} value passes above, or below, the given {\ct SETPOINT}. The choice is dictated by the
given {\ct TRIP\_DIRECTION}, which is just a positive or negative integer.
The following parameters dictate how a device will control something:
\begin{description}
\item[{\ct SETPOINT}] The value of the device at which its state changes.  For a detection type of device
(e.g. heat or smoke) this value is taken from the device's {\ct PROP} inputs and need not be specified on the {\ct DEVC} line.
\item[{\ct TRIP\_DIRECTION}] A positive integer means the device will change state when its value increases
past the setpoint and a negative integer means the device will change state
when its value decreases past the setpoint.  The default value is +1.
\item[{\ct LATCH}] If this logical value is set to {\ct .TRUE.} the device will only change state once.
The default value is {\ct .TRUE.}.
\item[{\ct INITIAL\_STATE}] This logical value is the initial state of the device. The default value
is {\ct .FALSE.} For example, if an obstruction associated with the device is to disappear, set {\ct INITIAL\_STATE=.TRUE.}
\end{description}
If you desire to control FDS using more complex logic than can be provided
by the use of a single device and its setpoint, control functions can be specified using the {\ct CTRL} input.
See Section \ref{info:CTRL} for more on {\ct CTRL} functions.
The simplest example of a device is just a timer:

\footnotesize
\begin{verbatim}
&DEVC XYZ=1.2,3.4,5.6, ID='my clock', QUANTITY='TIME', SETPOINT=30. /
\end{verbatim}
\normalsize

\noindent
Anything associated with the device via the parameter, {\ct DEVC\_ID='my clock'}, will change its state at 30~s. For example,
if the text were added to an {\ct OBST} line, that obstruction would change from its {\ct INITIAL\_STATE} of {\ct .FALSE.} to {\ct .TRUE.} after
30~s. In other words, it would be created at 30~s instead of at the start of the simulation. This is a simple way to open a door or window.

When using a {\ct DEVC} output to control FDS, the instanteneous value of the the {\ct DEVC} is used.  For some {\ct QUANTITY} types, such as {\ct TEMPERATURE}, this output can be very noisy.  To prevent a spurious spike from causing a state change of the {\ct DEVC} you can specify the parameter {\ct SMOOTHING\_FACTOR}.  This is a parameter that can vary between 0 and 1.  It performs an exponential smoothing of the {\ct DEVC} output as follows:

\be
\bar{x}^n=\bar{x}^{n-1} \, \mbox{\ct SMOOTHING\_FACTOR} + x \,(1-\mbox{\ct SMOOTHING\_FACTOR})
\ee

\noindent
where n is the timestep, $x$ is the instanteneous device output and $\bar{x}$ is the smoothed output.  The {\ct SMOOTHING\_FACTOR} defaults to 0 which means no smoothing is being performed.

\subsection{Creating and Removing Obstructions}
\label{info:create_remove}

In many fire scenarios, the opening or closing of a door or window
can lead to dramatic changes in the course of the fire. Sometimes these
actions are taken intentionally, sometimes as a result of the fire.
Within the framework of an FDS calculation, these actions are
represented by the creation or removal of solid obstacles, or the
opening or closing of exterior vents.

Remove or create a solid obstruction by assigning the character string {\ct DEVC\_ID} the name of
a {\ct DEVC} {\ct ID} on the {\ct OBST} line that is to be created or removed.  This will direct
FDS to remove or create the obstruction when
the device changes state to {\ct .FALSE.} or {\ct .TRUE.}, respectively. For example, the lines

\footnotesize
\begin{verbatim}
&OBST XB=..., SURF_ID='...', DEVC_ID='det2' /
                   .
                   .
&DEVC XYZ=..., PROP_ID='...', ID='det1' /
&DEVC XYZ=..., PROP_ID='...', ID='det2', INITIAL_STATE=.TRUE. /
\end{verbatim}
\normalsize

\noindent
will cause the given obstruction to be removed when the specified {\ct DEVC} changes state.

Creation or removal at a predetermined time can be performed using a {\ct DEVC} that has {\ct TIME} as
its measured quantity. For example, the following instructions will cause the specified {\ct HOLE}s and {\ct OBST}structions to
appear/disappear at the various designated times. These lines are part of the simple test case called {\bf create\_remove.fds}.

\footnotesize
\begin{verbatim}
&HOLE XB=0.25,0.45,0.20,0.30,0.20,0.30, COLOR='RED',   DEVC_ID='timer 1' /
&HOLE XB=0.25,0.45,0.70,0.80,0.70,0.80, COLOR='GREEN', DEVC_ID='timer 2' /
&OBST XB=0.70,0.80,0.20,0.30,0.20,0.30, COLOR='BLUE',  DEVC_ID='timer 3' /
&OBST XB=0.70,0.80,0.60,0.70,0.60,0.70, COLOR='PINK',  DEVC_ID='timer 4' /

&DEVC XYZ=..., ID='timer 1', SETPOINT= 1., QUANTITY='TIME', INITIAL_STATE=.FALSE./
&DEVC XYZ=..., ID='timer 2', SETPOINT= 2., QUANTITY='TIME', INITIAL_STATE=.TRUE. /
&DEVC XYZ=..., ID='timer 3', SETPOINT= 3., QUANTITY='TIME', INITIAL_STATE=.FALSE./
&DEVC XYZ=..., ID='timer 4', SETPOINT= 4., QUANTITY='TIME', INITIAL_STATE=.TRUE. /
\end{verbatim}
\normalsize

\noindent
The blue obstruction appears at 3~s because its initial state is false, meaning that it does not exist initially. The pink
obstruction disappears at 4~s because it does exist initially. The red hole is created at 1~s because it does not exist initially (it is filled in with a
red obstruction). The green hole is filled in at 2~s because it does exist (as a hole) initially. {\bf You should always try a simple example first before
embarking on a complicated creation/removal scheme for obstructions and holes.}

To learn how to create and remove obstructions multiple times, see Section~\ref{info:CUSTOM} for information about the custom control feature.



\begin{warning}
An obstruction that makes up the boundary of a ``pressure zone'' (see Section~\ref{info:ZONE}) {\em can} be created or
removed.
\end{warning}


\subsection{Activating and Deactivating Vents}
\label{info:activate_deactivate}

When a device or control function is applied to a {\ct VENT}, the purpose is to either activate or deactivate any time ramp associated with
the {\ct VENT} via its {\ct SURF\_ID}. For example, to control a fan with the device {\ct 'det2'}, do the following:

\footnotesize
\begin{verbatim}
&SURF ID='FAN', VOLUME_FLUX=5. /
&VENT XB=..., SURF_ID='FAN', DEVC_ID='det2' /
&DEVC ID='det2', XYZ=..., QUANTITY='TIME', SETPOINT=30., INITIAL_STATE=.FALSE. /
\end{verbatim}
\normalsize

\noindent
Note that at 30~s, the ``state'' of the {\ct 'FAN'} changes from {\ct .FALSE.} to {\ct .TRUE.}, or more simply, the {\ct 'FAN'} turns on. Since there
is no explicit time function associated with the {\ct 'FAN'}, the default 1~s ramp-up will begin at 30~s instead of at 0~s.

If in this example {\ct INITIAL\_STATE=.TRUE.}, then the fan should ``deactivate,'' or turn off at 30~s. Essentially, ``activation'' of a {\ct VENT} causes all associated
time functions to be delayed until the device {\ct SETPOINT} is reached. ``Deactivation'' of a {\ct VENT} turns off all time functions. Usually this means
that the parameters on the {\ct SURF} line are all nullified, so it is a good idea to check the functionality with a simple example.


\begin{warning}
Until further notice, a {\ct 'MIRROR'} or {\ct 'OPEN'} {\ct VENT} should not be activated or deactivated.
You can, however, place an obstruction in front of an {\ct 'OPEN'} {\ct VENT} and then create it or remove it to model the closing or opening of a door or
window.
\end{warning}



\newpage

\section{Advanced Control Functions: The \texorpdfstring{{\tt CTRL}}{CTRL} Namelist Group}
\label{info:CTRL}

There are many systems whose functionality cannot be described by a simple device with a single ``setpoint.''
Consider for example, a typical HVAC system.  It is controlled by a thermostat that is given a temperature setpoint.
The system turns on when the temperature goes below the setpoint by some
amount and then turns off when the temperature rises above that same setpoint by some amount.
This behavior can not be defined by merely specifying a single setpoint.
You must also define the range or ``deadband'' around the setpoint, and whether an
increasing or decreasing temperature activates the system.  For the HVAC example, crossing the
lower edge of the deadband activates heating; crossing the upper edge activates cooling.

While HVAC is not the primary purpose of FDS, there are numerous situations where a system responds to
the fire in a non-trivial way.  The {\ct CTRL} input is used to define these more complicated behaviors.
A control function will take as input the outputs of one or more devices and/or control functions.
In this manner, complicated behaviors can be simulated by making functions of other functions.  For most of the
control function types, the logical value output of the devices and control functions and the time they last changed
state are used as the inputs.

For any object for which a {\ct DEVC\_ID} can be specified (such as {\ct OBST} or {\ct VENT}), a {\ct CTRL\_ID} can be
specified instead.
\begin{table}[h!]
\caption{Control function types for {\ct CTRL}}
\label{tab:funcvalues}
\begin{center}
\begin{tabular}{|l||l|}
\hline
Function Type                     & Description   \\ \hline \hline
{\ct ANY}                         & Changes state if \underline{any} {\ct INPUT}s are {\ct .TRUE.}     \\ \hline
{\ct ALL}                         & Changes state if \underline{all} {\ct INPUT}s are {\ct .TRUE.}  \\ \hline
{\ct ONLY}                        & Changes state if and \underline{only} if {\ct N} {\ct INPUT}s are {\ct .TRUE.}     \\ \hline
{\ct AT\_LEAST}                   & Changes state if \underline{at least} {\ct N} {\ct INPUT}s are {\ct .TRUE.}     \\ \hline \hline
%{\ct CYCLING}                     & Changes state in a cyclical manner once its sole {\ct INPUT} is {\ct .TRUE.}     \\ \hline
{\ct TIME\_DELAY}                 & Changes state {\ct DELAY} s after {\ct INPUT} becomes {\ct .TRUE.}      \\ \hline
{\ct CUSTOM}                      & Changes state based on evaluating a {\ct RAMP} of the function's input     \\ \hline
{\ct DEADBAND}                    & Behaves like a thermostat     \\ \hline
{\ct KILL}                        & Terminates code execution if its sole {\ct INPUT} is {\ct .TRUE.}  \\ \hline
{\ct RESTART}                     & Dumps restart files if its sole {\ct INPUT} is {\ct .TRUE.} \\ \hline
{\ct SUM}                         & Sums the outputs of the {\ct INPUT}s \\ \hline
{\ct SUBTRACT}                    & Subtracts the second {\ct INPUT} from the first \\ \hline
{\ct MULTIPLY}                    & Multiplies the outputs of the {\ct INPUT}s \\ \hline
{\ct DIVIDE}                      & Divides the first {\ct INPUT} by the second \\ \hline
{\ct POWER}                       & The first {\ct INPUT} to the power of the second \\ \hline
\end{tabular}
\end{center}
\end{table}
A control is identified by the {\ct ID} parameter.  The inputs to the control are identified
by the {\ct INPUT\_ID} parameter.  {\ct INPUT\_ID} would be passed one or more {\ct ID} strings
from either devices or other controls.


If you want to design a system of controls and devices that involves multiple changes of state,
include the attribute {\ct LATCH=.FALSE.} on the relevant {\ct DEVC} or {\ct CTRL} input lines.
By default, devices and controls may only change state once, like a sprinkler activating or
smoke detector alarming. {\ct LATCH=.TRUE.} by default for both devices and controls.

\subsection{Control Functions: \texorpdfstring{{\tt ANY}}{ANY}, \texorpdfstring{{\tt ALL}}{ALL}, \texorpdfstring{{\tt ONLY}}{ONLY}, and
\texorpdfstring{{\tt AT\_LEAST}}{AT\_LEAST}}

\label{info:FUNCTION_TYPE}

Suppose you want an obstruction to be removed (a door is opened, for example) after any
of four smoke detectors in a room has activated. Use input lines of the form:

\footnotesize
\begin{verbatim}
&OBST XB=..., SURF_ID='...', CTRL_ID='SD' /

&DEVC XYZ=1,1,3, PROP_ID='Acme Smoker', ID='SD_1' /
&DEVC XYZ=1,4,3, PROP_ID='Acme Smoker', ID='SD_2' /
&DEVC XYZ=4,1,3, PROP_ID='Acme Smoker', ID='SD_3' /
&DEVC XYZ=4,4,3, PROP_ID='Acme Smoker', ID='SD_4' /
&CTRL ID='SD', FUNCTION_TYPE='ANY', INPUT_ID='SD_1','SD_2','SD_3','SD_4',
      INITIAL_STATE=.TRUE. /
\end{verbatim}
\normalsize

\noindent
The {\ct INITIAL\_STATE} of the control function {\ct SD} is {\ct .TRUE.},
meaning that the obstruction exists initially. The ``change of state'' means that the obstruction is
removed when \underline{any} smoke detector alarms.  By default, the {\ct INITIAL\_STATE}
of the control function {\ct SD} is {\ct .FALSE.}, meaning that the obstruction does not exist initially.

Suppose that now you want the obstruction to be created (a door is closed, for example) after all
four smoke detectors in a room have activated. Use a control line of the form:

\footnotesize
\begin{verbatim}
&CTRL ID='SD', FUNCTION_TYPE='ALL', INPUT_ID='SD_1','SD_2','SD_3','SD_4' /
\end{verbatim}
\normalsize

\noindent
The control functions {\ct AT\_LEAST} and {\ct ONLY} are generalizations of {\ct ANY} and {\ct ALL}. For example,

\footnotesize
\begin{verbatim}
&CTRL ID='SD', FUNCTION_TYPE='AT_LEAST', N=3, INPUT_ID='SD_1','SD_2','SD_3','SD_4' /
\end{verbatim}

\normalsize
\noindent
changes the state from {\ct .FALSE.} to {\ct .TRUE.} when \underline{at least}
3 detectors activate. Note that in this example, and the example below, the parameter {\ct N} is used to
specify the number of activated or ``TRUE'' inputs required for the conditions
of the Control Function to be satisfied. The control function,

\footnotesize
\begin{verbatim}
&CTRL ID='SD', FUNCTION_TYPE='ONLY', N=3, INPUT_ID='SD_1','SD_2','SD_3','SD_4' /
\end{verbatim}

\normalsize
\noindent
changes the state from {\ct .FALSE.} to {\ct .TRUE.} when 3,
and \underline{only} 3, detectors activate.


\subsection{Control Function: \texorpdfstring{{\tt TIME\_DELAY}}{TIME\_DELAY}}

\label{info:TIME_DELAY}

There is often a time delay between when a device activates and when some other action occurs, like in a dry pipe sprinkler system.

\footnotesize
\begin{verbatim}
&DEVC XYZ=2,2,3, PROP_ID='Acme Sprinkler_link', QUANTITY='LINK TEMPERATURE',
      ID='Spk_29_link', CTRL_ID='dry pipe' /
&DEVC XYZ=2,2,3, PROP_ID='Acme Sprinkler', QUANTITY='CONTROL', ID='Spk_29',
      CTRL_ID='dry pipe' /
&CTRL ID='dry pipe', FUNCTION_TYPE='TIME_DELAY', INPUT_ID='Spk_29_link', DELAY=30. /
\end{verbatim}
\normalsize

\noindent
This relationship between a sprinkler and its pipes means that the sprinkler spray is controlled (in this case delayed) by the
{\ct 'dry pipe'}, which adds 30~s to the activation time of {\ct Spk\_29}, measured by  {\ct Spk\_29\_link},
before water can flow out of the head.


\subsection{Control Function: \texorpdfstring{{\tt DEADBAND}}{DEADBAND}}
\label{info:DEADBAND}

This control function behaves like an HVAC thermostat.  It can operate in one of two modes analagous to heating or cooling.
The function is provided with an {\ct INPUT\_ID} which is the {\ct DEVC} whose value is used by the function,
a {\ct DEADBAND}, and the mode of operation by {\ct ON\_BOUND}.  If  {\ct ON\_BOUND='LOWER'},
the function changes state from its {\ct INITIAL\_VALUE} when the value of the {\ct INPUT\_ID} drops
below the lower value in {\ct DEADBAND} and reverts when it increases past the upper value, i.e. like a heating system.
The reverse will occur if {\ct ON\_BOUND='UPPER'}, i.e. like a cooling system.

For an HVAC example, the following lines of input would set up a simple thermostat:

\footnotesize
\begin{verbatim}
&SURF ID='FAN', TMP_FRONT=40., VOLUME_FLUX=-1. /
&VENT XB=-0.3,0.3,-0.3,0.3,0.0,0.0, SURF_ID='FAN', CTRL_ID='thermostat' /
&DEVC ID='TC', XYZ=2.4,5.7,3.6, QUANTITY='TEMPERATURE' /
&CTRL ID='thermostat', FUNCTION_TYPE='DEADBAND', INPUT_ID='TC',
      ON_BOUND='LOWER', SETPOINT=23.,27.,LATCH=.FALSE./
\end{verbatim} \normalsize

\noindent
Here, we want to control the {\ct VENT} that simulates the {\ct FAN}, which blows hot air
into the room. A {\ct DEVC} called {\ct TC} is positioned in the room to measure the {\ct TEMPERATURE}.
The {\ct thermostat} uses a {\ct SETPOINT} to turn on the
{\ct FAN} when the temperature falls below 23~$^\circ$C ({\ct ON\_BOUND='LOWER'})
and it turns off when the temperature rises above 27~$^\circ$C.

\begin{warning}
Note that a deadband controller needs to have {\ct LATCH} set to {\ct .FALSE.}
\end{warning}

\subsection{Control Function: \texorpdfstring{{\tt RESTART} and {\tt KILL}} {RESTARTKILL} }

There are times when you might only want to run a simulation until some
goal is reached.  Previously this could generally only be done by
constantly monitoring the simulation's output and manually stopping
the calculation when you determine that the goal has been reached.  The
{\ct KILL} control function can do this automatically.

Additionally there are analyses where you might want to create some
baseline condition and then run multiple permutations of that baseline.
For example, you might want to run a series of simulations where
different mitigation strategies are tested once a detector alarms.
Using the {\ct RESTART}
control function, you can cause a restart file
to be created once a desired condition is met.  The simulation can
continue and the restart files can be copied to have the job identifying string, {\ct CHID}, of
the various permutations (providing of course that the usual
restrictions on the use of restart files are followed).
For example, the lines

\footnotesize
\begin{verbatim}
&DEVC ID='temp', QUANTITY='TEMPERATURE', SETPOINT=1000., XYZ=4.5,6.7,3.6 /
&DEVC ID='velo', QUANTITY='VELOCITY', SETPOINT=10., XYZ=4.5,6.7,3.6 /

&CTRL ID='kill', FUNCTION_TYPE='KILL', INPUT_ID='temp' /
&CTRL ID='restart', FUNCTION_TYPE='RESTART', INPUT_ID='velo' /
\end{verbatim} \normalsize

\noindent
will ``kill'' the job and output restart files when the temperature at the given point rises above
1000~$^\circ$C; or just force restart files to be output when the velocity at a given point exceeds 10~m/s.



\subsection{Control Function: \texorpdfstring{{\tt CUSTOM}}{CUSTOM} }
\label{info:CUSTOM}

For most of the control function types, the logical (true/false) output of
the devices and control functions and the time they last changed
state are taken as inputs.  A {\ct CUSTOM} function uses the numerical output of a {\ct DEVC} along with
a {\ct RAMP} to determine the output of the function.  When the {\ct RAMP} output for the {\ct DEVC} value is negative, the
{\ct CTRL} will have the value of its {\ct INITIAL\_STATE}.  When the {\ct RAMP} output for the {\ct DEVC} value is positive, the
{\ct CTRL} will have the opposite value of its {\ct INITIAL\_STATE}. In the case below, the {\ct CUSTOM}
control function uses the numerical output of a timer device as its input.  The function returns true (the default value for
{\ct INITIAL\_STATE} is {\ct .FALSE.}) when the {\ct F} parameter
in the ramp specified with {\ct RAMP\_ID} is a positive value and
false when the {\ct RAMP} {\ct F} value is negative.
In this case, the control would start false and would switch to
true when the timer reaches 60~s.  It would then stay in a true
state until the timer reaches 120~s and would then change back to false.

\begin{warning}
Note that when using control functions the {\ct ID}s assigned to both the
{\ct CTRL} and the {\ct DEVC} inputs must be unique across both sets of inputs, i.e. you cannot use the
same {\ct ID} for both a control function and a device.
\end{warning}

\noindent
In the HVAC
example above, we could set the system to function
on a fixed cycle by using a {\ct CUSTOM} control function based on time:

\footnotesize
\begin{verbatim}
&SURF ID='FAN', TMP_FRONT=40., VOLUME_FLUX=-1. /
&VENT XB=-0.3,0.3,-0.3,0.3,0.0,0.0, SURF_ID='FAN', CTRL_ID='cycling timer' /
&DEVC ID='TIMER', XYZ=2.4,5.7,3.6, QUANTITY='TIME' /
&CTRL ID='cycling timer', FUNCTION_TYPE='CUSTOM, INPUT_ID='TIMER', RAMP_ID='cycle' /
&RAMP ID='cycle', T= 59, F=-1 /
&RAMP ID='cycle', T= 61, F= 1 /
&RAMP ID='cycle', T=119, F= 1 /
&RAMP ID='cycle', T=121, F=-1 /
\end{verbatim} \normalsize

\noindent
In the above example the fan will be off initially, turn on at 60~s and then turn off at 120~s.

You can make an obstruction appear and disappear multiple times by using lines like

\footnotesize
\begin{verbatim}
&OBST XB=..., SURF_ID='whatever', CTRL_ID='cycling timer' /
&DEVC ID='TIMER', XYZ=..., QUANTITY='TIME' /
&CTRL ID='cycling timer', FUNCTION_TYPE='CUSTOM', INPUT_ID='TIMER', RAMP_ID='cycle' /
&RAMP ID='cycle', T=  0, F=-1 /
&RAMP ID='cycle', T= 59, F=-1 /
&RAMP ID='cycle', T= 61, F= 1 /
&RAMP ID='cycle', T=119, F= 1 /
&RAMP ID='cycle', T=121, F=-1 /
\end{verbatim}

\normalsize
\noindent
The above will have the obstacle initially removed, then added at 60 s, and removed again at 120 s.

Experiment with these combinations using a simple
case before trying a case to make sure that FDS indeed is doing what is intended.

\subsection{Control Function: Math Operations }
\label{info:CONTROL_MATH}

The control functions that perform simple math operations ( {\ct SUM},  {\ct SUBTRACT},  {\ct MULTIPLY},  {\ct DIVIDE}, and  {\ct POWER}) can have a constant value specified as one of their inputs.  This is done by specifying one of the {\ct INPUT\_ID}s as {\ct 'CONSTANT'} and providing the value using the input {\ct CONSTANT}. For example, the inputs below represent a control function whose state would change when the square of the velocity exceeded 10 (see ~\ref{info:basic_control} for {\ct TRIP\_DIRECTION}.

\footnotesize
\begin{verbatim}
&DEVC ID='SPEED SENSOR', XYZ=..., QUANTITY='VELOCITY'/
&CTRL ID='multiplier', FUNCTION_TYPE='POWER',
      INPUT_ID='SPEED SENSOR', 'CONSTANT', CONSTANT = 2., SETPOINT = 10.,
      TRIP_DIRECTION = 1 /
\end{verbatim}

\subsection{Combining Control Functions: A Pre-Action Sprinkler System}

For a pre-action sprinkler system, the normally
dry sprinkler pipes are flooded when a detection event occurs. For this example, the detection event is
when two of four smoke detectors alarm.  It takes 30~s to flood the piping network.
The nozzle is a {\ct DEVC} named {\ct 'NOZZLE 1'} controlled by the {\ct CTRL} named {\ct 'nozzle trigger'}.
The nozzle activates when both detection \underline{and} the time delay have occurred.  Note that the {\ct DEVC} is
specified with {\ct QUANTITY='CONTROL'}.

\footnotesize
\begin{verbatim}
&DEVC XYZ=1,1,3, PROP_ID='Acme Smoker', ID='SD_1' /
&DEVC XYZ=1,4,3, PROP_ID='Acme Smoker', ID='SD_2' /
&DEVC XYZ=4,1,3, PROP_ID='Acme Smoker', ID='SD_3' /
&DEVC XYZ=4,4,3, PROP_ID='Acme Smoker', ID='SD_4' /
&DEVC XYZ=2,2,3, PROP_ID='Acme Nozzle', QUANTITY='CONTROL',
      ID='NOZZLE 1', CTRL_ID='nozzle trigger' /

&CTRL ID='nozzle trigger', FUNCTION_TYPE='ALL', INPUT_ID='smokey','delay' /
&CTRL ID='delay', FUNCTION_TYPE='TIME_DELAY', INPUT_ID='smokey', DELAY=30. /
&CTRL ID='smokey', FUNCTION_TYPE='AT_LEAST', N=2, INPUT_ID='SD_1','SD_2','SD_3','SD_4' /
\end{verbatim}
\normalsize

\subsection{Combining Control Functions: A Dry Pipe Sprinkler System}
\label{info:dry_pipe}

For a dry-pipe sprinkler system, the normally
dry sprinkler pipes are pressurized with gas.  When a link activates in a sprinkler head, the pressure drop allows
water to flow into the pipe network.  For this example it takes 30~s to flood the piping network once a sprinkler link
has activated.  The sequence of events required for operation is first {\ct ANY} of the links must activate which
starts the 30~s {\ct TIME\_DELAY}.  Once the 30~s delay has occurred, each nozzle with an active link, the {\ct ALL}
control functions, will then flow water.

\footnotesize
\begin{verbatim}
&DEVC XYZ=2,2,3, PROP_ID='Acme Sprinkler Link', ID='LINK 1' /
&DEVC XYZ=2,3,3, PROP_ID='Acme Sprinkler Link', ID='LINK 2' /

&PROP ID='Acme Sprinkler Link', QUANTITY='LINK TEMPERATURE',
      ACTIVATION_TEMPERATURE=74., RTI=30./

&DEVC XYZ=2,2,3, PROP_ID='Acme Nozzle', QUANTITY='CONTROL',
      ID='NOZZLE 1', CTRL_ID='nozzle 1 trigger' /
&DEVC XYZ=2,3,3, PROP_ID='Acme Nozzle', QUANTITY='CONTROL',
      ID='NOZZLE 2', CTRL_ID='nozzle 2 trigger' /

&CTRL ID='check links', FUNCTION_TYPE='ANY', INPUT_ID='LINK 1','LINK 2'/
&CTRL ID='delay', FUNCTION_TYPE='TIME_DELAY', INPUT_ID='check links', DELAY=30. /
&CTRL ID='nozzle 1 trigger', FUNCTION_TYPE='ALL', INPUT_ID='delay','LINK 1'/
&CTRL ID='nozzle 2 trigger', FUNCTION_TYPE='ALL', INPUT_ID='delay','LINK 2'/
\end{verbatim}
\normalsize


\subsection{Example Case: activate\_vents}

The simple test case called {\bf activate\_vents} demonstrates the several of the control functions. Figure~\ref{activate_vents} shows seven
multiply-colored vents that activate at different times, depending on the particular timing or control function.
\begin{figure}[ht]
\begin{tabular*}{\textwidth}{lll}
\includegraphics[width=2.05in]{SCRIPT_FIGURES/activate_vents_5} &
\includegraphics[width=2.05in]{SCRIPT_FIGURES/activate_vents_10} &
\includegraphics[width=2.05in]{SCRIPT_FIGURES/activate_vents_15}
\end{tabular*}
\caption[Example of a vent controls.]{Output of the {\bf activate\_vents} test case at 5, 10 and 15~s.}
\label{activate_vents}
\end{figure}




\section{Controlling a \texorpdfstring{{\tt RAMP}}{RAMP}}
\label{info:RAMPDEVC}

For any user defined {\ct RAMP}, the normal independent variable, for example time for {\ct RAMP\_V}, can be replaced by the output of a {\ct DEVC}.
This is done by specifying the input {\ct DEVC\_ID} one on of the {\ct RAMP} input lines.  When this is done, the current output of the {\ct DEVC} is used, see \ref{info:basic_control} as the independent variable for the {\ct RAMP}.
In the following example a blower is ramped from 0~\% flow at 20~$^\circ$C, to 50~\% flow when the temperature exceeds 100~$^\circ$C, and to 100~\% flow when the temperature exceeds 200~$^\circ$C.
This is similar functionality to the {\ct CUSTOM} control function, but it allows for variable response rather than just on or off.

\footnotesize
\begin{verbatim}
&SURF ID='BLOWER', VEL=-2, RAMP_V='BLOWER RAMP' /
&DEVC XYZ=2,3,3, QUANTITY='TEMPERATURE', ID='TEMP DEVC' /
&RAMP ID='BLOWER RAMP', T= 20,F=0.0, DEVC_ID='TEMP DEVC' /
&RAMP ID='BLOWER RAMP', T=100,F=0.5 /
&RAMP ID='BLOWER RAMP', T=200,F=1.0 /
\end{verbatim}
\normalsize



%
% Section on Smokeview objects
\newpage

\input{smv_objects.tex}

\chapter{Output Data}
\label{info:outputdata}

Before a calculation is started, carefully consider
what information should be saved. All output quantities must be specified
at the start of the calculation. In most cases, there is no way to
retrieve information after the calculation ends if it was not specified from the start.
There are several different ways of visualizing the results of a
calculation. Most familiar to
experimentalists is to save a given quantity at a single point in space so
that this quantity can be plotted as a function of time, like a
thermocouple temperature measurement. The namelist group {\ct DEVC},
described previously, is used to specify point measurements.

To visualize the flow patterns better, save planar
slices of data, either in the gas or solid phases, by using the
{\ct SLCF} (SLiCe File) or {\ct BNDF} (BouNDary File) namelist group.
Both of these output formats permit you to animate these quantities in
time.

For static pictures of the flow field, use the PLot3D files
that are automatically generated 5 times a run. Plot3D format is used by many CFD programs as a simple
way to store specified quantities over the entire mesh at one instant in
time.

Finally, tracer particles can be injected into the flow field from
vents or obstacles, and then viewed in Smokeview. Use the {\ct PART}
namelist group to control the injection rate, sampling rate and other
parameters associated with particles.

\begin{warning}
\noindent
Note: unlike in FDS version 1,
particles are no longer used to introduce heat into the flow, thus
particles no longer are ejected automatically from burning surfaces.
\end{warning}


\section{Output Control Parameters: The \texorpdfstring{{\tt DUMP}}{DUMP} Namelist Group}
\label{info:DUMP}

The namelist group {\ct DUMP} contains parameters (Table \ref{tbl:DUMP}) that control the rate at which output files
are written, and various other global parameters associated with output files.
This namelist group is new starting in FDS 5, although its
parameters have been specified via other namelist groups in past versions.

\begin{description}
\item[{\ct NFRAMES}] Number of output dumps per calculation. The default is 1000.
Device data, slice data, particle data, isosurface data, 3D smoke data, boundary data, solid phase profile data, and
control function data are saved every {\ct (T\_END-T\_BEGIN)/NFRAMES} seconds unless otherwise specified
using {\ct DT\_DEVC}, {\ct DT\_SLCF}, {\ct DT\_PART}, {\ct DT\_ISOF}, {\ct DT\_BNDF}, {\ct DT\_PROF},
or {\ct DT\_CTRL} Note that {\ct DT\_SLCF} controls Smoke3D output. {\ct DT\_HRR} controls the
output of heat release rate and associated quantities.
\item[{\ct MASS\_FILE}] If {\ct .TRUE.}, produce an output file listing the total masses of all gas species as a function of time.
It is {\ct .FALSE.} by default because the calculation
of all gas species in all mesh cells is time-consuming. The parameter {\ct DT\_MASS} controls the frequency of output.
\item[{\ct MAXIMUM\_PARTICLES}] Maximum number of Lagrangian particles that can be included on any
mesh at any given time. (Default 500000)
\item[{\ct SMOKE3D}] If {\ct .FALSE.}, do not produce an animation of the smoke and fire. It is {\ct .TRUE.} by default.
\item[{\ct FLUSH\_FILE\_BUFFERS}] FDS
purges the output file buffers periodically and forces the data to be written out
into the respective output files. It does this to make it easier to view the case in Smokeview while it is running.
It has been noticed on Windows
machines that occasionally a runtime error occurs because of file
access problems related to the buffer flushing. If this happens, set
this parameter to {\ct .FALSE.}, but be aware that it may not be
possible to look at output in Smokeview until after the calculation is
finished. You may also set {\ct DT\_FLUSH} to control the frequency of the file flushing. Its default value is the duration of
the simulation divided by {\ct NFRAMES}.
\item[{\ct STATUS\_FILES}] If {\ct .TRUE.}, produces an output file
{\bf CHID.notready} which is deleted, if the simulation is completed
successfully. This file can be used as an error indicator. It is {\ct
.FALSE.} by default.
\end{description}


\clearpage

\section{Output File Types}

FDS has various types of output files that store computed data. Some of the files are in binary format and intended to be read and
rendered by Smokeview. Some of the files are just comma-delimited text files. It is important to remember that you must explicitly declare in
the input file most of the FDS output data. A considerable amount of the input file is usually devoted to this.


\subsection{Device Output: The \texorpdfstring{{\tt DEVC}}{DEVC} Namelist Group}


For many commonly used measurement devices there is no need to associate a
specific {\ct PROP} line to the {\ct DEVC} entry. In such cases, use the character string
{\ct QUANTITY} to indicate that a particular gas or solid phase quantity at the point should be recorded in
the output file with the suffix {\bf \_devc.csv}. The quantities are listed in Table~\ref{tab:output}.
Many of the gas phase quantities are self-explanatory. For example, if you just want to record the time history of the temperature at a given point, add

\footnotesize
\begin{verbatim}
&DEVC XYZ=6.7,2.9,2.1, QUANTITY='TEMPERATURE', ID='T-1' /
\end{verbatim}
\normalsize

\noindent
and a column will be added to the output file {\bf CHID\_devc.csv} under the label {\ct 'T-1'}. In this case, the {\ct ID} has no other role than as a column label in the output file.
Note that versions of FDS prior to version 5 used an 8 cell linear interpolation for a given {\em gas phase} point measurement. In other words, if you
specified a point via the triplet of real numbers, {\ct XYZ}, FDS would calculate the value of the quantity by linearly interpolating the
values defined at the centers of the 8 nearest cells. Starting in FDS 5, this is no longer done. Instead, FDS reports the value of the {\ct QUANTITY} in
the cell where the point {\ct XYZ} is located.

\subsubsection{Devices on Solid Surfaces}

When prescribing a solid phase quantity, be sure to position the
probe at a solid surface. It is not always obvious where the
solid surface is since the mesh does not always align with the input obstruction
locations. To help locate the appropriate surface, the parameter {\ct IOR} {\em must} be included
when designating a solid phase quantity, except when using the {\ct STATISTICS} feature described in
Section~\ref{info:statistics} in which case the output quantity is not associated with just a single point
on the surface.
If the orientation of the solid surface is in the
positive $x$ direction {\ct IOR=1}, negative $x$ direction {\ct IOR=-1},
positive $y$ {\ct IOR=2}, negative {\ct IOR=-2}, positive $z$ {\ct IOR=3},
and negative $z$ {\ct IOR=-3}. There are still instances where FDS cannot
determine which solid surface is being designated, in which case an
error message appears in the diagnostic output file.
Re-position the probe and try again. For example, the line

\footnotesize
\begin{verbatim}
&DEVC XYZ=0.7,0.9,2.1, QUANTITY='WALL TEMPERATURE', IOR=-2, ID='...' /
\end{verbatim}
\normalsize

\noindent
designates the surface temperature of a wall facing the negative $y$
direction.

\subsubsection{Non-Pointwise Devices}

In addition to point measurements, the {\ct DEVC} group can be used
to report integrated quantities (See Table~\ref{tab:output}).
For example, you may want to know the mass flow out of a door or window.
To report this, add the line

\footnotesize
\begin{verbatim}
&DEVC XB=0.3,0.5,2.1,2.5,3.0,3.0, QUANTITY='MASS FLOW', ID='whatever' /
\end{verbatim}
\normalsize

\noindent
Note that in this case, a plane is specified rather than
a point. The sextuplet {\ct XB} is used for this purpose. Notice when a
flow is desired, two of the six coordinates need to be the same. Another
{\ct QUANTITY}, {\ct HRR}, can be used to compute the total heat release
rate within a subset of the domain. In this case, the sextuplet
{\ct XB} ought to define a volume rather than a plane. Specification of
the plane or volume over which the integration is to take place can only
be done using {\ct XB} -- avoid planes or volumes
that cross multiple mesh boundaries. FDS has to decide which mesh to
use in the integration, and it chooses the finest mesh overlapping
the centroid of the designated plane or volume.


\subsubsection{Linear Array of Point Devices}
\label{info:line_file}

The {\ct DEVC} input construct enables you to specify a linear array of devices. By adding the parameter {\ct POINTS} and using the
sextuple coordinate array {\ct XB}, you can direct FDS to create a line of devices from $(x_1,y_1,z_1)$ to $(x_2,y_2,z_2)$ as follows:

\footnotesize
\begin{verbatim}
&DEVC XB=X1,X2,Y1,Y2,Z1,Z2, QUANTITY='TEMPERATURE', ID='TC Tree', POINTS=20 /
\end{verbatim}
\normalsize

\noindent
In a file called {\bf CHID\_line.csv}, there will be between 1 and 4 columns of data associated with this single {\ct DEVC} line. If {\ct X1} is
different than {\ct X2}, there will be a column of $x$ coordinates associated with the linear array of points. The same holds for the $y$ and
$z$ coordinates. The last column contains the 20 temperature points presented as a running average. The
averaging time is given by {\ct DT\_DEVC\_LINE} on the {\ct DUMP} line. It is 0.25 times the total simulation time by default. This is a convenient
way to output a time-averaged linear profile of a quantity, like an array of thermocouples.

A single ``line'' file can hold more than a single line of data. By default, the coordinate columns are labeled using the {\ct ID} of the {\ct DEVC} appended with
either {\ct -x}, {\ct -y}, or {\ct -z}. To change these labels, use {\ct X\_ID}, {\ct Y\_ID}, and/or {\ct Z\_ID}. To suppress the coordinate columns altogether, add
{\ct HIDE\_COORDINATES=.TRUE.} to the {\ct DEVC} line. This is convenient if you have multiple arrays of data that use the same coordinates.

Typically, a {\em line} of devices records a steady-state profile of a particular quantity. For example, the velocity profile in a doorway or the average concentration of
a particular scalar quantity spanning the width of a buoyant plume are convenient means to compare model and experiment. In addition, if you set
{\ct STATISTICS='RMS'} on the {\ct DEVC} line, the output will be the {\em root mean square} value of the quantity rather than its mean, $\overline{\phi}$:
\be
   \phi_{\hbox{rms}} = \sqrt{ \frac{ \sum_{i=1}^n (\phi_i - \overline{\phi})^2 }{n} }
\ee
Note that the {\ct 'RMS'} statistic is only appropriate for a line of devices. It is not meant to be used with single devices that record a time history of a given
quantity. The {\em root mean square} is only meaningful in terms of a steady-state output quantity.




\subsection{Quantities within Solids: The \texorpdfstring{{\tt PROF}}{PROF} Namelist Group}
\label{info:PROF}

FDS uses a fine, non-uniform, one-dimensional mesh at each boundary
cell to compute heat transfer within a solid. The parameters
(Table~\ref{tbl:PROF}) to specify a given {\ct PROF}ile are similar to
those used to specify a surface quantity in the {\ct DEVC} group. {\ct
XYZ} designates the triplet of coordinates, {\ct QUANTITY} is the
physical quantity to monitor, {\ct IOR} the orientation,
and {\ct ID} an identifying character string. Here is an example of
how you would use this feature to get a time history of temperature
profiles within a given solid obstruction:

\footnotesize
\begin{verbatim}
&PROF XYZ=..., QUANTITY='TEMPERATURE', ID='TU1SA_FDS', IOR=3 /
\end{verbatim} \normalsize

\noindent
Other possible quantities are the total density of the wall ({\ct QUANTITY = 'DENSITY'}) or densities of
solid material components ({\ct QUANTITY = 'MATL\_ID'}), where {\ct MATL\_ID} is the name of the
material.

Each {\ct PROF} line creates a separate file. This may be more than is
needed. Sometimes, all you want to know is the temperature at a
certain depth. To get an inner wall temperature, you can also just use
a device as follows:

\footnotesize
\begin{verbatim}
&DEVC XYZ=..., QUANTITY='INSIDE WALL TEMPERATURE', DEPTH=0.005, ID='Temp_1', IOR=3 /
\end{verbatim} \normalsize

\noindent
The parameter {\ct DEPTH} (m) indicates the distance inside the solid surface.
Note that this {\ct QUANTITY} is allowed only as a {\ct DEVC}, not a
{\ct BNDF}, output. Also note that if the wall thickness is decreasing
over time due to the solid phase reactions, the distance is
measured from the current surface, and the measurement point is
'moving' towards the back side of the solid. Eventually, the
measurement point may get out of the solid, in which case it starts to
show ambient temperature. If you just want to know the temperature of the back surface
of the ``wall,'' then use

\footnotesize
\begin{verbatim}
&DEVC XYZ=..., QUANTITY='BACK WALL TEMPERATURE', ID='Temp_b', IOR=3 /
\end{verbatim} \normalsize

\noindent
Note that this quantity is only meaningful if the front or exposed surface of the ``wall'' has
the attribute {\ct BACKING='EXPOSED'} on the {\ct SURF} line that defines it. The coordinates, {\ct XYZ}, and orientation, {\ct IOR}, refer to
the front surface. To check that the heat conduction calculation is being done properly, you can add the additional line

\footnotesize
\begin{verbatim}
&DEVC XYZ=..., QUANTITY='WALL TEMPERATURE', ID='Temp_f', IOR=-3 /
\end{verbatim} \normalsize

\noindent
where now {\ct XYZ} and {\ct IOR} refer to the coordinates and orientation of the back side of the wall. These two wall temperatures ought to be
the same. Remember that the ``wall'' in this case can only be at most one mesh cell thick, and its {\ct THICKNESS} need not be the same as the
mesh cell width. Rather, the {\ct THICKNESS} ought to be the actual thickness of the ``wall'' through which FDS performs a 1-D heat conduction
calculation.





\subsection{Animated Planar Slices: The \texorpdfstring{{\tt SLCF}}{SLCF} Namelist Group}
\label{info:SLCF}

The {\ct SLCF} (``slice file'') namelist group parameters (Table~\ref{tbl:SLCF})
allows you to record various gas phase quantities
at more than a single point. A ``slice'' refers to a subset of the whole domain. It can be a line,
plane, or volume, depending on the values of {\ct XB}.
The sextuplet {\ct XB} indicates the boundaries of the ``slice'' plane.
{\ct XB} is prescribed as in the {\ct OBST} or {\ct VENT} groups, with
the possibility that 0, 2, or 4 out of the 6 values be the same to
indicate a volume, plane or line, respectively. A handy trick is to
specify, for example, {\ct PBY=5.3} instead of {\ct XB} if it is desired
that the entire plane $y=5.3$ slicing through the domain be saved.
{\ct PBX} and {\ct PBZ} control planes perpendicular to the
$x$ and $z$ axes, respectively.

If the ``slice'' is a volume specified with {\ct XB}, then its output frequency is controlled by the parameter {\ct DT\_SL3D}.  By default, FDS sets {\ct DT\_SL3D=(T\_END-T\_BEGIN)/5}, the same default frequency as Plot3D file output.  The user may specify a different value of {\ct DT\_SL3D} on {\ct DUMP}.  The user is cautioned that 3D slice files can become extremely large if {\ct DT\_SL3D} is small.

Animated vectors can be created in Smokeview if a given {\ct SLCF} line has the attribute {\ct VECTOR=.TRUE.} If two {\ct SLCF}
entries are in the same plane, then only one of the lines needs to have {\ct VECTOR=.TRUE.} Otherwise, a redundant set of velocity
component slices will be created.

Normally, FDS averages slice file data at cell corners. For example, gas temperatures are computed at cell centers, but they
are linearly interpolated to cell corners and output to a file that is read by Smokeview. To prevent this from happening,
set {\ct CELL\_CENTERED=.TRUE.} This forces FDS to output the actual cell-centered data with no averaging. Note that this
feature is mainly useful for diagnostics because it enables you to visualize the values that FDS actually computes. Note also that this
feature should only be used for scalar quantities that are computed at cell centers, like temperatures, mass fractions, {\em etc.}

Slice file information is recorded in files (See Section~\ref{out:SLCF})
labeled {\bf CHID\_$n$.sf}, where $n$ is the index of the slice file.
A short fortran program {\bf fds2ascii.f} produces a text file from a line,
plane or volume of data. See Section~\ref{info:fds2ascii} for more details.






\subsection{Animated Boundary Quantities: The \texorpdfstring{{\tt BNDF}}{BNDF} Namelist Group}
\label{info:BNDF}

The {\ct BNDF} (``boundary file'') namelist group parameters allows you
to record surface quantities at all solid obstructions. As with
the {\ct SLCF} group, each quantity is prescribed with a separate
{\ct BNDF} line, and the output files are of the form {\bf CHID\_$n$.bf}.
No physical coordinates need be specified, however, just {\ct QUANTITY}.
See Table \ref{tab:output}. For certain output quantities, additional parameters need to be specified via
the {\ct PROP} namelist group. In such cases, add the character string, {\ct PROP\_ID}, to the {\ct BNDF} line
to tell FDS where to find the necessary extra information.

Note that {\ct BNDF} files (Section~\ref{out:BNDF}) can become very
large, so be careful in prescribing the time interval.
One way to reduce the size of the output file is to turn off the
drawing of boundary information on desired obstructions. On any given
{\ct OBST} line, if the string {\ct BNDF\_OBST=.FALSE.} is included,
the obstruction is not colored. To turn off all boundary drawing,
set {\ct BNDF\_DEFAULT=.FALSE.} on the {\ct MISC} line. Then individual
obstructions can be turned back on with {\ct BNDF\_OBST=.TRUE.} on
the appropriate {\ct OBST} line. Individual faces of a given obstruction can be controlled
via {\ct BNDF\_FACE(IOR)}, where {\ct IOR} is the index of orientation (+1 for the positive $x$ direction, -1 for negative, and so on).

Normally, FDS averages boundary file data at cell corners. For example, surface temperatures are computed at the center of each surface cell, but they
are linearly interpolated to cell corners and output to a file that is read by Smokeview. To prevent this from happening,
set {\ct CELL\_CENTERED=.TRUE.} on the {\ct BNDF} line. This forces FDS to output the actual cell-centered data with no averaging. Note that this
feature is mainly useful for diagnostics because it enables you to visualize the values that FDS actually computes.



\subsection{Animated Isosurfaces: The \texorpdfstring{{\tt ISOF}}{ISOF} Namelist Group}
\label{info:ISOF}

The {\ct ISOF} (``ISOsurface File'') namelist group is used to specify the output of
gas phase scalar quantities, as three dimensional animated contours.
For example, a 300~$^\circ$C temperature isosurface shows where the gas temperature is
300~$^\circ$C.
Three different values of the temperature can be saved via the line:

\footnotesize
\begin{verbatim}
&ISOF QUANTITY='TEMPERATURE', VALUE(1)=50., VALUE(2)=200., VALUE(3)=500. /
\end{verbatim}
\normalsize

\noindent
where the values are in $^\circ$C. Note that the isosurface output
files {\bf CHID\_$n$.iso} can become very large, so experiment with different sampling rates ({\ct DT\_ISOF} on the {\ct DUMP} line).


Any gas phase quantity can animated via iso-surfaces, but use caution. To render an iso-surface, the desired quantity must be
computed in every mesh cell at every output time step. For quantities like {\ct TEMPERATURE}, this is not a problem, as FDS computes it and saves it
anyway. However, species volume fractions demand substantial amounts of time to compute at each mesh cell.

Note that if you add the additional parameter {\ct COLOR\_QUANTITY} to the {\ct ISOF} line, then the given isosurface will be colored using
this extra quantity. Remember to include the {\ct SPEC\_ID} or {\ct COLOR\_SPEC\_ID} corresponding to the given {\ct QUANTITY} or
{\ct COLOR\_QUANTITY}, if necessary.




\subsection{Plot3D Static Data Dumps}
\label{info:PL3D}

By default, flow field data in Plot3D format is output 5 times a run.
Five quantities are written out to a file at one instant in time. The default specification is:

\footnotesize
\begin{verbatim}
&DUMP ..., PLOT3D_QUANTITY(1:5)='TEMPERATURE',
      'U-VELOCITY','V-VELOCITY','W-VELOCITY','HRRPUV' /
\end{verbatim}
\normalsize

\noindent
It's best to leave the velocity components as is, because Smokeview
uses them to draw velocity vectors. The first and fifth quantities can
be changed with the parameters {\ct PLOT3D\_QUANTITY(1)} and {\ct PLOT3D\_QUANTITY(5)}
on the {\ct DUMP} line. If any of the specified quantities require the additional specification of a particular species,
use {\ct PLOT3D\_SPEC\_ID(n)} to provide the {\ct SPEC\_ID} for {\ct PLOT3D\_QUANTITY(n)}.

\begin{warning}
Note that there can only be one {\ct DUMP} line.
\end{warning}

Data stored in Plot3D~\cite{PLOT3D} files (See Section~\ref{out:PL3D}) use a format developed by
NASA and used by many CFD programs for representing simulation results.
Plot3D data is visualized in three ways: as 2D contours, vector plots and iso-surfaces.
Vector plots may be viewed if one or more of the $u$, $v$ and $w$
velocity components are stored in the Plot3D file. The vector
length and direction show the direction and relative speed of the
fluid flow. The vector colors show a scalar fluid quantity such as
temperature.
Plot3D data are stored in files with extension {\ct .q} . There is
an optional file that can be output with coordinate information
if another visualization package is being used to render the
files. If you write {\ct WRITE\_XYZ=.TRUE.} on the {\ct DUMP}
line, a file with suffix {\ct .xyz} is written out. Smokeview
does not require this file because the coordinate information can be
obtained elsewhere.



\subsection{SMOKE3D: Realistic Smoke and Fire}

\label{info:SMOKE3D}

When you do a fire simulation, FDS automatically creates two output files that are rendered by
Smokeview as realistic looking smoke and fire. By default, the output quantities are the {\ct 'MASS FRACTION'} of {\ct 'SOOT'} and {\ct 'HRRPUV'} (Heat Release Rate Per Unit Volume)
are used in the visualization. You have the option of rendering any other species mass fraction instead of {\ct 'SOOT'}, so long as the
{\ct MASS\_EXTINCTION\_COEFFICIENT} (either from the {\ct REAC} line, or over-ridden by the value on the {\ct SPEC} line) is appropriate in
describing the attenuation of visible light by the specified gas species.
The alternative gas species is given by {\ct SMOKE3D\_QUANTITY} on the {\ct DUMP} line.
If the specified quantity requires the additional specification of a particular species,
use {\ct SMOKE3D\_SPEC\_ID} to provide the {\ct SPEC\_ID}.
See the Smokeview User's Guide for more details on how these quantities are rendered.

Here is an example of how to control the smoke species. Normally, you do not need to do this as the ``smoke'' is an assumed part of the default combustion model when a non-zero {\ct SOOT\_YIELD} is defined.

\footnotesize
\begin{verbatim}
&SPEC ID='MY SMOKE', MW=29., MASS_EXTINCTION_COEFFICIENT=8700. /
&SURF ID='NO FIRE', TMP_FRONT=1000., MASS_FLUX(1)=0.0001, COLOR='RED' /
&VENT XB=0.6,1.0,0.3,0.7,0.0,0.0, SURF_ID='NO FIRE' /
&DUMP SMOKE3D_QUANTITY='MASS FRACTION', SMOKE3D_SPEC_ID='MY SMOKE' /
\end{verbatim}

\normalsize
\noindent
The production rate of {\ct 'MY SMOKE'} is 0.0001~kg/m$^2$/s, applied to an area of 0.16~m$^2$. The \\ {\ct MASS\_EXTINCTION\_COEFFICIENT} is passed to
Smokeview to be used for visualization.






\clearpage

\section{Special Output Quantities}

This section lists a variety of output quantities that are useful for studying thermally-driven flows, combustion, pyrolysis, and so forth. Note that some
of the output quantities can be produced in a variety of ways.


\subsection{Heat Release Rate}
\label{info:HRR}

Quantities associated with the overall energy budget are reported in
the comma delimited file {\ct CHID\_hrr.csv}.  This file is
automatically generated; the only input parameter associated with it
is {\ct DT\_HRR} on the {\ct DUMP} line. The columns in this file record the time history of the integrals of the terms in the enthalpy transport equation.
The columns are defined as follows:
\begin{eqnarray}
\label{eqn_enthalpytransport}
\underbrace{\frac{\partial}{\partial t} \int \rho h_s \, dV }_{\hbox{\ct Q\_ENTH}} &=&
\underbrace{- \int \rho \bu h_s \cdot \dS}_{\hbox{\ct Q\_CONV}}
+\underbrace{\int k \nabla T \cdot \dS}_{\hbox{\ct Q\_COND}}
+\underbrace{\sum_\alpha \int h_{s,\alpha} \, \rho D_\alpha \nabla Y_\alpha \cdot \dS}_{\hbox{\ct Q\_DIFF}}  \nonumber \\
&&
-\underbrace{\int \dot{\mathbf{q}}^{\prime\prime}_{r} \cdot \dS}_{\hbox{\ct Q\_RADI}}
+\underbrace{\int \dot{q}''' dV}_{\hbox{\ct HRR}}
+\underbrace{\int \frac{d \overline{p} }{dt} dV}_{\hbox{\ct Q\_PRES}}
+\underbrace{\int \left( -\dq_b''' + \dm_b'''(h_{s,b}-h_s)  \right) \, dV}_{\hbox{\ct Q\_PART}}
\end{eqnarray}
An additional column, {\ct Q\_TOTAL}, includes the sum of the terms on the right hand side of the equation. Ideally, this sum should equal {\ct Q\_ENTH}. All terms
are reported in units of kW.

The other columns in the file contain the total burning rate of
fuel, in units of kg/s, and the zone pressures. Note that the reported value of the burning rate is not adjusted to account for the possibility that each individual
material might have a different heat of combustion. For this reason, it is not always the case that the reported total
burning rate multiplied by the gas phase heat of combustion is equal to the reported heat release rate.







\subsection{Visibility and Obscuration}
\label{info:visibility}
\label{info:obscuration}

If you are performing a fire calculation using the simple chemistry
approach, the smoke is tracked along with all other major products of
combustion. The most useful quantity for assessing visibility in a
space is the {\em light extinction coefficient},
$K$~\cite{SFPE:Mulholland}. The intensity of monochromatic light
passing a distance $L$ through smoke is attenuated according to
\be I/I_0 = e^{-KL} \ee
The light extinction coefficient, $K$, is a product of the
density of smoke particulate, $\rho Y_s$, and a mass specific
extinction coefficient that is fuel dependent
\be K = K_m \; \rho \, Y_s \label{mec} \ee
Devices that output a \% obscuration such as a {\ct DEVC} with a {\ct QUANTITY} of {\ct ASPIRATION}, {\ct CHAMBER OBSCURATION} (smoke
detector), or {\ct PATH OBSCURATION} (beam detector) are discussed
respectively in Section~\ref{info:aspiration_detector},
Section~\ref{info:smoke_detector}, and Section~\ref{info:beam_detector}

Estimates of visibility through smoke can be made by using the
equation
\be  S = C/K  \label{vis}  \ee
where $C$ is a non-dimensional constant characteristic of
the type of object being viewed through the smoke, {\em i.e.}
$C=8$ for a light-emitting sign and $C=3$ for a light-reflecting
sign~\cite{SFPE:Mulholland}. Since $K$ varies from point to point in the
domain, the visibility $S$ does as well. Keep in mind that
FDS can only track smoke whose production rate and composition
are specified. Predicting either is beyond the
capability of the present version of the model.

Three parameter control smoke production and visibility; each
parameter is input on the {\ct REAC} line. The first parameter
is {\ct SOOT\_YIELD}, which is the fraction of fuel mass that
is converted to soot if the simple chemistry approach is being used. The second parameter is called the
{\ct MASS\_EXTINCTION\_COEFFICIENT}, and it is the $K_m$ in
Eq.~(\ref{mec}). The default value is 8700~m$^2$/kg, a value
suggested for flaming combustion of wood and plastics\footnote{For most flaming fuels, a suggested value for $K_m$ is 8700~m$^2$/kg~$\pm$~1100~m$^2$/kg at a
wavelength of 633~nm~\cite{Mulholland:F+M}}.
The third parameter is called the {\ct VISIBILITY\_FACTOR}, the
constant $C$ in Eq.~(\ref{vis}). It is 3 by default.

The gas phase output quantity {\ct 'EXTINCTION COEFFICIENT'} is $K$. A similar quantity is the
{\ct 'OPTICAL DENSITY'}, $K/2.3$, the result of using $\log_{10}$ in the definition
\be D \equiv - \frac{1}{L} \, \log_{10} \left( \frac{I}{I_0} \right) = K \, \log_{10} e   \ee
The visibility $S$ is output via the keyword {\ct VISIBILITY}. Note
that, by default, the visibility is associated with the smoke that is implicitly defined by the simple chemistry
model. However, this quantity can also be associated with an
explicitly defined species via the inclusion of a {\ct SPEC\_ID}.
In other words, you can specify the output quantity {\ct 'VISIBILITY'} along with a {\ct SPEC\_ID}.
This does not require that you do a simple chemistry calculation; only that you have specified the given species via a separate
{\ct SPEC} line. You can
specify a unique {\ct MASS\_EXTINCTION\_COEFFICIENT} on the {\ct SPEC} line as well.

Note that FDS cannot report a visibility of infinity, but rather reports a {\ct MAXIMUM\_VISIBILITY} that you can control via the
{\ct MISC} line. The default is 30~m.


\subsection{Layer Height and the Average Upper and Lower Layer Temperatures}
\label{info:layerheight}

Fire protection engineers often need to estimate the location of the
interface between the hot, smoke-laden upper layer and the cooler
lower layer in a burning compartment.  Relatively simple fire models,
often referred to as {\em two-zone models}, compute this quantity
directly, along with the average temperature of the upper and lower
layers.  In a computational fluid dynamics (CFD) model like FDS, there
are not two distinct zones, but rather a continuous profile of
temperature. Nevertheless, there are methods that have been developed
to estimate layer height and average temperatures from a continuous
vertical profile of temperature. One such
method~\cite{Janssens:JFS1992} is as follows: Consider a continuous
function $T(z)$ defining temperature $T$ as a function of height above
the floor $z$, where $z=0$ is the floor and $z=H$ is the
ceiling. Define $T_u$ as the upper layer temperature, $T_l$ as the
lower layer temperature, and $z_{int}$ as the interface
height. Compute the quantities:
\begin{eqnarray*} (H-z_{int})\; T_u + z_{int} \; T_l = \int_0^H \; T(z) \; dz &=& I_1 \\
                  (H-z_{int})\; \frac{1}{T_u} + z_{int} \; \frac{1}{T_l} = \int_0^H \; \frac{1}{T(z)} \; dz &=& I_2 \end{eqnarray*}
Solve for $z_{int}$:
\be z_{int} = \frac{ T_l(I_1 \, I_2 - H^2)}{I_1+I_2 \, T_l^2 - 2\, T_l \, H} \ee
Let $T_l$ be the temperature in the lowest mesh cell and, using
Simpson's Rule, perform the numerical integration of $I_1$ and
$I_2$. $T_u$ is defined as the average upper layer temperature via
\be (H-z_{int})\; T_u = \int_{z_{int}}^H \; T(z) \; dz \ee
Further discussion of similar procedures can be found in Ref.~\cite{He:1}.

The quantities {\ct LAYER HEIGHT}, {\ct UPPER TEMPERATURE} and {\ct
LOWER TEMPERATURE} can be designated via ``device'' ({\ct DEVC}) lines
in the input file\footnote{Note that in FDS 5 and beyond, these
quantities are no longer available as slice files.}. For example, the
entry

\footnotesize
\begin{verbatim}
&DEVC XB=2.0,2.0,3.0,3.0,0.0,3.0, QUANTITY='LAYER HEIGHT', ID='whatever' /
\end{verbatim}
\normalsize

\noindent
produces a time history of the smoke layer height at $x=2$ and $y=3$ between $z=0$ and $z=3$.
If multiple meshes are being used, the vertical path {\em cannot} cross mesh boundaries.



\subsection{Thermocouples}
\label{info:THERMOCOUPLE}

The output quantity {\ct THERMOCOUPLE} is the temperature of a modeled thermocouple. The thermocouple temperature lags the true gas temperature by an amount determined mainly
by its bead size. It is found by solving the following equation for the thermocouple temperature, $T_{\hbox{\tiny TC}}$~\cite{Welsh:1}
\be
   \rho_{\hbox{\tiny TC}} \, c_{\hbox{\tiny TC}} \, \frac{dT_{\hbox{\tiny TC}}}{dt} = \epsilon_{\hbox{\tiny TC}} \, (U/4 - \sigma T_{\hbox{\tiny TC}}^4) + h(T_g - T_{\hbox{\tiny TC}}) = 0
   \label{TC}
\ee
where $\epsilon_{\hbox{\tiny TC}}$ is the emissivity of the thermocouple, $U$ is the integrated radiative intensity, $T_g$ is the true gas temperature, and
$h$ is the heat transfer coefficient to a small sphere,
$h=k \, \NU / d_{\hbox{\tiny TC}}$.
The bead {\ct BEAD\_DIAMETER}, {\ct BEAD\_EMISSIVITY}, {\ct BEAD\_DENSITY}, and {\ct BEAD\_SPECIFIC\_HEAT} are given on the associated {\ct PROP} line. To over-ride the
calculated value of the heat transfer coefficient, set {\ct BEAD\_H\_FIXED} on the {\ct PROP} line (W/m$^2$/K).
The default value for the bead diameter is 0.001~m. The default emissivity is 0.85. The default values for the bead density and specific heat are that of nickel; 8908~kg/m$^3$ and
0.44~kJ/kg/K, respectively.
See the discussion on heat transfer to a water
droplet in the Technical Reference Guide for details of the convective
heat transfer to a small sphere.


\subsection{Heat Fluxes and Thermal Radiation}
\label{info:heat_flux}

There are various ways of recording the heat flux at a solid
boundary. If you want to record the {\em net} heat flux to the
surface, $\dq_c'' + \dq_r''$, use the {\ct QUANTITY} called {\ct 'NET HEAT FLUX'}. The individual components, the {\em net} convective and
radiative fluxes, are {\ct 'CONVECTIVE HEAT FLUX'} and {\ct 'RADIATIVE HEAT FLUX'}, respectively. If you want to compare predicted heat
flux with a measurement, you often need to use {\ct 'GAUGE HEAT FLUX'}.
The difference between {\ct 'NET HEAT FLUX'} and {\ct 'GAUGE HEAT FLUX'} is that
the former is the rate at which energy is absorbed by the solid surface;
the latter is the amount of energy that would be absorbed if the surface were cold (or some specified temperature $T_G$):
$$\dq_r''/\epsilon +\dq_c'' + h(T_w-T_G) + \sigma (T_w^4-T_G^4)$$
If the heat flux gauge used in an experiment has a temperature other
than ambient, set {\ct GAUGE\_TEMPERATURE} ($T_G$) on the {\ct PROP} line
associated with the device.  When comparing against a radiometer
measurement, use {\ct RADIOMETER}:
$$\dq_r''/\epsilon + \sigma (T_w^4-T_\infty^4) $$
For diagnostic purposes it is sometimes convenient to output the {\ct 'INCIDENT HEAT FLUX'}:
$$ \dq_r''/\epsilon + \sigma T_w^4 +\dq_c'' $$
Note that the sign of the output of heat flux is different than the sign of the input of a heat flux.  A positive
output quantity for heat flux means heat is being transferred into the surface.

All of the above heat flux output quantities are defined at a solid surface. To record the heat flux away from a solid surface, use a Lagrangian particle as a surrogate for
a heat flux gauge, as in the following example:

\footnotesize
\begin{verbatim}
&DEVC ID='flux', INIT_ID='f1', QUANTITY='RADIATIVE HEAT FLUX' /
&INIT ID='f1', XYZ=0.45,0.0,0.3, N_PARTICLES=1, PART_ID='rad gauge' /
&PART ID='rad gauge', STATIC=.TRUE., ORIENTATION(1,1:3)=-1,0,0, SURF_ID='target' /
&SURF ID='target', RADIUS=0.001, GEOMETRY='SPHERICAL' /
\end{verbatim}
\normalsize

\noindent
Note that the {\ct DEVC} line does not contain device coordinates, but rather a reference to the {\ct INIT} line that positions the single surrogate particle at the point {\ct XYZ}. The {\ct INIT} line references the {\ct PART} line, which provides information about the particle, in particular the orientation of the heat flux gauge. The reference to the {\ct SURF} line is mainly for consistency -- FDS needs to know something about the particle's geometry even though it is really just a ``target''.

The functionality of surrogate particles can be extended to model an array of devices. Instead of one heat flux gauge, we can create a line of them:

\footnotesize
\begin{verbatim}
&DEVC ID='flux', INIT_ID='f1', POINTS=34, QUANTITY='RADIATIVE HEAT FLUX', X_ID='x' /
&INIT ID='f1', XYZ=0.45,0.0,0.3, N_PARTICLES=34, DX=0.05, PART_ID='rad gauge' /
\end{verbatim}
\normalsize

\noindent
For more information about specifying arrays of devices via the parameter {\ct POINTS}, see Section~\ref{info:line_file}. Note also the parameter {\ct DX} on the {\ct INIT} line that creates a line of particles starting at the point {\ct XYZ} and repeating every 0.05~m.










\subsection{Droplet Output Quantities}
\label{info:part_output}

This section lists various output quantities associated with droplets and particles. Note whether or not the quantity is appropriate for the gas or
solid surfaces.

\subsubsection{Droplet Quantities on Solid Surfaces}

It is possible to record various properties of droplets and particles. Some of the output quantities are associated with solid boundaries. For example,
{\ct 'MPUA'} is the \underline{M}ass \underline{P}er \underline{U}nit \underline{A}rea of the droplets named {\ct PART\_ID}.
Likewise, {\ct 'AMPUA'} is the \underline{A}ccumulated \underline{M}ass \underline{P}er \underline{U}nit \underline{A}rea.
Both of these are given in units of kg/m$^2$. Think of these outputs as measures of the instantaneous mass density per unit area,
and the accumulated total, respectively.  It should be noted that these quantities are not indentical measures.  AMPUA is analogous to a ``bucket test,'' where the droplets are collected in buckets and the total mass determined at the end of a given time period.  In this case case each grid cell on the floor is considered its own bucket.  AMPUA will only count each particle or droplet once and only count the particle or droplet when it reaches the floor.  \footnote{Be aware of the fact that the default behavior for droplets hitting the ``floor,'' that is, the plane $z=\hbox{\ct ZMIN}$,
is to disappear ({\ct POROUS\_FLOOR=.TRUE.} on the {\ct MISC} line).
In this case, {\ct 'MPUA'} will be zero, but {\ct 'AMPUA'} will not. FDS stores the droplet mass just before removing the droplet from
the simulation for the purpose of saving CPU time.} MPUA counts a particle whenever it is on any solid surface, including the walls.  If the particle or droplet moves from one solid wall
cell to another, then it will be counted again.  The cooling of a solid surface by droplets of a
given type is given by {\ct 'CPUA'}, the \underline{C}ooling \underline{P}er \underline{U}nit \underline{A}rea in units of kW/m$^2$.  Since a typical sprinkler simulation only tracks a small fraction of the droplets emitted from a sprinkler, both MPUA and CPUA also perform an exponential smoothing.  This avoids having spotted distributions on surfaces due to the infrequent arrival of particles that likely have a high weighting factor.

In the test case {\bf bucket\_test}, a single sprinkler is
mounted 10~cm below a 5~m ceiling. Water flows for 30~s at a constant
rate of 180~L/min (ramped up and down in 1~s).  The simulation continues for another 10~s to allow
water drops time to reach the floor. The total mass of water discharged is
\be
  \mathrm{ 180 \; \frac{L}{min} \times 1 \; \frac{kg}{L} \times \frac{1}{60} \; \frac{min}{s} \times 30 \; s = 90 \; kg }
\ee
In the simulation, the quantity {\ct 'AMPUA'} with {\ct STATISTICS='SURFACE INTEGRAL'} is applied to the {\ct DEVC} line.
{\ct 'AMPUA'} records the accumulated water mass per unit area (kg/m$^2$), analogous to actual buckets the size of a grid cell.
Summing the values of {\ct 'AMPUA'} over the entire
floor yields a total of 90~kg (Fig.~\ref{bucket_test_fig}). Note that there really is no need to time-average the results. The quantity is inherently accumulating.

\begin{figure}[ht]
\centering
\includegraphics[scale=0.55]{SCRIPT_FIGURES/bucket_test}
\caption[Output of the {\ct bucket\_test} case.]{Accumulated water collected at the floor in the {\ct bucket\_test} case.}
\label{bucket_test_fig}
\end{figure}





\subsubsection{Droplet Mass and Fluxes in Gas Phase}

Away from solid surfaces, {\ct 'MPUV'} is the \underline{M}ass \underline{P}er \underline{U}nit \underline{V}olume of the droplets as they fly through
the air, in units of kg/m$^3$.  {\ct 'PARTICLE FLUX X'},  {\ct 'PARTICLE FLUX Y'}, and {\ct 'PARTICLE FLUX Z'} produce {\em only} slice and Plot3D files
of the mass flux of droplets in the $x$, $y$, and $z$ directions, respectively, in units of kg/m$^2$/s.

\subsubsection{Local Spray Properties}
\label{PDPA}

Detailed experimental measurements of sprays using \underline{P}hase \underline{D}oppler \underline{P}article
\underline{A}nalysis (PDPA) provide information on the droplet size distribution, speed and concentration.
A special device type is defined via a {\ct DEVC} line to simulate the PDPA measurement. The actual quantity to measure, and the details of the
measurement are defined using an associated {\ct PROP} line. Note that in FDS, the PDPA device cannot produce complete droplet size
distributions, but only various mean properties.

By default, the PDPA device output at time $t$ is computed as a time integral
\be
F(t) = \frac{1}{\min(t,t_e)-t_s} \int_{t_s}^{\min(t,t_e)} f(t) \, dt
\ee
but instantaneous values can be obtained by setting {\ct PDPA\_INTEGRATE = .FALSE.} on the corresponding {\ct PROP} line, in which case
\be
F(t) = f(t)
\ee
The function $f(t)$ has two forms:
\be
f_1(t) =  \frac{\sum_i n_i d_i^m \, x}{\sum_i n_i d_i^n}  \quad ; \quad
f_2(t) = \frac{\sum_i n_i \, x}{V}
\ee
where $n_i$ is the number of real particles represented by the single simulated particle, $d_i$
is the particle diameter, and $x$ is the quantity to be measured. In each case, the summation goes over all the particles within a sphere
with radius {\ct PDPA\_RADIUS} and centered at the location given by the device {\ct XYZ}.

The first form $f_1(t)$ is used for the computation of various mean diameters, with
associated properties defined using the following keywords on the {\ct PROP} line:
\begin{description}
\item[{\ct PDPA\_M}] $m$, exponent $m$ of diameter.
\item[{\ct PDPA\_N}] $n$, exponent $n$ of diameter. In case $m=n$, the exponent $1/(m-n)$ is removed from the formula.
\end{description}
\noindent The second form ($f_2(t)$) is used for the computation of mass and energy related variables that do not include the diameter weighting.
The concentrations are based on the sampling volume, $V$, defined by {\ct PDPA\_RADIUS}.
The quantity used for $x$ can be chosen with the keyword {\ct QUANTITY}.
A summary of the available PDPA quantities is shown in Table~\ref{tbl:pdpa}.

\begin{table}[!ht]
\caption{Output quantities available for PDPA output.}
\label{tbl:pdpa}
\begin{center}
\begin{tabular}{|l|l|l|l|}
\hline
{\ct QUANTITY}          & $x$                           & $f(x)$ & Unit \\ \hline
{\ct 'DIAMETER'} (default) & 1                          & $f_1$  & $\mu$m \\
{\ct 'ENTHALPY'}        & $(4/3)\rho_i r_i^3 \left(c_{p,i}(T_i)T_i-c_{p,i}(T_m)T_m \right)$     & $f_2$  & kJ/m$^3$ \\
{\ct 'PARTICLE FLUX X'}  & $(4/3)\rho_i r_i^3 u_i$       & $f_2$  & kg/m$^2$s \\
{\ct 'PARTICLE FLUX Y'}  & $(4/3)\rho_i r_i^3 v_i$       & $f_2$  & kg/m$^2$s \\
{\ct 'PARTICLE FLUX Z'}  & $(4/3)\rho_i r_i^3 w_i$       & $f_2$  & kg/m$^2$s \\
{\ct 'U-VELOCITY'}      & $u_i$                         & $f_1$  & m/s \\
{\ct 'V-VELOCITY'}      & $v_i$                         & $f_1$  & m/s \\
{\ct 'W-VELOCITY'}      & $w_i$                         & $f_1$  & m/s \\
{\ct 'VELOCITY'}        & $(u_i^2+v_i^2+w_i^2)^{1/2}$   & $f_1$  & m/s \\
{\ct 'TEMPERATURE'}     & $T_i$                         & $f_1$  & ${}^\circ$C \\
{\ct 'MASS CONCENTRATION'} & $(4/3)\rho r_i^3 $         & $f_2$  & kg/m$^3$ \\
{\ct 'NUMBER CONCENTRATION'} & 1                        & $f_2$  & \\
 \hline
\end{tabular}
\end{center}
${}^*$ $T_m$ is the melting temperature of the associated species.
\end{table}

It is also possible to output histograms of PDPA output quantities. When {\ct PDPA\_HISTOGRAM} is set to {\ct .TRUE.} histogram bin counts are output to  a csv file from all devices associated with this {\ct PROP}. The number of bins and the limits of the histogram are controlled by parameters on the {\ct PROP} line. The value used in creating the histogram is $d_i^m x$. Note that when making a histogram of diameters, the limits must be given in meters, not microns.  The output file contains raw bin counts. Values falling outside the histogram limits are included in the counts of the first and last bins.
The properties of the PDPA device are defined using the following keywords on the {\ct PROP} line:
\begin{description}
\item[{\ct PART\_ID}] Name of the particle group to limit the computation to. Do not specify to account for all particles.
\item[{\ct PDPA\_START}] $t_s$, starting time of time integration in seconds. PDPA output is always a running average over time.
As the spray simulation may contain some initial transient phase, it may be useful to specify the starting time of data collection.
\item[{\ct PDPA\_END}] $t_e$, ending time of time integration in seconds.
\item[{\ct PDPA\_INTEGRATE}] A logical parameter for choosing between time integrated or instantaneous values. {\ct .TRUE.} by default.
\item[{\ct PDPA\_RADIUS}] Radius (m) of the sphere, centered at the device location, inside which the particles are monitored.
\item[{\ct PDPA\_NORMALIZE}] Can be set {\ct .FALSE.} to force $V = 1$ in the formula for $f_2(t)$.
\item[{\ct QUANTITY}] Specified on {\ct PROP} line for choosing the variable $x$.
\item[{\ct PDPA\_HISTOGRAM\_NBINS}] Number of bins used for the histogram.
\item[{\ct PDPA\_HISTOGRAM\_MIN}] Lower limit of the histogram.
\item[{\ct PDPA\_HISTOGRAM\_MAX}] Upper limit of the histogram.
\end{description}

\noindent The following example is used to measure the Sauter mean diameter, $D_{32}$, of the particle type {\ct 'water drops'}, starting from
time 5~s.
\footnotesize
\begin{verbatim}
&PROP ID='pdpa_d32'
      PART_ID='water drops'
      PDPA_M=3
      PDPA_N=2
      PDPA_RADIUS=0.01
      PDPA_START=5. /
&DEVC XYZ=0.0,0.0,1.0, QUANTITY='PDPA', PROP_ID='pdpa_d32' /
\end{verbatim}
\normalsize

\noindent The following example is used to write out a histogram of droplet size using 20 equally sized bins between 0 and 2000 $\mu$m.
\footnotesize
\begin{verbatim}
&PROP ID='pdpa_d'
      PART_ID='water drops'
      QUANTITY="DIAMETER"
      PDPA_RADIUS=0.01
      PDPA_START=0.0
      PDPA_M=1
      PDPA_HISTOGRAM=.TRUE.
      PDPA_HISTOGRAM_NBINS=20
      PDPA_HISTOGRAM_LIMITS=0,2000E-6
      /
&DEVC XYZ=0.0,0.0,1.0, QUANTITY='PDPA', PROP_ID='pdpa_d' /
\end{verbatim}

\normalsize



\subsection{Interfacing with Structural Models}
\label{info:AST}

FDS solves a one-dimensional heat conduction equation for each
boundary cell marking the interface between gas and solid, assuming
that material properties for the material layer(s) are provided. The
results can be transferred (via either {\ct DEVC} or {\ct BNDF}
output) to other models that predict the mechanical response of the
walls or structure. For many applications, the 1-D solution of the
heat conduction equation is adequate, but in situations where it is
not, another approach can be followed. FDS includes a calculation of
the Adiabatic Surface Temperature (AST), a quantity that is
representative of the heat flux to a solid surface. Following the idea
proposed by Ulf Wickstrom~\cite{Wickstrom:Interflam2007}, the
following equation can be solved via a simple iterative technique to
determine an effective gas temperature, $T_{\hbox{\tiny AST}}$:
\be \dot{q}_r'' + \dot{q}_c'' = \epsilon \sigma \, \left(
T_{\hbox{\tiny AST}}^4 - T_w^4 \right) + h (T_{\hbox{\tiny AST}} - T_w)  \ee
The sum $\dot{q}_r'' + \dot{q}_c''$ is the {\em net} heat flux onto
the solid surface, whose temperature is $T_w$. The heat fluxes and
surface temperature are computed in FDS, and they are
inter-dependent. The computed wall temperature affects the net heat
flux and vice versa. However, because FDS only computes the solution
to the 1-D heat conduction equation in the solid, it may be prone to
error if lateral heat conduction within the solid is
significant. Thus, in some scenarios neither the FDS-predicted heat
fluxes or the surface temperature can be used as an accurate indicator
of the thermal insult from the hot, smokey gases onto solid objects.

Of course, both the heat fluxes, $\dot{q}_r''$ and $\dot{q}_c''$, and
the surface temperature, $T_w$ can be passed from FDS to the other
model, and suitable corrections can be made based on a presumably more
accurate prediction of the solid temperature.  Alternatively, the
single quantity, $T_{\hbox{\tiny AST}}$, can be transferred, as this
is the temperature that the solid surface effectively ``sees.'' It
represents the gas phase thermal environment, however complicated, but
it does not carry along the uncertainty associated with the simple
solid phase heat conduction model within FDS. Obviously, the objective
in passing information to a more detailed model is to get a better
prediction of the solid temperature (and ultimately its mechanical
response) than FDS can provide.


\subsection{Useful Solid Phase Outputs}
\label{info:material_components}

In addition to the {\ct PROF}ile output, there are various additional quantities that are useful for monitoring reacting
surfaces. For example, {\ct 'WALL THICKNESS'} gives the overall thickness of the solid surface
element. {\ct 'SURFACE DENSITY'} gives the overall mass per unit area for the
solid surface element, computed as an integral of material density over wall
thickness. Both quantities are available both as {\ct DEVC} and {\ct BNDF}.

To record the change in a material
component's density with time, use the output quantity {\ct 'SOLID DENSITY'} in the following way:

\footnotesize
\begin{verbatim}
&DEVC ID='...', XYZ=..., IOR=3, QUANTITY='SOLID DENSITY', MATL_ID='wood', DEPTH=0.001 /
\end{verbatim} \normalsize

\noindent
This produces a time history of the density of the material referred to as {\ct 'wood'} on a {\ct MATL} line. The density
is recorded 1~mm beneath the surface which is oriented in the positive $z$ direction. Note that if {\ct 'wood'} is part of a mixture, the
density represents the mass of {\ct 'wood'} per unit volume of the mixture. Note also that {\ct 'SOLID DENSITY'} is only available as a
{\ct DEVC} (device) quantity.

\subsection{Fractional Effective Dose (FED) and Fractional Irritant Concentration (FIC)}
\label{info:FED}

The Fractional Effective Dose index (FED), developed by Purser~\cite{SFPE:Purser}, is a commonly used measure of human incapacitation
due to the combustion gases. The specification of gases and mixtures is explained in Chapter~\ref{info:Chemistry}. The FED value is calculated as
\be
\mathrm{FED}_\mathrm{tot} = (\mathrm{FED}_\mathrm{CO} + \mathrm{FED}_\mathrm{CN} + \mathrm{FED}_\mathrm{NO_x} + \mathrm{FLD}_\mathrm{irr}) \times \mathrm{HV}_\mathrm{CO_2} + \mathrm{FED}_\mathrm{O_2}
\ee
The fraction of an incapacitating dose of CO is calculated as
\be
\mathrm{FED}_\mathrm{CO} = \int_0^t 2.764 \times 10^{-5} \, (C_\mathrm{CO}(t))^{1.036} \, dt
\ee
where $t$ is time in minutes and $C_\mathrm{CO}$ is the CO concentration (ppm). The fraction of an incapacitating dose of CN is calculated as
\be
\mathrm{FED}_\mathrm{CN} = \int_0^t \left( \frac{\exp\left( \frac{C_\mathrm{CN}(t)}{43} \right)}{220} - 0.0045 \right) \, dt
\ee
where $t$ is time in minutes and $C_\mathrm{CN}$ is the concentration (ppm) of HCN corrected for the protective effect of NO$_\mathrm{2}$. $C_\mathrm{CN}$ is calculated as
\be
C_\mathrm{CN} = C_\mathrm{HCN} - C_\mathrm{NO_2}
\ee
The fraction of an incapacitating dose of NO$_x$ is calculated as
\be
\mathrm{FED}_\mathrm{NO_x} = \int_0^t \frac{C_\mathrm{NO_x}(t)}{1500} \, dt
\ee
where $t$ is time in minutes and $C_\mathrm{NO_x}$ is the sum of NO and NO$_\mathrm{2}$ concentrations (ppm).

The Fractional Lethal Dose (FLD) of irritants is calculated as
\be
\mathrm{FLD}_\mathrm{irr} = \int_0^t \left(
    \frac{C_\mathrm{HCl}(t)}    {F_\mathrm{FLD,HCl}} +
    \frac{C_\mathrm{HBr}(t)}    {F_\mathrm{FLD,HBr}} +
    \frac{C_\mathrm{HF}(t)}     {F_\mathrm{FLD,HF}} +
    \frac{C_\mathrm{SO_2}(t)}   {F_\mathrm{FLD,SO_2}} +
    \frac{C_\mathrm{NO_2}(t)}   {F_\mathrm{FLD,NO_2}} +
    \frac{C_\mathrm{C_3H_4O}(t)}{F_\mathrm{FLD,C_3H_4O}} +
    \frac{C_\mathrm{CH_2O}(t)}  {F_\mathrm{FLD,CH_2O}}
    \right) \, dt
\ee
where $t$ is time in minutes, the nominators are the instantaneous concentrations (ppm) of each irritant and
the denominators the exposure doses of respective irritants predicted to be lethal to half the population.
The lethal exposure doses~\cite{SFPE:Purser} are given in the table~\ref{tbl:FIC}. To include the effect of an irritant gas not listed in the table,
the user should specify $\mathrm{F_{FLD}}$ in ppm$\times$min using the {\ct FLD\_LETHAL\_DOSE} property of the corresponding {\ct SPEC} line.
\begin{table}[ht]
\caption{Coefficients used for the computation of irritant effects of gases.}
\label{tbl:FIC}
\begin{center}
\begin{tabular}{|l|l|l|l|l|l|l|l|}
\hline & HCl & HBr & HF & $\mathrm{SO_2}$ & $\mathrm{NO_2}$ & $\mathrm{C_3H_4O}$ & $\mathrm{CH_2O}$  \\ \hline \hline
F${}_\mathrm{FLD}$ (ppm $\times$ min) & 114000 & 114000 & 87000 & 12000 & 1900 & 4500 & 22500 \\
F${}_\mathrm{FIC}$ (ppm) & 900 & 900 & 900 & 120 & 350 & 20 & 30 \\ \hline
\end{tabular}
\end{center}
\end{table}

The fraction of an incapacitating dose of low O${}_2$ hypoxia is calculated as
\be
\mathrm{FED}_\mathrm{O_2} =  \int_0^t \frac{dt}{60 \exp \left [ 8.13 - 0.54 \, (20.9 - C_\mathrm{O_2}(t)) \right ] }
\ee
where $t$ is time in minutes and $C_\mathrm{O_2}$ is the O${}_2$ concentration (volume per cent).
The hyperventilation factor induced by carbon dioxide is calculated as
\be
\mathrm{HV}_\mathrm{CO_2} = \frac{ \exp( 0.1903 \, C_\mathrm{CO_2}(t) +  2.0004 ) }{7.1} \label{co2hyp}
\ee
where $t$ is time in minutes and $C_\mathrm{CO_2}$ is the CO${}_2$ concentration (percent).

The Fractional Irritant Concentration (FIC), also developed by Purser~\cite{SFPE:Purser}, represents the toxic effect which
depends upon the immediate concentrations of irritants. The overall irritant concentration FIC is calculated as
\be
\mathrm{FIC}_\mathrm{irr} =
    \frac{C_\mathrm{HCl}(t)}    {F_\mathrm{FIC,HCl}} +
    \frac{C_\mathrm{HBr}(t)}    {F_\mathrm{FIC,HBr}} +
    \frac{C_\mathrm{HF}(t)}     {F_\mathrm{FIC,HF}} +
    \frac{C_\mathrm{SO_2}(t)}   {F_\mathrm{FIC,SO_2}} +
    \frac{C_\mathrm{NO_2}(t)}   {F_\mathrm{FIC,NO_2}} +
    \frac{C_\mathrm{C_3H_4O}(t)}{F_\mathrm{FIC,C_3H_4O}} +
    \frac{C_\mathrm{CH_2O}(t)}  {F_\mathrm{FIC,CH_2O}}
\ee
where the nominators are the instantaneous concentrations of each irritant and the denominators the concentrations of respective irritants
expected to cause incapacitation in half the population. The incapacitating concentrations~\cite{SFPE:Purser} are given in the table~\ref{tbl:FIC}.
To include the irritant effect of a gas not listed in the table, the user should specify $\mathrm{F_{FIC}}$ in ppm using the {\ct FIC\_CONCENTRATION}
property on the corresponding {\ct SPEC} line.

Note that the spatial integration features (Section~\ref{info:statistics}) cannot be used with FED output because FED makes
use of the {\ct TIME INTEGRAL} (Section~\ref{info:time_integral}). For the same reason, FED output is only available as a point
measurement.

\subsection{Spatially-Integrated Outputs}
\label{info:statistics}

A useful feature of a device ({\ct DEVC}) is to specify an output quantity along with a desired statistic. For example,

\footnotesize
\begin{verbatim}
&DEVC XB=2.3,4.5,2.8,6.7,3.6,7.8, QUANTITY='TEMPERATURE', ID='maxT', STATISTICS='MAX' /
\end{verbatim}
\normalsize

\noindent
causes FDS to write out the maximum gas phase temperature over the volume bounded by {\ct XB}. Note that it
does not compute the maximum over the entire computational domain, just the specified volume, and this volume must lie within a single mesh.
Other {\ct STATISTICS} are discussed below.  Note that some are appropriate for gas phase output quantities, some for solid phase,
and some for both.

For solid phase output quantities, like heat fluxes and surface temperatures, the
specification of a {\ct SURF\_ID} along with the appropriate statistic limits the calculation to only those surfaces. You can further limit the search by using the
sextuplet of coordinates {\ct XB} to force FDS to only compute statistics for surface cells within the given volume. Be careful to
account for the fact that the solid surface might shift to conform to the underlying numerical grid. Also, be careful not to specify a
volume that extends beyond a single mesh. Note that you do not (and should not) specify an orientation via the parameter {\ct IOR} when using
a spatial statistic. {\ct IOR} is only needed to find a specific point on the solid surface.

\begin{warning}
\noindent
Use the {\ct STATISTICS} feature with caution because
it demands that FDS evaluate the given {\ct QUANTITY} in all gas or solid phase cells.
\end{warning}

\subsubsection{Minimum or Maximum Value}

For a given gas phase scalar output quantity defined at the center of each grid cell, $\phi_{ijk}$, {\ct STATISTICS='MIN'} or {\ct STATISTICS='MAX'}
computes the minimum or maximum value, respectively
\be \min_{ijk} \, \phi_{ijk} \quad ; \quad  \max_{ijk} \, \phi_{ijk} \ee
over the cells that are included in the specified volume bounded by {\ct XB}. Note that this
statistic is only appropriate for gas phase quantities. Note also that you must specify a volume to sum over via the
coordinate parameters, {\ct XB}, all of which must be contained within the same mesh.


\subsubsection{Average Value}

For a given gas phase scalar output quantity defined at the center of each grid cell, $\phi_{ijk}$, {\ct STATISTICS='MEAN'} computes the average value,
\be \frac{1}{N} \; \sum_{ijk} \phi_{ijk}  \ee
over the cells that are included in the specified volume bounded by {\ct XB}. Note that this
statistic is only appropriate for gas phase quantities. Note also that you must specify a volume to sum over via the
coordinate parameters, {\ct XB}, all of which must be contained within the same mesh.

\subsubsection{Volume-Weighted Mean}

For a given gas phase output quantity, $\phi(x,y,z)$, {\ct STATISTICS='VOLUME MEAN'} produces the discrete analog of
\be \frac{1}{V} \; \int \phi(x,y,z) \; dx \, dy \, dz \ee
which is very similar to {\ct 'MEAN'}, but it weights the values according to the relative size of the mesh cell. Note that this
statistic is only appropriate for gas phase quantities. Note also that you must specify a volume to sum over via the
coordinate parameters, {\ct XB}, all of which must be contained within the same mesh.

\subsubsection{Mass-Weighted Mean}

For a given gas phase output quantity, $\phi(x,y,z)$, {\ct STATISTICS='MASS MEAN'} produces the discrete analog of
\be \frac{ \int \rho(x,y,z) \, \phi(x,y,z) \; dx \, dy \, dz}{\int \rho \; dx \, dy \, dz}  \ee
which is similar to {\ct 'VOLUME MEAN'}, but it weights the values according to the relative mass of the mesh cell. Note that this
statistic is only appropriate for gas phase quantities. Note also that you must specify a volume to sum over via the
coordinate parameters, {\ct XB}, all of which must be contained within the same mesh.

\subsubsection{Volume Integral}

For a given gas phase output quantity, $\phi(x,y,z)$, {\ct STATISTICS='VOLUME INTEGRAL'} produces the discrete analog of
\be \int \phi(x,y,z) \; dx \, dy \, dz \ee
Note that this statistic is only appropriate for gas phase quantities, in particular those whose units involve m$^{-3}$. For example,
heat release rate per unit volume is an appropriate output quantity. Note also that you must specify a volume to sum over via the
coordinate parameters, {\ct XB}, all of which must be contained within the same mesh.

\subsubsection{Mass Integral}

For a given gas phase output quantity, $\phi(x,y,z)$, {\ct STATISTICS='MASS INTEGRAL'} produces the discrete analog of
\be \int \, \rho(x,y,z) \, \phi(x,y,z) \; dx \, dy \, dz \ee
Note that this statistic is only appropriate for gas phase quantities. Note also that you must specify a volume to sum over via the
coordinate parameters, {\ct XB}, all of which must be contained within the same mesh.

\subsubsection{Area Integral}

For a given gas phase output quantity, $\phi(x,y,z)$, {\ct STATISTICS='AREA INTEGRAL'} produces the discrete analog of
\be \int \phi(x,y,z) \; dA \ee
where $dA$ depends on the coordinates you specify for {\ct XB}.
Note that this statistic is only appropriate for gas phase quantities, in particular those whose units involve m$^{-2}$. For example,
the quantity {\ct 'MASS FLUX X'} along with {\ct SPEC\_ID='my gas'} is an appropriate output quantity if you want to know the mass flux of the gas species that
you have named {\ct 'my gas'} through an
area normal to the $x$ direction. Note also that you must specify an area to sum over via the
coordinate parameters, {\ct XB}, all of which must be contained within the same mesh.

\subsubsection{Surface Integral}

For a given solid phase output quantity, $\phi$, {\ct STATISTICS='SURFACE INTEGRAL'} produces the discrete analog of
\be \int \phi \; dA \ee
Note that this statistic is only appropriate for solid phase quantities, in particular those whose units involve m$^{-2}$. For example, the various heat and mass
fluxes are appropriate output quantities.


\subsubsection{Volume, Mass, and Heat Flow}
\label{info:flows}

The net flow of mass and energy into or out of compartments can be useful for many applications. There are several outputs that address these. All are prescribed via
the device ({\ct DEVC}) namelist group only. For example:

\footnotesize
\begin{verbatim}
&DEVC XB=0.3,0.5,2.1,2.5,3.0,3.0, QUANTITY='MASS FLOW', ID='whatever' /
\end{verbatim}
\normalsize

\noindent
outputs the net integrated mass flux through the given planar area, oriented in the positive $z$ direction, in this case. The three flows -- {\ct 'VOLUME FLOW'}, {\ct 'MASS FLOW'},
and {\ct 'HEAT FLOW'} are defined:
\begin{eqnarray*} \dot{V} &=& \int \bu \cdot \dS  \\
                  \dot{m} &=& \int \rho \bu \cdot \dS \\
                  \dot{q} &=& \int c_p \rho (T-T_\infty) \bu \cdot \dS
\end{eqnarray*}
The addition of a {\ct +} or {\ct -} to the {\ct QUANTITY} names
yields the integral of the flow in the positive or negative direction
only. In other words, if you want to know the mass flow out of a
compartment, use {\ct 'MASS FLOW +'} or {\ct 'MASS FLOW -'}, depending
on the orientation of the door.

\begin{warning}
The quantities {\ct 'MASS FLOW'} and {\ct 'HEAT FLOW'} should not be applied at a solid boundary.
\end{warning}

\subsection{Temporally-Integrated Outputs}
\label{info:time_integral}

In addition to the spatial statistics, a time integral of an {\ct DEVC} output can be computed by specifying
{\ct STATISTICS = 'TIME INTEGRAL'} on the {\ct DEVC} line. This produces a discrete analog of
\be
 \int_{t_0}^t \phi(\tau) \; d\tau
\ee
Note that the spatial and time integrals can not be used simultaneously.



\subsection{Wind and the Pressure Coefficient}
\label{info:wind}

In the field of wind engineering, a commonly used quantity is known as
the {\ct PRESSURE\_COEFFICIENT}:
\be
   C_p = \frac{p-p_\infty}{\ha \rho_\infty U^2}
\ee
$p_\infty$ is the ambient, or ``free stream'' pressure, and
$\rho_\infty$ is the ambient density.  The parameter $U$ is the
free-stream wind speed, given as {\ct CHARACTERISTIC\_VELOCITY} on the
{\ct PROP} line

\footnotesize
\begin{verbatim}
&BNDF QUANTITY='PRESSURE COEFFICIENT', PROP_ID='whatever' /
&DEVC ID='pressure tap', XYZ=..., IOR=2, QUANTITY='PRESSURE COEFFICIENT', PROP_ID='whatever' /
&PROP ID='whatever', CHARACTERISTIC_VELOCITY=3.4 /
\end{verbatim}
\normalsize

\noindent
Thus, you can either paint values of $C_p$ at all surface points, or create a single time history of $C_p$ using a single device at a single point.

\subsection{Dry Volume and Mass Fractions}
\label{info:dry}

During actual experiments, species such as CO and CO$_2$ are typically measured ``dry''; that is, the water
vapor is removed from the gas sample prior to analysis.  For easier comparison of FDS predictions with measured data,
you can specify the logical parameter {\ct DRY} on a {\ct DEVC} line that reports the {\ct 'MASS FRACTION'} or
{\ct 'VOLUME FRACTION'} of a species.  For example, the first line reports
the actual volume fraction of CO, and the second line reports the output of a gas analyzer in a typical experiment.

\footnotesize
\begin{verbatim}
&DEVC ID='wet CO', XYZ=..., QUANTITY='VOLUME FRACTION', SPEC_ID='CARBON MONOXIDE'/
&DEVC ID='dry CO', XYZ=..., QUANTITY='VOLUME FRACTION', SPEC_ID='CARBON MONOXIDE', DRY=.TRUE. /
\end{verbatim}
\normalsize


\subsection{Gas Velocity}
\label{info:velocity}

The gas velocity components, $u$, $v$, and $w$, can be output as slice ({\ct SLCF}), point device ({\ct DEVC}), isosurface ({\ct ISOF}), or Plot3D quantities using
the names {\ct 'U-VELOCITY'}, {\ct 'V-VELOCITY'}, and {\ct 'W-VELOCITY'}.
The total velocity is specified as just {\ct 'VELOCITY'}. Normally, the velocity is always positive, but you can use the parameter {\ct VELO\_INDEX} with a value
of 1, 2 or 3 to indicate that the velocity ought to have the same sign as $u$, $v$, or $w$, respectively. This is handy if you are comparing velocity predictions
with measurements. For Plot3D files, add {\ct PLOT3D\_VELO\_INDEX(N)=...} to the {\ct DUMP} line, where {\ct N} refers to the Plot3D quantity 1, 2, 3, 4 or 5.


\subsection{Enthalpy}
\label{info:enthalpy}

There are several outputs that report the enthalpy of the gas mixture. First, the {\ct 'SPECIFIC ENTHALPY'} and the {\ct 'SPECIFIC SENSIBLE ENTHALPY'} are defined:
\be
   h = h^0 + \int_0^{T'} c_p \, dT'  \quad ; \quad h_s = \int_0^{T'} c_p \, dT'
\ee
Both have units of kJ/kg.
The quantities {\ct 'ENTHALPY'} and {\ct SPECIFIC ENTHALPY'} are $H=\rho h$ and $H_s=\rho h_s$, respectively, in units of kJ/m$^3$.


\subsection{Computer Performance}
\label{info:TIMING}

There are a variety of ways to test the performance of your computer in running an FDS simulation. In no particular order, here is a list inputs and/or outputs to help:
\begin{description}
\item[{\ct DEBUG}]  If set to {\ct .TRUE.} on the {\ct DUMP} line, this parameter will cause FDS to print out debugging information concerning the progress of an MPI
calculation.
\item[{\ct TIMING}] If set to {\ct .TRUE.} on the {\ct DUMP} line, this parameter will cause FDS to print out timing information concerning the data exchanges in an MPI
calculation.
\item[{\ct VELOCITY\_ERROR\_FILE}] If set to {\ct .TRUE.} on the {\ct DUMP} line, this parameter will cause FDS to create a file with a time history of the maximum error
associated with the normal component of velocity at solid or interpolated boundaries.
\end{description}


\subsection{Output File Precision}
\label{info:SIG_FIGS}

There are several different output files that have the format of a comma-delimited spreadsheet (.csv). These files consist of real numbers in columns separated by
commas. By default, the real numbers are formatted

\begin{verbatim}
-1.2345678E+123
\end{verbatim}

\noindent
To change the precision of the numbers, use {\ct SIG\_FIGS} on the {\ct DUMP} line to indicate the number of significant figures in the mantissa (default is 8). Use
{\ct SIG\_FIGS\_EXP} to change the number of digits in the exponent (default is 3). Keep in mind that the precision of real numbers used internally in an FDS calculation
is approximately 12, equivalent to 8 byte or double precision following conventional Fortran rules.


\subsection{\emph{A Posteriori} Mesh Quality Metrics}
\label{info:meshquality}
The quality of a particular simulation is most directly tied to grid resolution.  Three slice file output quantities are suggested here for measuring errors in the velocity and scalar fields:
\begin{enumerate}
\item A model for the fraction of unresolved kinetic energy called the \emph{measure of turbulence resolution} (similar to what is often called the `Pope criterion' \cite{Pope:2004}), MTR
\item A model for the fraction of unresolved scalar energy fluctuations called \emph{measure of scalar resolution} \cite{Vervisch:2010}, MSR
\item A \emph{wavelet-based error measure} \cite{McDermott:2010}, WEM
\end{enumerate}
Examples:

\footnotesize
\begin{verbatim}
&SLCF PBY=0, QUANTITY='TURBULENCE RESOLUTION' /
&SLCF PBY=0, QUANTITY='SCALAR RESOLUTION', QUANTITY2='MASS FRACTION', SPEC_ID='HELIUM' /
&SLCF PBY=0, QUANTITY='WAVELET ERROR', QUANTITY2='HRRPUV', CELL_CENTERED=.TRUE. /
\end{verbatim} \normalsize
Note that an additional scalar {\ct QUANTITY2} is required for MSR and WEM.  {\ct QUANTITY2} may be any output quantity appropriate for {\ct SLCF}.
Also, {\ct CELL\_CENTERED} is optional for any of the three metrics.

\subsubsection{Measure of Turbulence Resolution}

In FDS, the user may output a scalar quantity which we refer to as the \emph{measure of turbulence resolution}, defined locally as
\begin{eqnarray}
\mbox{MTR}(\mathbf{x},t) = \frac{k_{sgs}}{k_{res} + k_{sgs}}
\end{eqnarray}
where
\vskip-.6cm
\begin{eqnarray}
k_{res} &=& \mbox{$\frac{1}{2}$}\tilde{u}_i \tilde{u}_i \\
k_{sgs} &=& \mbox{$\frac{1}{2}$}(\tilde{u}_i - \hat{\tilde{u}}_i)(\tilde{u}_i - \hat{\tilde{u}}_i)
\end{eqnarray}
Here, $\tilde{u}_i$ is the resolved LES velocity and $\hat{\tilde{u}}_i$ is test filtered at a scale $2\Delta$ where $\Delta$ is the LES filter width (in FDS, $\Delta=\delta x$).  The model for the SGS fluctuations is taken from scale similarity \cite{Bardina:1980}.  Cross-term energy is ignored. The basic idea is to provide the user with an approximation to the Pope criterion \cite{Pope:2004}, $M$, which is easily accessible in Smokeview (the FDS visualization tool).  In Smokeview, the user may readily time average MTR in a specified plane.  The time average of MTR is a reasonable estimate of $M$.  The measure falls within the range [0,1], with 0 indicating perfect resolution and 1 indicating poor resolution.  The concept is illustrated in Figure \ref{fig_mtr}. Notice that on the left the difference between the grid signal and the test signal is very small.  On the right, the grid signal is highly turbulent and the corresponding test signal is much smoother.  We infer then that the flow is under-resolved.
\begin{figure}[ht]
\centering
\begin{tabular}{rl}
\includegraphics[width=0.4\linewidth]{FIGURES/mtr_resolved_signal} &
\includegraphics[width=0.4\linewidth]{FIGURES/mtr_unresolved_signal}
\end{tabular}
\vskip-0.2cm
\caption{(Left) Resolved signal, MTR is small. (Right) Unresolved signal, MTR is close to unity.}
\label{fig_mtr}
\end{figure}

For the canonical case of isotropic turbulence Pope actually defines LES such that $M<0.2$.  That is, LES requires resolution of 80\% of the kinetic energy in the flow field (because this puts the grid Nyquist limit within the inertial subrange).  The question remains as to whether this critical value is sufficient or necessary for a given engineering problem.  As shown in \cite{McDermott:2010}, maintaining mean values of MTR near 0.2 indeed provides satisfactory results (simulation results within experimental error bounds) for mean velocities and species concentrations in nonreacting, buoyant plumes.

\subsubsection{Measure of Scalar Resolution}
\label{mtr}
The \emph{measure of scalar resolution} is defined locally as
\begin{eqnarray}
\mbox{MSR}(\mathbf{x},t) = \frac{T_{sgs}}{T_{res} + T_{sgs}}
\end{eqnarray}
where
\vskip-.6cm
\begin{eqnarray}
T_{res} &=& \tilde{\varphi}^2 \\
T_{sgs} &=& (\tilde{\varphi} - \hat{\tilde{\varphi}})^2
\end{eqnarray}
Here again the model for the SGS scalar energy fluctuations is taken from scale similarity \cite{Bardina:1980}.  The field $\hat{\tilde{\varphi}}$ is test filtered at a scale $2\Delta$.  The cross-term energy (i.e. $\langle 2 \tilde{\varphi}\varphi^{\prime} \rangle$, where $\varphi^\prime = \varphi - \tilde{\varphi}$) is ignored, but this does not affect the bounds of the measure.  Further, it can be shown that this term is small if sufficient resolution is used. There is evidence to suggest that the requirements for scalar resolution may be somewhat more stringent than for the velocity field \cite{Vervisch:2010}.  Therefore, currently the best advice is to keep the mean value of MSR less than 0.2.

\subsubsection{Wavelet Error Measure}
\label{wavelets}
We begin by providing background on the simple Haar wavelet \cite{Nievergelt:1999}.  For a thorough and more sophisticated review of wavelet methods, the reader is referred to Schneider and Vasilyev \cite{Schneider:2010}.

Suppose the scalar function $f(r)$ is sampled at discrete points $r_j$, separated by a distance $h$, giving values $s_j$.  Defining the \emph{unit step function} over the interval $[r_1,r_2]$ by
\begin{eqnarray}
\varphi_{[r_1,r_2]} = \left\{ \begin{array}{ll} 1 & \quad \mbox{if} \quad r_1 \le r < r_2 \\ 0 & \quad \mbox{otherwise} \end{array} \right.
\end{eqnarray}
the simplest possible reconstruction of the signal is the step function approximation
\begin{eqnarray}
f(r) \approx \sum_j s_j \varphi_{[r_j,r_j+h]}(r)
\end{eqnarray}
By ``viewing'' the signal at a coarser resolution, say $2h$, an identical reconstruction of the function $f$ over the interval $[r_j,r_j+2h]$ may be obtained from
\begin{eqnarray}
\label{eqn_wavelet_decomp}
f_{[r_j,r_j+2h]}(r) = \underbrace{\mbox{$\frac{s_j+s_{j+1}}{2}$}}_a \,\varphi_{[r_j,r_j+2h]}(r) + \underbrace{\mbox{$\frac{s_j-s_{j+1}}{2}$}}_c \,\psi_{[r_j,r_j+2h]}(r)
\end{eqnarray}
where $a$ is as the \emph{average} coefficient and $c$ is as the \emph{wavelet} coefficient.  The Haar \emph{mother wavelet} (Figure \ref{fig_haar_mother}) is identified as
\begin{eqnarray}
\psi_{[r_1,r_2]}(r) = \left\{ \begin{array}{ll} 1 & \quad \mbox{if} \quad r_1\le r < \frac{1}{2}(r_1+r_2) \\ -1 & \quad \mbox{if} \quad \frac{1}{2}(r_1+r_2)\le r < r_2 \end{array} \right.
\end{eqnarray}

\begin{figure}[ht]
\centering
\includegraphics[width=0.5\linewidth]{FIGURES/haar_mother}
\vskip-0.2cm
\caption{Haar mother wavelet on the interval [0,1].}
\label{fig_haar_mother}
\end{figure}

The decomposition of the signal shown in (\ref{eqn_wavelet_decomp}) may be repeated at ever coarser resolutions.  The result is a \emph{wavelet transform}. The procedure is entirely analogous to the Fourier transform, but with compact support.  If we look at a 1D signal with $2^m$ points, the repeated application of (\ref{eqn_wavelet_decomp}) results in an $m \times m$ matrix of averages $\mathbf{a}$ with components $a_{ij}$ and an $m \times m$ wavelet coefficient matrix $\mathbf{c}$ with components $c_{ij}$.  Each row $i$ of $\mathbf{a}$ may be reconstructed from the $i+1$ row of $\mathbf{a}$ and $\mathbf{c}$.  Because of this and because small values of the wavelet coefficient matrix may be discarded, dramatic compression of the signal may be obtained.

Here we are interested in using the wavelet analysis to say something about the local level of error due to grid resolution.  Very simply, we ask what can be discerned from a sample of four data points along a line.  Roughly speaking we might expect to see one of the four scenarios depicted in Figure \ref{fig_wavelet_transforms}.  Within each plot window we also show the results of a Haar wavelet transform for that signal.  Looking first at the two top plots, on the left we have a step function and on the right we have a straight line.  Intuitively, we expect large error for the step function and small error for the line.  The following error measure achieves this goal:
\vskip-.6cm
\begin{eqnarray}
\mbox{WEM}(\mathbf{x},t) = \max_{x,y,z}\left( \frac{|c_{11} + c_{12}| - |c_{21}|}{|a_{21}|} \right)
\end{eqnarray}
Note that we have arbitrarily scaled the measure so that a step function leads to WEM of unity.  In practice the transform is performed in all coordinate directions and the max value is reported.  The scalar value may be output to Smokeview at the desired time interval.
\begin{figure}[ht]
\centering
\begin{tabular}{rl}
\includegraphics[width=0.4\linewidth]{FIGURES/haar_step} &
\includegraphics[width=0.4\linewidth]{FIGURES/haar_line} \\
\includegraphics[width=0.4\linewidth]{FIGURES/haar_eddy} &
\includegraphics[width=0.4\linewidth]{FIGURES/haar_extr}
\end{tabular}
\vskip-0.2cm
\caption{Averages and coefficients for local Haar wavelet transforms on four typical signals.}
\label{fig_wavelet_transforms}
\end{figure}

Looking now at the two plots on the bottom of Figure \ref{fig_wavelet_transforms}, the signal on the left, which may indicate spurious oscillations or unresolved turbulent motion, leads to $\mbox{WEM} = 2$ (note that this limit differs from the upper bound of unity for MTR and MSR).  Our measure therefore views this situation as the worst case in a sense.  The signal to the lower right is indicative of an extremum, which actually is easily resolved by most centered spatial schemes and results again in $\mbox{WEM}=0$.

In \cite{McDermott:2010}, the time average of WEM was reported for LES of a nonreacting buoyant plume at three grid resolutions.  From this study, the best advice currently is to maintain average values of WEM less than 0.5.



\clearpage


\section{Extracting Numbers from the Output Data Files}
\label{info:fds2ascii}

Often it is desired to present results of calculations in some form other
than those offered by Smokeview. In this case, there is a short
Fortran 90 program called {\bf fds2ascii.f90}, with a PC compiled version
called {\bf fds2ascii.exe}. To run the program, just type
\begin{verbatim}
fds2ascii
\end{verbatim}
at the command prompt. You will be asked a series of questions
about which type of output file to process, what time interval to
time average the data, and so forth. A single file is produced
with the name {\bf CHID\_fds2ascii.csv}. A typical command line session looks like this:

\footnotesize
\begin{verbatim}
>> fds2ascii
  Enter Job ID string (CHID):
bucket_test
  What type of file to parse?
  PL3D file? Enter 1
  SLCF file? Enter 2
  BNDF file? Enter 3
3
  Enter Sampling Factor for Data?
  (1 for all data, 2 for every other point, etc.)
1
  Limit the domain size? (y or n)
y
  Enter min/max x, y and z
-5 5 -5 5 0 1
  1   MESH  1, WALL TEMPERATURE
  Enter starting and ending time for averaging (s)
35 36
  Enter orientation: (plus or minus 1, 2 or 3)
3
  Enter number of variables
1
 Enter boundary file index for variable 1
1
 Enter output file name:
bucket_test_fds2ascii.csv
  Writing to file...      bucket_test_fds2ascii.csv
\end{verbatim}

\normalsize \noindent
These commands tell {\bf fds2ascii} that you want to convert (binary)
boundary file data into a text file. You want to sample
every data point within the specified volume, you want only those surfaces that point
upwards (+3 orientation), you only want 1 variable (only one is listed anyway and its index is
1 -- that is just the number used to list the available files). The data will be time-averaged, and it will
be output to a file listed at the end of the session.



\clearpage
\section{Summary of Frequently-Used Output Quantities}
\label{info:outputquantities}

Table~\ref{tab:output}, spread over the following pages, summarizes the various Output Quantities.
The column ``File Type'' lists the allowed output files for the quantities. ``B'' is for Boundary ({\ct BNDF}),
``D'' is for Device ({\ct DEVC}), ``I'' is for Iso-surface ({\ct ISOF}), ``P'' is for Plot3D, ``PA'' for PArticle ({\ct PART}),
``S'' is for Slice ({\ct SLCF}). Be careful
when specifying complicated quantities for Iso-surface or Plot3D files, as it requires computation in every gas phase cell.

For those output quantities that require a species name via {\ct SPEC\_ID}, the species implicitly defined when doing a mixture
fraction calculation are as follows:

\footnotesize
\begin{verbatim}
fuel
oxygen
nitrogen
water vapor
carbon dioxide
carbon monoxide
hydrogen
soot
other
\end{verbatim}
\normalsize

\noindent
As an example of how to use the species names, suppose you want to calculate the integrated mass flux of carbon monoxide
through a horizontal plane, like the total amount entrained in a fire plume. Use a ``device'' as follows

\footnotesize
\begin{verbatim}
&DEVC ID='CO_flow', XB=-5,5,-5,5,2,2, QUANTITY='MASS FLUX Z', SPEC_ID='CARBON MONOXIDE',
      STATISTICS='AREA INTEGRAL' /
\end{verbatim}
\normalsize

\noindent
Here, the {\ct ID} is just a label in the output file.


\begin{warning}
When an output
quantity is related to a particular gas species or particle type, you must specify the appropriate {\ct SPEC\_ID} or
{\ct PART\_ID} on the same input line. Also note that the use of underscores in output quantity names has been eliminated -- just
remember that all output quantity names ought to be in single quotes.
\end{warning}

\clearpage

\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|}
\caption[Output quantities.]{Summary of frequently used output quantities.}
\label{tab:output} \\
\hline
{\ct QUANTITY}                           & Symbol                                        & Units          & File Type    \\
\hline \hline
\endfirsthead
\caption[]{Summary of frequently used output quantities (continued).} \\
\hline
{\ct QUANTITY}                           & Symbol                                        & Units          & File Type    \\
\hline \hline
\endhead
{\ct ABSORPTION COEFFICIENT}                    & $\kappa$ (Section~\ref{info:RADI})            & 1/m            & D,I,P,S      \\ \hline
{\ct ACTUATED SPRINKLERS}                       & Number of actuated sprinklers                 &                & D            \\ \hline
{\ct ADIABATIC SURFACE TEMPERATURE}             & Section~\ref{info:AST}                        & $^\circ$C      & B,D          \\ \hline
{\ct AMPUA}$^{**}$                              & Section~\ref{info:part_output}                & kg/m$^2$       & B,D          \\ \hline
{\ct ASPIRATION}                                & Section~\ref{info:aspiration_detector}        & \%             & D            \\ \hline
{\ct BACK WALL TEMPERATURE}                     & Section~\ref{info:PROF}                       & $^\circ$C      & B,D          \\ \hline
{\ct BURNING RATE}                              & $\dm_f''$                                     & kg/m$^2$/s     & B,D          \\ \hline
{\ct CHAMBER OBSCURATION}                       & Section~\ref{info:smoke_detector}             & \%/m           & D            \\ \hline
{\ct CONDUCTIVITY}                              & $k$                                           & W/m/k          & D,I,P,S      \\ \hline
{\ct CONTROL}                                   & Section~\ref{info:CTRL}                       &                & D            \\ \hline
{\ct CONVECTIVE HEAT FLUX}                      & $\dq_c''$ (Section~\ref{info:heat_flux})      & kW/m$^2$       & B,D          \\ \hline
{\ct CPUA}$^{**}$                               & Section~\ref{info:part_output}                & kW/m$^2$       & B,D          \\ \hline
{\ct CPU TIME}                                  & Elapsed CPU time                              & s              & D            \\ \hline
{\ct DENSITY}                                   & $\rho$ or $\rho Y_\alpha$ with {\ct SPEC\_ID} & kg/m$^3$       & D,I,P,S      \\ \hline
{\ct DIVERGENCE}                                & $\nabla \cdot \bu$                            & s$^{-1}$       & D,I,P,S      \\ \hline
{\ct ENTHALPY}                                  & Section~\ref{info:enthalpy}                   & kJ/m$^3$       & D,I,P,S      \\ \hline
{\ct FED}                                       & Section~\ref{info:FED}                        &                & D            \\ \hline
{\ct FIC}                                       & Section~\ref{info:FED}                        &                & D,S          \\ \hline
{\ct GAUGE HEAT FLUX}                           & Section~\ref{info:heat_flux}                  & kW/m$^2$       & B,D          \\ \hline
{\ct H}                                         & $H=|\bu|^2/2 + \tp/\rho_0$                    & (m/s)$^2$      & D,I,P,S      \\ \hline
{\ct HEAT FLOW}                                 & Section~\ref{info:flows}                      & kW             & D            \\ \hline
{\ct NET HEAT FLUX}                             & Section~\ref{info:heat_flux}                  & kW/m$^2$       & B,D          \\ \hline
{\ct HRR}                                       & $\int \dq''' \; dV$                           & kW             & D            \\ \hline
{\ct HRRPUV}                                    & $\dq'''$                                      & kW/m$^3$       & D,I,P,S      \\ \hline
{\ct HRRPUA}                                    & $\dq''$                                       & kW/m$^2$       & D            \\ \hline
{\ct INCIDENT HEAT FLUX}                        & Section~\ref{info:heat_flux}                  & kW/m$^2$       & B,D          \\ \hline
{\ct INSIDE WALL TEMPERATURE}                   & Section~\ref{info:PROF}                       & $^\circ$C      & D            \\ \hline
{\ct ITERATION}                                 & Number of time steps                          &                & D            \\ \hline
{\ct LAYER HEIGHT}                              & Section~\ref{info:layerheight}                & m              & D            \\ \hline
{\ct LINK TEMPERATURE}                          & Section~\ref{info:heat_detectors}             & $^\circ$C      & D            \\ \hline
{\ct LOWER TEMPERATURE}                         & Section~\ref{info:layerheight}                & $^\circ$C      & D            \\ \hline
{\ct MASS FLOW}                                 & Section~\ref{info:flows}                      & kg/s           & D            \\ \hline
{\ct MASS FLUX}$^*$                             & Mass flux at solid surface                    & kg/m$^2$/s     & B,D          \\ \hline
{\ct MASS FLUX X}$^*$                           & $\rho u Y_\alpha$                             & kg/m$^2$/s     & D,I,P,S      \\ \hline
{\ct MASS FLUX Y}$^*$                           & $\rho v Y_\alpha$                             & kg/m$^2$/s     & D,I,P,S      \\ \hline
{\ct MASS FLUX Z}$^*$                           & $\rho w Y_\alpha$                             & kg/m$^2$/s     & D,I,P,S      \\ \hline
{\ct MASS FRACTION}$^*$                         & $Y_\alpha$                                    & kg/kg          & D,I,P,S      \\ \hline
{\ct MIXTURE FRACTION}                          & $Z$                                           & kg/kg          & D,I,P,S      \\ \hline
{\ct MPUA}$^{**}$                               & Section~\ref{info:part_output}                & kg/m$^2$       & B,D          \\ \hline
{\ct MPUV}$^{**}$                               & Section~\ref{info:part_output}                & kg/m$^3$       & D,P,S        \\ \hline
{\ct NORMAL VELOCITY}                           & Wall normal velocity                          & m/s            & D,B          \\ \hline
{\ct OPEN NOZZLES}                              & Number of open nozzles                        &                & D            \\ \hline
{\ct OPTICAL DENSITY}                           & $K/2.3$ (Section~\ref{info:visibility})       & 1/m            & D,I,P,S      \\ \hline
{\ct EXTINCTION COEFFICIENT}                    & $K$ (Section~\ref{info:visibility})           & 1/m            & D,I,P,S      \\ \hline
{\ct PATH OBSCURATION}                          & Section~\ref{info:beam_detector}              & \%             & D            \\ \hline
{\ct PARTICLE AGE}                              & $t_d$                                         & s              & PA           \\ \hline
{\ct PARTICLE DIAMETER}                         & $2 r_d$                                       & $\mu$m         & PA           \\ \hline
{\ct PARTICLE FLUX X}$^{**}$                    & Section~\ref{info:part_output}                & kg/m$^2$/s     & P,S          \\ \hline
{\ct PARTICLE FLUX Y}$^{**}$                    & Section~\ref{info:part_output}                & kg/m$^2$/s     & P,S          \\ \hline
{\ct PARTICLE FLUX Z}$^{**}$                    & Section~\ref{info:part_output}                & kg/m$^2$/s     & P,S          \\ \hline
{\ct PARTICLE MASS}                             & $m_d$                                         & kg             & PA           \\ \hline
{\ct PARTICLE TEMPERATURE}                      & $T_d$                                         & $^\circ$C      & PA           \\ \hline
{\ct PARTICLE VELOCITY}                         & $|\bu_d|$                                     & m/s            & PA           \\ \hline
{\ct PRESSURE}                                  & Perturbation pressure, $\tp$                  & Pa             & D,I,P,S      \\ \hline
{\ct PRESSURE COEFFICIENT}                      & $C_p$ (Section~\ref{info:wind})               &                & B,D          \\ \hline
{\ct PRESSURE ZONE}                             & Section~\ref{info:ZONE}                       &                & D,S          \\ \hline
{\ct RADIATIVE HEAT FLUX}                       & Section~\ref{info:heat_flux}                  & kW/m$^2$       & B,D          \\ \hline
{\ct RADIOMETER}                                & Section~\ref{info:heat_flux}                  & kW/m$^2$       & B,D          \\ \hline
{\ct RELATIVE HUMIDITY}                         & Relative humidity                             & \%             & D,I,P,S      \\ \hline
{\ct SCALAR RESOLUTION}$^{*****}$               &  Section~\ref{info:meshquality}               &                & S            \\ \hline
{\ct SENSIBLE ENTHALPY}                         & Section~\ref{info:enthalpy}                   & kJ/m$^3$       & D,I,P,S      \\ \hline
{\ct SOOT VOLUME FRACTION}                      & $\rho Y_s(Z)/\rho_s$                          & mol/mol        & D,I,P,S      \\ \hline
{\ct SPECIFIC ENTHALPY}                         & Section~\ref{info:enthalpy}                   & kJ/kg          & D,I,P,S      \\ \hline
{\ct SPECIFIC SENSIBLE ENTHALPY}                & Section~\ref{info:enthalpy}                   & kJ/kg          & D,I,P,S      \\ \hline
{\ct SPECIFIC HEAT}                             & $c_p$                                         & kJ/kg/K        & D,I,P,S      \\ \hline
{\ct SPRINKLER LINK TEMPERATURE}                & Section~\ref{info:sprinklers}                 & $^\circ$C      & D            \\ \hline
{\ct SOLID DENSITY}                             & Section~\ref{info:material_components}        & kg/m$^3$       & D            \\ \hline
{\ct SURFACE DENSITY}                           & Section~\ref{info:material_components}        & kg/m$^2$       & B,D          \\ \hline
{\ct TEMPERATURE}                               & $T$ (Section~\ref{info:THERMOCOUPLE})         & $^\circ$C      & D,I,P,S      \\ \hline
{\ct THERMOCOUPLE}                              & $T_{TC}$ (Section~\ref{info:THERMOCOUPLE})    & $^\circ$C      & D            \\ \hline
{\ct TIME}                                      & $t$ (Section~\ref{info:DEVC})                 & s              & D            \\ \hline
{\ct TIME STEP}                                 & $\delta t$, Numerical time step               & s              & D            \\ \hline
{\ct TURBULENCE RESOLUTION}                     & Section~\ref{info:meshquality}                &                & D,S          \\ \hline
{\ct U-VELOCITY}                                & $u$                                           & m/s            & D,I,P,S      \\ \hline
{\ct V-VELOCITY}                                & $v$                                           & m/s            & D,I,P,S      \\ \hline
{\ct W-VELOCITY}                                & $w$                                           & m/s            & D,I,P,S      \\ \hline
{\ct UPPER TEMPERATURE}                         & Section~\ref{info:layerheight}                & $^\circ$C      & D            \\ \hline
{\ct VELOCITY}$^{***}$                          & $\sqrt{u^2+v^2+w^2}$                          & m/s            & D,I,P,S      \\ \hline
{\ct VISCOSITY}                                 & $\mu$                                         & kg/m/s         & D,I,P,S      \\ \hline
{\ct VISIBILITY}                                & $S=C/K$ (Section~\ref{info:visibility})       & m              & D,I,P,S      \\ \hline
{\ct VOLUME FLOW}                               & Section~\ref{info:flows}                      & m$^3$/s        & D            \\ \hline
{\ct VOLUME FRACTION}$^{****}$                  & $X_\alpha$                                    & mol/mol        & D,I,P,S      \\ \hline
{\ct WALL CLOCK TIME}                           & Elapsed wall clock time                       & s              & D            \\ \hline
{\ct WALL TEMPERATURE}                          & $T_w$                                         & $^\circ$C      & B,D          \\ \hline
{\ct WALL THICKNESS}                            & Section~\ref{info:material_components}        & m              & B,D          \\ \hline
{\ct WAVELET ERROR}$^{*****}$                   & Section~\ref{info:meshquality}                &                & S            \\ \hline
\end{longtable}

\noindent
\begin{tabbing}
$^{*}$  \hspace{0.25in} \= Quantity requires the specification of a gas species using {\ct SPEC\_ID}. \\
$^{**}$                \> Quantity requires the specification of a particle name using {\ct PART\_ID}. \\
$^{***}$               \> Add {\ct VELO\_INDEX=1} to the input line if you want to multiply the velocity by the sign of $u$. \\
                       \> Use the indices 2 and 3 for $v$ and $w$, respectively.\\
$^{****}$              \> Quantity requires the specification of a gas species using {\ct SPEC\_ID}. \\
                       \> Do not use for {\ct MIXTURE FRACTION}.\\
$^{*****}$             \> Quantity requires specification of an additional scalar using {\ct QUANTITY2}.
\end{tabbing}


\clearpage
\section{Summary of Infrequently-Used Output Quantities}
\label{info:oddoutputquantities}

Table~\ref{tab:oddoutput} below lists some less often used output quantities. These are mainly used for diagnostic purposes. Explanations for most can
be found in Volume~1 of the FDS Technical Reference Guide~\cite{FDS_Math_Guide}.

\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|}
\caption[Output quantities.]{Summary of {\em infrequently} used output quantities.}
\label{tab:oddoutput} \\
\hline
{\ct QUANTITY}                           & Symbol                                        & Units          & File Type    \\
\hline \hline
\endfirsthead
\caption[]{Summary of {\em infrequently} used output quantities (continued).} \\
\hline
{\ct QUANTITY}                           & Symbol                                        & Units          & File Type    \\
\hline \hline
\endhead
{\ct ADD}                                       & Average Droplet Diameter                          & $\mu$m         & D,I,P,S      \\ \hline
{\ct ADT}                                       & Average Droplet Temperature                       & $^\circ$C      & D,I,P,S      \\ \hline
{\ct C\_SMAG}                                   & Smagorinsky coefficient                           &                & D,I,P,S      \\ \hline
{\ct CABLE TEMPERATURE}                         & Inner temperature of cable                        & $^\circ$C      & D            \\ \hline
{\ct EMISSIVITY}                                & Surface emissivity (usually constant)             &                & B,D          \\ \hline
{\ct F\_X, F\_Y, F\_Z}                          & Momentum terms, $F_x$, $F_y$, $F_z$               & m/s$^2$        & D,I,P,S      \\ \hline
{\ct GAS TEMPERATURE}                           & Gas Temperature near wall                         & $^\circ$C      & B,D          \\ \hline
{\ct HEAT TRANSFER COEFFICIENT}                 & Convective heat transfer                          & W/m$^2$/K      & B,D          \\ \hline
{\ct HRRPUL}                                    & $\int \dq''' \, dx \, dy$                         & kW/m           & D            \\ \hline
{\ct INTEGRATED INTENSITY}                      & $U=\int I \, d\bs$                                & kW/m$^2$       & D,I,P,S      \\ \hline
{\ct KINETIC ENERGY}                            & $(u^2+v^2+w^2)/2$                                 & (m/s)$^2$      & D,I,P,S      \\ \hline
%{\ct LEAKAGE}                                   & Volume flow due to leaks                          & m$^3$/s        & D            \\ \hline
{\ct MAXIMUM VELOCITY ERROR}                    & Section \ref{info:PRES}                       &                & D            \\ \hline
{\ct MIXING TIME}                               & Combustion mixing time                            & s              & D,I,P,S      \\ \hline
{\ct PARTICLE PHASE}                             & Orientation of droplet                            &                & PA           \\ \hline
{\ct PDPA}                                      & Droplet diagnostics                               &                & D            \\ \hline
{\ct PRESSURE ITERATIONS}                       & No. pressure iterations                           &                & D            \\ \hline
{\ct RADIATION LOSS}                            & $\nabla \cdot \bq_r''$                            & kW/m$^3$       & D,I,P,S      \\ \hline
{\ct STRAIN RATE X}                             & $\partial w/\partial y + \partial v/\partial z$   & 1/s            & D,I,P,S      \\ \hline
{\ct STRAIN RATE Y}                             & $\partial u/\partial z + \partial w/\partial x$   & 1/s            & D,I,P,S      \\ \hline
{\ct STRAIN RATE Z}                             & $\partial v/\partial x + \partial u/\partial y$   & 1/s            & D,I,P,S      \\ \hline
{\ct VORTICITY X}                               & $\partial w/\partial y - \partial v/\partial z$   & 1/s            & D,I,P,S      \\ \hline
{\ct VORTICITY Y}                               & $\partial u/\partial z - \partial w/\partial x$   & 1/s            & D,I,P,S      \\ \hline
{\ct VORTICITY Z}                               & $\partial v/\partial x - \partial u/\partial y$   & 1/s            & D,I,P,S      \\ \hline
{\ct PARTICLE RADIATION LOSS}                   & $\nabla \cdot \bq_r''$ due to Lagrangian particles& kW/m$^3$       & D,I,P,S      \\ \hline
\end{longtable}


\clearpage
\section{Summary of HVAC Output Quantities}
\label{info:hvacoutputquantities}

Table~\ref{tab:hvacoutput} summarizes the various Output Quantities for HVAC systems.  Quantities for a duct require the specification
of a {\ct DUCT\_ID}, and quantities for a node require the specification of a {\ct NODE\_ID}.  Mass and volume fraction outputs also require the specification of a {\ct SPEC\_ID}.

\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{|l|l|l|@{\extracolsep{\fill}}}
\caption[Output quantities.]{Summary of HVAC output quantities.}
\label{tab:hvacoutput} \\
\hline
{\ct QUANTITY}                                  & Symbol                                    & Units           \\
\hline \hline
\endfirsthead
\caption[]{Summary of HVAC output quantities (continued).} \\
\hline
{\ct QUANTITY}                                  & Symbol                                    & Units           \\
\hline \hline
\endhead
{\ct AIRCOIL HEAT EXCHANGE}                     & Heat exchange rate for an aircoil         &  kW                   \\ \hline
{\ct DUCT DENSITY}                              & Density of the flow in a duct             &  kg/m$^3$             \\ \hline
{\ct DUCT MASS FLOW}                            & Mass flow in a duct                       &  kg/s                 \\ \hline
{\ct DUCT MASS FRACTION}                        & Mass fraction of a species in a duct      &  kg/kg                \\ \hline
{\ct DUCT TEMPERATURE}                          & Temperature of the flow in a duct         & $^\circ$C             \\ \hline
{\ct DUCT VELOCITY}                             & Velocity of a duct                        &  m/s                  \\ \hline
{\ct DUCT VOLUME FLOW}                          & Volumetric flow in a duct                 &  m$^3$/s              \\ \hline
{\ct DUCT VOLUME FRACTION}                      & Volume fraction of a species in a duct    &  mol/mol              \\ \hline
{\ct FILTER LOADING}                            & Loading of a species in a filter          &  kg                   \\ \hline
{\ct FILTER LOSS}                               & Flow loss through a filter                &                       \\ \hline
{\ct NODE DENSITY}                              & Density of the flow through a node        &  kg/m$^3$             \\ \hline
{\ct NODE MASS FRACTION}                        & Mass fraction of a species in a node      &  kg/kg                \\ \hline
{\ct NODE PRESSURE}                             & Pressure of a node                        &       Pa              \\ \hline
{\ct NODE PRESSURE DIFFERENCE}                  & Pressure difference between two nodes                        &       Pa              \\ \hline
{\ct NODE TEMPERATURE}                          & Temperature of the flow though a node     & $^\circ$C             \\ \hline
{\ct NODE VOLUME FRACTION}                      & Volume fraction of a species in a node    &  mol/mol              \\ \hline
\end{longtable}



\chapter{Alphabetical List of Input Parameters}

This Appendix lists all of the input parameters for FDS in separate tables grouped by Namelist,these tables are in alphabetical order along with the parameters within them. This is intended to be used as a quick reference and does not replace reading the detailed description of the parameters in the main body of this guide. See Table \ref{tbl:namelistgroups} for a cross-reference of relevant sections and the tables in this Appendix. The reason for this statement is that many of the listed parameters are mutually exclusive -- specifying more than one can cause the program to either fail or run in an unpredictable manner. Also, some of the parameters trigger the code to work in a certain mode when specified. For example, specifying the thermal conductivity of a solid surface triggers the code to assume the material to be thermally-thick, mandating that other
properties be specified as well. Simply prescribing as many properties as possible from a handbook is bad practice. Only prescribe those parameters which are necessary to describe the desired scenario. Note that you may use the character string {\ct FYI} on any namelist line to make a note or comment.


\clearpage

\section{\texorpdfstring{{\tt BNDF}}{BNDF} (Boundary File Parameters)}

\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Boundary File Parameters]{For more information see Section~\ref{info:BNDF}.}
\label{tbl:BNDF} \\
\hline
\multicolumn{5}{|c|}{{\ct BNDF} (Boundary File Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct BNDF} (Boundary File Parameters)} \\
\hline \hline
\endhead
{\ct CELL\_CENTERED}    & Logical     & Section \ref{info:BNDF}                 &           & {\ct .FALSE.}   \\ \hline
{\ct PART\_ID}          & Character   & Section \ref{info:outputquantities}     &           &                 \\ \hline
{\ct PROP\_ID}          & Character   & Section \ref{info:BNDF}                 &           &                 \\ \hline
{\ct QUANTITY}          & Character   & Section \ref{info:outputquantities}     &           &                 \\ \hline
{\ct RECOUNT\_DRIP}     & Logical     & Section \ref{info:heat_flux}            &           & {\ct .FALSE.}   \\ \hline
{\ct SPEC\_ID}          & Character   & Section \ref{info:outputquantities}     &           &                 \\ \hline
\end{longtable}


\vspace{\baselineskip}



\section{\texorpdfstring{{\tt CLIP}}{CLIP} (MIN/MAX Clipping Parameters)}

\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[MIN/MAX Clipping Parameters]{For more information see Section~\ref{info:CLIP}.}
\label{tbl:CLIP} \\
\hline
\multicolumn{5}{|c|}{{\ct CLIP} (Specified Upper and Lower Limits)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct CLIP} (Specified Upper and Lower Limits)} \\
\hline \hline
\endhead
{\ct MAXIMUM\_DENSITY}              & Real           & Section~\ref{info:CLIP}      & kg/m$^3$   &     \\ \hline
{\ct MAXIMUM\_TEMPERATURE}          & Real           & Section~\ref{info:CLIP}      & $^\circ$C  &     \\ \hline
{\ct MINIMUM\_DENSITY}              & Real           & Section~\ref{info:CLIP}      & kg/m$^3$   &     \\ \hline
{\ct MINIMUM\_TEMPERATURE}          & Real           & Section~\ref{info:CLIP}      & $^\circ$C  &     \\ \hline
\end{longtable}

\vspace{\baselineskip}


\section{\texorpdfstring{{\tt CTRL}}{CTRL} (Control Function Parameters)}

\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Control Function Parameters]{For more information see Section~\ref{info:CTRL}.}
\label{tbl:CTRL} \\
\hline
\multicolumn{5}{|c|}{{\ct CTRL} (Control Function Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct CTRL} (Control Function Parameters)} \\
\hline \hline
\endhead
%{\ct CYCLE\_TIME}    & Real         & Periodicity                                 & s  &                           \\ \hline
%{\ct CYCLES}         & Integer      & Number of times to cycle output             &    &                           \\ \hline
{\ct CONSTANT}        & Real        & Section~\ref{info:CONTROL_MATH}         &    &                         \\ \hline
{\ct DELAY}          & Real         & Section~\ref{info:dry_pipe}             & s  &  0.                       \\ \hline
{\ct EVACUATION}     & Logical      & Reference~\cite{FDS_Evac_Users_Guide}   &    & {\ct .FALSE.}    \\ \hline
{\ct FUNCTION\_TYPE} & Character    & Section~\ref{info:basic_control}        &    &                           \\ \hline
{\ct ID}             & Character    & Section~\ref{info:CTRL}                 &    &                           \\ \hline
{\ct INITIAL\_STATE} & Logical      & Section~\ref{info:basic_control}        &    & {\ct .FALSE.}             \\ \hline
{\ct INPUT\_ID}      & Char.~Array  & Section~\ref{info:CTRL}                 &    &                           \\ \hline
{\ct LATCH}          & Logical      & Section~\ref{info:basic_control}        &    & {\ct .TRUE.}              \\ \hline
{\ct N}              & Integer      & Section~\ref{info:CTRL}                 &    &   1                       \\ \hline
{\ct ON\_BOUND}      & Character    & Section~\ref{info:DEADBAND}             &    & {\ct LOWER}               \\ \hline
{\ct RAMP\_ID}       & Character    & Section~\ref{info:CUSTOM}               &    &                           \\ \hline
{\ct SETPOINT(2)}    & Real         & Section~\ref{info:basic_control}        &    &                           \\ \hline
{\ct TRIP\_DIRECTION}& Integer      & Section~\ref{info:basic_control}        &    &   1                        \\ \hline
\end{longtable}


\vspace{\baselineskip}

\newpage

\section{\texorpdfstring{{\tt DEVC}}{DEVC} (Device Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Device Parameters]{For more information see Section~\ref{info:DEVC}.}
\label{tbl:DEVC} \\
\hline
\multicolumn{5}{|c|}{{\ct DEVC} (Device Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct DEVC} (Device Parameters)} \\
\hline \hline
\endhead
{\ct BYPASS\_FLOWRATE}      & Real            & Section~\ref{info:aspiration_detector}                       & kg/s  & 0             \\ \hline
{\ct CONVERSION\_FACTOR}    & Real            & Section~\ref{info:out:DEVC}                                  &       & 1             \\ \hline
{\ct CTRL\_ID}              & Character       & Section~\ref{info:DEVC}                                      &       &               \\ \hline
{\ct DELAY}                 & Real            & Section~\ref{info:aspiration_detector}                       & s     & 0             \\ \hline
{\ct DEPTH}                 & Real            & Section~\ref{info:material_components}                       & m     & 0             \\ \hline
{\ct DEVC\_ID}              & Character       & Section~\ref{info:aspiration_detector}                       &       &               \\ \hline
{\ct DRY}                   & Logical         & Section~\ref{info:dry}                                       &       & {\ct .FALSE.} \\ \hline
{\ct DUCT\_ID}              & Character       & Section~\ref{info:HVAC}                                      &       &               \\ \hline
{\ct EVACUATION}            & Logical         & Reference~\cite{FDS_Evac_Users_Guide}                        &       & {\ct .FALSE.}    \\ \hline
{\ct FLOWRATE}              & Real            & Section~\ref{info:aspiration_detector}                       & kg/s  & 0             \\ \hline
{\ct HIDE\_COORDINATES}     & Logical         & Section~\ref{info:line_file}                                 &       & {\ct .FALSE.} \\ \hline
{\ct ID}                    & Character       & Section~\ref{info:DEVC}                                      &       &               \\ \hline
{\ct INITIAL\_STATE}        & Logical         & Section~\ref{info:basic_control}                             &       & {\ct .FALSE.} \\ \hline
{\ct INIT\_ID}              & Character       & Section~\ref{info:PART_SURF}                                 &       &               \\ \hline
{\ct IOR}                   & Integer         & Section~\ref{info:DEVC}                                      &       &               \\ \hline
{\ct LATCH}                 & Logical         & Section~\ref{info:basic_control}                             &       & {\ct .TRUE.}  \\ \hline
{\ct MATL\_ID}              & Character       & Section~\ref{info:material_components}                       &       &               \\ \hline
{\ct NODE\_ID}              & Character(2)    & Section~\ref{info:HVAC}                                      &       &               \\ \hline
{\ct ORIENTATION}           & Real Triplet    & Section~\ref{info:DEVC}                                      &       & 0,0,-1        \\ \hline
{\ct OUTPUT}                & Logical         & Section~\ref{info:out:DEVC}                                  &       & {\ct .TRUE.}  \\ \hline
{\ct PART\_ID}              & Character       & Section~\ref{info:outputquantities}                          &       &               \\ \hline
{\ct PIPE\_INDEX}           & Integer         & Section~\ref{info:pressureramp}                          &       &  1            \\ \hline
{\ct POINTS}                & Integer         & Section~\ref{info:line_file}                                 &       & 1             \\ \hline
{\ct PROP\_ID}              & Character       & Section~\ref{info:DEVC}                                      &       &               \\ \hline
{\ct QUANTITY}              & Character       & Section~\ref{info:DEVC}                                      &       &               \\ \hline
{\ct RELATIVE}              & Logical         & Section~\ref{info:out:DEVC}                                  &       & {\ct .FALSE.} \\ \hline
{\ct ROTATION}              & Real            & Section~\ref{info:DEVC}                                      & deg.  & 0             \\ \hline
{\ct SETPOINT}              & Real            & Section~\ref{info:basic_control}                             &       &               \\ \hline
{\ct SMOOTHING\_FACTOR}     & Real            & Section~\ref{info:basic_control}                             &       & 0             \\ \hline
{\ct SPEC\_ID}              & Character       & Section~\ref{info:outputquantities}                          &       &               \\ \hline
{\ct STATISTICS}            & Character       & Section~\ref{info:statistics}                                &       &               \\ \hline
{\ct SURF\_ID}              & Character       & Section~\ref{info:statistics}                                &       &               \\ \hline
{\ct TIME\_AVERAGED}        & Logical         & Section~\ref{info:out:DEVC}                                  &       &  {\ct .TRUE.} \\ \hline
{\ct TRIP\_DIRECTION}       & Integer         & Section~\ref{info:basic_control}                             &       &  1            \\ \hline
{\ct UNITS}                 & Character       & Section~\ref{info:out:DEVC}                                  &       &               \\ \hline
{\ct VELO\_INDEX}           & Integer         & Section~\ref{info:velocity}                                  &       &  0            \\ \hline
{\ct VIRTUAL\_INDEX}        & Integer         & Section~\ref{info:PART_SURF}                                 &       &               \\ \hline
{\ct XB(6)}                 & Real Sextuplet  & Section~\ref{info:statistics}                                & m     &               \\ \hline
{\ct XYZ(3)}                & Real Triplet    & Section~\ref{info:DEVC}                                      & m     &               \\ \hline
{\ct X\_ID}                 & Character       & Section~\ref{info:line_file}                                 &       &  {\ct ID-x}   \\ \hline
{\ct Y\_ID}                 & Character       & Section~\ref{info:line_file}                                 &       &  {\ct ID-y}   \\ \hline
{\ct Z\_ID}                 & Character       & Section~\ref{info:line_file}                                 &       &  {\ct ID-z}   \\ \hline
\end{longtable}


\vspace{\baselineskip}

\newpage

\section{\texorpdfstring{{\tt DUMP}}{DUMP} (Output Parameters)}

\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Output Parameters]{For more information see Section~\ref{info:DUMP}.}
\label{tbl:DUMP} \\
\hline
\multicolumn{5}{|c|}{{\ct DUMP} (Output Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct DUMP} (Output Parameters)} \\
\hline \hline
\endhead
{\ct COLUMN\_DUMP\_LIMIT}           & Logical      & Section~\ref{info:out:DEVC}            &           & {\ct .TRUE.}                   \\ \hline
{\ct CTRL\_COLUMN\_LIMIT}           & Integer      & Section~\ref{info:out:DEVC}            &           & 254                            \\ \hline
{\ct DEBUG}                         & Logical      & Section~\ref{info:TIMING}              &           & {\ct .FALSE.}                  \\ \hline
{\ct DEVC\_COLUMN\_LIMIT}           & Integer      & Section~\ref{info:out:DEVC}            &           & 254                            \\ \hline
{\ct DT\_BNDF}                      & Real         & Section~\ref{info:DUMP}                &  s        & $2\,\Delta t${\ct /NFRAMES}    \\ \hline
{\ct DT\_CTRL}                      & Real         & Section~\ref{info:DUMP}                &  s        & $\Delta t${\ct /NFRAMES}       \\ \hline
{\ct DT\_DEVC}                      & Real         & Section~\ref{info:DUMP}                &  s        & $\Delta t${\ct /NFRAMES}       \\ \hline
{\ct DT\_DEVC\_LINE}                & Real         & Section~\ref{info:line_file}           &           & 1                              \\ \hline
{\ct DT\_FLUSH}                     & Real         & Section~\ref{info:DUMP}                &  s        & $\Delta t${\ct /NFRAMES}       \\ \hline
{\ct DT\_HRR}                       & Real         & Section~\ref{info:DUMP}                &  s        & $\Delta t${\ct /NFRAMES}       \\ \hline
{\ct DT\_ISOF}                      & Real         & Section~\ref{info:DUMP}                &  s        & $\Delta t${\ct /NFRAMES}       \\ \hline
{\ct DT\_MASS}                      & Real         & Section~\ref{info:DUMP}                &  s        & $\Delta t${\ct /NFRAMES}       \\ \hline
{\ct DT\_PART}                      & Real         & Section~\ref{info:DUMP}                &  s        & $\Delta t${\ct /NFRAMES}       \\ \hline
{\ct DT\_PL3D}                      & Real         & Section~\ref{info:DUMP}                &  s        & $\Delta t${\ct /5}             \\ \hline
{\ct DT\_PROF}                      & Real         & Section~\ref{info:DUMP}                &  s        & $\Delta t${\ct /NFRAMES}       \\ \hline
{\ct DT\_RESTART}                   & Real         & Section~\ref{info:DUMP}                &  s        & 1000000.                       \\ \hline
{\ct DT\_SL3D}                      & Real         & Section~\ref{info:DUMP}                &  s        & $\Delta t${\ct /5}             \\ \hline
{\ct DT\_SLCF}                      & Real         & Section~\ref{info:DUMP}                &  s        & $\Delta t${\ct /NFRAMES}       \\ \hline
{\ct DT\_VEG}                       & Real         &                                        &  s        & $\Delta t${\ct /NFRAMES}       \\ \hline
{\ct FLUSH\_FILE\_BUFFERS}          & Logical      & Section~\ref{info:DUMP}                &           & {\ct .TRUE.}                   \\ \hline
{\ct MASS\_FILE}                    & Logical      & Section~\ref{info:DUMP}                &           & {\ct .FALSE.}                  \\ \hline
{\ct MAXIMUM\_PARTICLES}            & Integer      & Section~\ref{info:DUMP}                &           & 500000                         \\ \hline
{\ct NFRAMES}                       & Integer      & Section~\ref{info:DUMP}                &           & 1000                           \\ \hline
{\ct PLOT3D\_PART\_ID(5)}           & Char.~Quint  & Section~\ref{info:PL3D}                &           &                                \\ \hline
{\ct PLOT3D\_QUANTITY(5)}           & Char.~Quint  & Section~\ref{info:PL3D}                &           &                                \\ \hline
{\ct PLOT3D\_SPEC\_ID(5)}           & Char.~Quint  & Section~\ref{info:PL3D}                &           &                                \\ \hline
{\ct PLOT3D\_VELO\_INDEX}           & Int.~Quint   & Section~\ref{info:velocity}            &           &  0                             \\ \hline
{\ct RENDER\_FILE}                  & Character    & Reference~\cite{Smokeview_Users_Guide} &           &                                \\ \hline
{\ct SIG\_FIGS}                     & Integer      & Section~\ref{info:SIG_FIGS}            &           & 8                              \\ \hline
{\ct SIG\_FIGS\_EXP}                & Integer      & Section~\ref{info:SIG_FIGS}            &           & 3                              \\ \hline
{\ct SMOKE3D}                       & Logical      & Section~\ref{info:SMOKE3D}             &           & {\ct .TRUE.}                   \\ \hline
{\ct SMOKE3D\_QUANTITY}             & Character    & Section~\ref{info:SMOKE3D}             &           &                                \\ \hline
{\ct SMOKE3D\_SPEC\_ID}             & Character    & Section~\ref{info:SMOKE3D}             &           &                                \\ \hline
{\ct STATUS\_FILES}                 & Logical      & Section~\ref{info:DUMP}                &           & {\ct .FALSE.}                  \\ \hline
{\ct TIMING}                        & Logical      & Section~\ref{info:TIMING}              &           & {\ct .FALSE.}                  \\ \hline
{\ct VELOCITY\_ERROR\_FILE}         & Logical      & Section~\ref{info:TIMING}              &           & {\ct .FALSE.}                  \\ \hline
{\ct WRITE\_XYZ}                    & Logical      & Section~\ref{info:PL3D}                &           & {\ct .FALSE.}                  \\ \hline
\end{longtable}

\noindent
$\Delta t$={\ct T\_END-T\_BEGIN}

% Undocumented: DT_VEG

\vspace{\baselineskip}

\newpage

\section{\texorpdfstring{{\tt HEAD}}{HEAD} (Header Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Header Parameters]{For more information see Section~\ref{info:HEAD}.}
\label{tbl:HEAD} \\
\hline
\multicolumn{5}{|c|}{{\ct HEAD} (Header Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct HEAD} (Header Parameters)} \\
\hline \hline
\endhead
{\ct CHID}      & Character   & Section~\ref{info:HEAD}     &           & {\ct 'output'}    \\ \hline
{\ct TITLE}     & Character   & Section~\ref{info:PL3D}     &           &                   \\ \hline
\end{longtable}

\vspace{\baselineskip}



\section{\texorpdfstring{{\tt HOLE}}{HOLE} (Obstruction Cutout Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Obstruction Cutout Parameters]{For more information see Section~\ref{info:HOLE}.}
\label{tbl:HOLE} \\
\hline
\multicolumn{5}{|c|}{{\ct HOLE} (Obstruction Cutout Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct HOLE} (Obstruction Cutout Parameters)} \\
\hline \hline
\endhead
{\ct COLOR    }    & Character         & Section~\ref{info:colors}                              &       &           \\ \hline
{\ct CTRL\_ID}     & Character         & Section~\ref{info:HOLE}                                &       &           \\ \hline
{\ct DEVC\_ID}     & Character         & Section~\ref{info:HOLE}                                &       &           \\ \hline
{\ct EVACUATION}   & Logical           & Reference~\cite{FDS_Evac_Users_Guide}                  &       &           \\ \hline
{\ct MESH\_ID }    & Character         & Reference~\cite{FDS_Evac_Users_Guide}                  &       &           \\ \hline
{\ct MULT\_ID }    & Character         & Section~\ref{info:MULT}                                &       &           \\ \hline
{\ct RGB(3)   }    & Integer Triplet   & Section~\ref{info:colors}                              &       &           \\ \hline
{\ct TRANSPARENCY} & Real              & Section~\ref{info:HOLE}                                &       &           \\ \hline
{\ct XB(6)    }    & Real Sextuplet    & Section~\ref{info:MULT}                                & m     &           \\ \hline
\end{longtable}

\vspace{\baselineskip}


\section{\texorpdfstring{{\tt HVAC}}{HVAC} (HVAC System Definition)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Initial Conditions]{For more information see Section~\ref{info:HVAC}.}
\label{tbl:HVAC} \\
\hline
\multicolumn{5}{|c|}{{\ct HVAC} (HVAC System Definition)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct HVAC} (HVAC System Definition)} \\
\hline \hline
\endhead
{\ct AIRCOIL\_ID}               & Character         & Section~\ref{info:HVACduct}                                                   &               &        \\ \hline
{\ct AMBIENT}                   & Logical           & Section~\ref{info:HVACnode}                                                   &               & {\ct .FALSE.}  \\ \hline
{\ct AREA}                      & Real              & Section~\ref{info:HVACduct}                                                   & m$^2$         &        \\ \hline
{\ct CLEAN\_LOSS}               & Real              & Section~\ref{info:HVACfilter}                                                 &               &        \\ \hline
{\ct COOLANT\_CP}               & Real              & Section~\ref{info:HVACaircoil}                                                & kJ/kg/K       &        \\ \hline
{\ct COOLANT\_MDOT}             & Real              & Section~\ref{info:HVACaircoil}                                                & kg/s          &        \\ \hline
{\ct COOLANT\_TEMPERATURE}      & Real              & Section~\ref{info:HVACaircoil}                                                & $^\circ$C             &         \\ \hline
{\ct CTRL\_ID}                  & Character         & Sections~\ref{info:HVACduct}, \ref{info:HVACfan}, and \ref{info:HVACfilter}   &               &        \\ \hline
{\ct DAMPER}                    & Logical           & Section~\ref{info:HVACduct}                                                   &               & {\ct .FALSE.}  \\ \hline
{\ct DEVC\_ID}                  & Character         & Sections ~\ref{info:HVACduct}, \ref{info:HVACfan}, and \ref{info:HVACfilter}  &               &        \\ \hline
{\ct DIAMETER}                  & Real              & Section~\ref{info:HVACduct}                                                   &  m            &        \\ \hline
{\ct DUCT\_ID}                  & Character Array   & Section~\ref{info:HVACnode}                                                   &               &        \\ \hline
{\ct EFFICIENCY}                & Real Array        & Sections ~\ref{info:HVACfilter} and ~\ref{info:HVACaircoil}                   &               & 1.0    \\ \hline
{\ct FAN\_ID}                   & Character         & Section~\ref{info:HVACduct}                                                   &               &        \\ \hline
{\ct FILTER\_ID}                & Character         & Section~\ref{info:HVACnode}                                                   &               &        \\ \hline
{\ct FIXED\_Q}                  & Real              & Section ~\ref{info:HVACaircoil}                                               & kW            &        \\ \hline
{\ct ID}                        & Character         & Section~\ref{info:HVAC}                                                       &               &        \\ \hline
{\ct LENGTH}                    & Real              & Section~\ref{info:HVACduct}                                                   &  m            &        \\ \hline
{\ct LOADING}                   & Real Array        &  Section ~\ref{info:HVACfilter}         & kg            & 0.0    \\ \hline
{\ct LOADING\_MULTIPLIER}       & Real Array        &  Section ~\ref{info:HVACfilter}         & kg            & 0.0    \\ \hline
{\ct LOSS}                      & Real Array        & Sections ~\ref{info:HVACduct} -- \ref{info:HVACfilter}  &               & 0.0    \\ \hline
{\ct MAX\_FLOW}                 & Real              & Section ~\ref{info:HVACfan}   &  m$^3$/s      &        \\ \hline
{\ct MAX\_PRESSURE}             & Real              &  Section ~\ref{info:HVACfan}                 &  Pa           &        \\ \hline
{\ct NODE\_ID}                  & Character Doublet & Section~\ref{info:HVACduct}                 &               &         \\ \hline
{\ct RAMP\_ID}                  & Character         & Sections ~\ref{info:HVACduct}, ~\ref{info:HVACfilter}, and~\ref{info:HVACfan}  &               &          \\ \hline
{\ct REVERSE}                   & Logical           & Section~\ref{info:HVACduct} &               & {\ct .FALSE.}  \\ \hline
{\ct ROUGHNESS}                 & Real              & Section~\ref{info:HVACduct}                      &  m            & 0.0    \\ \hline
{\ct SPEC\_ID}                  & Character         & Section ~\ref{info:HVACfilter}            &               &        \\ \hline
{\ct TAU\_FAN}                  & Real              & Section ~\ref{info:HVACfan}                                & s             & 1.0    \\ \hline
{\ct TAU\_VF}                   & Real              & Section~\ref{info:HVACduct}                  & s             & 1.0    \\ \hline
{\ct TYPE\_ID}                  & Character         & Section~\ref{info:HVAC}                                 &               &        \\ \hline
{\ct VENT\_ID}                  & Character         & Section~\ref{info:HVACnode}   &               &        \\ \hline
{\ct VOLUME\_FLOW}              & Real              & Section~\ref{info:HVACduct} and ~\ref{info:HVACfan} &  m$^3$/s      &                       \\ \hline
{\ct XYZ}                       & Real Triplet      & Section~\ref{info:HVACnode}                             &  m            &        \\ \hline
\end{longtable}


\vspace{\baselineskip}



\section{\texorpdfstring{{\tt INIT}}{INIT} (Initial Conditions)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Initial Conditions]{For more information see Section~\ref{info:INIT}.}
\label{tbl:INIT} \\
\hline
\multicolumn{5}{|c|}{{\ct INIT} (Initial Conditions)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct INIT} (Initial Conditions)} \\
\hline \hline
\endhead
{\ct CTRL\_ID}                  & Character         & Section~\ref{info:initial_droplets}           &               &               \\ \hline
{\ct DENSITY}                   & Real              & Section~\ref{info:INIT}                       & kg/m$^3$      & Ambient       \\ \hline
{\ct DEVC\_ID}                  & Character         & Section~\ref{info:initial_droplets}           &               &               \\ \hline
{\ct DIAMETER}                  & Real              & Section~\ref{info:initial_droplets}           & microns       &               \\ \hline
{\ct DT\_INSERT}                & Real              & Section~\ref{info:initial_droplets}           & s             &               \\ \hline
{\ct DX}                        & Real              & Section~\ref{info:initial_droplets}           & m             & 0.            \\ \hline
{\ct DY}                        & Real              & Section~\ref{info:initial_droplets}           & m             & 0.            \\ \hline
{\ct DZ}                        & Real              & Section~\ref{info:initial_droplets}           & m             & 0.            \\ \hline
{\ct HRRPUV}                    & Real              & Section~\ref{info:INIT}                       & kW/m$^3$      &               \\ \hline
{\ct ID}                        & Character         & Section~\ref{info:PART_SURF}                  &               &               \\ \hline
{\ct MASS\_FRACTION(N)}         & Real Array        & Section~\ref{info:INIT}                       & kg/kg         & Ambient       \\ \hline
{\ct MASS\_PER\_TIME}           & Real              & Section~\ref{info:initial_droplets}           & kg/s          &               \\ \hline
{\ct MASS\_PER\_VOLUME}         & Real              & Section~\ref{info:initial_droplets}           & kg/m$^3$      & 1             \\ \hline
{\ct MULT\_ID }                 & Character         & Section~\ref{info:MULT}                       &               &               \\ \hline
{\ct N\_PARTICLES}              & Integer           & Section~\ref{info:initial_droplets}           &               & 0             \\ \hline
{\ct PART\_ID}                  & Character         & Section~\ref{info:initial_droplets}           &               &               \\ \hline
{\ct SHAPE}                     & Character         & Section~\ref{info:initial_droplets}           &               & {\ct 'BLOCK'} \\ \hline
{\ct SPEC\_ID(N)}               & Character Array   & Section~\ref{info:INIT}                       &               &               \\ \hline
{\ct TEMPERATURE}               & Real              & Section~\ref{info:INIT}                       & $^\circ$C     & {\ct TMPA}    \\ \hline
{\ct UVW(3)}                    & Real Triplet      & Section~\ref{info:initial_droplets}           & m/s           & 0.            \\ \hline
{\ct XB(6)}                     & Real Sextuplet    & Section~\ref{info:INIT}                       & m             &               \\ \hline
{\ct XYZ(3)}                    & Real Triplet      & Section~\ref{info:initial_droplets}           & m             &               \\ \hline
\end{longtable}

% Undocumented: PROF_ID, ORIGIN, XYZ, UVW, DIAMETER,UNIFORM


\vspace{\baselineskip}



\section{\texorpdfstring{{\tt ISOF}}{ISOF} (Isosurface Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Isosurface Parameters]{For more information see Section~\ref{info:ISOF}.}
\label{tbl:ISOF} \\
\hline
\multicolumn{5}{|c|}{{\ct ISOF} (Isosurface Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct ISOF} (Isosurface Parameters)} \\
\hline \hline
\endhead
{\ct COLOR\_QUANTITY}       & Character     & Section~\ref{info:ISOF}                   &       &         \\ \hline
{\ct COLOR\_SPEC\_ID}       & Character     & Section~\ref{info:ISOF}                   &       &         \\ \hline
{\ct QUANTITY}              & Character     & Section~\ref{info:ISOF}                   &       &         \\ \hline
{\ct REDUCE\_TRIANGLES}     & Integer       & Reference~\cite{Smokeview_Users_Guide}    &       & 1       \\ \hline
{\ct SPEC\_ID}              & Character     & Section~\ref{info:ISOF}                   &       &         \\ \hline
{\ct VALUE(I)}              & Real Array    & Section~\ref{info:ISOF}                   &       &         \\ \hline
{\ct VELO\_INDEX}           & Integer       & Section~\ref{info:velocity}               &       &  0      \\ \hline
\end{longtable}

% Undocumented: AUTO_HRRPUV_VALUE


\vspace{\baselineskip}


\section{\texorpdfstring{{\tt MATL}}{MATL} (Material Properties)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Material Properties]{For more information see Section~\ref{info:MATL}.}
\label{tbl:MATL} \\
\hline
\multicolumn{5}{|c|}{{\ct MATL} (Material Properties)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct MATL} (Material Properties)} \\
\hline \hline
\endhead
{\ct A(:)}                          & Real array    & Section~\ref{info:solid_pyrolysis}    &    1/s            &        \\ \hline
{\ct ABSORPTION\_COEFFICIENT}       & Real          & Section~\ref{info:thermal_properties} &    1/m            & 50000. \\ \hline
{\ct BOILING\_TEMPERATURE}          & Real          & Section~\ref{info:liquid_fuels}       & $^\circ$C         & 5000.  \\ \hline
{\ct CONDUCTIVITY}                  & Real          & Section~\ref{info:thermal_properties} & W/m/K             & 0.     \\ \hline
{\ct CONDUCTIVITY\_RAMP}            & Character     & Section~\ref{info:thermal_properties} &                   &        \\ \hline
{\ct DENSITY}                       & Real          & Section~\ref{info:thermal_properties} & kg/m$^3$          & 0.     \\ \hline
{\ct E(:)}                          & Real array    & Section~\ref{info:solid_pyrolysis}    & kJ/kmol           &        \\ \hline
{\ct EMISSIVITY    }                & Real          & Section~\ref{info:thermal_properties} &                   & 0.9    \\ \hline
{\ct HEATING\_RATE(:)}              & Real array    & Section~\ref{info:solid_pyrolysis}    & $^\circ$C/min     & 5.     \\ \hline
{\ct HEAT\_OF\_COMBUSTION(:)}       & Real array    & Section~\ref{info:solid_pyrolysis}    & kJ/kg             &        \\ \hline
{\ct HEAT\_OF\_REACTION(:)}         & Real array    & Section~\ref{info:solid_pyrolysis}    & kJ/kg             & 0.     \\ \hline
{\ct ID     }                       & Character     & Section~\ref{info:SURF_MATL_Basics}   &                   &        \\ \hline
{\ct INITIAL\_VAPOR\_FLUX}          & Real          & Section~\ref{info:liquid_fuels}       & m/s               & 0.0005 \\ \hline
{\ct MATL\_ID(:,:)}                 & Character     & Section~\ref{info:solid_pyrolysis}    &                   &        \\ \hline
{\ct NU\_MATL(:,:)}                 & Real array    & Section~\ref{info:solid_pyrolysis}    & kg/kg             & 0.     \\ \hline
{\ct NU\_SPEC(:,:)}                 & Real array    & Section~\ref{info:solid_pyrolysis}    & kg/kg             & 0.     \\ \hline
{\ct N\_REACTIONS}                  & Character     & Section~\ref{info:solid_pyrolysis}    &                   & 0      \\ \hline
{\ct N\_S(:)}                       & Real array    & Section~\ref{info:solid_pyrolysis}    &                   & 1.     \\ \hline
{\ct N\_T(:)}                       & Real array    & Section~\ref{info:solid_pyrolysis}    &                   & 0.     \\ \hline
{\ct PCR(:)}                        & Logical array & Section~\ref{info:solid_pyrolysis}    &                   & {\ct.FALSE.}\\ \hline
{\ct PYROLYSIS\_RANGE(:)}           & Real array    & Section~\ref{info:solid_pyrolysis}    & $^\circ$C         & 80.    \\ \hline
{\ct REFERENCE\_RATE(:)}            & Real array    & Section~\ref{info:solid_pyrolysis}    & 1/s               &        \\ \hline
{\ct REFERENCE\_TEMPERATURE(:)}     & Real array    & Section~\ref{info:solid_pyrolysis}    & $^\circ$C         &        \\ \hline
{\ct SPECIFIC\_HEAT}                & Real          & Section~\ref{info:thermal_properties} & kJ/kg/K           & 0.     \\ \hline
{\ct SPECIFIC\_HEAT\_RAMP}          & Character     & Section~\ref{info:thermal_properties} &                   &        \\ \hline
{\ct SPEC\_ID(:,:)}                 & Character     & Section~\ref{info:solid_pyrolysis}    &                   &        \\ \hline
{\ct THRESHOLD\_SIGN(:)}            & Real array    & Section~\ref{info:solid_pyrolysis}    &                   & 1.0    \\ \hline
{\ct THRESHOLD\_TEMPERATURE(:)}     & Real array    & Section~\ref{info:solid_pyrolysis}    & $^\circ$C         & -273.15 \\ \hline
\end{longtable}

\vspace{\baselineskip}



\section{\texorpdfstring{{\tt MESH}}{MESH} (Mesh Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Mesh Parameters]{For more information see Section~\ref{info:MESH}.}
\label{tbl:MESH} \\
\hline
\multicolumn{5}{|c|}{{\ct MESH} (Mesh Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct MESH} (Mesh Parameters)} \\
\hline \hline
\endhead
{\ct COLOR}             & Character                     & Section~\ref{info:multimesh}              &    & {\ct 'BLACK'}    \\ \hline
{\ct CYLINDRICAL}       & Logical                       & Section~\ref{info:2D}                     &    & {\ct .FALSE.}    \\ \hline
{\ct EVAC\_HUMANS}      & Logical                       & Reference~\cite{FDS_Evac_Users_Guide}     &    & {\ct .FALSE.}    \\ \hline
{\ct EVACUATION}        & Logical                       & Reference~\cite{FDS_Evac_Users_Guide}     &    & {\ct .FALSE.}    \\ \hline
{\ct EVAC\_Z\_OFFSET}   & Real                          & Reference~\cite{FDS_Evac_Users_Guide}     & m  & 1                \\ \hline
{\ct ID}                & Character                     & Reference~\cite{FDS_Evac_Users_Guide}     &    &                  \\ \hline
{\ct IJK}               & Integer Triplet               & Section~\ref{info:MESH_Basics}            &    & 10,10,10         \\ \hline
{\ct LEVEL}             & Integer                       & For future use                            &    & 0                \\ \hline
{\ct MPI\_PROCESS}      & Integer                       & Section~\ref{info:multimesh}              &    &                  \\ \hline
{\ct MULT\_ID }         & Character                     & Section~\ref{info:MULT}                   &    &                  \\ \hline
{\ct RGB}               & Integer Triplet               & Section~\ref{info:multimesh}              &    & 0,0,0            \\ \hline
{\ct SYNCHRONIZE}       & Logical                       & Section~\ref{info:multimesh}              &    & {\ct .TRUE.}     \\ \hline
{\ct XB(6)}             & Real Sextuplet                & Section~\ref{info:MESH_Basics}            & m  & 0,1,0,1,0,1      \\ \hline
\end{longtable}


\vspace{\baselineskip}



\section{\texorpdfstring{{\tt MISC}}{MISC} (Miscellaneous Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Miscellaneous Parameters]{For more information see Section~\ref{info:MISC}.}
\label{tbl:MISC} \\
\hline
\multicolumn{5}{|c|}{{\ct MISC} (Miscellaneous Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct MISC} (Miscellaneous Parameters)} \\
\hline \hline
\endhead
%{\ct AL2O3}                                     & Logical       &                                                            &               & {\ct .FALSE.}    \\ \hline
{\ct \footnotesize ALLOW\_SURFACE\_PARTICLES}   & Logical       & Section~\ref{info:surface_droplets}                   &               & {\ct .TRUE.}    \\ \hline
{\ct \footnotesize ALLOW\_UNDERSIDE\_PARTICLES} & Logical       & Section~\ref{info:surface_droplets}                   &               & {\ct .FALSE.}    \\ \hline
{\ct \footnotesize ASSUMED\_GAS\_TEMPERATURE}   & Real          & Section~\ref{solid_phase_verification}                &               &                   \\ \hline
{\ct BAROCLINIC}                                & Logical       & Section~\ref{baroclinic_torque}                       &               & {\ct .TRUE.}     \\ \hline
{\ct BNDF\_DEFAULT}                             & Logical       & Section~\ref{info:BNDF}                               &               & {\ct .TRUE.}      \\ \hline
{\ct CDF\_CUTOFF}                               & Real          & Section~\ref{info:particle_size}                                &               & 0.01               \\ \hline
{\ct CFL\_MAX}                                  & Real          & Section~\ref{info:CFL}                                &               & 1.0               \\ \hline
{\ct CFL\_MIN}                                  & Real          & Section~\ref{info:CFL}                                &               & 0.8               \\ \hline
{\ct CFL\_VELOCITY\_NORM}                       & Integer       & Section~\ref{info:CFL}                                &               & 1                \\ \hline
{\ct CHECK\_GR}                                 & Logical       & Section~\ref{info:CFL}                                &               & {\ct .TRUE.}     \\ \hline
{\ct CHECK\_HT}                                 & Logical       & Section~\ref{info:CFL}                                &               & {\ct .TRUE.}     \\ \hline
{\ct CHECK\_VN}                                 & Logical       & Section~\ref{info:CFL}                                &               & {\ct .TRUE.}     \\ \hline
%{\ct CLIP\_MASS\_FRACTION}                      & Logical       &                                                           &               & {\ct .FALSE.}     \\ \hline
%{\ct CP_FTMP}                                   & Logical       &                                                           &               & {\ct .FALSE.}     \\ \hline
{\ct C\_DEARDORFF}                              & Real          & Section~\ref{info:LES}                                &               & 0.1               \\ \hline
{\ct C\_SMAGORINSKY}                            & Real          & Section~\ref{info:LES}                                &               & 0.20              \\ \hline
{\ct C\_FORCED}                                 & Real          & Section~\ref{info:convection}                         &               & 0.037             \\ \hline
{\ct C\_FORCED\_CYLINDER}                       & Real          & Section~\ref{info:convection}                         &               & 0.664             \\ \hline
{\ct C\_FORCED\_SPHERE }                        & Real          & Section~\ref{info:convection}                         &               & 0.600             \\ \hline
{\ct C\_G}                                      & Real          & Section~\ref{info:LES}                                &               & 0.04              \\ \hline
{\ct C\_HORIZONTAL}                             & Real          & Section~\ref{info:convection}                         &               & 1.52             \\ \hline
{\ct C\_VERTICAL}                               & Real          & Section~\ref{info:convection}                         &               & 1.31             \\ \hline
{\ct C\_VREMAN}                                 & Real          & Section~\ref{info:LES}                                &               & 0.07              \\ \hline
{\ct CONSTANT\_SPECIFIC\_HEAT}                  & Real          & Section~\ref{info:MISC_Basics}                        &               & {\ct .FALSE.}               \\ \hline
%{\ct DEBUG\_OPENMP}                             & Logical       & Debug flag for OpenMP                                     &               & {\ct .FALSE.}     \\ \hline
{\ct DNS}                                       & Logical       & Section~\ref{info:MISC_Basics}                        &               & {\ct .FALSE.}     \\ \hline
{\ct EVACUATION\_DRILL}                         & Logical       & Reference~\cite{FDS_Evac_Users_Guide}                 &               & {\ct .FALSE.}     \\ \hline
{\ct EVACUATION\_MC\_MODE}                      & Logical       & Reference~\cite{FDS_Evac_Users_Guide}                 &               & {\ct .FALSE.}     \\ \hline
{\ct EVAC\_PRESSURE\_ITERATIONS}                & Integer       & Reference~\cite{FDS_Evac_Users_Guide}                 &               & 50                \\ \hline
{\ct EVAC\_TIME\_ITERATIONS}                    & Integer       & Reference~\cite{FDS_Evac_Users_Guide}                 &               & 50                \\ \hline
{\ct FLUX\_LIMITER}                             & Integer       & Reference~\cite{FDS_Tech_Guide}                       &               & 4                 \\ \hline
{\ct FORCE\_VECTOR(3)}                          & Real          & Section~\ref{info:force_vector}                       &               & 0.                \\ \hline
{\ct FREEZE\_VELOCITY}                          & Logical       & Constant velocity                                         &               & {\ct .FALSE.}     \\ \hline
{\ct GAMMA}                                     & Real          & Section~\ref{gas_species_props}                       &               & 1.4               \\ \hline
{\ct GROUND\_LEVEL}                             & Real          & Section~\ref{info:stratification}                     & m             & 0.                \\ \hline
{\ct GVEC}                                      & Real triplet  & Section~\ref{info:GVEC}                               & m/s$^2$       & 0,0,-9.81         \\ \hline
%{\ct IMMERSED\_BOUNDARY\_METHOD}                & Logical       &                                                           &               & {\ct .FALSE.}     \\ \hline
{\ct LAPSE\_RATE}                               & Real          & Section~\ref{info:stratification}                     &  $^\circ$C/m  & 0                 \\ \hline
{\ct LES}                                       & Logical       & Section~\ref{info:MISC_Basics}                        &               & {\ct .TRUE.}      \\ \hline
{\ct MAXIMUM\_VISIBILITY}                       & Real          & Section~\ref{info:visibility}                         &  m            &  30               \\ \hline
{\ct MEAN\_FORCING(3)}                          & Logical       & Section~\ref{info:mean_forcing}                       &               & {\ct .FALSE.}     \\ \hline
%{\ct MIXING\_LAYER\_H0}                         & Real          & See FDS Verification Guide                                &  m            &                   \\ \hline
%{\ct MIXING\_LAYER\_THETA0}                     & Real          & See FDS Verification Guide                                &               &                   \\ \hline
%{\ct MIXING\_LAYER\_U0}                         & Real          & See FDS Verification Guide                                &  m/s          &                   \\ \hline
{\ct NOISE}                                     & Logical       & Section~\ref{info:MISC_Basics}                        &               & {\ct .TRUE.}      \\ \hline
{\ct NO\_EVACUATION}                            & Logical       & Reference~\cite{FDS_Evac_Users_Guide}                 &               & {\ct .FALSE.}     \\ \hline
%{\ct NSTRATA}                                   & Logical       & No. bins for droplet distribution                         &               & 7                 \\ \hline
{\ct OVERWRITE}                                 & Logical       & Section~\ref{info:MISC_Basics}                        &               & {\ct .TRUE.}      \\ \hline
%{\ct PARTICLE\_CFL}                             & Logical       &                                                           &               & {\ct .FALSE.}    \\ \hline
%{\ct PARTICLE\_CFL\_MAX}                        & Integer       &                                                           &               & 1                \\ \hline
{\ct PR}                                        & Real          & Section~\ref{info:LES}                                &               & 0.5               \\ \hline
{\ct P\_INF}                                    & Real          & Section~\ref{info:MISC_Basics}                        & Pa            & 101325            \\ \hline
%{\ct PERIODIC\_TEST}                            & Integer       & Initial condition for verification test                    &               & 0                 \\ \hline
{\ct POROUS\_FLOOR}                             & Logical       & Section~\ref{info:sprinklers}                         &               & {\ct .TRUE.}      \\ \hline
%{\ct PROJECTION}                                & Logical       & Use formal projection method                          &               & {\ct .FALSE.}     \\ \hline
{\ct RAMP\_GX}                                  & Character     & Section~\ref{info:GVEC}                               &               &                   \\ \hline
{\ct RAMP\_GY}                                  & Character     & Section~\ref{info:GVEC}                               &               &                   \\ \hline
{\ct RAMP\_GZ}                                  & Character     & Section~\ref{info:GVEC}                               &               &                   \\ \hline
{\ct RESTART}                                   & Logical       & Section~\ref{info:restart}                            &               & {\ct .FALSE.}     \\ \hline
{\ct RESTART\_CHID}                             & Character     & Section~\ref{info:restart}                            &               & {\ct CHID}        \\ \hline
{\ct SC}                                        & Real          & Section~\ref{info:LES}                                &               & 0.5               \\ \hline
{\ct SHARED\_FILE\_SYSTEM}                      & Logical       & Section~\ref{info:multimesh}                          &               & {\ct .TRUE.}      \\ \hline
{\ct SOLID\_PHASE\_ONLY}                        & Logical       & Section~\ref{solid_phase_verification}                &               & {\ct .FALSE.}     \\ \hline
{\ct SMOKE\_ALBEDO}                             & Real          & Reference~\cite{Smokeview_Users_Guide}                &               & 0.3               \\ \hline
{\ct STRATIFICATION}                            & Logical       & Section~\ref{info:stratification}                     &               & {\ct .TRUE.}      \\ \hline
%{\ct TERRAIN\_CASE}                             & Logical       & See Wildland Fire User's Guide                            &               & {\ct .FALSE.}     \\ \hline
{\ct TEXTURE\_ORIGIN(3)}                        & Char.~Triplet & Section~\ref{info:texture_map}                        & m             & (0.,0.,0.)        \\ \hline
{\ct THICKEN\_OBSTRUCTIONS}                     & Logical       & Section~\ref{info:OBST_Basics}                        &               & {\ct .FALSE.}     \\ \hline
{\ct TMPA}                                      & Real          & Section~\ref{info:MISC_Basics}                        & $^\circ$C     & 20.               \\ \hline
{\ct TURBULENCE\_MODEL}                         & Character     & Section~\ref{info:LES}                                &               & {\ct 'DEARDORFF'} \\ \hline
{\ct U0,V0,W0}                                  & Reals         & Section~\ref{info:MISC_Basics}                        & m/s           & 0.                \\ \hline
{\ct VISIBILITY\_FACTOR}                        & Real          & Section~\ref{info:visibility}                         &               & 3                 \\ \hline
{\ct VN\_MAX}                                   & Real          & Section~\ref{info:CFL}                                &               & 1.0               \\ \hline
{\ct VN\_MIN}                                   & Real          & Section~\ref{info:CFL}                                &               & 0.8               \\ \hline
%{\ct WIND\_ONLY}                                & Logical       & See Wildland Fire User's Guide                            &               & {\ct .FALSE.}     \\ \hline
\end{longtable}

%Undocumented: LIMITING_DT_RATIO, HRRPUVCUT_MAX, RUN_AVG_FAC, THERMOPHORETIC_DEPOSITION, TURBULENT_DEPOSITION,
%               VEG_LEVEL_SET, CP_FTMP, HRRPUV_MAX_SMV, TERRAIN_IMAGE,N EW_EVAP, SCALAR_ENERGY_TOLERANCE, TKE_TOLERANCE, RFAC_FORCING,
%               WFDS,UVW_FILE


\vspace{\baselineskip}

\section{\texorpdfstring{{\tt MULT}}{MULT} (Multiplier Function Parameters)}

\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Multiplier Function Parameters]{For more information see Section~\ref{info:MULT}.}
\label{tbl:MULT} \\
\hline
\multicolumn{5}{|c|}{{\ct MULT} (Multiplier Function Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct MULT} (Multiplier Function Parameters)} \\
\hline \hline
\endhead
{\ct DX}             & Real             & Spacing in the $x$ direction                & m  & 0.                         \\ \hline
{\ct DXB}            & Real Sextuplet   & Spacing for all 6 coordinates               & m  & 0.                         \\ \hline
{\ct DX0}            & Real             & Translation in the $x$ direction            & m  & 0.                         \\ \hline
{\ct DY}             & Real             & Spacing in the $y$ direction                & m  & 0.                         \\ \hline
{\ct DY0}            & Real             & Translation in the $y$ direction            & m  & 0.                         \\ \hline
{\ct DZ}             & Real             & Spacing in the $z$ direction                & m  & 0.                         \\ \hline
{\ct DZ0}            & Real             & Translation in the $z$ direction            & m  & 0.                         \\ \hline
{\ct ID }            & Character        & Identification tag                          &    &                            \\ \hline
{\ct I\_LOWER}       & Integer          & Lower array bound, $x$ direction            &    & 0                          \\ \hline
{\ct I\_UPPER}       & Integer          & Upper array bound, $x$ direction            &    & 0                          \\ \hline
{\ct J\_LOWER}       & Integer          & Lower array bound, $y$ direction            &    & 0                          \\ \hline
{\ct J\_UPPER}       & Integer          & Upper array bound, $y$ direction            &    & 0                          \\ \hline
{\ct K\_LOWER}       & Integer          & Lower array bound, $z$ direction            &    & 0                          \\ \hline
{\ct K\_UPPER}       & Integer          & Upper array bound, $z$ direction            &    & 0                          \\ \hline
{\ct N\_LOWER}       & Integer          & Lower sequence bound                        &    & 0                          \\ \hline
{\ct N\_UPPER}       & Integer          & Upper sequence bound                        &    & 0                          \\ \hline
\end{longtable}


\vspace{\baselineskip}



\section{\texorpdfstring{{\tt OBST}}{OBST} (Obstruction Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Obstruction Parameters]{For more information see Section~\ref{info:OBST}.}
\label{tbl:OBST} \\
\hline
\multicolumn{5}{|c|}{{\ct OBST} (Obstruction Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct OBST} (Obstruction Parameters)} \\
\hline \hline
\endhead
{\ct ALLOW\_VENT}         & Logical             & Section~\ref{info:OBST_Basics}            &           & {\ct .TRUE.}  \\ \hline
{\ct BNDF\_FACE(-3:3)}    & Logical Array       & Section~\ref{info:BNDF}                   &           & {\ct .TRUE.}  \\ \hline
{\ct BNDF\_OBST}          & Logical             & Section~\ref{info:BNDF}                   &           & {\ct .TRUE.}  \\ \hline
{\ct BULK\_DENSITY}       & Real                & Section~\ref{info:BURN_AWAY}              & kg/m$^3$  &               \\ \hline
{\ct COLOR    }           & Character           & Section~\ref{info:OBST_Basics}            &           &               \\ \hline
{\ct CTRL\_ID }           & Character           & Section~\ref{info:activate_deactivate}    &           &               \\ \hline
{\ct DEVC\_ID }           & Character           & Section~\ref{info:activate_deactivate}    &           &               \\ \hline
{\ct EVACUATION}          & Logical             & Reference~\cite{FDS_Evac_Users_Guide}     &           & {\ct .FALSE.} \\ \hline
{\ct ID }                 & Character           & Section~\ref{info:OBST_Basics}            &           &               \\ \hline
{\ct MESH\_ID}            & Character           & Reference~\cite{FDS_Evac_Users_Guide}     &           &               \\ \hline
{\ct MULT\_ID }           & Character           & Section~\ref{info:MULT}                   &           &               \\ \hline
%{\ct NOTERRAIN}           & Logical             & See Wildland Fire User's Guide            &           & {\ct .FALSE.} \\ \hline
{\ct OUTLINE}             & Logical             & Section~\ref{info:OBST_Basics}            &           & {\ct .FALSE.} \\ \hline
{\ct PERMIT\_HOLE}        & Logical             & Section~\ref{info:HOLE}                   &           & {\ct .TRUE.}  \\ \hline
{\ct PROP\_ID}            & Character           & Reference~\cite{Smokeview_Users_Guide}    &           &               \\ \hline
{\ct REMOVABLE}           & Logical             & Section~\ref{info:HOLE}                   &           & {\ct .TRUE.}  \\ \hline
{\ct RGB(3)}              & Integer Triplet     & Section~\ref{info:OBST_Basics}            &           &               \\ \hline
{\ct SAWTOOTH}            & Logical             & Section~\ref{info:SAWTOOTH}               &           & {\ct .TRUE.}  \\ \hline
{\ct SURF\_ID}            & Character           & Section~\ref{info:OBST_Basics}            &           &               \\ \hline
{\ct SURF\_ID6(6)}        & Character Sextuplet & Section~\ref{info:OBST_Basics}            &           &               \\ \hline
{\ct SURF\_IDS(3)}        & Character Triplet   & Section~\ref{info:OBST_Basics}            &           &               \\ \hline
{\ct TEXTURE\_ORIGIN(3)}  & Real Triplet        & Section~\ref{info:texture_map}            & m         & (0.,0.,0.)    \\ \hline
{\ct THICKEN}             & Logical             & Section~\ref{info:OBST_Basics}            &           & {\ct .FALSE.} \\ \hline
{\ct TRANSPARENCY}        & Real                & Section~\ref{info:OBST_Basics}            &           &  1            \\ \hline
{\ct XB(6) }              & Real Sextuplet      & Section~\ref{info:OBST_Basics}            & m         &               \\ \hline
\end{longtable}


\vspace{\baselineskip}



\section{\texorpdfstring{{\tt PART}}{PART} (Lagrangian Particles/Droplets)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Lagrangian Particles/Droplets]{For more information see Chapter~\ref{info:PART}.}
\label{tbl:PART} \\
\hline
\multicolumn{5}{|c|}{{\ct PART} (Lagrangian Particles/Droplets)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct PART} (Lagrangian Particles/Droplets)} \\
\hline \hline
\endhead
{\ct AGE}                           & Real            & Section~\ref{info:particle_number}      & s         & 100000.       \\ \hline
{\ct BREAKUP}                       & Logical         & Section~\ref{info:secondary_breakup}    &           & {\ct .FALSE.} \\ \hline
{\ct BREAKUP\_CHILD\_DIAMETER}      & Real            & Section~\ref{info:secondary_breakup}    &           & $\frac{3}{7}$ \\ \hline
{\ct BREAKUP\_CHILD\_GAMMA\_D}      & Real            & Section~\ref{info:secondary_breakup}    &           & 2.56          \\ \hline
{\ct CNF\_RAMP\_ID}                 & Character       & Section~\ref{info:particle_size}        &           &  \\ \hline
{\ct COLOR}                         & Character       & Section~\ref{info:particle_quantities}  &           & {\ct 'BLACK'} \\ \hline
{\ct COMPLEX\_REFRACTIVE\_INDEX}    & Real            & Section~\ref{radiative_part_props}      &           & 0.01          \\ \hline
{\ct CTRL\_ID}                      & Character       & Section~\ref{info:particle_flux}        &           &               \\ \hline
{\ct DENSITY}                       & Real            & Section~\ref{thermal_part_props}        & kg/m$^3$  & 1000.         \\ \hline
{\ct DEVC\_ID}                      & Character       & Section~\ref{info:particle_flux}        &           &               \\ \hline
{\ct DIAMETER}                      & Real            & Section~\ref{info:particle_size}        & $\mu$m    & 500.          \\ \hline
{\ct DISTRIBUTION}                  & Character       & Section~\ref{info:particle_size}        &           & {\ct 'ROSIN-RAMMLER-LOGNORMAL'} \\ \hline
{\ct DRAG\_LAW}                     & Character       & Section~\ref{info:particle_drag}        &           & {\ct 'SPHERE'}\\ \hline
{\ct EVAPORATE}                     & Logical         & Section~\ref{thermal_part_props}        &           & {\ct .TRUE.}  \\ \hline
{\ct GAMMA\_D}                      & Real            & Section~\ref{info:particle_size}        &           & 2.4           \\ \hline
{\ct HEAT\_OF\_COMBUSTION}          & Real            & Section~\ref{info:fuel_droplets}        & kJ/kg     &               \\ \hline
{\ct HORIZONTAL\_VELOCITY}          & Real            & Section~\ref{info:surface_droplets}     & m/s       &  0.2          \\ \hline
{\ct ID}                            & Character       & Section~\ref{info:PART_Basics}          &           &               \\ \hline
{\ct INITIAL\_TEMPERATURE}          & Real            & Section~\ref{thermal_part_props}        & $^\circ$C & {\ct TMPA}    \\ \hline
{\ct MASSLESS}                      & Logical         & Section~\ref{info:MASSLESS}             &           & {\ct .FALSE.} \\ \hline
{\ct MAXIMUM\_DIAMETER}             & Real            & Section~\ref{info:particle_size}        & $\mu$m    & $\infty$      \\ \hline
{\ct MINIMUM\_DIAMETER}             & Real            & Section~\ref{info:particle_size}        & $\mu$m    & 20.           \\ \hline
{\ct MONODISPERSE}                  & Logical         & Section~\ref{info:particle_size}        &           & {\ct .FALSE.} \\ \hline
{\ct PROP\_ID}                      & Character       & Section~\ref{info:PART_Basics}          &           &               \\ \hline
{\ct QUANTITIES(10)}                & Character       & Section~\ref{info:particle_quantities}  &           &               \\ \hline
{\ct RADIATIVE\_PROPERTY\_TABLE}    & Real            & Section~\ref{radiative_part_props}      &           &               \\ \hline
{\ct REAL\_REFRACTIVE\_INDEX}       & Real            & Section~\ref{radiative_part_props}      &           & 1.33          \\ \hline
{\ct RGB(3)}                        & Integers        & Section~\ref{info:particle_quantities}  &           &               \\ \hline
{\ct SAMPLING\_FACTOR}              & Integer         & Section~\ref{info:particle_number}      &           & 1             \\ \hline
{\ct SIGMA\_D}                      & Real            & Section~\ref{info:particle_size}        &           &               \\ \hline
{\ct SPEC\_ID}                      & Character       & Section~\ref{thermal_part_props}        &           &               \\ \hline
{\ct STATIC}                        & Logical         & Section~\ref{info:STATIC}               &           & {\ct .FALSE.} \\ \hline
{\ct SURFACE\_TENSION}              & Real            & Section~\ref{info:secondary_breakup}    &   N/m     & 72.8$\cdot 10^3$  \\ \hline
{\ct SURF\_ID}                      & Character       & Section~\ref{info:PART_SURF}            &           &               \\ \hline
{\ct USER\_DRAG\_COEFFICIENT}       & Real            & Section~\ref{info:particle_drag}        &           & -1.           \\ \hline
{\ct VERTICAL\_VELOCITY}            & Real            & Section~\ref{info:surface_droplets}     & m/s       &  0.5          \\ \hline
\end{longtable}

% Undocumented: TREE,VEG_SV,VEG_MOISTURE,VEG_CHAR_FRACTION,VEG_DRAG_COEFFICIENT,VEG_DENSITY,VEG_BULK_DENSITY,
%               VEG_BURNING_RATE_MAX,VEG_DEHYDRATION_RATE_MAX,VEG_INITIAL_TEMPERATURE,VEG_FUEL_MPV_MIN,
%               VEG_MOIST_MPV_MIN,VEG_REMOVE_CHARRED,VEG_STEM,VEG_DEGRADATION,VEG_CHAR_OXIDATION

% Undocumented: SURFACE_TENSION,BREAKUP,BREAKUP_CHILD_DIAMETER,BREAKUP_CHILD_SIGMA_D,
%               DENSE_VOLUME_FRACTION,NUMBER_RADIATION_ANGLES,ORIENTATION


\vspace{\baselineskip}

\section{\texorpdfstring{{\tt PRES}}{PRES} (Pressure Solver Parameters)}

\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Pressure Solver Parameters]{For more information see Section~\ref{info:PRES}.}
\label{tbl:PRES} \\
\hline
\multicolumn{5}{|c|}{{\ct PRES} (Pressure Solver Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct PRES} (Pressure Solver Parameters)} \\
\hline \hline
\endhead
{\ct CHECK\_POISSON}                & Logical       & Section~\ref{info:PRES}           &               & {\ct .FALSE.}         \\ \hline
{\ct MAX\_PRESSURE\_ITERATIONS}     & Integer       & Section~\ref{info:PRES}           &               &   10000                \\ \hline
{\ct PRESSURE\_RELAX\_FACTOR}       & Real          & Section~\ref{info:PRES}           &               & 0.2                       \\ \hline
{\ct RELAXATION\_FACTOR}            & Real          & Section~\ref{info:PRES}           &               & 1.0                       \\ \hline
{\ct VELOCITY\_TOLERANCE}           & Real          & Section~\ref{info:PRES}           &  m/s          &                        \\ \hline
\end{longtable}

% Undocumented: SCARC_METHOD , SCARC_KRYLOV , SCARC_MULTIGRID, SCARC_SMOOTH  , SCARC_PRECON,
%               SCARC_COARSE , SCARC_INITIAL, SCARC_STORAGE  , SCARC_ACCURACY, SCARC_DEBUG ,
%               SCARC_MULTIGRID_CYCLE, SCARC_MULTIGRID_LEVEL , SCARC_MULTIGRID_COARSENING  ,
%               SCARC_MULTIGRID_ITERATIONS  , SCARC_MULTIGRID_ACCURACY   ,
%               SCARC_KRYLOV_ITERATIONS     , SCARC_KRYLOV_ACCURACY      ,
%               SCARC_SMOOTH_ITERATIONS     , SCARC_SMOOTH_ACCURACY      , SCARC_SMOOTH_OMEGA,
%               SCARC_PRECON_ITERATIONS     , SCARC_PRECON_ACCURACY      , SCARC_PRECON_OMEGA,
%               SCARC_COARSE_ITERATIONS     , SCARC_COARSE_ACCURACY

\vspace{\baselineskip}



\section{\texorpdfstring{{\tt PROF}}{PROF} (Wall Profile Parameters)}

\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Wall Profile Parameters]{For more information see Section~\ref{info:PROF}.}
\label{tbl:PROF} \\
\hline
\multicolumn{5}{|c|}{{\ct PROF} (Wall Profile Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct PROF} (Wall Profile Parameters)} \\
\hline \hline
\endhead
{\ct IOR}      & Real             & Section~\ref{info:PROF}      &            &     \\ \hline
{\ct ID}       & Character        & Section~\ref{info:PROF}      &            &     \\ \hline
{\ct QUANTITY} & Character        & Section~\ref{info:PROF}      &            &     \\ \hline
{\ct XYZ}      & Real Triplet     & Section~\ref{info:PROF}      & m          &     \\ \hline
\end{longtable}

\vspace{\baselineskip}


\section{\texorpdfstring{{\tt PROP}}{PROP} (Device Properties)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Device Properties]{For more information see Section~\ref{info:PROP}.}
\label{tbl:PROP} \\
\hline
\multicolumn{5}{|c|}{{\ct PROP} (Device Properties)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct PROP} (Device Properties)} \\
\hline \hline
\endhead
{\ct ACTIVATION\_OBSCURATION}           & Real          & Section~\ref{info:smoke_detector}         & \%/m                  & 3.28      \\ \hline
{\ct ACTIVATION\_TEMPERATURE}           & Real          & Section~\ref{info:sprinklers}             & $^\circ$C             & 74.        \\ \hline
{\ct ALPHA\_C}                          & Real          & Section~\ref{info:smoke_detector}         &                       & 1.8       \\ \hline
{\ct ALPHA\_E}                          & Real          & Section~\ref{info:smoke_detector}         &                       & 0.       \\ \hline
{\ct BEAD\_DENSITY}                     & Real          & Section~\ref{info:THERMOCOUPLE}           & kg/m$^3$              & 8908.     \\ \hline
{\ct BEAD\_DIAMETER}                    & Real          & Section~\ref{info:THERMOCOUPLE}           & m                     & 0.001     \\ \hline
{\ct BEAD\_EMISSIVITY}                  & Real          & Section~\ref{info:THERMOCOUPLE}           &                       & 0.85      \\ \hline
{\ct BEAD\_H\_FIXED}                    & Real          & Section~\ref{info:THERMOCOUPLE}           & W/m$^2$/K             &           \\ \hline
{\ct BEAD\_SPECIFIC\_HEAT}              & Real          & Section~\ref{info:THERMOCOUPLE}           & kJ/kg/K               & 0.44      \\ \hline
{\ct BETA\_C}                           & Real          & Section~\ref{info:smoke_detector}         &                       & 1.       \\ \hline
{\ct BETA\_E}                           & Real          & Section~\ref{info:smoke_detector}         &                       & 1.       \\ \hline
{\ct CHARACTERISTIC\_VELOCITY}          & Real          & Section~\ref{info:wind}                   & m/s                   & 1.       \\ \hline
{\ct C\_FACTOR}                         & Real          & Section~\ref{info:sprinklers}             &                       & 0.        \\ \hline
{\ct PARTICLES\_PER\_SECOND}             & Integer      & Section~\ref{info:sprinklers}             &                       & 5000      \\ \hline
{\ct PARTICLE\_VELOCITY}                 & Real         & Section~\ref{info:sprinklers}             & m/s                   & 0.       \\ \hline
{\ct FLOW\_RAMP}                        & Character     & Section~\ref{info:sprinklers}             &                       &           \\ \hline
{\ct FLOW\_RATE}                        & Real          & Section~\ref{info:sprinklers}             & L/min                 &           \\ \hline
{\ct FLOW\_TAU}                         & Real          & Section~\ref{info:sprinklers}             &                       & 0.       \\ \hline
{\ct GAUGE\_TEMPERATURE}                & Real          & Section~\ref{info:heat_flux}              & $^\circ$C             & {\ct TMPA}\\ \hline
{\ct ID}                                & Character     & Section~\ref{info:PROP}                   &                       &           \\ \hline
{\ct INITIAL\_TEMPERATURE}              & Real          & Section~\ref{info:sprinklers}             & $^\circ$C             & {\ct TMPA}\\ \hline
{\ct K\_FACTOR}                         & Real          & Section~\ref{info:sprinklers}             & L/min/bar$^{1/2}$     & 1.        \\ \hline
{\ct LENGTH}                            & Real          & Section~\ref{info:smoke_detector}         &                       & 1.8       \\ \hline
{\ct OFFSET}                            & Real          & Section~\ref{info:sprinklers}             & m                     & 0.05      \\ \hline
{\ct OPERATING\_PRESSURE}               & Real          & Section~\ref{info:sprinklers}             & bar                   & 1.        \\ \hline
{\ct ORIFICE\_DIAMETER}                 & Real          & Section~\ref{info:sprinklers}             & m                     & 0.       \\ \hline
{\ct P0,PX(3),PXX(3,3)}                 & Real          & Section~\ref{info:velocity_patch}         & m/s                   &  0.         \\ \hline
{\ct PART\_ID}                          & Character     & Section~\ref{info:sprinklers}             &                       &           \\ \hline
{\ct PDPA\_END}                         & Real          & Section~\ref{PDPA}                        & s                     & {\ct T\_END} \\ \hline
{\ct PDPA\_INTEGRATE}                   & Logical       & Section~\ref{PDPA}                        &                       & {\ct .TRUE.}         \\ \hline
{\ct PDPA\_M}                           & Integer       & Section~\ref{PDPA}                        &                       & 0         \\ \hline
{\ct PDPA\_N}                           & Integer       & Section~\ref{PDPA}                        &                       & 0         \\ \hline
{\ct PDPA\_NORMALIZE}                   & Logical       & Section~\ref{PDPA}                        &                       & {\ct .TRUE.}         \\ \hline
{\ct PDPA\_RADIUS}                      & Real          & Section~\ref{PDPA}                        & m                     & 0.        \\ \hline
{\ct PDPA\_START}                       & Real          & Section~\ref{PDPA}                        & s                     & 0.        \\ \hline
{\ct PDPA\_HISTOGRAM}                   & Logical       & Section~\ref{PDPA}                        &                       & .FALSE.   \\ \hline
{\ct PDPA\_HISTOGRAM\_NBINS}            & Integer       & Section~\ref{PDPA}                        &                       & 10        \\ \hline
{\ct PDPA\_HISTOGRAM\_MIN}              & Real          & Section~\ref{PDPA}                        &                       & 0         \\ \hline
{\ct PDPA\_HISTOGRAM\_MAX}              & Real          & Section~\ref{PDPA}                        &                       & 0         \\ \hline
{\ct PRESSURE\_RAMP}                    & Character     & Section~\ref{info:sprinklers}             &                       &           \\ \hline
{\ct QUANTITY}                          & Character     & Section~\ref{info:sprinklers}             &                       &           \\ \hline
{\ct RTI}                               & Real          & Section~\ref{info:sprinklers}             & $\sqrt{\hbox{m~s}}$   & 100.      \\ \hline
{\ct SMOKEVIEW\_ID}                     & Char.~Array   & Section~\ref{info:SMOKEVIEW_ID}           &                       &           \\ \hline
{\ct SMOKEVIEW\_PARAMETERS}             & Char.~Array   & Section~\ref{info:SMOKEVIEW_PARAMETERS}   &                       &           \\ \hline
{\ct SPEC\_ID}                          & Character     & Section~\ref{info:alternative_smoke}      &                       &           \\ \hline
{\ct SPRAY\_ANGLE(2)}                   & Real          & Section~\ref{info:sprinklers}             & deg.                  & 60.,75.   \\ \hline
{\ct SPRAY\_PATTERN\_BETA}              & Integer       & Section~\ref{info:sprinklers}             & deg.                  & 5          \\ \hline
{\ct SPRAY\_PATTERN\_MU}                & Integer       & Section~\ref{info:sprinklers}             & deg.                  & 0          \\ \hline
{\ct SPRAY\_PATTERN\_SHAPE}             & Character     & Section~\ref{info:sprinklers}             &                       & {\ct 'GAUSSIAN'}  \\ \hline
{\ct SPRAY\_PATTERN\_TABLE}             & Character     & Section~\ref{info:sprinklers}             &                       &           \\ \hline
{\ct VELOCITY\_COMPONENT}               & Integer       & Section~\ref{info:velocity_patch}         &                       &           \\ \hline
\end{longtable}


\vspace{\baselineskip}


\section{\texorpdfstring{{\tt RADI}}{RADI} (Radiation Parameters)}

\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Radiation Parameters]{For more information see Section~\ref{info:RADI}.}
\label{tbl:RADI} \\
\hline
\multicolumn{5}{|c|}{{\ct RADI} (Radiation Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct RADI} (Radiation Parameters)} \\
\hline \hline
\endhead
{\ct ANGLE\_INCREMENT}              & Integer   & Section~\ref{info:RADI_Resolution}        &                   & 5             \\ \hline
{\ct CH4\_BANDS          }          & Logical   & Section~\ref{info:RADI_Wide_Band}         &                   & {\ct .FALSE.} \\ \hline
{\ct KAPPA0                   }     & Real      & Section~\ref{info:RADI_Absorption}        & 1/m               & 0             \\ \hline
{\ct NMIEANG                  }     & Integer   & Section~\ref{info:RADI_Absorption}        &                   & 15            \\ \hline
{\ct NUMBER\_RADIATION\_ANGLES}     & Integer   & Section~\ref{info:RADI_Resolution}        &                   & 100           \\ \hline
{\ct PATH\_LENGTH }                 & Real      & Section~\ref{info:RADI_Wide_Band}         &   m               &               \\ \hline
{\ct RADIATION}                     & Logical   & Section~\ref{info:RADI}                   &                   & {\ct .TRUE.}      \\ \hline
{\ct RADIATIVE\_FRACTION}           & Real      & Section~\ref{info:RADI}                   &                   & 0.35          \\ \hline
{\ct RADTMP                   }     & Real      & Section~\ref{info:RADI_Absorption}        & $^\circ$C         & 900           \\ \hline
{\ct TIME\_STEP\_INCREMENT}         & Integer   & Section~\ref{info:RADI_Resolution}        &                   & 3             \\ \hline
{\ct WIDE\_BAND\_MODEL    }         & Logical   & Section~\ref{info:RADI_Wide_Band}         &                   & {\ct .FALSE.} \\ \hline
\end{longtable}

% Undocumented: RADCAL_FUEL

\vspace{\baselineskip}


\section{\texorpdfstring{{\tt RAMP}}{RAMP} (Ramp Function Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Ramp Function Parameters]{For more information see Chapter~\ref{info:RAMP}.}
\label{tbl:RAMP} \\
\hline
\multicolumn{5}{|c|}{{\ct RAMP} (Ramp Function Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct RAMP} (Ramp Function Parameters)} \\
\hline \hline
\endhead
%{\ct CTRL\_ID}                      & Character     & Section~\ref{info:CTRL}       &                       &           \\ \hline
{\ct DEVC\_ID}                      & Character     & Section~\ref{info:RAMPDEVC}   &                       &           \\ \hline
{\ct F}                             & Real          & Chapter~\ref{info:RAMP}       &                       &           \\ \hline
{\ct ID}                            & Character     & Chapter~\ref{info:RAMP}       &                       &           \\ \hline
{\ct NUMBER\_INTERPOLATION\_POINTS} & Integer       & Chapter~\ref{info:RAMP}       &                       &  5000     \\ \hline
{\ct T}                             & Real          & Chapter~\ref{info:RAMP}       & s (or $^\circ$C)      &           \\ \hline
{\ct X}                             & Real          & Section~\ref{info:GVEC}       & m                     &           \\ \hline
\end{longtable}


\vspace{\baselineskip}


\section{\texorpdfstring{{\tt REAC}}{REAC} (Reaction Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Reaction Parameters]{For more information see Chapter~\ref{chap:combustion}.}
\label{tbl:REAC} \\
\hline
\multicolumn{5}{|c|}{{\ct REAC} (Reaction Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct REAC} (Reaction Parameters)} \\
\hline \hline
\endhead
{\ct A}                                   & Real        & Section~\ref{info:finite}                 &   cm$^3$/mol/s    &     \\ \hline
{\ct AUTO\_IGNITION\_TEMPERATURE}         & Real        & Section~\ref{info:extinction}             &   K               &  0  \\ \hline
{\ct BETA\_EDC}                           & Real        & Section~\ref{info:turbulent_combustion}   &                   & 1.0    \\ \hline
{\ct C}                                   & Real        & Section~\ref{info:simple_chemistry}       &                   & 3    \\ \hline
{\ct CHECK\_ATOM\_BALANCE}                & Logical     & Section~\ref{info:REAC_Diagnostics}       &                   & {\ct .TRUE.}    \\ \hline
{\ct CO\_YIELD}                           & Real        & Section~\ref{info:simple_chemistry}       & kg/kg             & 0        \\ \hline
{\ct CRITICAL\_FLAME\_TEMPERATURE}        & Real        & Section~\ref{info:extinction}             &   $^\circ$C       & 1427    \\ \hline
{\ct E}                                   & Real        & Section~\ref{info:finite}                 &   kJ/kmol         &     \\ \hline
{\ct EPUMO2}                              & Real        & Section~\ref{info:heat_of_combustion}     &   kJ/kg           & 13100    \\ \hline
{\ct EQUATION}                            & Character   & Section~\ref{info:EQUATION}               &                   &          \\ \hline
{\ct FORMULA}                             & Character   & Section~\ref{info:simple_chemistry}       &                   &  \\ \hline
{\ct FUEL}                                & Character   & Section~\ref{info:simple_chemistry}       &                   &   \\ \hline
{\ct H}                                   & Real        & Section~\ref{info:simple_chemistry}       &                   & 8    \\ \hline
{\ct HEAT\_OF\_COMBUSTION}                & Real        & Section~\ref{info:heat_of_combustion}     & kJ/kg             &         \\ \hline
{\ct HRRPUA\_SHEET}                       & Real        & Section~\ref{info:REAC_Limiters}          & kW/m$^2$          &         \\ \hline
{\ct HRRPUV\_AVERAGE}                     & Real        & Section~\ref{info:REAC_Limiters}          & kW/m$^3$          &         \\ \hline
{\ct HUMIDITY}                            & Real        & Section~\ref{info:simple_chemistry}       & \%                & 40.               \\ \hline
{\ct ID}                                  & Character   & Section~\ref{info:simple_chemistry}       &                   &     \\ \hline
{\ct IDEAL}                               & Logical     & Section~\ref{info:simple_chemistry}       &                   & {\ct .FALSE.}    \\ \hline
{\ct N}                                   & Real        & Section~\ref{info:simple_chemistry}       &                   & 0    \\ \hline
{\ct NU(:)}                               & Real Array  & Section~\ref{info:finite}                 &                   &     \\ \hline
{\ct N\_S(:)}                             & Real Array  & Section~\ref{info:finite}                 &                   &     \\ \hline
{\ct N\_T}                                & Real        & Section~\ref{info:finite}                 &                   &     \\ \hline
{\ct O}                                   & Real        & Section~\ref{info:simple_chemistry}       &                   & 0    \\ \hline
{\ct REAC\_ATOM\_ERROR}                   & Real        & Section~\ref{info:REAC_Diagnostics}       & atoms             & 1.E-5    \\ \hline
{\ct REAC\_MASS\_ERROR}                   & Real        & Section~\ref{info:REAC_Diagnostics}       & kg/kg             & 1.E-4    \\ \hline
{\ct SMIX\_ID(:)}                         & Char.~Array & Section~\ref{info:SMIX}                   &                   &     \\ \hline
{\ct SPEC\_ID(:)}                         & Char.~Array & Section~\ref{info:SMIX}                   &                   &     \\ \hline
{\ct SOOT\_H\_FRACTION}                   & Real        & Section~\ref{info:simple_chemistry}       &                   & 0.1    \\ \hline
{\ct SOOT\_YIELD}                         & Real        & Section~\ref{info:simple_chemistry}       & kg/kg             & 0.01    \\ \hline
{\ct SUPPRESSION}                         & Logical     & Section~\ref{info:extinction}             &                   & {\ct .TRUE.}      \\ \hline
{\ct THRESHOLD\_TEMPERATURE}              & Real        & Section~\ref{info:mixedmode}              &   $^\circ$C       & 1427    \\ \hline
{\ct Y\_CO2\_INFTY}                       & Real        & Section~\ref{info:simple_chemistry}       &  kg/kg            & 0.0058 \\ \hline
{\ct Y\_O2\_INFTY}                        & Real        & Section~\ref{info:simple_chemistry}       &  kg/kg            & 0.232428\\ \hline
{\ct Y\_P\_MIN\_EDC}                      & Real        & Section~\ref{info:turbulent_combustion}   &  kg/kg            & 0.0001    \\ \hline
\end{longtable}

% Not listed: SOOT_DEPOSITION, FIXED_MIX_TIME, TAU_CHEM, TAU_FLAME, ODE_SOLVER


\vspace{\baselineskip}

\section{\texorpdfstring{{\tt SLCF}}{SLCF} (Slice File Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Slice File Parameters]{For more information see Section~\ref{info:SLCF}.}
\label{tbl:SLCF} \\
\hline
\multicolumn{5}{|c|}{{\ct SLCF} (Slice File Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct SLCF} (Slice File Parameters)} \\
\hline \hline
\endhead
{\ct CELL\_CENTERED}    & Logical           & Section~\ref{info:SLCF}                   &           & {\ct .FALSE.}     \\ \hline
{\ct EVACUATION}        & Logical           & Reference~\cite{FDS_Evac_Users_Guide}     &           & {\ct .FALSE.}\\ \hline
{\ct MAXIMUM\_VALUE}    & Real              & Reference~\cite{Smokeview_Users_Guide}    &           &                   \\ \hline
{\ct MESH\_NUMBER}      & Integer           & Section~\ref{info:SLCF}                   &           &                   \\ \hline
{\ct MINIMUM\_VALUE}    & Real              & Reference~\cite{Smokeview_Users_Guide}    &           &                   \\ \hline
{\ct PART\_ID}          & Character         & Section~\ref{info:outputquantities}       &           &                   \\ \hline
{\ct PBX, PBY, PBZ}     & Real              & Section~\ref{info:SLCF}                   &           &                   \\ \hline
{\ct QUANTITY}          & Character         & Section~\ref{info:outputquantities}       &           &                   \\ \hline
{\ct QUANTITY2}         & Character         & Section~\ref{info:outputquantities}       &           &                   \\ \hline
{\ct SPEC\_ID}          & Character         & Section~\ref{info:outputquantities}       &           &                   \\ \hline
{\ct VECTOR    }        & Logical           & Section~\ref{info:SLCF}                   &           & {\ct .FALSE.}     \\ \hline
{\ct VELO\_INDEX}       & Integer           & Section~\ref{info:velocity}               &           &  0                \\ \hline
{\ct XB(6)}             & Real Sextuplet    & Section~\ref{info:SLCF}                   & m         &                   \\ \hline
\end{longtable}

%Undocumented: AGL_SLICE,FIRE_LINE,EVACUATION,LEVEL_SET_FIRE_LINE

\vspace{\baselineskip}

\section{\texorpdfstring{{\tt SMIX}}{SMIX} (Species Mixture (Lumped Species) Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Species Parameters]{For more information see Section~\ref{info:SMIX}.}
\label{tbl:SMIX} \\
\hline
\multicolumn{5}{|c|}{{\ct SMIX} (Species Mixture (Lumped Species) Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct SMIX} (Species Mixture (Lumped Species) Parameters)} \\
\hline \hline
\endhead
{\ct BACKGROUND}                    & Logical           & Mixture is background species                         &                   & {\ct .FALSE.} \\ \hline
{\ct ID}                            & Character         & Name of species                                       &                   &               \\ \hline
{\ct SPEC\_ID(:)}                   & Character Array   & IDs of {\ct SPEC}ies that make up the mixture         &                   &               \\ \hline
{\ct MASS\_FRACTION(:)}             & Real Array        & Mass fraction of mixture components                   &                   & 0             \\ \hline
{\ct MASS\_FRACTION\_0}             & Real              & Initial mass fraction of mixture                    &                   & 0             \\ \hline
{\ct VOLUME\_FRACTION(:)}           & Real Array        & Volume fraction of mixture components                 &                   &               \\ \hline
\end{longtable}

\vspace{\baselineskip}


\section{\texorpdfstring{{\tt SPEC}}{SPEC} (Species Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Species Parameters]{For more information see Section~\ref{info:SPEC}.}
\label{tbl:SPEC} \\
\hline
\multicolumn{5}{|c|}{{\ct SPEC} (Species Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct SPEC} (Species Parameters)} \\
\hline \hline
\endhead
{\ct ABSORBING}                     & Logical     & Section~\ref{gas_species_props}         &                   & {\ct .FALSE.} \\ \hline
{\ct BACKGROUND}                    & Logical     & Section~\ref{info:SPEC}                 &                   & {\ct .FALSE.} \\ \hline
{\ct CONDUCTIVITY}                  & Real        & Section~\ref{gas_species_props}         & W/m/K             &               \\ \hline
{\ct DENSITY\_LIQUID}               & Real        & Section~\ref{thermal_part_props}        & kg/m$^3$          &               \\ \hline
{\ct DIFFUSIVITY}                   & Real        & Section~\ref{gas_species_props}         & m$^2$/s           &               \\ \hline
{\ct EPSILONKLJ}                    & Real        & Section~\ref{gas_species_props}         &                   & 0             \\ \hline
{\ct FIC\_CONCENTRATION}            & Real        & Section~\ref{info:FED}                  & ppm               & 0.            \\ \hline
{\ct FLD\_LETHAL\_DOSE}             & Real        & Section~\ref{info:FED}                  & ppm$\times$min    & 0.            \\ \hline
{\ct FORMULA }                      & Character   & Section~\ref{gas_species_props}         &                   &               \\ \hline
{\ct HEAT\_OF\_VAPORIZATION}        & Real        & Section~\ref{thermal_part_props}        & kJ/kg             &               \\ \hline
{\ct HUMIDITY}                      & Real        & Section~\ref{info:SPEC_Basics}          & \%                & 40.           \\ \hline
{\ct H\_V\_REFERENCE\_TEMPERATURE}  & Real        & Section~\ref{thermal_part_props}        & $^\circ$C         &               \\ \hline
{\ct ID }                           & Character   & Section~\ref{info:SPEC_Basics}          &                   &               \\ \hline
{\ct MASS\_EXTINCTION\_COEFFICIENT} & Real        & Section~\ref{info:alternative_smoke}    &                   & 0             \\ \hline
{\ct MASS\_FRACTION\_0}             & Real        & Section~\ref{info:SPEC_Basics}          &                   & 0             \\ \hline
{\ct MELTING\_TEMPERATURE}          & Real        & Section~\ref{thermal_part_props}        & $^\circ$C         &               \\ \hline
{\ct MW}                            & Real        & Section~\ref{gas_species_props}         & g/mol             & 29.           \\ \hline
{\ct RAMP\_CP}                      & Character   & Section~\ref{gas_species_props}         & g/mol             & 29.           \\ \hline
{\ct RAMP\_CP\_L}                   & Character   & Section~\ref{thermal_part_props}        & g/mol             & 29.           \\ \hline
{\ct RAMP\_D}                       & Character   & Section~\ref{gas_species_props}         & g/mol             & 29.           \\ \hline
{\ct RAMP\_K}                       & Character   & Section~\ref{gas_species_props}         & g/mol             & 29.           \\ \hline
{\ct RAMP\_MU}                      & Character   & Section~\ref{gas_species_props}         & g/mol             & 29.           \\ \hline
{\ct REFERENCE\_ENTHALPY}           & Real        & Section~\ref{gas_species_props}         & kJ/kg             &               \\ \hline
{\ct REFERENCE\_TEMPERATURE}        & Real        & Section~\ref{gas_species_props}         & $^\circ$C         & 25.           \\ \hline
{\ct SIGMALJ}                       & Real        & Section~\ref{gas_species_props}         &                   & 0             \\ \hline
{\ct SMIX\_COMPONENT\_ONLY}         & Logical     & Section~\ref{info:SMIX}                 &                   & {\ct .FALSE.} \\ \hline
{\ct SPECIFIC\_HEAT}                & Real        & Section~\ref{gas_species_props}         & kJ/kg/K           &               \\ \hline
{\ct SPECIFIC\_HEAT\_LIQUID}        & Real        & Section~\ref{thermal_part_props}        & kJ/kg/K           &               \\ \hline
{\ct VAPORIZATION\_TEMPERATURE}     & Real        & Section~\ref{thermal_part_props}        & K                 &               \\ \hline
{\ct VISCOSITY}                     & Real        & Section~\ref{gas_species_props}         & kg/m/s            &               \\ \hline
\end{longtable}

\vspace{\baselineskip}

\newpage

\section{\texorpdfstring{{\tt SURF}}{SURF} (Surface Properties)}

\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Surface Properties]{For more information see Section~\ref{info:SURF}.}
\label{tbl:SURF} \\
\hline
\multicolumn{5}{|c|}{{\ct SURF} (Surface Properties)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct SURF} (Surface Properties)} \\
\hline \hline
\endhead
{\ct ADIABATIC}                       & Logical         & Section~\ref{info:adiabatic}              &                     & {\ct .FALSE.}           \\ \hline
{\ct BACKING}                         & Character       & Section~\ref{info:BACKING}                &                     & {\ct 'VOID'}            \\ \hline
{\ct BURN\_AWAY}                      & Logical         & Section~\ref{info:BURN_AWAY}              &                     & {\ct .FALSE.}           \\ \hline
{\ct CELL\_SIZE\_FACTOR}              & Real            & Section~\ref{info:solid_phase_stability}  &                     & 1.0                     \\ \hline
{\ct COLOR    }                       & Character       & Section~\ref{info:colors}                 &                     &                         \\ \hline
{\ct CONVECTIVE\_HEAT\_FLUX}          & Real            & Section~\ref{info:convection}             & kW/m$^2$            & 0.                      \\ \hline
{\ct DEFAULT}                         & Logical         & Section~\ref{info:SURF}                   &                     & {\ct .FALSE.}           \\ \hline
{\ct DT\_INSERT}                      & Real            & Section~\ref{info:particle_flux}          & s                   & 0.01                    \\ \hline
{\ct DUCT\_PATH}                      & Int.~Pair       & Section~\ref{info:Fan_Curves}             &                     & 0,0                     \\ \hline
{\ct EMISSIVITY}                      & Real            & Section~\ref{info:convection}             &                     & 0.9                     \\ \hline
{\ct EMISSIVITY\_BACK}                & Real            & Section~\ref{info:BACKING}                &                     &                         \\ \hline
{\ct EVAC\_DEFAULT}                   & Logical         & Reference~\cite{FDS_Evac_Users_Guide}     &                     & {\ct .FALSE.}           \\ \hline
{\ct EXTERNAL\_FLUX}                  & Real            & Section~\ref{solid_phase_verification}    & kW/m$^2$            & 0.                      \\ \hline
{\ct E\_COEFFICIENT}                  & Real            & Section~\ref{info:suppression}            & m$^2$/kg/s          & 0.                      \\ \hline
{\ct FREE\_SLIP}                      & Logical         & Section~\ref{info:WALL_MODEL}             &                     & {\ct .FALSE.}           \\ \hline
{\ct GEOMETRY}                        & Character       & Section~\ref{info:GEOMETRY}               &                     & {\ct 'CARTESIAN'}       \\ \hline
{\ct HEAT\_OF\_VAPORIZATION }         & Real            & Section~\ref{info:specified_burning}      & kJ/kg               & 0.                      \\ \hline
{\ct HRRPUA }                         & Real            & Section~\ref{info:gas_burner}             & kW/m$^2$            & 0.                      \\ \hline
{\ct H\_FIXED}                        & Real            & Section~\ref{info:convection}             & W/m$^2$/K           &                         \\ \hline
{\ct ID     }                         & Character       & Section~\ref{info:SURF}                   &                     &                         \\ \hline
{\ct IGNITION\_TEMPERATURE}           & Real            & Section~\ref{info:specified_burning}      & $^\circ$C           & 5000.                   \\ \hline
{\ct LAYER\_DIVIDE}                   & Real            & Section~\ref{info:EXPOSED}                &                     & {\ct N\_LAYERS}/2       \\ \hline
{\ct LEAK\_PATH}                      & Int.~Pair       & Section~\ref{info:Leaks}                  &                     &                         \\ \hline
{\ct LENGTH}                          & Real            & Section~\ref{info:PART_SURF}              & m                   &                         \\ \hline
{\ct MASS\_FLUX(:)}                   & Real Array      & Section~\ref{info:MASS_FLUX}              & kg/m$^2$ s          & 0.                      \\ \hline
{\ct MASS\_FLUX\_TOTAL}               & Real            & Section~\ref{info:MASS_FLUX_TOTAL}        & kg/m$^2$ s          &                         \\ \hline
{\ct MASS\_FRACTION(:)}               & Real Array      & Section~\ref{info:MASS_FLUX}              &                     &                         \\ \hline
{\ct MATL\_ID(NL,NC)}                 & Char.~Array     & Section~\ref{info:solid_pyrolysis}        &                     &                         \\ \hline
{\ct MATL\_MASS\_FRACTION(NL,NC)}     & Real Array      & Section~\ref{info:solid_pyrolysis}        &                     &                         \\ \hline
{\ct MAX\_PRESSURE }                  & Real            & Section~\ref{info:Fan_Curves}             & Pa                  & 1.E12                   \\ \hline
{\ct MLRPUA }                         & Real            & Section~\ref{info:gas_burner}             & kg/m$^2$s           & 0.                      \\ \hline
{\ct NET\_HEAT\_FLUX}                 & Real            & Section~\ref{info:convection}             & kW/m$^2$            & 0.                      \\ \hline
{\ct NO\_SLIP}                        & Logical         & Section~\ref{info:WALL_MODEL}             &                     & {\ct .FALSE.}           \\ \hline
{\ct NPPC}                            & Integer         & Section~\ref{info:particle_flux}          &                     & 1                       \\ \hline
{\ct PARTICLE\_MASS\_FLUX}            & Real            & Section~\ref{info:particle_flux}          & kg/m$^2$ s          & 0.                      \\ \hline
{\ct PART\_ID}                        & Character       & Section~\ref{info:particle_flux}          &                     &                         \\ \hline
{\ct PLE}                             & Real            & Section~\ref{info:stratification}         &                     & 0.3                     \\ \hline
{\ct PROFILE}                         & Character       & Section~\ref{info:stratification}         &                     &                         \\ \hline
{\ct RADIUS}                          & Real            & Section~\ref{info:PART_SURF}              & m                   &                         \\ \hline
{\ct RAMP\_EF}                        & Character       & Section~\ref{info:RAMP_Time}              &                     &                         \\ \hline
{\ct RAMP\_MF(:)}                     & Character       & Section~\ref{info:RAMP_Time}              &                     &                         \\ \hline
{\ct RAMP\_PART}                      & Character       & Section~\ref{info:RAMP_Time}              &                     &                         \\ \hline
{\ct RAMP\_Q}                         & Character       & Section~\ref{info:RAMP_Time}              &                     &                         \\ \hline
{\ct RAMP\_T}                         & Character       & Section~\ref{info:RAMP_Time}              &                     &                         \\ \hline
{\ct RAMP\_V}                         & Character       & Section~\ref{info:RAMP_Time}              &                     &                         \\ \hline
{\ct RGB(3)}                          & Int.~Triplet    & Section~\ref{info:colors}                 &                     & \small 255,204,102      \\ \hline
{\ct REGRID\_FACTOR}                  & Real            & Section~\ref{info:solid_phase_stability}  &                     & 0.9                     \\ \hline
{\ct ROUGHNESS}                       & Real            & Section~\ref{info:WALL_MODEL}             & m                   & 0.                      \\ \hline
{\ct MINIMUM\_LAYER\_THICKNESS}       & Real            & Section~\ref{info:solid_phase_stability}  & m                   & 1.E-6                   \\ \hline
{\ct SPEC\_ID}                        & Character       & Section~\ref{info:MASS_FLUX}              &                     &                         \\ \hline
{\ct SPREAD\_RATE}                    & Real            & Section~\ref{info:spread}                 & m/s                 & 0.                      \\ \hline
{\ct STRETCH\_FACTOR(:) }             & Real            & Section~\ref{info:solid_phase_stability}  &                     & 2.                      \\ \hline
{\ct SURFACE\_DENSITY}                & Real            & Section~\ref{info:BURN_AWAY}              & kg/m$^2$            & 0.                      \\ \hline
{\ct TAU\_EF}                         & Real            & Section~\ref{info:RAMP_Time}              & s                   & 1.                      \\ \hline
{\ct TAU\_MF(:)}                      & Real            & Section~\ref{info:RAMP_Time}              & s                   & 1.                      \\ \hline
{\ct TAU\_PART}                       & Real            & Section~\ref{info:RAMP_Time}              & s                   & 1.                      \\ \hline
{\ct TAU\_Q}                          & Real            & Section~\ref{info:RAMP_Time}              & s                   & 1.                      \\ \hline
{\ct TAU\_T}                          & Real            & Section~\ref{info:RAMP_Time}              & s                   & 1.                      \\ \hline
{\ct TAU\_V}                          & Real            & Section~\ref{info:RAMP_Time}              & s                   & 1.                      \\ \hline
{\ct TEXTURE\_HEIGHT}                 & Real            & Section~\ref{info:texture_map}            & m                   & 1.                      \\ \hline
{\ct TEXTURE\_MAP}                    & Character       & Section~\ref{info:texture_map}            &                     &                         \\ \hline
{\ct TEXTURE\_WIDTH}                  & Real            & Section~\ref{info:texture_map}            & m                   & 1.                      \\ \hline
{\ct THICKNESS(NL)}                   & Real Array      & Section~\ref{info:SURF_MATL_Basics}       & m                   & 0.                      \\ \hline
{\ct TMP\_BACK}                       & Real            & Section~\ref{info:TMP_INNER}              & $^\circ$C           & 20.                     \\ \hline
{\ct TMP\_FRONT}                      & Real            & Section~\ref{info:specified_temperature}  & $^\circ$C           & 20.                     \\ \hline
{\ct TMP\_INNER(:)}                   & Real Array      & Section~\ref{info:TMP_INNER}              & $^\circ$C           & 20.                     \\ \hline
{\ct TRANSPARENCY}                    & Real            & Section~\ref{info:colors}                 &                     & 1.                      \\ \hline
{\ct VEL    }                         & Real            & Section~\ref{info:Velocity_BC}            & m/s                 & 0.                      \\ \hline
{\ct VEL\_T }                         & Real Pair       & Section~\ref{info:louvers}                & m/s                 & 0.                      \\ \hline
{\ct VOLUME\_FLUX}                    & Real            & Section~\ref{info:Velocity_BC}            & m$^3$/s             & 0.                      \\ \hline
{\ct WIDTH}                           & Real            & Section~\ref{info:PART_SURF}              & m                   &                         \\ \hline
{\ct XYZ(3)}                          & Real Triplet    & Section~\ref{info:spread}                 & m                   &                         \\ \hline
{\ct Z0 }                             & Real            & Section~\ref{info:stratification}         & m                   & 10.                     \\ \hline
\end{longtable}

% Undocumented:  SHRINK
%                VEGETATION,VEGETATION_CDRAG,VEGETATION_CHAR_FRACTION,VEGETATION_ELEMENT_DENSITY,VEGETATION_HEIGHT, &
%                VEGETATION_INITIAL_TEMP,VEGETATION_LSET_IGNITE_TIME,VEGETATION_LOAD,VEGETATION_MOISTURE, &
%                VEGETATION_NO_BURN,VEGETATION_SVRATIO,VEGETATION_LAYERS,CONVECTION_LENGTH_SCALE, &
%                FIRELINE_MLR_MAX,VEGETATION_GROUND_TEMP,VEGETATION_LINEAR_DEGRAD,VEGETATION_ARRHENIUS_DEGRAD, &
%                VEG_LSET_ROS_HEAD,VEG_LSET_ROS_FLANK,VEG_LSET_ROS_BACK,VEG_LEVEL_SET_SPREAD,VEG_LSET_WIND_EXP

\vspace{\baselineskip}


\section{\texorpdfstring{{\tt TABL}}{TABL} (Table Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Table Parameters]{For more information see Section~\ref{info:TABL}.}
\label{tbl:TABL} \\
\hline
\multicolumn{5}{|c|}{{\ct TABL} (Table Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct TABL} (Table Parameters)} \\
\hline \hline
\endhead
{\ct ID}                & Character   & Section~\ref{info:TABL}      &             &     \\ \hline
{\ct TABLE\_DATA(6)}    & Real Array  & Section~\ref{info:TABL}      &             &     \\ \hline
\end{longtable}


\vspace{\baselineskip}


\section{\texorpdfstring{{\tt TIME}}{TIME} (Time Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Time Parameters]{For more information see Section~\ref{info:TIME}.}
\label{tbl:TIME} \\
\hline
\multicolumn{5}{|c|}{{\ct TIME} (Time Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct TIME} (Time Parameters)} \\
\hline \hline
\endhead
{\ct DT}                        & Real       & Section~\ref{info:TIME_Control}           & s           &                 \\ \hline
{\ct EVAC\_DT\_FLOWFIELD}       & Real       & Reference~\cite{FDS_Evac_Users_Guide}     & s           &  0.01           \\ \hline
{\ct EVAC\_DT\_STEADY\_STATE}   & Real       & Reference~\cite{FDS_Evac_Users_Guide}     & s           &  0.05           \\ \hline
{\ct LOCK\_TIME\_STEP}          & Logical    & Section~\ref{info:TIME_Control}           &             & {\ct .FALSE.}   \\ \hline
{\ct RESTRICT\_TIME\_STEP}      & Logical    & Section~\ref{info:TIME_Control}           &             & {\ct .TRUE.}    \\ \hline
{\ct SYNCHRONIZE}               & Logical    & Section~\ref{info:TIME_Control}           &             & {\ct .TRUE.}    \\ \hline
{\ct T\_BEGIN}                  & Real       & Section~\ref{info:TIME_Basics}            & s           & 0.              \\ \hline
{\ct T\_END}                    & Real       & Section~\ref{info:TIME_Basics}            & s           & 1.              \\ \hline
{\ct TIME\_SHRINK\_FACTOR}      & Real       & Section~\ref{info:steady_state}           &             & 1.              \\ \hline
{\ct WALL\_INCREMENT}           & Integer    & Section~\ref{info:solid_phase_stability}  &             & 2               \\ \hline
\end{longtable}

\vspace{\baselineskip}

\section{\texorpdfstring{{\tt TRNX, TRNY, TRNZ}}{TRNX, TRNY, TRNZ} (MESH Transformations)}

\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[MESH Transformations]{For more information see Section~\ref{info:TRNX}.}
\label{tbl:TRNX} \\
\hline
\multicolumn{5}{|c|}{{\ct TRNX, TRNY, TRNZ} (MESH Transformations)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct TRNX, TRNY, TRNZ} (MESH Transformations)} \\
\hline \hline
\endhead
{\ct CC    }            & Real          & Section~\ref{info:TRNX}   & m            &     \\ \hline
{\ct IDERIV}            & Integer       & Section~\ref{info:TRNX}   &              &     \\ \hline
{\ct MESH\_NUMBER}      & Integer       & Section~\ref{info:TRNX}   &              &     \\ \hline
{\ct PC    }            & Real          & Section~\ref{info:TRNX}   &              &     \\ \hline
\end{longtable}

\vspace{\baselineskip}



\section{\texorpdfstring{{\tt VENT}}{VENT} (Vent Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Vent Parameters]{For more information see Section~\ref{info:VENT}.}
\label{tbl:VENT} \\
\hline
\multicolumn{5}{|c|}{{\ct VENT} (Vent Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct VENT} (Vent Parameters)} \\
\hline \hline
\endhead
{\ct COLOR    }             & Character         & Section~\ref{info:colors}                                 &               &                     \\ \hline
{\ct CTRL\_ID }             & Character         & Section~\ref{info:activate_deactivate}                    &               &                     \\ \hline
{\ct DEVC\_ID }             & Character         & Section~\ref{info:activate_deactivate}                    &               &                     \\ \hline
{\ct DYNAMIC\_PRESSURE}     & Real              & Section~\ref{info:pressure_boundary}                      & Pa            & 0.               \\ \hline
{\ct EVACUATION    }        & Logical           & Reference~\cite{FDS_Evac_Users_Guide}                     &               &  {\ct .FALSE.}   \\ \hline
{\ct ID }                   & Character         & Section~\ref{info:VENT_Basics}                            &               &                     \\ \hline
{\ct IOR}                   & Integer           & Section~\ref{info:VENT_Trouble}                           &               &                     \\ \hline
{\ct L\_EDDY}               & Real              & Section~\ref{info:synthetic_turbulence}                   & m             & 0.                    \\ \hline
{\ct L\_EDDY\_IJ(3,3)}      & Real Array        & Section~\ref{info:synthetic_turbulence}                   & m             & 0.                    \\ \hline
{\ct MB    }                & Character         & Section~\ref{info:VENT_Basics}                            &               &                     \\ \hline
{\ct MESH\_ID    }          & Character         & Reference~\cite{FDS_Evac_Users_Guide}                     &               &                     \\ \hline
{\ct N\_EDDY}               & Integer           & Section~\ref{info:synthetic_turbulence}                   &               & 0                    \\ \hline
{\ct OUTLINE}               & Logical           & Section~\ref{info:VENT_Basics}                            & {\ct .FALSE.} &                     \\ \hline
{\ct PBX, PBY, PBZ  }       & Real              & Section~\ref{info:VENT_Basics}                            &               &                     \\ \hline
{\ct PRESSURE\_RAMP}        & Character         & Section~\ref{info:pressure_boundary}                      &               &                     \\ \hline
{\ct REYNOLDS\_STRESS(3,3)} & Real Array        & Section~\ref{info:synthetic_turbulence}                   & m$^2$/s$^2$   & 0.                    \\ \hline
{\ct RGB(3)   }             & Integer Triplet   & Section~\ref{info:colors}                                 &               &                     \\ \hline
{\ct SPREAD\_RATE}          & Real              & Section~\ref{info:spread}                                 & m/s           &  0.0                \\ \hline
{\ct SURF\_ID}              & Character         & Section~\ref{info:VENT_Basics}                            &               &  {\ct 'INERT'}      \\ \hline
{\ct TEXTURE\_ORIGIN(3)}    & Real Triplet      & Section~\ref{info:texture_map}                            & m             & (0.,0.,0.)          \\ \hline
{\ct TMP\_EXTERIOR}         & Real              & Section~\ref{info:Special_VENTS}                          & $^\circ$C     &                     \\ \hline
{\ct TRANSPARENCY}          & Real              & Section~\ref{info:colors}                                 &               &   1.0               \\ \hline
{\ct UVW(3) }               & Real Triplet      & Section~\ref{info:HVAClouvers}                            & m/s           &                     \\ \hline
{\ct VEL\_RMS}              & Real              & Section~\ref{info:synthetic_turbulence}                   & m/s           & 0.                     \\ \hline
{\ct XB(6) }                & Real Sextuplet    & Section~\ref{info:VENT_Basics}                            & m             &                     \\ \hline
{\ct XYZ(3) }               & Real Triplet      & Section~\ref{info:spread}                                 & m             &                     \\ \hline
\end{longtable}


\section{\texorpdfstring{{\tt ZONE}}{ZONE} (Pressure Zone Parameters)}


\setlength\LTleft{0pt}
\setlength\LTright{0pt}
\begin{longtable}{@{\extracolsep{\fill}}|l|l|l|l|l|}
\caption[Pressure Zone Parameters]{For more information see Section~\ref{info:ZONE}.}
\label{tbl:ZONE} \\
\hline
\multicolumn{5}{|c|}{{\ct ZONE} (Pressure Zone Parameters)} \\
\hline \hline
\endfirsthead
\caption[]{Continued} \\
\hline
\multicolumn{5}{|c|}{{\ct ZONE} (Pressure Zone Parameters)} \\
\hline \hline
\endhead
{\ct ID}                    & Character         & Section~\ref{info:ZONE_Basics}     &        &               \\ \hline
{\ct LEAK\_AREA(N)}         & Real              & Section~\ref{info:Leaks}           & m$^2$  & 0             \\ \hline
{\ct XB(6)}                 & Real Sextuplet    & Section~\ref{info:ZONE_Basics}     & m      &               \\ \hline
\end{longtable}

\vspace{\baselineskip}

\newpage


\section{Modifications of Input Parameters from FDS 5 to FDS 6}

This section describes the changes in the input parameters between FDS version~5 and version~6. Table~\ref{tbl:Changes} lists in alphabetical order parameters from
FDS~5 that have changed. Note that this table does not list new parameters in FDS~6.

There has been a limited amount of backward compatibility programmed into FDS 6. In other words, several commonly used parameters and conventions from previous versions still
work, but you are encouraged to gradually modify your input files to conform to the new conventions. Gradually, obsolescent features will be removed. Some of the more notable changes
in FDS 6 are:
\begin{itemize}
\item If you want to model a fire, you {\em must} include a {\ct REAC} line with a specified {\ct FUEL}. See Chapter~\ref{info:REAC} for details.
\item The output quantity {\ct 'MIXTURE\_FRACTION'} no longer exists and there is no substitute in FDS 6.
\item The {\ct ISOTHERMAL} feature is no longer an option.
\item There is no longer a {\ct STATE\_FILE} because there is no longer a simple mixture fraction model.
\item {\ct PRESSURE\_CORRECTION} has been eliminated. See Section~\ref{info:PRES} for ways to improve the performance of the pressure solver.
\item Species mass and volume fraction outputs are no longer invoked using {\ct QUANTITY='species name'}. Use {\ct QUANTITY='MASS FRACTION'} or {\ct QUANTITY='VOLUME FRACTION'} along with
{\ct SPEC\_ID} instead.
\end{itemize}


\begin{sidewaystable}[p]
\caption[List of changes to input parameters for FDS 6]{Changes to input parameters, FDS version 5 to 6.}
\label{tbl:Changes}
\centering
\begin{tabular}{@{\extracolsep{\fill}}|c|l|c|l|l|}
\hline
Namelist  & FDS 5 Parameter & Namelist  & FDS 6 Parameter & Notes \\ \hline \hline
{\ct CLIP}    & {\ct MAXIMUM\_MASS\_FRACTION}       &              & Eliminated                                  &                                              \\ \hline
{\ct CLIP}    & {\ct MINIMUM\_MASS\_FRACTION}       &              & Eliminated                                  &                                              \\ \hline
{\ct DUMP}    & {\ct STATE\_FILE}                   &              & Eliminated                                  &                                              \\ \hline
{\ct MATL}    & {\ct NU\_FUEL}                      &  {\ct MATL}  & {\ct NU\_SPEC} +  {\ct SPEC\_ID}            & Section~\ref{info:solid_pyrolysis}       \\ \hline
{\ct MATL}    & {\ct NU\_GAS}                       &  {\ct MATL}  & {\ct NU\_SPEC} +  {\ct SPEC\_ID}            & Section~\ref{info:solid_pyrolysis}       \\ \hline
{\ct MATL}    & {\ct NU\_RESIDUE}                   &  {\ct MATL}  & {\ct NU\_MATL}                              & Section~\ref{info:solid_pyrolysis}       \\ \hline
{\ct MATL}    & {\ct NU\_WATER}                     &  {\ct MATL}  & {\ct NU\_SPEC} +  {\ct SPEC\_ID}            & Section~\ref{info:solid_pyrolysis}       \\ \hline
{\ct MATL}    & {\ct RESIDUE}                       &  {\ct MATL}  & {\ct MATL\_ID}                              & Section~\ref{info:solid_pyrolysis}       \\ \hline
{\ct MISC}    & {\ct BACKGROUND\_SPECIES}           &  {\ct SPEC}  & {\ct BACKGROUND=.TRUE.}                     & Section~\ref{info:SPEC}                  \\ \hline
{\ct MISC}    & {\ct CONDUCTIVITY}                  &  {\ct SPEC}  & {\ct CONDUCTIVITY}                          & Section~\ref{info:SPEC}                  \\ \hline
{\ct MISC}    & {\ct CO\_PRODUCTION}                &              & Eliminated                                  &                                          \\ \hline
{\ct MISC}    & {\ct CSMAG}                         &  {\ct MISC}  & {\ct C\_SMAGORINSKY}                        & Same functionality                           \\ \hline
{\ct MISC}    & {\ct HUMIDITY}                      &  {\ct SPEC}  & {\ct HUMIDITY}                              & Section~\ref{info:SPEC}                  \\ \hline
{\ct MISC}    & {\ct ISOTHERMAL}                    &              & Eliminated                                  &                                              \\ \hline
{\ct MISC}    & {\ct MW}                            &  {\ct SPEC}  & {\ct MW}                                    & Section~\ref{info:SPEC}                  \\ \hline
{\ct MISC}    & {\ct PRESSURE\_CORRECTION}          &              &  Eliminated                                 &                                              \\ \hline
{\ct MISC}    & {\ct RADIATION}                     &  {\ct RADI}  & {\ct RADIATION}                             & Same functionality                           \\ \hline
{\ct MISC}    & {\ct EVAC\_SURF\_DEFAULT}           &  {\ct SURF}  & {\ct EVAC\_DEFAULT}                         & Section~\ref{info:SURF}                  \\ \hline
{\ct MISC}    & {\ct SURF\_DEFAULT}                 &  {\ct SURF}  & {\ct DEFAULT}                               & Section~\ref{info:SURF}                  \\ \hline
{\ct MISC}    & {\ct SUPPRESSION}                   &  {\ct REAC}  & {\ct SUPPRESSION}                           & Section~\ref{info:extinction}            \\ \hline
{\ct MISC}    & {\ct VISCOSITY}                     &  {\ct SPEC}  &  {\ct VISCOSITY}                            & Section~\ref{info:SPEC}                  \\ \hline
{\ct PART}    & {\ct PARTICLES\_PER\_SECOND}        &  {\ct PROP}  & {\ct PARTICLES\_PER\_SECOND}                & Section~\ref{info:sprinkler_droplets}    \\ \hline
{\ct PART}    & {\ct HEAT\_OF\_VAPORIZARTION}       &  {\ct SPEC}  &  {\ct HEAT\_OF\_VAPORIZARTION}              & Section~\ref{thermal_part_props}         \\ \hline
{\ct PART}    & {\ct H\_V\_REFERENCE\_TEMPERATURE}  &  {\ct SPEC}  &   {\ct H\_V\_REFERENCE\_TEMPERATURE}        & Section~\ref{thermal_part_props}         \\ \hline
{\ct PART}    & {\ct MELTING\_TEMPERATURE}          &  {\ct SPEC}  & {\ct MELTING\_TEMPERATURE}                  & Section~\ref{thermal_part_props}         \\ \hline
{\ct PART}    & {\ct NUMBER\_INITIAL\_PARTICLES}    &  {\ct INIT}  & {\ct N\_PARTICLES}                          & Section~\ref{info:initial_droplets}      \\ \hline
{\ct PART}    & {\ct SPECIFIC\_HEAT}                &  {\ct SPEC}  & {\ct SPECIFIC\_HEAT\_LIQUID}                & Section~\ref{thermal_part_props}         \\ \hline
{\ct PART}    & {\ct VAPORIZATION\_TEMPERATURE}     &  {\ct SPEC}  & {\ct VAPORIZATION\_TEMPERATURE}             & Section~\ref{thermal_part_props}         \\ \hline
\end{tabular}
\end{sidewaystable}

\begin{sidewaystable}[p]
\caption[List of changes to input parameters for FDS 6]{Changes to input parameters, FDS version 5 to 6 (continued).}
\label{tbl:Changes2}
\centering
\begin{tabular}{@{\extracolsep{\fill}}|c|l|c|l|l|}
\hline
Namelist      & FDS 5 Parameter                     & Namelist     & FDS 6 Parameter & Notes \\ \hline \hline
{\ct PROP}    & {\ct DT\_INSERT}                    &              & Eliminated                                  &                               \\ \hline
{\ct REAC}    & {\ct BOF}                           &  {\ct REAC}  &  {\ct A}                                    & Same functionality                  \\ \hline
{\ct REAC}    & {\ct ID}                            &  {\ct REAC}  &  {\ct FUEL}                                 & New requirement                  \\ \hline
{\ct REAC}    & {\ct MASS\_EXTINCTION\_COEFFICIENT} &  {\ct SPEC}  &  {\ct MASS\_EXTINCTION\_COEFFICIENT}        & Same functionality                  \\ \hline
{\ct REAC}    & {\ct MAXIMUM\_VISIBILITY}           &  {\ct MISC}  &  {\ct MAXIMUM\_VISIBILITY}                  & Same functionality                  \\ \hline
{\ct REAC}    & {\ct OXIDIZER}                      &              & Eliminated                                  &                                              \\ \hline
{\ct REAC}    & {\ct VISIBILITY\_FACTOR}            &  {\ct MISC}  &  {\ct MAXIMUM\_VISIBILITY}                  & Same functionality                  \\ \hline
{\ct SURF}    & {\ct POROUS}                        &              & Eliminated                                  & Use HVAC                                     \\ \hline
{\ct TIME}    & {\ct TWFIN}                         &  {\ct TIME}  & {\ct T\_END}                                & Section~\ref{info:TIME}                  \\ \hline
{\ct VENT}    & {\ct MASS\_FRACTION}                &              & Eliminated                                  &                                              \\ \hline
\end{tabular}
\end{sidewaystable}










\part{FDS and Smokeview Development Tools}

\chapter{The FDS/Smokeview Repository}

For those interested in obtaining the FDS and Smokeview source codes, either for development work or simply to compile on a particular platform,
it is strongly suggested that you download onto your computer the entire FDS/Smokeview ``Repository.''
All project documents are maintained using the online utility \href{http://code.google.com/opensource}{{Google Code Project Hosting}}, a free service offered
by Google to support software development for open source applications.  Google Code uses the \href{http://subversion.tigris.org}{{Subversion}} (SVN) revision management system.
Under this system a centralized repository containing all project files resides on a Google Code server.  Subversion uses a single integer that
identifies the version of the entire repository rather than of a specific file (i.e. anytime a change is made to the repository all files are incremented in version number).
A record of version number when a specific file was last changed is maintained.

As an open source program, any individual can obtain a copy of the repository or retrieve specific versions
repository.  Only the FDS and Smokeview developers can commit changes to the repository.

The current location of the FDS repository is \href{http://code.google.com/p/fds-smv/source/checkout}
{{\ct http://fds-smv.googlecode.com/svn/trunk/}}. The repository contains the following files:
\begin{enumerate}
\item FDS and Smokeview source code files
\item FDS and Smokeview documentation
\item Input files for software testing (Examples), verification testing, and validation testing
\item Experimental data files used for validation testing
\item Scripts and post-processing utilities used for software testing
\item Web pages and wikis
\end{enumerate}
The wikis are particularly useful in describing the details of how you go about working with the Repository assets.





\chapter{Compiling FDS}
\label{info:compilation}

This section describes what you need to know if you want to compile the FDS source code yourself.
It is not a step by step guide, more detailed instructions can be found on Developer section of the web site at \href{http://fire.nist.gov/fds}{{\ct http://fire.nist.gov/fds}}.

If a compiled version of FDS exists for the machine on which the
calculation is to be run and no changes have been made to
the original source code, there is no need to re-compile the code.
For example, the file {\bf fds\_win\_32.exe} is the
compiled single processor program for a 32 bit Windows-based PC;
thus PC users do not need a
Fortran compiler and do not need to compile the source code.
For machines for which an executable has not been compiled, you must
compile the code. Fortran 90/95 compilers are needed for compilation.

\section{FDS Source Code}

Table~\ref{tab:sourcefiles} lists the files that make up the source code.
The files with suffix ``.f90'' contain free form Fortran 90 instructions
conforming to the ANSI and ISO standards, with a few exceptions that are discussed below.
The source files should be compiled in the order in which they are listed
in Table~\ref{tab:sourcefiles} because some routines are dependent on others.
For Unix/Linux users, {\bf Makefiles} for various platforms are available
that assist in the compilation. Compiler options differ from platform to platform.
Note the following:
\begin{itemize}
\item The source code consists entirely of Fortran 90
statements organized into about 25 files.
\item There is only one non-standard call in the Fortran code. The non-standard call is {\ct GETARG},
in {\bf func.f90}. This routine reads the name of the input file off of the command line. This call cannot
be simply commented out; a suitable alternative must be found.
The only compiler option necessary, in addition to any needed to
address the above issues, is for full optimization (usually -O or some variant). Some
compilers have a standard optimization level, plus various degrees of
``aggressive'' optimization. Be cautious in using the highest levels of optimization.
\item For the single processor version of FDS, compile with {\bf mpis.f90}
\item The parallel version of FDS uses {\bf mpip.f90} instead of
{\bf mpis.f90}, plus additional MPI libraries need to be installed. More
details on MPI can be found at the web site, along with links to the
necessary organizations who have developed free MPI libraries.
\end{itemize}

\begin{table}[ht]
\begin{center}
\caption{\bf Source Code Files}
\label{tab:sourcefiles}
\vspace{.1in}
\begin{tabular}{|l|l|}
\hline
File Name  & Description  \\ \hline \hline
cons.f90   & Global arrays and constants \\ \hline
ctrl.f90   & Definitions and routines for control functions \\ \hline
data.f90   & Data for output quantities and thermophysical properties\\ \hline
devc.f90   & Derived type definitions and constants for devices \\ \hline
divg.f90   & Compute the flow divergence \\ \hline
dump.f90   & Output data dumps into files \\ \hline
evac.f90   & Egress computations (future capability) \\ \hline
fire.f90   & Combustion routines \\ \hline
func.f90   & Global functions and subroutines \\ \hline
ieva.f90   & Support routines for evac.f90 \\ \hline
init.f90   & Initialize variables and Poisson solver \\ \hline
irad.f90   & Functions needed for radiation solver, including RadCal \\ \hline
main.f90   & Main program for both serial and parallel versions \\ \hline
mass.f90   & Mass equation(s) and thermal boundary conditions \\ \hline
mesh.f90   & Arrays and constants associated with each mesh \\ \hline
mpip.f90   & MPI "include" statement for MPI compilation \\ \hline
mpis.f90   & "Dummy" Fortran/MPI bindings for non-MPI compilation \\ \hline
part.f90   & Lagrangian particle transport and sprinkler activation \\ \hline
pois.f90   & Poisson (pressure) solver \\ \hline
prec.f90   & Specification of numerical precision \\ \hline
pres.f90   & Spatial discretization of pressure (Poisson) equation \\ \hline
radi.f90   & Radiation solver  \\ \hline
read.f90   & Read input parameters \\ \hline
smvv.f90   & Routines for computing and outputting 3D smoke and isosurfaces \\ \hline
turb.f90   & Experimental routines, mostly involving the turbulence model \\ \hline
type.f90   & Derived type definitions \\ \hline
vege.f90   & Experimental vegetation model \\ \hline
velo.f90   & Momentum equations \\ \hline
wall.f90   & Wall boundary conditions \\ \hline
\end{tabular}
\end{center}
\end{table}





\chapter{Output File Formats}

The output from the code consists of the file {\bf CHID.out}, plus various
data files that are described below.
Most of these output files are written out by the routine {\bf dump.f},
and can easily be modified to accommodate various plotting packages.

\section{Diagnostic Output}%Kevin

\label{out:file}

The file {\bf CHID.out} consists of a list of the input
parameters, and an accounting of various important quantities, including
CPU usage. Typically, diagnostic information is printed out every
100 time steps

\footnotesize
\begin{verbatim}
                            .
                            .

       Iteration   8300   May 16, 2003  08:37:53
       ----------------------------------------------
       Mesh  1, Cycle   3427
       CPU/step:     2.272 s, Total CPU:      2.15 hr
       Time step:  0.03373 s, Total time:   128.86 s
       Max CFL number: 0.86E+00 at ( 21,  9, 80)
       Max divergence: 0.24E+01 at ( 25, 30, 22)
       Min divergence: -.39E+01 at ( 26, 18, 31)
       Number of Sprinkler Droplets:          615
       Total Heat Release Rate:          7560.777 kW
       Radiation Loss to Boundaries:     6776.244 kW
       Mesh  2, Cycle   2914
       CPU/step:     1.887 s, Total CPU:      1.53 hr
       Time step:  0.03045 s, Total time:   128.87 s
       Max CFL number: 0.96E+00 at ( 21, 29, 42)
       Max divergence: 0.20E+01 at ( 22, 20, 22)
       Min divergence: -.60E+01 at (  7, 26, 48)
       Number of Sprinkler Droplets:          301

                            .
                            .
\end{verbatim}
\normalsize
The Iteration number indicates how many time steps the code has run, whereas the
Cycle number for a given mesh indicates how many time steps have been taken on that
mesh. The date and time (wall clock time) are on the line starting with the word
Iteration. The quantity {\ct CPU/step} is the amount of CPU time required to complete
a time step for that mesh; {\ct Total CPU} is the amount of CPU time elapsed since the
start of the run; {\ct Time step} is the time step size for the given mesh;
{\ct Total time} is the time of the simulation;
{\ct Max/Min divergence} is the max/min value of the
function $\nabla \cdot \bu$ and is used as a diagnostic when the flow
is incompressible ({\em i.e.} no heating); and {\ct Max CFL number} is the
maximum value of the CFL number. The {\ct Radiation Loss to Boundaries} is the
amount of energy that is being radiated to the boundaries. As compartments
heat up, the energy lost to the boundaries can grow to be an appreciable
fraction of the {\ct Total Heat Release Rate}. Finally, {\ct Number of Tracer Particles} indicates
how many passive particles are being tracked at that time.

Following the completion of a successful run, a summary of the CPU
usage per subroutine is listed. This is useful in determining where
most of the computational effort is being placed.

\section{Heat Release Rate and Related Quantities}

\label{out:hrr}
The heat release rate of the fire, plus other global energy-related quantities, are automatically written into a text file
called {\bf CHID\_hrr.csv}. The format of the file is as follows

\footnotesize
\begin{verbatim}
s,kW,kW,kW,kW,...,kg/s,Pa,Pa, ...
Time,HRR,Q_RADI,Q_CONV,Q_COND,...,BURN_RATE,ZONE_01,ZONE_02, ...
 0.0000000E+000, 0.0000000E+000, ...
 3.5355338E-001, 0.0000000E+000, ...
 .
 .
 .
 \end{verbatim}
\normalsize

\noindent
Details of the integrated energy quantities can be found in Section~\ref{info:HRR}.
{\ct BURN\_RATE} is the total mass loss rate of fuel, and {\ct ZONE\_01}, {\em etc.}, are the background pressures of the various
pressure {\ct ZONE}s. Note that the reported {\ct BURN\_RATE} is not adjusted to account for the possibility that each individual
material might have a different heat of combustion. It is the actual burning rate of the fuel as predicted by FDS or specified by the user.
The background pressure is discussed in Section~\ref{info:ZONE}.





\section{Device Output Data}
\label{out:DEVC}

Data associated with particular devices (link temperatures, smoke obscuration, thermocouples, etc.)
specified in the input file under the namelist
group {\ct DEVC} is output in comma delimited format in a file called
{\bf CHID\_devc.csv}. The format of the file is as follows

\footnotesize
\begin{verbatim}
s        , UNITS(1) , UNITS(2) , ... , UNITS(N_DEVC)
FDS Time , ID(1)    , ID(2)    , ... , ID(N_DEVC)
T(1)     , VAL(1,1) , VAL(2,1) , ... , VAL(N_DEVC,1)
T(2)     , VAL(1,2) , VAL(2,2) , ... , VAL(N_DEVC,2)
                      .
                      .
                      .
\end{verbatim}
\normalsize
where {\ct N\_DEVC} is the number of devices, {\ct ID(I)} is the user-defined
ID of the {\ct I}th device,
{\ct UNITS(I)} the units, {\ct T(J)} the time of the {\ct J}th dump, and
{\ct VAL(I,J)} the value at the {\ct I}th device at the {\ct J}th time.
The files can be imported into Microsoft Excel or almost any other
spread sheet program. If the number of columns exceeds 256, the file will
automatically be split into smaller files.

\section{Control Output Data}
\label{out:CTRL}

Data associated with particular control functions specified in the input file under the
namelist group {\ct CTRL} is output in comma delimited format in a file called
{\bf CHID\_ctrl.csv}. The format of the file is as follows

\footnotesize
\begin{verbatim}
s,status,status,status,status
FDS Time,ID(1),ID(2),...,ID(N_CTRL)
 0.00000E+000,-001, 001, ...
 1.11803E-001,-001,-001, ...
            .
            .
            .

\end{verbatim}
\normalsize

\noindent
where {\ct N\_CTRL} is the number of controllers, {\ct ID(I)} is the user-defined ID of the {\ct I}th control function, and plus or minus 1's represent the
state {\ct -1 = .FALSE. and +1 = .TRUE.} of the {\ct I}th control function at the particular time.
The files can be imported into Microsoft Excel or almost any other
spread sheet program. If the number of columns exceeds 256, the file will automatically be split into smaller files.


\section{Gas Mass Data}

The total mass of the various gas species at any instant in time
is reported in the comma delimited
file {\bf CHID\_mass.csv}. The file consists of several columns,
the first column containing the time in seconds, the second contains the
total mass of all the gas species in the computational domain in units of kg,
the next lines contain the total mass of the individual species.

You must specifically ask that this file be generated, as it can potentially cost a fair amount of CPU time to generate. Set
{\ct MASS\_FILE=.TRUE.} on the {\ct DUMP} line to create this output file.


\section{Slice Files}
\label{out:SLCF}
The slice files defined under the namelist group {\ct SLCF} are
named {\bf CHID\_$n$.sf} ($n$=01,02...),
and are written out unformatted, unless otherwise directed.
These files are written out from {\bf dump.f} with the following lines:

\footnotesize
\begin{verbatim}
      WRITE(LUSF) QUANTITY
      WRITE(LUSF) SHORT_NAME
      WRITE(LUSF) UNITS
      WRITE(LUSF) I1,I2,J1,J2,K1,K2
      WRITE(LUSF) TIME
      WRITE(LUSF) (((QQ(I,J,K),I=I1,I2),J=J1,J2),K=K1,K2)
              .
              .
              .
      WRITE(LUSF) TIME
      WRITE(LUSF) (((QQ(I,J,K),I=I1,I2),J=J1,J2),K=K1,K2)
\end{verbatim}
\normalsize
{\ct QUANTITY}, {\ct SHORT\_NAME} and {\ct UNITS} are
character strings of length 30.
The sextuplet ({\ct I1,I2,J1,J2,K1,K2}) denotes the bounding mesh cell
nodes. The sextuplet indices correspond to mesh cell
nodes, or corners, thus the entire mesh would be represented by the
sextuplet ({\ct 0,IBAR,0,JBAR,0,KBAR}).

There is a short Fortran 90 program provided, called
{\bf fds2ascii.f},
that can convert slice files into text files that can be read
into a variety of graphics packages. The program combines multiple
slice files corresponding to the same ``slice'' of the computational
domain, time-averages the data, and writes the values into one file,
consisting of a line of numbers for each node. Each line contains the
physical coordinates of the node, and the time-averaged quantities
corresponding to that node. In particular, the graphics package
Tecplot
reads this file and produces contour, streamline and/or vector plots.
See Section~\ref{info:fds2ascii} for more details about the program
{\bf fds2ascii}.

\section{Plot3D Data}
\label{out:PL3D}

Quantities over the entire mesh can be output in a format used by the graphics package {\bf Plot3D}.
The Plot3D data sets are single precision (32 bit reals), whole and
unformatted. Note that there is blanking, that is,
blocked out data points are not plotted.
If the statement {\ct WRITE\_XYZ=.TRUE.} is included on the {\ct DUMP}
line, then the mesh data is written out to a file called {\bf CHID.xyz}

\footnotesize
\begin{verbatim}
      WRITE(LU13) IBAR+1,JBAR+1,KBAR+1
      WRITE(LU13) (((X(I),I=0,IBAR),J=0,JBAR),K=0,KBAR),
     .            (((Y(J),I=0,IBAR),J=0,JBAR),K=0,KBAR),
     .            (((Z(K),I=0,IBAR),J=0,JBAR),K=0,KBAR),
     .     (((IBLK(I,J,K),I=0,IBAR),J=0,JBAR),K=0,KBAR)
\end{verbatim}
\normalsize

\noindent
where {\ct X, Y} and {\ct Z} are the coordinates of the cell corners,
and {\ct IBLK} is an indicator of whether or not the cell is blocked.
If the point ({\ct X,Y,Z}) is completely embedded within a solid region,
then {\ct IBLK} is 0. Otherwise, {\ct IBLK} is 1. Normally, the mesh
file is not dumped.

The flow variables are written to a file called {\bf CHID\_****\_**.q},
where the stars indicate a time at which the data is output.
The file is written with the lines

\footnotesize
\begin{verbatim}
      WRITE(LU14) IBAR+1,JBAR+1,KBAR+1
      WRITE(LU14) ZERO,ZERO,ZERO,ZERO
      WRITE(LU14) ((((QQ(I,J,K,N),I=0,IBAR),J=0,JBAR),K=0,KBAR),N=1,5)
\end{verbatim}
\normalsize
The five channels {\ct N=1,5} are by default the temperature
($^\circ$C), the $u$, $v$ and
$w$ components of the velocity (m/s), and the heat release rate
per unit volume (kW/m$^3$). Alternate variables can be specified with
the input parameter {\ct PLOT3D\_QUANTITY(1:5)} on the {\ct DUMP} line.
Note that the data is interpolated at
cell corners, thus the dimensions of the Plot3D data sets are
one larger than the dimensions of the computational mesh.

Smokeview can display the Plot3D data. In
addition, the Plot3D data sets can be read into some other graphics
programs that accept the data format.
This particular format is very convenient, and recognized by
a number of graphics packages, including AVS, IRIS Explorer
and Tecplot
\footnote{With the exception of Smokeview,
the graphics packages referred to in this document are
not included with the source code, but are commercially available.}.


\section{Boundary Files}
\label{out:BNDF}
The boundary files defined under the namelist group {\ct BNDF} are
named {\bf CHID\_$n$.bf} ($n$=0001,0002...),
and are written out unformatted.
These files are written out from {\bf dump.f} with the following lines:

\footnotesize
\begin{verbatim}
      WRITE(LUBF) QUANTITY
      WRITE(LUBF) SHORT_NAME
      WRITE(LUBF) UNITS
      WRITE(LUBF) NPATCH
      WRITE(LUBF) I1,I2,J1,J2,K1,K2,IOR,NB,NM
      WRITE(LUBF) I1,I2,J1,J2,K1,K2,IOR,NB,NM
              .
              .
              .
      WRITE(LUBF) TIME
      WRITE(LUBF) (((QQ(I,J,K),I=11,I2),J=J1,J2),K=K1,K2)
      WRITE(LUBF) (((QQ(I,J,K),I=11,I2),J=J1,J2),K=K1,K2)
              .
              .
              .
      WRITE(LUBF) TIME
      WRITE(LUBF) (((QQ(I,J,K),I=11,I2),J=J1,J2),K=K1,K2)
      WRITE(LUBF) (((QQ(I,J,K),I=11,I2),J=J1,J2),K=K1,K2)
              .
              .
              .
\end{verbatim}
\normalsize
{\ct QUANTITY}, {\ct SHORT\_NAME} and {\ct UNITS} are character
strings of lengths 60, 30 and 30, respectively.
{\ct NPATCH} is the number of planes (or ``patches'') that make up the
solid boundaries plus the external walls.
The sextuplet ({\ct I1,I2,J1,J2,K1,K2}) defines the cell nodes of each
patch. {\ct IOR} is an integer indicating the orientation of the
patch ($\pm 1,\pm 2,\pm 3$). You do not prescribe these.
{\ct NB} is the number of the boundary (zero for external walls) and
{\ct NM} is the number of the mesh.  Note that the data is planar,
thus one pair of cell nodes is the same. Presently, Smokeview is the
only program available to view the boundary files.

\section{Particle Data}
\label{out:PART}

Coordinates and specified quantities related to tracer particles, sprinkler droplets, and other Lagrangian particles are written
to a FORTRAN unformatted (binary) file called {\bf CHID.prt5}.
Note that the format of this file has changed from previous versions (4 and below).
The file consists of some header material, followed by particle data output every
{\ct DT\_PART} seconds. The time increment {\ct DT\_PART} is specified on the
{\ct DUMP} line. It is {\ct T\_END/NFRAMES} by default.
The header materials is written by the following FORTRAN code in the file called {\bf dump.f90}.

\footnotesize
\begin{verbatim}
WRITE(LUPF) ONE_INTEGER          ! Integer 1 to check Endian-ness
WRITE(LUPF) NINT(VERSION*100.)   ! FDS version number
WRITE(LUPF) N_PART               ! Number of PARTicle classes
DO N=1,N_PART
   PC => PARTICLE_CLASS(N)
   WRITE(LUPF) PC%N_QUANTITIES,ZERO_INTEGER  ! ZERO_INTEGER is a place holder
   DO NN=1,PC%N_QUANTITIES
      WRITE(LUPF) CDATA(PC%QUANTITIES_INDEX(NN))  ! 30 character output quantity
      WRITE(LUPF) UDATA(PC%QUANTITIES_INDEX(NN))  ! 30 character output units
   ENDDO
ENDDO
\end{verbatim}
\normalsize
Note that the initial printout of the number 1 is used by Smokeview to determine the
Endian-ness of the file. The Endian-ness has to do with the particular way real numbers are written into a binary file.
The version number is used to distinguish new versus old file formats.
The parameter {\ct N\_PART} is not the number of particles, but rather the number of
particle classes corresponding to the {\ct PART} namelist groups in the input file.
Every {\ct DT\_PART} seconds the coordinates of the particles and droplets are output as 4 byte reals:

\footnotesize
\begin{verbatim}
WRITE(LUPF) REAL(T,FB)  ! Write out the time T as a 4 byte real
DO N=1,N_PART
   WRITE(LUPF) NPLIM    ! Number of particles in the PART class
   WRITE(LUPF) (XP(I),I=1,NPLIM),(YP(I),I=1,NPLIM),(ZP(I),I=1,NPLIM)
   WRITE(LUPF) (TA(I),I=1,NPLIM)  ! Integer "tag" for each particle
   IF (PC%N_QUANTITIES > 0) WRITE(LUPF) ((QP(I,NN),I=1,NPLIM),NN=1,PC%N_QUANTITIES)
ENDDO
\end{verbatim}
\normalsize
The particle ``tag'' is used by Smokeview to keep track of individual particles and droplets for the purpose of drawing
streamlines. It is also useful when parsing the file. The quantity data, {\ct QP(I,NN)}, is used by Smokeview to color
the particles and droplets. Note that it is now possible with the new format to color the particles and droplets with
several different quantities.

\section{Profile Files}
\label{out:PROF}

The profile files defined under the namelist group {\ct PROF} are
named {\bf CHID\_prof\_$nn$.csv} ($nn$=01,02...),
and are written out formatted. These files are written out from {\bf
dump.f} with the following line:

\footnotesize
\begin{verbatim}
WRITE(LU_PROF) T,NWP+1,(X_S(I),I=0,NWP),(Q(I),I=0,NWP)
\end{verbatim}
\normalsize
After the time {\ct T}, the number of node points is given and then
the node coordinates. These are written out at every time step because
the wall thickness and the local solid phase mesh may change over time
due to the solid phase reactions. Array {\ct Q} contains the values of
the output quantity, which may be wall temperature, density or
component density.

\section{3-D Smoke Files}
\label{out:SMOKE3D}

3-D smoke files contain alpha values used by Smokeview to draw
semi-transparent planes representing smoke and fire.
FDS outputs 3-D smoke data at fixed time
intervals.  A {\em pseudo-code} representation of the 3-D
smoke file is given by:

\footnotesize
\begin{verbatim}

! header

  WRITE(LU_SMOKE3D)ONE,VERSION,0,NX-1,0,NY-1,0,NZ-1

! time depended data

  WRITE(LU_SMOKE3D_SIZE,*)TIME,NCHARS_IN,NCHARS_OUT
  WRITE(LU_SMOKE3D)TIME
  WRITE(LU_SMOKE3D)NCHARS_IN,NCHARS_OUT
  IF (NCHARS_OUT > 0)WRITE(LU_SMOKE3D)(BUFFER_OUT(I),I=1,NCHARS_OUT)

\end{verbatim}
\normalsize

\noindent
The first {\em ONE}\ is an endian flag.  Smokeview uses this number to
determine whether the computer creating the 3-D smoke file and the
computer viewing the 3-D smoke file use the same or different byte
swap (endian) conventions for storing floating point numbers.  The
opacity data is compressed using run-length encoding (RLE).


\section{Geometry, Isosurface Files}
\label{out:GEOMETRY}

Both immersed geometric surfaces (generalized obstructions) and FDS generated isosurfaces are stored using a file format described in this section.
Iso-surface files are used to store one or more surfaces where the specified {\ct QUANTITY} is a specified value.
FDS outputs iso-surface data at fixed
time intervals.  These surfaces are
defined in terms of vertices and triangles.  A vertex consists of an $(x,y,z)$ coordinate.
A triangle
consists of 3 connected vertices.  The file format allows one to specify objects that change with time.
Static geometry is defined once and displayed by Smokeview unchanged at each time step.
Dynamic geometry is defined at each time step either in terms of nodes and faces
or in terms of a translation and two rotations (azimuthal and elevation) of dynamic geometry defined
in the first time step.
These files are written out from {\bf dump.f90} using lines equivalent to the following:

\footnotesize
\begin{verbatim}
! header

  WRITE(LU_GEOM) ONE
  WRITE(LU_GEOM) VERSION
  WRITE(LU_GEOM) N_FLOATS
  IF (N_FLOATS>0) WRITE(LU_GEOM) (FLOAT_HEADER(I),I=1,N_FLOATS)
  WRITE(LU_GEOM) N_INTS
  IF (N_INTS>0) WRITE(LU_GEOM) (INT_HEADER(I),I=1,N_INTS)

! static geometry - geometry specified once and appearing at all time steps

  WRITE(LU_GEOM) N_VERT_S, N_FACE_S
  IF (N_VERT_S>0)  WRITE(LU_GEOM) (Xvert_S(I),Yvert_S(I),Zvert_S(I),I=1,N_VERT_S)
  IF (N_FACE_S>0)  WRITE(LU_GEOM) (FACE1_S(I),FACE2_S(I),FACE3_S(I),I=1,N_FACE_S)
  IF (N_FACE_S>0)  WRITE(LU_GEOM) (SURF_S(I),I=1,N_FACE_S)

! dynamic geometry - geometry specified and appearing for each time step

  WRITE(LU_GEOM) STIME, GEOM_TYPE
  IF (GEOM_TYPE.EQ.0) THEN
    WRITE(LU_GEOM) N_VERT_D, N_FACE_D
    IF (N_VERT_D>0) WRITE(LU_GEOM) (Xvert_D(I),Yvert_D(I),Zvert_D(I),I=1,N_VERT_D)
    IF (N_FACE_D>0) WRITE(LU_GEOM) (FACE1_D(I),FACE2_D(I),FACE3_D(I),I=1,N_FACE_D)
    IF (N_FACE_D>0) WRITE(LU_GEOM) (SURF_D(I),I=1,N_FACE_D)
  ELSE IF (GEOM_TYPE.EQ.1) THEN
    ! rotation and translation parameters used to transform geometry from first dynamic time step
    WRITE(LU_GEOM) Xtran, Ytran, Ztran, Xrot0, Yrot0, Zrot0, rot_az, rot_elev
  ENDIF
              .
              .
              .
\end{verbatim}
\normalsize
\begin{itemize}
\item {\ct ONE}\ has the value 1.
Smokeview uses this number to
determine whether the computer creating the geometry file and the
computer viewing the geometry file use the same or different byte
swap (endian) conventions for storing floating point numbers.
\item {\ct VERSION}\ currently has value 0 and indicates the version number of this file format.
\item {\ct N\_FLOATS, N\_INTS} The number of floating point and integer data items stored at
the beginning of the file.
\item {\ct FLOAT\_HEADER, INT\_HEADER} Floating point and integer data stored at
the beginning of the file.
\item {\ct STIME} is the FDS simulation time.
\item {\ct N\_VERT\_S, N\_FACE\_S, N\_VERT\_D, N\_FACE\_D}\ are the number of static and dynamic vertices and faces.
\item {\ct Xvert\_S, Yvert\_S, Zvert\_S, Xvert\_D, Yvert\_D, Zvert\_D}\ are the static and dynamic vertex coordinates.
\item {\ct FACE1\_S, FACE2\_S, FACE3\_S,FACE1\_D, FACE2\_D, FACE3\_D}\ are the static and dynamic vertex
indices for each face (triangle).  The indices are numbered relative to how vertices were written out earlier.
\item {\ct SURF\_S, SURF\_D}\ are the static and dynamic SURF indices for each face (triangle).
\item {\ct GEOM\_TYPE}\ is flag indicating how dynamic geometry is represented.
If {\ct GEOM\_TYPE}\ is 0 then time dependent geometry is written out in
terms of nodes and faces using the same format as the static geometry.
If {\ct GEOM\_TYPE}\ is 1 then time dependent geometry is written out in terms of a translation
and two rotations.  These transformations are applied to the dynamic geometry defined
at the first time step.
\item {\ct Xtran, Ytran, Ztran}\ is the translation applied to the initial dynamic geometry (If {\ct GEOM\_TYPE}\ is 1)
\item {\ct Xrot0, Yrot0, Zrot0}\ is the origin about which rotations occur.
\item {\ct rot\_az, rot\_elev}\ are the azimuthal and elevation rotation angles (in degrees) applied to the initial dynamic geometry.
\end{itemize}

\section{Geometry Data Files}
\label{out:GEOMETRY_DATA}

The geometry data file contains a description of data values computed by FDS on an immersed
geometrical objects.  This file is analogous to the boundary file.
The data written out to a geometry data file MUST correspond to the geometry written out
in the corresponding geometry file.
Geometry data files are written out from {\bf dump.f} with the lines equivalent to the following:

\scriptsize
\begin{verbatim}
  WRITE(LU_GEOM_DATA) ONE
  WRITE(LU_GEOM_DATA) VERSION
  WRITE(LU_GEOM_DATA) STIME
  WRITE(LU_GEOM_DATA) N_VERT_S_VALS,N_VERT_D_VALS,N_FACE_S_VALS,N_FACE_D_VALS
  IF (N_VERT_S_VALS>0)  WRITE(LU_GEOM_DATA) (ValVertStatic(I), I=1,N_VERT_S_VALS)
  IF (N_VERT_D_VALS>0)  WRITE(LU_GEOM_DATA) (ValVertDynamic(I),I=1,N_VERT_D_VALS)
  IF (N_FACE_S_VALS>0)  WRITE(LU_GEOM_DATA) (ValFaceStatic(I), I=1,N_VERT_S_VALS)
  IF (N_FACE_D_VALS>0)  WRITE(LU_GEOM_DATA) (ValFaceDynamic(I),I=1,N_FACE_D_VALS)
              .
              .
              .
\end{verbatim}
The data values written out in this file correspond to the geometry written out in the geometry file.
\normalsize
\begin{itemize}
\item {\ct ONE}\ has the value 1.
Smokeview uses this number to
determine whether the computer creating the geometry file and the
computer viewing the geometry file use the same or different byte
swap (endian) conventions for storing floating point numbers.
\item {\ct VERSION}\ currently has value 0 and indicates the version number of this file format.
\item {\ct STIME} is the FDS simulation time.
\item {\ct N\_VERT\_S\_VALS, N\_FACE\_S\_VALS}\ is the number of data values written out for static vertices and faces.  One can write out data values located at nodes, located at the center of faces or both.
\item {\ct N\_VERT\_D\_VALS, N\_FACE\_D\_VALS}\ is the number of dynamic values written out for dynamic vertices and faces.  One can write out
data values located at nodes, located at the center of faces, both or neither (if there is no dynamic geometry).
\item {\ct ValVertStatic, ValFaceStatic}\ static vertex and face data.
\item {\ct ValVertDynamic, ValFaceDynamic}\ dynamic
 vertex and face data.
\end{itemize}



\backmatter
\nopart %To Fix TOC in PDF output.

\bibliography{../Bibliography/FDS_refs,../Bibliography/FDS_general,../Bibliography/FDS_mathcomp}

\end{document}
